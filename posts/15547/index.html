<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>R 学习笔记 | AOHUI BLOG.</title><meta name="keywords" content="学习笔记,R"><meta name="author" content="Aohuiliu"><meta name="copyright" content="Aohuiliu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="R 入门的基础知识"><meta property="og:type" content="article"><meta property="og:title" content="R 学习笔记"><meta property="og:url" content="https://aohuiliu.fun/posts/15547/index.html"><meta property="og:site_name" content="AOHUI BLOG."><meta property="og:description" content="R 入门的基础知识"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://s2.loli.net/2022/06/14/5wHfFZUlj6BTo2G.png"><meta property="article:published_time" content="2022-07-09T06:50:07.000Z"><meta property="article:modified_time" content="2022-07-09T06:50:07.000Z"><meta property="article:author" content="Aohuiliu"><meta property="article:tag" content="学习笔记"><meta property="article:tag" content="R"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://s2.loli.net/2022/06/14/5wHfFZUlj6BTo2G.png"><link rel="shortcut icon" href="/images/favicon.png"><link rel="canonical" href="https://aohuiliu.fun/posts/15547/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//hm.baidu.com"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/@fancyapps/ui/dist/fancybox.css" media="print" onload='this.media="all"'><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?463c88479f0f5d7145606417732cfe21";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,languages:{hits_empty:"找不到内容：${query}"}},translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:430},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!0,post:!1},runtime:"",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://fastly.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js",css:"https://fastly.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css"}},isPhotoFigcaption:!0,islazyload:!0,isAnchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"R 学习笔记",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"7 月 09 日 14:50:07"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const a=864e5*o,c={value:t,expiry:(new Date).getTime()+a};localStorage.setItem(e,JSON.stringify(c))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const a=document.createElement("script");a.src=e,a.async=!0,a.onerror=o,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#1c1c1e")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme"),o=window.matchMedia("(prefers-color-scheme: dark)").matches,a=window.matchMedia("(prefers-color-scheme: light)").matches,c=window.matchMedia("(prefers-color-scheme: no-preference)").matches,n=!o&&!a&&!c;if(void 0===t){if(a)activateLightMode();else if(o)activateDarkMode();else if(c||n){const e=(new Date).getHours();e<=6||e>=18?activateDarkMode():activateLightMode()}window.matchMedia("(prefers-color-scheme: dark)").addListener((function(e){void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode():activateLightMode())}))}else"light"===t?activateLightMode():activateDarkMode();const i=saveToLocal.get("aside-status");void 0!==i&&("hide"===i?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/jetbrains-mono@1.0.6/css/jetbrains-mono.min.css"><link rel="stylesheet" href="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/Swiper/8.0.6/swiper-bundle.min.css" media="print" onload='this.media="all"'><meta name="generator" content="Hexo 6.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/images/avatar.jpeg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">28</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><span>首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><span>文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder"></i> <span>分类</span></a></li><svg class="PopoverPointer" height="12.998751" viewBox="0 0 46.978001 12.998751" width="46.978001" xmlns="http://www.w3.org/2000/svg"><path d="m45.748 12.9978c.41-5e-4.82-10e-4 1.23-10e-4l-3.712-10e-5C42.791 12.995 42.316 12.9919 41.841 12.9868 40.202 12.9688 38.368 12.9433 36.773 12.3418 35.05 11.6918 33.909 10.5552 32.761 9.2177 32.054 8.3939 30.762 6.7705 29.909 5.6987 29.766 5.5188 29.635 5.3545 29.522 5.2121 29.446 5.1172 29.362 5.0113 29.271 4.8973 28.587 4.0355 27.528 2.7027 26.917 2.0166 26.047 1.039 24.972 0 23.477 0 21.983 0 20.908 1.039 20.039 2.0156 19.44 2.6881 18.41 3.9836 17.724 4.8461c-.106.1333-.204.2563-.29.365-.1.1255-.213.2679-.337.423-.851 1.0702-2.18 2.7424-2.902 3.5826-1.15 1.3375-2.289 2.4741-4.011 3.1241-1.596.6-3.431.627-5.069.645-.489.0053-.979.0084-1.469.0101L0 12.9958c.403 0 .805 5e-4 1.208.001.813 9e-4 1.625.0019 2.438-9e-4l39.62 8e-4c.827.003 1.655.0021 2.482.0011z"></path></svg></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><span>链接</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/friends/"><i class="fa-fw fas fa-star"></i> <span>动态</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-face-laugh"></i> <span>友链</span></a></li><li><a class="site-page child" href="/bb/"><i class="fa-fw fas fa-bullhorn"></i> <span>哔哔</span></a></li><svg class="PopoverPointer" height="12.998751" viewBox="0 0 46.978001 12.998751" width="46.978001" xmlns="http://www.w3.org/2000/svg"><path d="m45.748 12.9978c.41-5e-4.82-10e-4 1.23-10e-4l-3.712-10e-5C42.791 12.995 42.316 12.9919 41.841 12.9868 40.202 12.9688 38.368 12.9433 36.773 12.3418 35.05 11.6918 33.909 10.5552 32.761 9.2177 32.054 8.3939 30.762 6.7705 29.909 5.6987 29.766 5.5188 29.635 5.3545 29.522 5.2121 29.446 5.1172 29.362 5.0113 29.271 4.8973 28.587 4.0355 27.528 2.7027 26.917 2.0166 26.047 1.039 24.972 0 23.477 0 21.983 0 20.908 1.039 20.039 2.0156 19.44 2.6881 18.41 3.9836 17.724 4.8461c-.106.1333-.204.2563-.29.365-.1.1255-.213.2679-.337.423-.851 1.0702-2.18 2.7424-2.902 3.5826-1.15 1.3375-2.289 2.4741-4.011 3.1241-1.596.6-3.431.627-5.069.645-.489.0053-.979.0084-1.469.0101L0 12.9958c.403 0 .805 5e-4 1.208.001.813 9e-4 1.625.0019 2.438-9e-4l39.62 8e-4c.827.003 1.655.0021 2.482.0011z"></path></svg></ul></div><div class="menus_item"><a class="site-page" href="/about/"><span>关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><div id="blog_name"><a id="site-name" href="/"><svg id="blog_name" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 99.87 19.74"><path d="M3.13.27H7.21l3.13 19.2h-3l-.55-3.81v.05H3.35L2.8 19.47H0ZM6.42 13.11 5.07 3.62H5L3.7 13.11Z"></path><path d="M11.51 14.92V4.83C11.51 1.75 13.13 0 16.09 0s4.58 1.75 4.58 4.83V14.92c0 3.07-1.62 4.82-4.58 4.82S11.51 18 11.51 14.92Zm6.15.19V4.63c0-1.37-.61-1.89-1.57-1.89s-1.56.52-1.56 1.89V15.11c0 1.37.6 1.89 1.56 1.89S17.66 16.48 17.66 15.11Z"></path><path d="M22.7.27h3V8.09H29V.27h3v19.2H29V10.83H25.72v8.64h-3Z"></path><path d="M34.1 14.92V.27h3V15.14c0 1.37.58 1.86 1.54 1.86s1.53-.49 1.53-1.86V.27H43.1V14.92c0 3.07-1.54 4.82-4.5 4.82S34.1 18 34.1 14.92Z"></path><path d="M45.23.27h3v19.2h-3Z"></path><path d="M54.88.27h4.56c3.12 0 4.47 1.46 4.47 4.42v.77c0 2-.61 3.2-1.95 3.75v.06c1.62.55 2.25 2 2.25 4v1.65c0 3-1.57 4.55-4.58 4.55H54.88Zm4.2 7.82c1.12 0 1.81-.49 1.81-2V5c0-1.37-.47-2-1.54-2H57.9V8.09Zm.55 8.64c1 0 1.56-.47 1.56-1.9V13.16c0-1.78-.57-2.33-1.95-2.33H57.9v5.9Z"></path><path d="M66 .27h3V16.73h5v2.74H66Z"></path><path d="M75.06 14.92V4.83C75.06 1.75 76.68 0 79.64 0s4.58 1.75 4.58 4.83V14.92c0 3.07-1.62 4.82-4.58 4.82S75.06 18 75.06 14.92Zm6.14.19V4.63c0-1.37-.6-1.89-1.56-1.89s-1.56.52-1.56 1.89V15.11c0 1.37.6 1.89 1.56 1.89S81.2 16.48 81.2 15.11Z"></path><path d="M86 14.92V4.83C86 1.75 87.56 0 90.52 0S95 1.75 95 4.83V6.47H92.17V4.63c0-1.37-.6-1.89-1.56-1.89S89 3.26 89 4.63V15.14c0 1.37.61 1.86 1.57 1.86s1.56-.49 1.56-1.86V11.38H90.66V8.64H95v6.28c0 3.07-1.53 4.82-4.5 4.82S86 18 86 14.92Z"></path><path d="M97 16.56h2.9v2.91H97Z"></path></svg></a></div><div id="page-name-mask"><span id="page_name"><a id="page-name-text"><span>R 学习笔记</span></a></span></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><span>首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><span>文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder"></i> <span>分类</span></a></li><svg class="PopoverPointer" height="12.998751" viewBox="0 0 46.978001 12.998751" width="46.978001" xmlns="http://www.w3.org/2000/svg"><path d="m45.748 12.9978c.41-5e-4.82-10e-4 1.23-10e-4l-3.712-10e-5C42.791 12.995 42.316 12.9919 41.841 12.9868 40.202 12.9688 38.368 12.9433 36.773 12.3418 35.05 11.6918 33.909 10.5552 32.761 9.2177 32.054 8.3939 30.762 6.7705 29.909 5.6987 29.766 5.5188 29.635 5.3545 29.522 5.2121 29.446 5.1172 29.362 5.0113 29.271 4.8973 28.587 4.0355 27.528 2.7027 26.917 2.0166 26.047 1.039 24.972 0 23.477 0 21.983 0 20.908 1.039 20.039 2.0156 19.44 2.6881 18.41 3.9836 17.724 4.8461c-.106.1333-.204.2563-.29.365-.1.1255-.213.2679-.337.423-.851 1.0702-2.18 2.7424-2.902 3.5826-1.15 1.3375-2.289 2.4741-4.011 3.1241-1.596.6-3.431.627-5.069.645-.489.0053-.979.0084-1.469.0101L0 12.9958c.403 0 .805 5e-4 1.208.001.813 9e-4 1.625.0019 2.438-9e-4l39.62 8e-4c.827.003 1.655.0021 2.482.0011z"></path></svg></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><span>链接</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/friends/"><i class="fa-fw fas fa-star"></i> <span>动态</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-face-laugh"></i> <span>友链</span></a></li><li><a class="site-page child" href="/bb/"><i class="fa-fw fas fa-bullhorn"></i> <span>哔哔</span></a></li><svg class="PopoverPointer" height="12.998751" viewBox="0 0 46.978001 12.998751" width="46.978001" xmlns="http://www.w3.org/2000/svg"><path d="m45.748 12.9978c.41-5e-4.82-10e-4 1.23-10e-4l-3.712-10e-5C42.791 12.995 42.316 12.9919 41.841 12.9868 40.202 12.9688 38.368 12.9433 36.773 12.3418 35.05 11.6918 33.909 10.5552 32.761 9.2177 32.054 8.3939 30.762 6.7705 29.909 5.6987 29.766 5.5188 29.635 5.3545 29.522 5.2121 29.446 5.1172 29.362 5.0113 29.271 4.8973 28.587 4.0355 27.528 2.7027 26.917 2.0166 26.047 1.039 24.972 0 23.477 0 21.983 0 20.908 1.039 20.039 2.0156 19.44 2.6881 18.41 3.9836 17.724 4.8461c-.106.1333-.204.2563-.29.365-.1.1255-.213.2679-.337.423-.851 1.0702-2.18 2.7424-2.902 3.5826-1.15 1.3375-2.289 2.4741-4.011 3.1241-1.596.6-3.431.627-5.069.645-.489.0053-.979.0084-1.469.0101L0 12.9958c.403 0 .805 5e-4 1.208.001.813 9e-4 1.625.0019 2.438-9e-4l39.62 8e-4c.827.003 1.655.0021 2.482.0011z"></path></svg></ul></div><div class="menus_item"><a class="site-page" href="/about/"><span>关于</span></a></div></div></div><div id="nav-right"><div id="search-button"><a class="nav-rightbutton site-page social-icon search" title="搜索"><i class="fas fa-search fa-fw"></i></a></div><div id="up_top_button"><a class="nav-rightbutton site-page up_top" onclick="btf.scrollToDest(0,500)" title="回到顶部"><i class="fas fa-arrow-up fa-fw"></i></a></div><div id="travellings_button"><a class="nav-rightbutton site-page" target="_blank" href="https://travellings.link/" rel="noopener nofollow noopener" title="随机前往一个开往项目网站"><i class="fas fa-subway fa-fw"></i></a></div><div id="toggle-menu"><a class="nav-rightbutton site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-cover"><img class="cover" id="post-cover-img" src="https://s2.loli.net/2022/06/14/5wHfFZUlj6BTo2G.png" alt="cover"></div><div id="post-info"><h1 class="post-title">R 学习笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon fas fa-history"></i><span class="post-meta-label">更新于</span><time datetime="2022-07-09T06:50:07.000Z" title="更新于 7 月 09 日 14:50:07">7 月 09 日</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">31.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>171分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="R-数据类型">R 数据类型</h2><h3 id="向量">向量</h3><p>概念类似于Python里的列表，只能存储<strong>相同类型</strong>的数据。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">x <span class="operator">=</span> <span class="number">1</span> <span class="comment"># 创建标量</span></span><br><span class="line"><span class="comment"># 创建向量</span></span><br><span class="line">x <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">)</span></span><br><span class="line">mode<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;numeric&quot;</span></span><br><span class="line"></span><br><span class="line">z <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="built_in">T</span><span class="punctuation">,</span><span class="built_in">F</span><span class="punctuation">,</span><span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line">mode<span class="punctuation">(</span>z<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;logical&quot;</span></span><br><span class="line"></span><br><span class="line">x <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">100</span><span class="punctuation">)</span> <span class="comment"># 1到100的向量</span></span><br><span class="line">seq<span class="punctuation">(</span>from<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span> to<span class="operator">=</span><span class="number">20</span><span class="punctuation">,</span> by<span class="operator">=</span><span class="number">3</span><span class="punctuation">)</span> <span class="comment"># 创建等差数列，参数可省略。</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">1</span>  <span class="number">4</span>  <span class="number">7</span> <span class="number">10</span> <span class="number">13</span> <span class="number">16</span> <span class="number">19</span></span><br><span class="line"><span class="operator">?</span>seq <span class="comment"># 获取帮助</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">rep</span><span class="punctuation">(</span>x<span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">)</span> <span class="comment"># x的每个元素重复2次</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="built_in">rep</span><span class="punctuation">(</span>x<span class="punctuation">,</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">)</span><span class="punctuation">)</span> <span class="comment"># 重复指定次数</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">2</span> <span class="number">2</span> <span class="number">3</span> <span class="number">3</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 向量运算</span></span><br><span class="line">y <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">2</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">)</span></span><br><span class="line">x<span class="operator">+</span>y</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">3</span> <span class="number">5</span> <span class="number">7</span></span><br><span class="line">x<span class="operator">**</span><span class="number">2</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">4</span> <span class="number">9</span></span><br></pre></td></tr></table></figure><h3 id="向量索引">向量索引</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">x <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">100</span><span class="punctuation">)</span></span><br><span class="line"><span class="built_in">length</span><span class="punctuation">(</span>x<span class="punctuation">)</span> <span class="comment"># 输出向量长度</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">100</span></span><br><span class="line"></span><br><span class="line">x<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span></span><br><span class="line">x<span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span> <span class="comment"># R从1开始</span></span><br><span class="line">integer<span class="punctuation">(</span><span class="number">0</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">x<span class="punctuation">[</span><span class="operator">-</span><span class="number">10</span><span class="punctuation">]</span> <span class="comment"># 不输出第10个</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span>   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span>  <span class="number">11</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span>  <span class="number">15</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">18</span>  <span class="number">19</span>  <span class="number">20</span>  <span class="number">21</span>  <span class="number">22</span>  <span class="number">23</span>  <span class="number">24</span>  <span class="number">25</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">25</span><span class="punctuation">]</span>  <span class="number">26</span>  <span class="number">27</span>  <span class="number">28</span>  <span class="number">29</span>  <span class="number">30</span>  <span class="number">31</span>  <span class="number">32</span>  <span class="number">33</span>  <span class="number">34</span>  <span class="number">35</span>  <span class="number">36</span>  <span class="number">37</span>  <span class="number">38</span>  <span class="number">39</span>  <span class="number">40</span>  <span class="number">41</span>  <span class="number">42</span>  <span class="number">43</span>  <span class="number">44</span>  <span class="number">45</span>  <span class="number">46</span>  <span class="number">47</span>  <span class="number">48</span>  <span class="number">49</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">49</span><span class="punctuation">]</span>  <span class="number">50</span>  <span class="number">51</span>  <span class="number">52</span>  <span class="number">53</span>  <span class="number">54</span>  <span class="number">55</span>  <span class="number">56</span>  <span class="number">57</span>  <span class="number">58</span>  <span class="number">59</span>  <span class="number">60</span>  <span class="number">61</span>  <span class="number">62</span>  <span class="number">63</span>  <span class="number">64</span>  <span class="number">65</span>  <span class="number">66</span>  <span class="number">67</span>  <span class="number">68</span>  <span class="number">69</span>  <span class="number">70</span>  <span class="number">71</span>  <span class="number">72</span>  <span class="number">73</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">73</span><span class="punctuation">]</span>  <span class="number">74</span>  <span class="number">75</span>  <span class="number">76</span>  <span class="number">77</span>  <span class="number">78</span>  <span class="number">79</span>  <span class="number">80</span>  <span class="number">81</span>  <span class="number">82</span>  <span class="number">83</span>  <span class="number">84</span>  <span class="number">85</span>  <span class="number">86</span>  <span class="number">87</span>  <span class="number">88</span>  <span class="number">89</span>  <span class="number">90</span>  <span class="number">91</span>  <span class="number">92</span>  <span class="number">93</span>  <span class="number">94</span>  <span class="number">95</span>  <span class="number">96</span>  <span class="number">97</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">97</span><span class="punctuation">]</span>  <span class="number">98</span>  <span class="number">99</span> <span class="number">100</span></span><br><span class="line"></span><br><span class="line">x<span class="punctuation">[</span><span class="operator">-</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">]</span> <span class="comment"># 不输出第10个和第1个</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span>   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span>  <span class="number">11</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span>  <span class="number">15</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">18</span>  <span class="number">19</span>  <span class="number">20</span>  <span class="number">21</span>  <span class="number">22</span>  <span class="number">23</span>  <span class="number">24</span>  <span class="number">25</span>  <span class="number">26</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">25</span><span class="punctuation">]</span>  <span class="number">27</span>  <span class="number">28</span>  <span class="number">29</span>  <span class="number">30</span>  <span class="number">31</span>  <span class="number">32</span>  <span class="number">33</span>  <span class="number">34</span>  <span class="number">35</span>  <span class="number">36</span>  <span class="number">37</span>  <span class="number">38</span>  <span class="number">39</span>  <span class="number">40</span>  <span class="number">41</span>  <span class="number">42</span>  <span class="number">43</span>  <span class="number">44</span>  <span class="number">45</span>  <span class="number">46</span>  <span class="number">47</span>  <span class="number">48</span>  <span class="number">49</span>  <span class="number">50</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">49</span><span class="punctuation">]</span>  <span class="number">51</span>  <span class="number">52</span>  <span class="number">53</span>  <span class="number">54</span>  <span class="number">55</span>  <span class="number">56</span>  <span class="number">57</span>  <span class="number">58</span>  <span class="number">59</span>  <span class="number">60</span>  <span class="number">61</span>  <span class="number">62</span>  <span class="number">63</span>  <span class="number">64</span>  <span class="number">65</span>  <span class="number">66</span>  <span class="number">67</span>  <span class="number">68</span>  <span class="number">69</span>  <span class="number">70</span>  <span class="number">71</span>  <span class="number">72</span>  <span class="number">73</span>  <span class="number">74</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">73</span><span class="punctuation">]</span>  <span class="number">75</span>  <span class="number">76</span>  <span class="number">77</span>  <span class="number">78</span>  <span class="number">79</span>  <span class="number">80</span>  <span class="number">81</span>  <span class="number">82</span>  <span class="number">83</span>  <span class="number">84</span>  <span class="number">85</span>  <span class="number">86</span>  <span class="number">87</span>  <span class="number">88</span>  <span class="number">89</span>  <span class="number">90</span>  <span class="number">91</span>  <span class="number">92</span>  <span class="number">93</span>  <span class="number">94</span>  <span class="number">95</span>  <span class="number">96</span>  <span class="number">97</span>  <span class="number">98</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">97</span><span class="punctuation">]</span>  <span class="number">99</span> <span class="number">100</span></span><br><span class="line"></span><br><span class="line">x<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">2</span><span class="operator">:</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">]</span> <span class="comment"># 批量索引</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span></span><br><span class="line">x<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">)</span><span class="punctuation">]</span> <span class="comment"># 选择索引</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">5</span> <span class="number">10</span></span><br><span class="line">x<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">)</span><span class="punctuation">]</span> <span class="comment"># 可以重复索引</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">5</span> <span class="number">10</span> <span class="number">10</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line">x<span class="punctuation">[</span><span class="operator">-</span><span class="number">10</span><span class="punctuation">,</span> <span class="operator">-</span><span class="number">1</span><span class="punctuation">]</span></span><br><span class="line">Error <span class="keyword">in</span> x<span class="punctuation">[</span><span class="operator">-</span><span class="number">10</span><span class="punctuation">,</span> <span class="operator">-</span><span class="number">1</span><span class="punctuation">]</span> <span class="operator">:</span> 量度数目不对 <span class="comment"># 矛盾</span></span><br><span class="line"></span><br><span class="line">x<span class="punctuation">[</span>x<span class="operator">&gt;</span><span class="number">3</span><span class="punctuation">]</span> <span class="comment"># 简单的if语句</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>   <span class="number">4</span>   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span>  <span class="number">15</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">18</span>  <span class="number">19</span>  <span class="number">20</span>  <span class="number">21</span>  <span class="number">22</span>  <span class="number">23</span>  <span class="number">24</span>  <span class="number">25</span>  <span class="number">26</span>  <span class="number">27</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">25</span><span class="punctuation">]</span>  <span class="number">28</span>  <span class="number">29</span>  <span class="number">30</span>  <span class="number">31</span>  <span class="number">32</span>  <span class="number">33</span>  <span class="number">34</span>  <span class="number">35</span>  <span class="number">36</span>  <span class="number">37</span>  <span class="number">38</span>  <span class="number">39</span>  <span class="number">40</span>  <span class="number">41</span>  <span class="number">42</span>  <span class="number">43</span>  <span class="number">44</span>  <span class="number">45</span>  <span class="number">46</span>  <span class="number">47</span>  <span class="number">48</span>  <span class="number">49</span>  <span class="number">50</span>  <span class="number">51</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">49</span><span class="punctuation">]</span>  <span class="number">52</span>  <span class="number">53</span>  <span class="number">54</span>  <span class="number">55</span>  <span class="number">56</span>  <span class="number">57</span>  <span class="number">58</span>  <span class="number">59</span>  <span class="number">60</span>  <span class="number">61</span>  <span class="number">62</span>  <span class="number">63</span>  <span class="number">64</span>  <span class="number">65</span>  <span class="number">66</span>  <span class="number">67</span>  <span class="number">68</span>  <span class="number">69</span>  <span class="number">70</span>  <span class="number">71</span>  <span class="number">72</span>  <span class="number">73</span>  <span class="number">74</span>  <span class="number">75</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">73</span><span class="punctuation">]</span>  <span class="number">76</span>  <span class="number">77</span>  <span class="number">78</span>  <span class="number">79</span>  <span class="number">80</span>  <span class="number">81</span>  <span class="number">82</span>  <span class="number">83</span>  <span class="number">84</span>  <span class="number">85</span>  <span class="number">86</span>  <span class="number">87</span>  <span class="number">88</span>  <span class="number">89</span>  <span class="number">90</span>  <span class="number">91</span>  <span class="number">92</span>  <span class="number">93</span>  <span class="number">94</span>  <span class="number">95</span>  <span class="number">96</span>  <span class="number">97</span>  <span class="number">98</span>  <span class="number">99</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">97</span><span class="punctuation">]</span> <span class="number">100</span></span><br><span class="line">x<span class="punctuation">[</span>x<span class="operator">&gt;</span><span class="number">5</span> <span class="operator">&amp;</span> x<span class="operator">&lt;</span><span class="number">8</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">6</span> <span class="number">7</span></span><br><span class="line"></span><br><span class="line">y <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">10</span><span class="punctuation">)</span></span><br><span class="line">y<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="built_in">T</span><span class="punctuation">)</span><span class="punctuation">]</span> <span class="comment"># 逻辑语句</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span></span><br><span class="line">y<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="built_in">F</span><span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line">integer<span class="punctuation">(</span><span class="number">0</span><span class="punctuation">)</span></span><br><span class="line">y<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="built_in">T</span><span class="punctuation">,</span><span class="built_in">F</span><span class="punctuation">)</span><span class="punctuation">]</span> <span class="comment"># 两个一循环</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">3</span> <span class="number">5</span> <span class="number">7</span> <span class="number">9</span></span><br><span class="line">y<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="built_in">T</span><span class="punctuation">,</span><span class="built_in">T</span><span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span></span><br><span class="line">y<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="built_in">F</span><span class="punctuation">,</span><span class="built_in">T</span><span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">2</span>  <span class="number">4</span>  <span class="number">6</span>  <span class="number">8</span> <span class="number">10</span></span><br><span class="line">y<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="built_in">T</span><span class="punctuation">,</span><span class="built_in">T</span><span class="punctuation">,</span><span class="built_in">T</span><span class="punctuation">,</span><span class="built_in">T</span><span class="punctuation">,</span><span class="built_in">T</span><span class="punctuation">,</span><span class="built_in">T</span><span class="punctuation">,</span><span class="built_in">T</span><span class="punctuation">,</span><span class="built_in">T</span><span class="punctuation">,</span><span class="built_in">T</span><span class="punctuation">,</span><span class="built_in">T</span><span class="punctuation">,</span><span class="built_in">T</span><span class="punctuation">,</span><span class="built_in">T</span><span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="comment"># 不足以NA代替</span></span><br><span class="line"></span><br><span class="line">z <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;a&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;b&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;c&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;d&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;e&#x27;</span><span class="punctuation">)</span></span><br><span class="line">z</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;a&quot;</span> <span class="string">&quot;b&quot;</span> <span class="string">&quot;c&quot;</span> <span class="string">&quot;d&quot;</span> <span class="string">&quot;e&quot;</span></span><br><span class="line"><span class="built_in">names</span><span class="punctuation">(</span>z<span class="punctuation">)</span> <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;one&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;two&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;three&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;four&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;five&#x27;</span><span class="punctuation">)</span> <span class="comment"># 给z的元素添加名字</span></span><br><span class="line">z</span><br><span class="line">  one   two three  four  five </span><br><span class="line">  <span class="string">&quot;a&quot;</span>   <span class="string">&quot;b&quot;</span>   <span class="string">&quot;c&quot;</span>   <span class="string">&quot;d&quot;</span>   <span class="string">&quot;e&quot;</span> </span><br><span class="line">z<span class="punctuation">[</span><span class="string">&#x27;one&#x27;</span><span class="punctuation">]</span> <span class="comment"># 索引</span></span><br><span class="line">one </span><br><span class="line"><span class="string">&quot;a&quot;</span> </span><br><span class="line">z<span class="punctuation">[</span><span class="string">&#x27;one&#x27;</span><span class="punctuation">]</span> <span class="operator">&lt;-</span> <span class="string">&#x27;b&#x27;</span> <span class="comment"># 赋值</span></span><br><span class="line">z</span><br><span class="line">  one   two three  four  five </span><br><span class="line">  <span class="string">&quot;b&quot;</span>   <span class="string">&quot;b&quot;</span>   <span class="string">&quot;c&quot;</span>   <span class="string">&quot;d&quot;</span>   <span class="string">&quot;e&quot;</span> </span><br><span class="line">z<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">)</span><span class="punctuation">]</span> <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;x&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;y&#x27;</span><span class="punctuation">)</span> <span class="comment"># 批量赋值</span></span><br><span class="line">z</span><br><span class="line">  one   two three  four  five </span><br><span class="line">  <span class="string">&quot;b&quot;</span>   <span class="string">&quot;x&quot;</span>   <span class="string">&quot;y&quot;</span>   <span class="string">&quot;d&quot;</span>   <span class="string">&quot;e&quot;</span> </span><br><span class="line">z<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">6</span><span class="punctuation">,</span> <span class="number">7</span><span class="punctuation">)</span><span class="punctuation">]</span> <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;x&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;y&#x27;</span><span class="punctuation">)</span></span><br><span class="line">z</span><br><span class="line">  one   two three  four  five             </span><br><span class="line">  <span class="string">&quot;b&quot;</span>   <span class="string">&quot;x&quot;</span>   <span class="string">&quot;y&quot;</span>   <span class="string">&quot;d&quot;</span>   <span class="string">&quot;e&quot;</span>   <span class="string">&quot;x&quot;</span>   <span class="string">&quot;y&quot;</span> </span><br><span class="line"><span class="string">&#x27;b&#x27;</span> <span class="operator">%in%</span> z <span class="comment"># 判断</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">TRUE</span></span><br><span class="line">z<span class="punctuation">[</span>z <span class="operator">%in%</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;a&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;b&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;d&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;e&#x27;</span><span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line"> one four five </span><br><span class="line"> <span class="string">&quot;b&quot;</span> <span class="string">&quot;d&quot;</span>  <span class="string">&quot;e&quot;</span> </span><br><span class="line">append<span class="punctuation">(</span>x <span class="operator">=</span> z<span class="punctuation">,</span> values <span class="operator">=</span> <span class="string">&#x27;zzz&#x27;</span><span class="punctuation">,</span> after <span class="operator">=</span> <span class="number">0</span><span class="punctuation">)</span> <span class="comment"># 插入元素</span></span><br><span class="line">        one   two three  four  five             </span><br><span class="line"><span class="string">&quot;zzz&quot;</span>   <span class="string">&quot;b&quot;</span>   <span class="string">&quot;x&quot;</span>   <span class="string">&quot;y&quot;</span>   <span class="string">&quot;d&quot;</span>   <span class="string">&quot;e&quot;</span>   <span class="string">&quot;x&quot;</span>   <span class="string">&quot;y&quot;</span> </span><br><span class="line">append<span class="punctuation">(</span>x <span class="operator">=</span> z<span class="punctuation">,</span> values <span class="operator">=</span> <span class="string">&#x27;zzz&#x27;</span><span class="punctuation">,</span> after <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line">  one         two three  four  five             </span><br><span class="line">  <span class="string">&quot;b&quot;</span> <span class="string">&quot;zzz&quot;</span>   <span class="string">&quot;x&quot;</span>   <span class="string">&quot;y&quot;</span>   <span class="string">&quot;d&quot;</span>   <span class="string">&quot;e&quot;</span>   <span class="string">&quot;x&quot;</span>   <span class="string">&quot;y&quot;</span> </span><br><span class="line">append<span class="punctuation">(</span>x <span class="operator">=</span> z<span class="punctuation">,</span> values <span class="operator">=</span> <span class="string">&#x27;zzz&#x27;</span><span class="punctuation">,</span> after <span class="operator">=</span> <span class="number">2</span><span class="punctuation">)</span></span><br><span class="line">  one   two       three  four  five             </span><br><span class="line">  <span class="string">&quot;b&quot;</span>   <span class="string">&quot;x&quot;</span> <span class="string">&quot;zzz&quot;</span>   <span class="string">&quot;y&quot;</span>   <span class="string">&quot;d&quot;</span>   <span class="string">&quot;e&quot;</span>   <span class="string">&quot;x&quot;</span>   <span class="string">&quot;y&quot;</span> </span><br><span class="line">append<span class="punctuation">(</span>x <span class="operator">=</span> z<span class="punctuation">,</span> values <span class="operator">=</span> <span class="string">&#x27;zzz&#x27;</span><span class="punctuation">,</span> after <span class="operator">=</span> <span class="number">5</span><span class="punctuation">)</span></span><br><span class="line">  one   two three  four  five                   </span><br><span class="line">  <span class="string">&quot;b&quot;</span>   <span class="string">&quot;x&quot;</span>   <span class="string">&quot;y&quot;</span>   <span class="string">&quot;d&quot;</span>   <span class="string">&quot;e&quot;</span> <span class="string">&quot;zzz&quot;</span>   <span class="string">&quot;x&quot;</span>   <span class="string">&quot;y&quot;</span> </span><br><span class="line">append<span class="punctuation">(</span>x <span class="operator">=</span> z<span class="punctuation">,</span> values <span class="operator">=</span> <span class="string">&#x27;zzz&#x27;</span><span class="punctuation">,</span> after <span class="operator">=</span> <span class="number">10</span><span class="punctuation">)</span></span><br><span class="line">  one   two three  four  five                   </span><br><span class="line">  <span class="string">&quot;b&quot;</span>   <span class="string">&quot;x&quot;</span>   <span class="string">&quot;y&quot;</span>   <span class="string">&quot;d&quot;</span>   <span class="string">&quot;e&quot;</span>   <span class="string">&quot;x&quot;</span>   <span class="string">&quot;y&quot;</span> <span class="string">&quot;zzz&quot;</span> </span><br><span class="line">rm<span class="punctuation">(</span>z<span class="punctuation">)</span> <span class="comment"># 删除向量</span></span><br><span class="line">z</span><br><span class="line">错误<span class="operator">:</span> 找不到对象<span class="string">&#x27;z&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除向量中的元素（不常用）</span></span><br><span class="line">y</span><br><span class="line">                                      <span class="number">5</span> </span><br><span class="line"><span class="string">&quot;1&quot;</span> <span class="string">&quot;2&quot;</span> <span class="string">&quot;3&quot;</span> <span class="string">&quot;4&quot;</span> <span class="string">&quot;5&quot;</span> <span class="string">&quot;6&quot;</span> <span class="string">&quot;7&quot;</span> <span class="string">&quot;8&quot;</span> <span class="string">&quot;9&quot;</span> <span class="string">&quot;e&quot;</span> </span><br><span class="line">y<span class="punctuation">[</span><span class="operator">-</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line">                                    </span><br><span class="line"><span class="string">&quot;1&quot;</span> <span class="string">&quot;2&quot;</span> <span class="string">&quot;3&quot;</span> <span class="string">&quot;4&quot;</span> <span class="string">&quot;5&quot;</span> <span class="string">&quot;6&quot;</span> <span class="string">&quot;7&quot;</span> <span class="string">&quot;8&quot;</span> <span class="string">&quot;9&quot;</span> </span><br><span class="line">y <span class="operator">&lt;-</span> y<span class="punctuation">[</span><span class="operator">-</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line">y</span><br><span class="line">                                    </span><br><span class="line"><span class="string">&quot;1&quot;</span> <span class="string">&quot;2&quot;</span> <span class="string">&quot;3&quot;</span> <span class="string">&quot;4&quot;</span> <span class="string">&quot;5&quot;</span> <span class="string">&quot;6&quot;</span> <span class="string">&quot;7&quot;</span> <span class="string">&quot;8&quot;</span> <span class="string">&quot;9&quot;</span> </span><br><span class="line"></span><br><span class="line">euro</span><br><span class="line">        ATS         BEF         DEM         ESP         FIM         FRF         IEP         ITL </span><br><span class="line">  <span class="number">13.760300</span>   <span class="number">40.339900</span>    <span class="number">1.955830</span>  <span class="number">166.386000</span>    <span class="number">5.945730</span>    <span class="number">6.559570</span>    <span class="number">0.787564</span> <span class="number">1936.270000</span> </span><br><span class="line">        LUF         NLG         PTE </span><br><span class="line">  <span class="number">40.339900</span>    <span class="number">2.203710</span>  <span class="number">200.482000</span> </span><br><span class="line">euro<span class="punctuation">[</span><span class="string">&#x27;PTE&#x27;</span><span class="punctuation">]</span></span><br><span class="line">    PTE </span><br><span class="line"><span class="number">200.482</span> </span><br></pre></td></tr></table></figure><h3 id="矩阵与数组">矩阵与数组</h3><p>矩阵是<strong>二维</strong>的，有行和列，每个元素类型要相同，可以看成向量的扩充。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># R内置数据集</span></span><br><span class="line">head<span class="punctuation">(</span>iris3<span class="punctuation">)</span> <span class="comment"># 三种鸢尾花数据</span></span><br><span class="line"><span class="punctuation">,</span> <span class="punctuation">,</span> Setosa</span><br><span class="line"></span><br><span class="line">     Sepal L. Sepal W. Petal L. Petal W.</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>      <span class="number">5.1</span>      <span class="number">3.5</span>      <span class="number">1.4</span>      <span class="number">0.2</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>      <span class="number">4.9</span>      <span class="number">3.0</span>      <span class="number">1.4</span>      <span class="number">0.2</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>      <span class="number">4.7</span>      <span class="number">3.2</span>      <span class="number">1.3</span>      <span class="number">0.2</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>      <span class="number">4.6</span>      <span class="number">3.1</span>      <span class="number">1.5</span>      <span class="number">0.2</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">5</span><span class="punctuation">,</span><span class="punctuation">]</span>      <span class="number">5.0</span>      <span class="number">3.6</span>      <span class="number">1.4</span>      <span class="number">0.2</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">6</span><span class="punctuation">,</span><span class="punctuation">]</span>      <span class="number">5.4</span>      <span class="number">3.9</span>      <span class="number">1.7</span>      <span class="number">0.4</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">,</span> <span class="punctuation">,</span> Versicolor</span><br><span class="line"></span><br><span class="line">     Sepal L. Sepal W. Petal L. Petal W.</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>      <span class="number">7.0</span>      <span class="number">3.2</span>      <span class="number">4.7</span>      <span class="number">1.4</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>      <span class="number">6.4</span>      <span class="number">3.2</span>      <span class="number">4.5</span>      <span class="number">1.5</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>      <span class="number">6.9</span>      <span class="number">3.1</span>      <span class="number">4.9</span>      <span class="number">1.5</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>      <span class="number">5.5</span>      <span class="number">2.3</span>      <span class="number">4.0</span>      <span class="number">1.3</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">5</span><span class="punctuation">,</span><span class="punctuation">]</span>      <span class="number">6.5</span>      <span class="number">2.8</span>      <span class="number">4.6</span>      <span class="number">1.5</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">6</span><span class="punctuation">,</span><span class="punctuation">]</span>      <span class="number">5.7</span>      <span class="number">2.8</span>      <span class="number">4.5</span>      <span class="number">1.3</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">,</span> <span class="punctuation">,</span> Virginica</span><br><span class="line"></span><br><span class="line">     Sepal L. Sepal W. Petal L. Petal W.</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>      <span class="number">6.3</span>      <span class="number">3.3</span>      <span class="number">6.0</span>      <span class="number">2.5</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>      <span class="number">5.8</span>      <span class="number">2.7</span>      <span class="number">5.1</span>      <span class="number">1.9</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>      <span class="number">7.1</span>      <span class="number">3.0</span>      <span class="number">5.9</span>      <span class="number">2.1</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>      <span class="number">6.3</span>      <span class="number">2.9</span>      <span class="number">5.6</span>      <span class="number">1.8</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">5</span><span class="punctuation">,</span><span class="punctuation">]</span>      <span class="number">6.5</span>      <span class="number">3.0</span>      <span class="number">5.8</span>      <span class="number">2.2</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">6</span><span class="punctuation">,</span><span class="punctuation">]</span>      <span class="number">7.6</span>      <span class="number">3.0</span>      <span class="number">6.6</span>      <span class="number">2.1</span></span><br><span class="line"></span><br><span class="line">head<span class="punctuation">(</span>state.x77<span class="punctuation">)</span> <span class="comment"># 美国50个州8个指标</span></span><br><span class="line">           Population Income Illiteracy Life Exp Murder HS Grad Frost   Area</span><br><span class="line">Alabama          <span class="number">3615</span>   <span class="number">3624</span>        <span class="number">2.1</span>    <span class="number">69.05</span>   <span class="number">15.1</span>    <span class="number">41.3</span>    <span class="number">20</span>  <span class="number">50708</span></span><br><span class="line">Alaska            <span class="number">365</span>   <span class="number">6315</span>        <span class="number">1.5</span>    <span class="number">69.31</span>   <span class="number">11.3</span>    <span class="number">66.7</span>   <span class="number">152</span> <span class="number">566432</span></span><br><span class="line">Arizona          <span class="number">2212</span>   <span class="number">4530</span>        <span class="number">1.8</span>    <span class="number">70.55</span>    <span class="number">7.8</span>    <span class="number">58.1</span>    <span class="number">15</span> <span class="number">113417</span></span><br><span class="line">Arkansas         <span class="number">2110</span>   <span class="number">3378</span>        <span class="number">1.9</span>    <span class="number">70.66</span>   <span class="number">10.1</span>    <span class="number">39.9</span>    <span class="number">65</span>  <span class="number">51945</span></span><br><span class="line">California      <span class="number">21198</span>   <span class="number">5114</span>        <span class="number">1.1</span>    <span class="number">71.71</span>   <span class="number">10.3</span>    <span class="number">62.6</span>    <span class="number">20</span> <span class="number">156361</span></span><br><span class="line">Colorado         <span class="number">2541</span>   <span class="number">4884</span>        <span class="number">0.7</span>    <span class="number">72.06</span>    <span class="number">6.8</span>    <span class="number">63.9</span>   <span class="number">166</span> <span class="number">103766</span></span><br><span class="line"></span><br><span class="line">heatmap<span class="punctuation">(</span>state.x77<span class="punctuation">)</span> <span class="comment"># 矩阵可直接绘制热图</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建矩阵</span></span><br><span class="line">m <span class="operator">&lt;-</span> matrix<span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">20</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">)</span></span><br><span class="line">m</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">5</span>    <span class="number">9</span>   <span class="number">13</span>   <span class="number">17</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">6</span>   <span class="number">10</span>   <span class="number">14</span>   <span class="number">18</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span>    <span class="number">7</span>   <span class="number">11</span>   <span class="number">15</span>   <span class="number">19</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">4</span>    <span class="number">8</span>   <span class="number">12</span>   <span class="number">16</span>   <span class="number">20</span></span><br><span class="line">m <span class="operator">&lt;-</span> matrix<span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">20</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">,</span> byrow <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span> <span class="comment"># 按行分配</span></span><br><span class="line">m</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">2</span>    <span class="number">3</span>    <span class="number">4</span>    <span class="number">5</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">6</span>    <span class="number">7</span>    <span class="number">8</span>    <span class="number">9</span>   <span class="number">10</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">11</span>   <span class="number">12</span>   <span class="number">13</span>   <span class="number">14</span>   <span class="number">15</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">16</span>   <span class="number">17</span>   <span class="number">18</span>   <span class="number">19</span>   <span class="number">20</span></span><br><span class="line">m <span class="operator">&lt;-</span> matrix<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">20</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">,</span> byrow <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span> <span class="comment"># 行列数必须是数据个数的因数</span></span><br><span class="line">Warning message<span class="operator">:</span></span><br><span class="line">In matrix<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">20</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span> <span class="number">6</span><span class="punctuation">,</span> byrow <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span> <span class="operator">:</span> 数据长度<span class="punctuation">[</span><span class="number">20</span><span class="punctuation">]</span>不是矩阵列数<span class="punctuation">[</span><span class="number">6</span><span class="punctuation">]</span>的整倍数</span><br><span class="line">m <span class="operator">&lt;-</span> matrix<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">20</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">,</span> byrow <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line">Warning message<span class="operator">:</span></span><br><span class="line">In matrix<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">20</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">,</span> byrow <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span> <span class="operator">:</span> 数据长度<span class="punctuation">[</span><span class="number">20</span><span class="punctuation">]</span>不是矩阵行数<span class="punctuation">[</span><span class="number">3</span><span class="punctuation">]</span>的整倍</span><br><span class="line">m <span class="operator">&lt;-</span> matrix<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">20</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span> byrow <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span> <span class="comment"># 多时按顺序分配</span></span><br><span class="line">m</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">2</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">5</span>    <span class="number">6</span>    <span class="number">7</span>    <span class="number">8</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">9</span>   <span class="number">10</span>   <span class="number">11</span>   <span class="number">12</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">13</span>   <span class="number">14</span>   <span class="number">15</span>   <span class="number">16</span></span><br><span class="line">m <span class="operator">&lt;-</span> matrix<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">20</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">,</span> byrow <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span> <span class="comment"># 少时重复分配</span></span><br><span class="line">m</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">7</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">8</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">9</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">2</span>    <span class="number">3</span>    <span class="number">4</span>    <span class="number">5</span>    <span class="number">6</span>    <span class="number">7</span>    <span class="number">8</span>    <span class="number">9</span>    <span class="number">10</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">11</span>   <span class="number">12</span>   <span class="number">13</span>   <span class="number">14</span>   <span class="number">15</span>   <span class="number">16</span>   <span class="number">17</span>   <span class="number">18</span>   <span class="number">19</span>    <span class="number">20</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">2</span>    <span class="number">3</span>    <span class="number">4</span>    <span class="number">5</span>    <span class="number">6</span>    <span class="number">7</span>    <span class="number">8</span>    <span class="number">9</span>    <span class="number">10</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">11</span>   <span class="number">12</span>   <span class="number">13</span>   <span class="number">14</span>   <span class="number">15</span>   <span class="number">16</span>   <span class="number">17</span>   <span class="number">18</span>   <span class="number">19</span>    <span class="number">20</span></span><br><span class="line"></span><br><span class="line">m <span class="operator">&lt;-</span> matrix<span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">20</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">)</span></span><br><span class="line">m</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">3</span>    <span class="number">5</span>    <span class="number">7</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">4</span>    <span class="number">6</span>    <span class="number">8</span></span><br><span class="line">cnames <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;C1&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;C2&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;C3&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;C4&#x27;</span><span class="punctuation">)</span></span><br><span class="line">rnames <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;R1&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;R2&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="built_in">dimnames</span><span class="punctuation">(</span>m<span class="punctuation">)</span> <span class="operator">&lt;-</span> <span class="built_in">list</span><span class="punctuation">(</span>rnames<span class="punctuation">,</span>cnames<span class="punctuation">)</span> <span class="comment"># 命名行列</span></span><br><span class="line">m</span><br><span class="line">   C1 C2 C3 C4</span><br><span class="line">R1  <span class="number">1</span>  <span class="number">3</span>  <span class="number">5</span>  <span class="number">7</span></span><br><span class="line">R2  <span class="number">2</span>  <span class="number">4</span>  <span class="number">6</span>  <span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">dim</span><span class="punctuation">(</span>m<span class="punctuation">)</span> <span class="comment"># 显示对象的维数</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span> <span class="number">4</span></span><br><span class="line"><span class="built_in">dim</span><span class="punctuation">(</span>m<span class="punctuation">)</span> <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">8</span><span class="punctuation">)</span> <span class="comment"># 改变行列数</span></span><br><span class="line">m</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">7</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">8</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">2</span>    <span class="number">3</span>    <span class="number">4</span>    <span class="number">5</span>    <span class="number">6</span>    <span class="number">7</span>    <span class="number">8</span></span><br><span class="line"><span class="built_in">dim</span><span class="punctuation">(</span>m<span class="punctuation">)</span> <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">4</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">)</span></span><br><span class="line">m</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">5</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">6</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span>    <span class="number">7</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">4</span>    <span class="number">8</span></span><br><span class="line"></span><br><span class="line">x <span class="operator">&lt;-</span> 1<span class="operator">:</span><span class="number">9</span></span><br><span class="line"><span class="built_in">dim</span><span class="punctuation">(</span>x<span class="punctuation">)</span> <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">3</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">)</span> <span class="comment"># 生成矩阵</span></span><br><span class="line">x</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">4</span>    <span class="number">7</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">5</span>    <span class="number">8</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span>    <span class="number">6</span>    <span class="number">9</span></span><br></pre></td></tr></table></figure><p>矩阵索引</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">x</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">4</span>    <span class="number">7</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">5</span>    <span class="number">8</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span>    <span class="number">6</span>    <span class="number">9</span></span><br><span class="line">x<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span></span><br><span class="line">x<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">4</span></span><br><span class="line">x<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="comment"># 第1行</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">4</span> <span class="number">7</span></span><br><span class="line">x<span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="comment"># 第1列</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">x<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">2</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">)</span><span class="punctuation">]</span> <span class="comment"># 索引多个</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">4</span> <span class="number">7</span></span><br><span class="line">x<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">)</span><span class="punctuation">]</span> <span class="comment"># 索引子集</span></span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">4</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">5</span></span><br><span class="line">x<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="comment"># 不加逗号显示行第一个</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span></span><br><span class="line">x<span class="punctuation">[</span><span class="number">2</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span></span><br><span class="line">x<span class="punctuation">[</span><span class="operator">-</span><span class="number">1</span><span class="punctuation">]</span> <span class="comment">#负号表示不显示</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span></span><br><span class="line">x<span class="punctuation">[</span><span class="operator">-</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">5</span>    <span class="number">8</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span>    <span class="number">6</span>    <span class="number">9</span></span><br><span class="line">x<span class="punctuation">[</span><span class="operator">-</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">5</span> <span class="number">6</span></span><br><span class="line">x<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="operator">-</span><span class="number">2</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">7</span></span><br><span class="line"></span><br><span class="line">head<span class="punctuation">(</span>state.x77<span class="punctuation">)</span></span><br><span class="line">           Population Income Illiteracy Life Exp Murder HS Grad Frost   Area</span><br><span class="line">Alabama          <span class="number">3615</span>   <span class="number">3624</span>        <span class="number">2.1</span>    <span class="number">69.05</span>   <span class="number">15.1</span>    <span class="number">41.3</span>    <span class="number">20</span>  <span class="number">50708</span></span><br><span class="line">Alaska            <span class="number">365</span>   <span class="number">6315</span>        <span class="number">1.5</span>    <span class="number">69.31</span>   <span class="number">11.3</span>    <span class="number">66.7</span>   <span class="number">152</span> <span class="number">566432</span></span><br><span class="line">Arizona          <span class="number">2212</span>   <span class="number">4530</span>        <span class="number">1.8</span>    <span class="number">70.55</span>    <span class="number">7.8</span>    <span class="number">58.1</span>    <span class="number">15</span> <span class="number">113417</span></span><br><span class="line">Arkansas         <span class="number">2110</span>   <span class="number">3378</span>        <span class="number">1.9</span>    <span class="number">70.66</span>   <span class="number">10.1</span>    <span class="number">39.9</span>    <span class="number">65</span>  <span class="number">51945</span></span><br><span class="line">California      <span class="number">21198</span>   <span class="number">5114</span>        <span class="number">1.1</span>    <span class="number">71.71</span>   <span class="number">10.3</span>    <span class="number">62.6</span>    <span class="number">20</span> <span class="number">156361</span></span><br><span class="line">Colorado         <span class="number">2541</span>   <span class="number">4884</span>        <span class="number">0.7</span>    <span class="number">72.06</span>    <span class="number">6.8</span>    <span class="number">63.9</span>   <span class="number">166</span> <span class="number">103766</span></span><br><span class="line">state.x77<span class="punctuation">[</span><span class="string">&#x27;California&#x27;</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="comment"># 通过dimname索引</span></span><br><span class="line">Population     Income Illiteracy   Life Exp     Murder    HS Grad      Frost       Area </span><br><span class="line">  <span class="number">21198.00</span>    <span class="number">5114.00</span>       <span class="number">1.10</span>      <span class="number">71.71</span>      <span class="number">10.30</span>      <span class="number">62.60</span>      <span class="number">20.00</span>  <span class="number">156361.00</span> </span><br></pre></td></tr></table></figure><p>矩阵运算与线性代数中一致。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">m</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">5</span>    <span class="number">9</span>   <span class="number">13</span>   <span class="number">17</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">6</span>   <span class="number">10</span>   <span class="number">14</span>   <span class="number">18</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span>    <span class="number">7</span>   <span class="number">11</span>   <span class="number">15</span>   <span class="number">19</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">4</span>    <span class="number">8</span>   <span class="number">12</span>   <span class="number">16</span>   <span class="number">20</span></span><br><span class="line">n</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">6</span>   <span class="number">10</span>   <span class="number">14</span>   <span class="number">18</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span>    <span class="number">7</span>   <span class="number">11</span>   <span class="number">15</span>   <span class="number">19</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">4</span>    <span class="number">8</span>   <span class="number">12</span>   <span class="number">16</span>   <span class="number">20</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">5</span>    <span class="number">9</span>   <span class="number">13</span>   <span class="number">17</span>   <span class="number">21</span></span><br><span class="line">m<span class="operator">+</span>n</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span>   <span class="number">11</span>   <span class="number">19</span>   <span class="number">27</span>   <span class="number">35</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">5</span>   <span class="number">13</span>   <span class="number">21</span>   <span class="number">29</span>   <span class="number">37</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">7</span>   <span class="number">15</span>   <span class="number">23</span>   <span class="number">31</span>   <span class="number">39</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">9</span>   <span class="number">17</span>   <span class="number">25</span>   <span class="number">33</span>   <span class="number">41</span></span><br><span class="line">m<span class="operator">*</span>n <span class="comment"># 内积，对应元素想乘</span></span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>   <span class="number">30</span>   <span class="number">90</span>  <span class="number">182</span>  <span class="number">306</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">6</span>   <span class="number">42</span>  <span class="number">110</span>  <span class="number">210</span>  <span class="number">342</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">12</span>   <span class="number">56</span>  <span class="number">132</span>  <span class="number">240</span>  <span class="number">380</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">20</span>   <span class="number">72</span>  <span class="number">156</span>  <span class="number">272</span>  <span class="number">420</span></span><br><span class="line">m <span class="operator">%*%</span> t<span class="punctuation">(</span>n<span class="punctuation">)</span> <span class="comment"># 外积，即线代中的A×B</span></span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>  <span class="number">610</span>  <span class="number">655</span>  <span class="number">700</span>  <span class="number">745</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>  <span class="number">660</span>  <span class="number">710</span>  <span class="number">760</span>  <span class="number">810</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>  <span class="number">710</span>  <span class="number">765</span>  <span class="number">820</span>  <span class="number">875</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>  <span class="number">760</span>  <span class="number">820</span>  <span class="number">880</span>  <span class="number">940</span></span><br><span class="line"></span><br><span class="line">rowSums<span class="punctuation">(</span>m<span class="punctuation">)</span> <span class="comment"># 行和</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">45</span> <span class="number">50</span> <span class="number">55</span> <span class="number">60</span></span><br><span class="line">colSums<span class="punctuation">(</span>m<span class="punctuation">)</span> <span class="comment"># 列和</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">10</span> <span class="number">26</span> <span class="number">42</span> <span class="number">58</span> <span class="number">74</span></span><br><span class="line">rowMeans<span class="punctuation">(</span>m<span class="punctuation">)</span> <span class="comment"># 行平均值</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span></span><br><span class="line">colMeans<span class="punctuation">(</span>m<span class="punctuation">)</span> <span class="comment"># 列平均值</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">2.5</span>  <span class="number">6.5</span> <span class="number">10.5</span> <span class="number">14.5</span> <span class="number">18.5</span></span><br><span class="line"></span><br><span class="line">n</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">4</span>    <span class="number">7</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">5</span>    <span class="number">8</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span>    <span class="number">6</span>    <span class="number">9</span></span><br><span class="line">diag<span class="punctuation">(</span>n<span class="punctuation">)</span> <span class="comment"># 方阵对角线的值</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">5</span> <span class="number">9</span></span><br></pre></td></tr></table></figure><p>数组即多维矩阵。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">dim1 <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;A1&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;A2&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;A3&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;A4&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;A5&#x27;</span><span class="punctuation">)</span></span><br><span class="line">dim2 <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;B1&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;B2&#x27;</span><span class="punctuation">)</span></span><br><span class="line">dim3 <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;C1&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;C2&#x27;</span><span class="punctuation">)</span></span><br><span class="line">x <span class="operator">&lt;-</span> array<span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">20</span><span class="punctuation">,</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="built_in">dimnames</span> <span class="operator">=</span> <span class="built_in">list</span><span class="punctuation">(</span>dim1<span class="punctuation">,</span>dim2<span class="punctuation">,</span>dim3<span class="punctuation">)</span><span class="punctuation">)</span> <span class="comment"># array创建数组</span></span><br><span class="line">x</span><br><span class="line"><span class="punctuation">,</span> <span class="punctuation">,</span> C1</span><br><span class="line"></span><br><span class="line">   B1 B2</span><br><span class="line">A1  <span class="number">1</span>  <span class="number">6</span></span><br><span class="line">A2  <span class="number">2</span>  <span class="number">7</span></span><br><span class="line">A3  <span class="number">3</span>  <span class="number">8</span></span><br><span class="line">A4  <span class="number">4</span>  <span class="number">9</span></span><br><span class="line">A5  <span class="number">5</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">,</span> <span class="punctuation">,</span> C2</span><br><span class="line"></span><br><span class="line">   B1 B2</span><br><span class="line">A1 <span class="number">11</span> <span class="number">16</span></span><br><span class="line">A2 <span class="number">12</span> <span class="number">17</span></span><br><span class="line">A3 <span class="number">13</span> <span class="number">18</span></span><br><span class="line">A4 <span class="number">14</span> <span class="number">19</span></span><br><span class="line">A5 <span class="number">15</span> <span class="number">20</span></span><br></pre></td></tr></table></figure><h3 id="列表">列表</h3><p>R中最复杂的数据结构，可以用来存储不同的数据，例如向量、矩阵、数据框、列表等。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">a <span class="operator">&lt;-</span> 1<span class="operator">:</span><span class="number">20</span></span><br><span class="line">b <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;a&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;b&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;c&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;d&#x27;</span><span class="punctuation">)</span></span><br><span class="line">mode<span class="punctuation">(</span>mtcars<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;list&quot;</span></span><br><span class="line"><span class="built_in">c</span> <span class="operator">&lt;-</span> mtcars</span><br><span class="line">d <span class="operator">&lt;-</span> matrix<span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">20</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">)</span></span><br><span class="line">mlist <span class="operator">&lt;-</span> <span class="built_in">list</span><span class="punctuation">(</span>a<span class="punctuation">,</span>b<span class="punctuation">,</span><span class="built_in">c</span><span class="punctuation">,</span>d<span class="punctuation">)</span> <span class="comment"># 创建列表</span></span><br><span class="line">mlist</span><br><span class="line"><span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span> <span class="number">16</span> <span class="number">17</span> <span class="number">18</span> <span class="number">19</span> <span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;a&quot;</span> <span class="string">&quot;b&quot;</span> <span class="string">&quot;c&quot;</span> <span class="string">&quot;d&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">3</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line">                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Mazda RX4           <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Mazda RX4 Wag       <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Datsun <span class="number">710</span>          <span class="number">22.8</span>   <span class="number">4</span> <span class="number">108.0</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">4</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">5</span>    <span class="number">9</span>   <span class="number">13</span>   <span class="number">17</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">6</span>   <span class="number">10</span>   <span class="number">14</span>   <span class="number">18</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span>    <span class="number">7</span>   <span class="number">11</span>   <span class="number">15</span>   <span class="number">19</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">4</span>    <span class="number">8</span>   <span class="number">12</span>   <span class="number">16</span>   <span class="number">20</span></span><br><span class="line"></span><br><span class="line">mlist <span class="operator">&lt;-</span> <span class="built_in">list</span><span class="punctuation">(</span>first<span class="operator">=</span>a<span class="punctuation">,</span>second<span class="operator">=</span>b<span class="punctuation">,</span>third<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">,</span>fourth<span class="operator">=</span>d<span class="punctuation">)</span></span><br><span class="line">mlist</span><br><span class="line"><span class="operator">$</span>first</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span> <span class="number">16</span> <span class="number">17</span> <span class="number">18</span> <span class="number">19</span> <span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>second</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;a&quot;</span> <span class="string">&quot;b&quot;</span> <span class="string">&quot;c&quot;</span> <span class="string">&quot;d&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>third</span><br><span class="line">                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Mazda RX4           <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Mazda RX4 Wag       <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Datsun <span class="number">710</span>          <span class="number">22.8</span>   <span class="number">4</span> <span class="number">108.0</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>fourth</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">5</span>    <span class="number">9</span>   <span class="number">13</span>   <span class="number">17</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">6</span>   <span class="number">10</span>   <span class="number">14</span>   <span class="number">18</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span>    <span class="number">7</span>   <span class="number">11</span>   <span class="number">15</span>   <span class="number">19</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">4</span>    <span class="number">8</span>   <span class="number">12</span>   <span class="number">16</span>   <span class="number">20</span></span><br><span class="line"></span><br><span class="line">mlist <span class="operator">&lt;-</span> <span class="built_in">list</span><span class="punctuation">(</span><span class="string">&#x27;first&#x27;</span><span class="operator">=</span>a<span class="punctuation">)</span></span><br><span class="line">mlist</span><br><span class="line"><span class="operator">$</span>first</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span> <span class="number">16</span> <span class="number">17</span> <span class="number">18</span> <span class="number">19</span> <span class="number">20</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>列表索引</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">mlist<span class="punctuation">[</span><span class="string">&#x27;second&#x27;</span><span class="punctuation">]</span></span><br><span class="line"><span class="operator">$</span>second</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;a&quot;</span> <span class="string">&quot;b&quot;</span> <span class="string">&quot;c&quot;</span> <span class="string">&quot;d&quot;</span></span><br><span class="line"></span><br><span class="line">mlist<span class="punctuation">[</span><span class="number">2</span><span class="punctuation">]</span> <span class="comment"># 一个[]输出列表的子集</span></span><br><span class="line"><span class="operator">$</span>second</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;a&quot;</span> <span class="string">&quot;b&quot;</span> <span class="string">&quot;c&quot;</span> <span class="string">&quot;d&quot;</span></span><br><span class="line"><span class="built_in">class</span><span class="punctuation">(</span>mlist<span class="punctuation">[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;list&quot;</span></span><br><span class="line"></span><br><span class="line">mlist<span class="punctuation">[[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span> <span class="comment"># 两个[]输出数元素本身的数据类型</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;a&quot;</span> <span class="string">&quot;b&quot;</span> <span class="string">&quot;c&quot;</span> <span class="string">&quot;d&quot;</span></span><br><span class="line"><span class="built_in">class</span><span class="punctuation">(</span>mlist<span class="punctuation">[[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;character&quot;</span></span><br><span class="line"><span class="built_in">class</span><span class="punctuation">(</span>mlist<span class="operator">$</span>third<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;data.frame&quot;</span></span><br><span class="line"><span class="built_in">class</span><span class="punctuation">(</span>mlist<span class="operator">$</span>fourth<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;matrix&quot;</span> <span class="string">&quot;array&quot;</span> </span><br><span class="line"></span><br><span class="line">mlist<span class="punctuation">[</span><span class="number">5</span><span class="punctuation">]</span> <span class="operator">&lt;-</span> iris <span class="comment"># 要用两个[]</span></span><br><span class="line">Warning message<span class="operator">:</span></span><br><span class="line">In mlist<span class="punctuation">[</span><span class="number">5</span><span class="punctuation">]</span> <span class="operator">&lt;-</span> iris <span class="operator">:</span></span><br><span class="line">  number of items to replace is not a multiple of replacement <span class="built_in">length</span></span><br><span class="line">mlist<span class="punctuation">[[</span><span class="number">5</span><span class="punctuation">]</span><span class="punctuation">]</span> <span class="operator">&lt;-</span> iris</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除元素</span></span><br><span class="line">mlist <span class="operator">&lt;-</span> mlist<span class="punctuation">[</span><span class="operator">-</span><span class="number">5</span><span class="punctuation">]</span></span><br><span class="line">mlist<span class="punctuation">[</span><span class="number">4</span><span class="punctuation">]</span> <span class="operator">&lt;-</span> <span class="literal">NULL</span></span><br><span class="line">mlist</span><br><span class="line"><span class="operator">$</span>first</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span> <span class="number">16</span> <span class="number">17</span> <span class="number">18</span> <span class="number">19</span> <span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>second</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;a&quot;</span> <span class="string">&quot;b&quot;</span> <span class="string">&quot;c&quot;</span> <span class="string">&quot;d&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>third</span><br><span class="line">                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Mazda RX4           <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Mazda RX4 Wag       <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Datsun <span class="number">710</span>          <span class="number">22.8</span>   <span class="number">4</span> <span class="number">108.0</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="数据框">数据框</h3><p>类似于表格，每一列长度和数据类型必须相同，且必须命名，每行可不相同。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">class</span><span class="punctuation">(</span>iris<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;data.frame&quot;</span></span><br><span class="line"><span class="built_in">class</span><span class="punctuation">(</span>mtcars<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;data.frame&quot;</span></span><br><span class="line">iris</span><br><span class="line">    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species</span><br><span class="line"><span class="number">1</span>            <span class="number">5.1</span>         <span class="number">3.5</span>          <span class="number">1.4</span>         <span class="number">0.2</span>     setosa</span><br><span class="line"><span class="number">2</span>            <span class="number">4.9</span>         <span class="number">3.0</span>          <span class="number">1.4</span>         <span class="number">0.2</span>     setosa</span><br><span class="line"><span class="number">3</span>            <span class="number">4.7</span>         <span class="number">3.2</span>          <span class="number">1.3</span>         <span class="number">0.2</span>     setosa</span><br><span class="line">...</span><br><span class="line">mtcars</span><br><span class="line">                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Mazda RX4           <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Mazda RX4 Wag       <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Datsun <span class="number">710</span>          <span class="number">22.8</span>   <span class="number">4</span> <span class="number">108.0</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数据框</span></span><br><span class="line">state <span class="operator">&lt;-</span> data.frame<span class="punctuation">(</span>state.name<span class="punctuation">,</span>state.abb<span class="punctuation">,</span>state.x77<span class="punctuation">)</span></span><br><span class="line">state</span><br><span class="line">                   state.name state.abb Population Income Illiteracy Life.Exp Murder HS.Grad Frost</span><br><span class="line">Alabama               Alabama        AL       <span class="number">3615</span>   <span class="number">3624</span>        <span class="number">2.1</span>    <span class="number">69.05</span>   <span class="number">15.1</span>    <span class="number">41.3</span>    <span class="number">20</span></span><br><span class="line">Alaska                 Alaska        AK        <span class="number">365</span>   <span class="number">6315</span>        <span class="number">1.5</span>    <span class="number">69.31</span>   <span class="number">11.3</span>    <span class="number">66.7</span>   <span class="number">152</span></span><br><span class="line">Arizona               Arizona        AZ       <span class="number">2212</span>   <span class="number">4530</span>        <span class="number">1.8</span>    <span class="number">70.55</span>    <span class="number">7.8</span>    <span class="number">58.1</span>    <span class="number">15</span></span><br><span class="line">...</span><br><span class="line">rownames<span class="punctuation">(</span>state<span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Alabama&quot;</span>        <span class="string">&quot;Alaska&quot;</span>         <span class="string">&quot;Arizona&quot;</span>        <span class="string">&quot;Arkansas&quot;</span>       <span class="string">&quot;California&quot;</span>    </span><br><span class="line"> <span class="punctuation">[</span><span class="number">6</span><span class="punctuation">]</span> <span class="string">&quot;Colorado&quot;</span>       <span class="string">&quot;Connecticut&quot;</span>    <span class="string">&quot;Delaware&quot;</span>       <span class="string">&quot;Florida&quot;</span>        <span class="string">&quot;Georgia&quot;</span>       </span><br><span class="line"><span class="punctuation">[</span><span class="number">11</span><span class="punctuation">]</span> <span class="string">&quot;Hawaii&quot;</span>         <span class="string">&quot;Idaho&quot;</span>          <span class="string">&quot;Illinois&quot;</span>       <span class="string">&quot;Indiana&quot;</span>        <span class="string">&quot;Iowa&quot;</span>          </span><br><span class="line"><span class="punctuation">[</span><span class="number">16</span><span class="punctuation">]</span> <span class="string">&quot;Kansas&quot;</span>         <span class="string">&quot;Kentucky&quot;</span>       <span class="string">&quot;Louisiana&quot;</span>      <span class="string">&quot;Maine&quot;</span>          <span class="string">&quot;Maryland&quot;</span>      </span><br><span class="line"><span class="punctuation">[</span><span class="number">21</span><span class="punctuation">]</span> <span class="string">&quot;Massachusetts&quot;</span>  <span class="string">&quot;Michigan&quot;</span>       <span class="string">&quot;Minnesota&quot;</span>      <span class="string">&quot;Mississippi&quot;</span>    <span class="string">&quot;Missouri&quot;</span>      </span><br><span class="line"><span class="punctuation">[</span><span class="number">26</span><span class="punctuation">]</span> <span class="string">&quot;Montana&quot;</span>        <span class="string">&quot;Nebraska&quot;</span>       <span class="string">&quot;Nevada&quot;</span>         <span class="string">&quot;New Hampshire&quot;</span>  <span class="string">&quot;New Jersey&quot;</span>    </span><br><span class="line"><span class="punctuation">[</span><span class="number">31</span><span class="punctuation">]</span> <span class="string">&quot;New Mexico&quot;</span>     <span class="string">&quot;New York&quot;</span>       <span class="string">&quot;North Carolina&quot;</span> <span class="string">&quot;North Dakota&quot;</span>   <span class="string">&quot;Ohio&quot;</span>          </span><br><span class="line"><span class="punctuation">[</span><span class="number">36</span><span class="punctuation">]</span> <span class="string">&quot;Oklahoma&quot;</span>       <span class="string">&quot;Oregon&quot;</span>         <span class="string">&quot;Pennsylvania&quot;</span>   <span class="string">&quot;Rhode Island&quot;</span>   <span class="string">&quot;South Carolina&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">41</span><span class="punctuation">]</span> <span class="string">&quot;South Dakota&quot;</span>   <span class="string">&quot;Tennessee&quot;</span>      <span class="string">&quot;Texas&quot;</span>          <span class="string">&quot;Utah&quot;</span>           <span class="string">&quot;Vermont&quot;</span>       </span><br><span class="line"><span class="punctuation">[</span><span class="number">46</span><span class="punctuation">]</span> <span class="string">&quot;Virginia&quot;</span>       <span class="string">&quot;Washington&quot;</span>     <span class="string">&quot;West Virginia&quot;</span>  <span class="string">&quot;Wisconsin&quot;</span>      <span class="string">&quot;Wyoming&quot;</span>       </span><br><span class="line">colnames<span class="punctuation">(</span>state<span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;state.name&quot;</span> <span class="string">&quot;state.abb&quot;</span>  <span class="string">&quot;Population&quot;</span> <span class="string">&quot;Income&quot;</span>     <span class="string">&quot;Illiteracy&quot;</span> <span class="string">&quot;Life.Exp&quot;</span>   <span class="string">&quot;Murder&quot;</span>    </span><br><span class="line"> <span class="punctuation">[</span><span class="number">8</span><span class="punctuation">]</span> <span class="string">&quot;HS.Grad&quot;</span>    <span class="string">&quot;Frost&quot;</span>      <span class="string">&quot;Area&quot;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 索引</span></span><br><span class="line">state<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span></span><br><span class="line">                   state.name</span><br><span class="line">Alabama               Alabama</span><br><span class="line">Alaska                 Alaska</span><br><span class="line">Arizona               Arizona</span><br><span class="line">...</span><br><span class="line">state<span class="punctuation">[</span><span class="string">&#x27;state.abb&#x27;</span><span class="punctuation">]</span></span><br><span class="line">               state.abb</span><br><span class="line">Alabama               AL</span><br><span class="line">Alaska                AK</span><br><span class="line">Arizona               AZ</span><br><span class="line">...</span><br><span class="line">state<span class="operator">$</span>Murder</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">15.1</span> <span class="number">11.3</span>  <span class="number">7.8</span> <span class="number">10.1</span> <span class="number">10.3</span>  <span class="number">6.8</span>  <span class="number">3.1</span>  <span class="number">6.2</span> <span class="number">10.7</span> <span class="number">13.9</span>  <span class="number">6.2</span>  <span class="number">5.3</span> <span class="number">10.3</span>  <span class="number">7.1</span>  <span class="number">2.3</span>  <span class="number">4.5</span> <span class="number">10.6</span> <span class="number">13.2</span>  <span class="number">2.7</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">20</span><span class="punctuation">]</span>  <span class="number">8.5</span>  <span class="number">3.3</span> <span class="number">11.1</span>  <span class="number">2.3</span> <span class="number">12.5</span>  <span class="number">9.3</span>  <span class="number">5.0</span>  <span class="number">2.9</span> <span class="number">11.5</span>  <span class="number">3.3</span>  <span class="number">5.2</span>  <span class="number">9.7</span> <span class="number">10.9</span> <span class="number">11.1</span>  <span class="number">1.4</span>  <span class="number">7.4</span>  <span class="number">6.4</span>  <span class="number">4.2</span>  <span class="number">6.1</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">39</span><span class="punctuation">]</span>  <span class="number">2.4</span> <span class="number">11.6</span>  <span class="number">1.7</span> <span class="number">11.0</span> <span class="number">12.2</span>  <span class="number">4.5</span>  <span class="number">5.5</span>  <span class="number">9.5</span>  <span class="number">4.3</span>  <span class="number">6.7</span>  <span class="number">3.0</span>  <span class="number">6.9</span></span><br><span class="line">state<span class="punctuation">[</span><span class="punctuation">,</span><span class="string">&#x27;state.abb&#x27;</span><span class="punctuation">]</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;AL&quot;</span> <span class="string">&quot;AK&quot;</span> <span class="string">&quot;AZ&quot;</span> <span class="string">&quot;AR&quot;</span> <span class="string">&quot;CA&quot;</span> <span class="string">&quot;CO&quot;</span> <span class="string">&quot;CT&quot;</span> <span class="string">&quot;DE&quot;</span> <span class="string">&quot;FL&quot;</span> <span class="string">&quot;GA&quot;</span> <span class="string">&quot;HI&quot;</span> <span class="string">&quot;ID&quot;</span> <span class="string">&quot;IL&quot;</span> <span class="string">&quot;IN&quot;</span> <span class="string">&quot;IA&quot;</span> <span class="string">&quot;KS&quot;</span> <span class="string">&quot;KY&quot;</span> <span class="string">&quot;LA&quot;</span> <span class="string">&quot;ME&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">20</span><span class="punctuation">]</span> <span class="string">&quot;MD&quot;</span> <span class="string">&quot;MA&quot;</span> <span class="string">&quot;MI&quot;</span> <span class="string">&quot;MN&quot;</span> <span class="string">&quot;MS&quot;</span> <span class="string">&quot;MO&quot;</span> <span class="string">&quot;MT&quot;</span> <span class="string">&quot;NE&quot;</span> <span class="string">&quot;NV&quot;</span> <span class="string">&quot;NH&quot;</span> <span class="string">&quot;NJ&quot;</span> <span class="string">&quot;NM&quot;</span> <span class="string">&quot;NY&quot;</span> <span class="string">&quot;NC&quot;</span> <span class="string">&quot;ND&quot;</span> <span class="string">&quot;OH&quot;</span> <span class="string">&quot;OK&quot;</span> <span class="string">&quot;OR&quot;</span> <span class="string">&quot;PA&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">39</span><span class="punctuation">]</span> <span class="string">&quot;RI&quot;</span> <span class="string">&quot;SC&quot;</span> <span class="string">&quot;SD&quot;</span> <span class="string">&quot;TN&quot;</span> <span class="string">&quot;TX&quot;</span> <span class="string">&quot;UT&quot;</span> <span class="string">&quot;VT&quot;</span> <span class="string">&quot;VA&quot;</span> <span class="string">&quot;WA&quot;</span> <span class="string">&quot;WV&quot;</span> <span class="string">&quot;WI&quot;</span> <span class="string">&quot;WY&quot;</span></span><br><span class="line">state<span class="punctuation">[</span><span class="string">&#x27;California&#x27;</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line">           state.name state.abb Population Income Illiteracy Life.Exp Murder HS.Grad Frost   Area</span><br><span class="line">California California        CA      <span class="number">21198</span>   <span class="number">5114</span>        <span class="number">1.1</span>    <span class="number">71.71</span>   <span class="number">10.3</span>    <span class="number">62.6</span>    <span class="number">20</span> <span class="number">156361</span></span><br><span class="line"></span><br><span class="line">women</span><br><span class="line">   height weight</span><br><span class="line"><span class="number">1</span>      <span class="number">58</span>    <span class="number">115</span></span><br><span class="line"><span class="number">2</span>      <span class="number">59</span>    <span class="number">117</span></span><br><span class="line"><span class="number">3</span>      <span class="number">60</span>    <span class="number">120</span></span><br><span class="line">...</span><br><span class="line"><span class="built_in">class</span><span class="punctuation">(</span>state<span class="punctuation">[</span><span class="string">&#x27;state.abb&#x27;</span><span class="punctuation">]</span><span class="punctuation">)</span> <span class="comment"># 单括号仍为数据框</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;data.frame&quot;</span></span><br><span class="line"><span class="built_in">class</span><span class="punctuation">(</span>state<span class="punctuation">[[</span><span class="string">&#x27;state.abb&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">)</span> <span class="comment"># 双括号为数据本身</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;character&quot;</span></span><br><span class="line">state<span class="punctuation">[[</span><span class="string">&#x27;state.abb&#x27;</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;AL&quot;</span> <span class="string">&quot;AK&quot;</span> <span class="string">&quot;AZ&quot;</span> <span class="string">&quot;AR&quot;</span> <span class="string">&quot;CA&quot;</span> <span class="string">&quot;CO&quot;</span> <span class="string">&quot;CT&quot;</span> <span class="string">&quot;DE&quot;</span> <span class="string">&quot;FL&quot;</span> <span class="string">&quot;GA&quot;</span> <span class="string">&quot;HI&quot;</span> <span class="string">&quot;ID&quot;</span> <span class="string">&quot;IL&quot;</span> <span class="string">&quot;IN&quot;</span> <span class="string">&quot;IA&quot;</span> <span class="string">&quot;KS&quot;</span> <span class="string">&quot;KY&quot;</span> <span class="string">&quot;LA&quot;</span> <span class="string">&quot;ME&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">20</span><span class="punctuation">]</span> <span class="string">&quot;MD&quot;</span> <span class="string">&quot;MA&quot;</span> <span class="string">&quot;MI&quot;</span> <span class="string">&quot;MN&quot;</span> <span class="string">&quot;MS&quot;</span> <span class="string">&quot;MO&quot;</span> <span class="string">&quot;MT&quot;</span> <span class="string">&quot;NE&quot;</span> <span class="string">&quot;NV&quot;</span> <span class="string">&quot;NH&quot;</span> <span class="string">&quot;NJ&quot;</span> <span class="string">&quot;NM&quot;</span> <span class="string">&quot;NY&quot;</span> <span class="string">&quot;NC&quot;</span> <span class="string">&quot;ND&quot;</span> <span class="string">&quot;OH&quot;</span> <span class="string">&quot;OK&quot;</span> <span class="string">&quot;OR&quot;</span> <span class="string">&quot;PA&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">39</span><span class="punctuation">]</span> <span class="string">&quot;RI&quot;</span> <span class="string">&quot;SC&quot;</span> <span class="string">&quot;SD&quot;</span> <span class="string">&quot;TN&quot;</span> <span class="string">&quot;TX&quot;</span> <span class="string">&quot;UT&quot;</span> <span class="string">&quot;VT&quot;</span> <span class="string">&quot;VA&quot;</span> <span class="string">&quot;WA&quot;</span> <span class="string">&quot;WV&quot;</span> <span class="string">&quot;WI&quot;</span> <span class="string">&quot;WY&quot;</span></span><br><span class="line">state<span class="punctuation">[</span><span class="string">&#x27;state.abb&#x27;</span><span class="punctuation">]</span></span><br><span class="line">               state.abb</span><br><span class="line">Alabama               AL</span><br><span class="line">Alaska                AK</span><br><span class="line">Arizona               AZ</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="因子">因子</h3><p>因子是R中重要的概念。</p><p>R中变量类型</p><ol><li>名义型变量：没有顺序分别，相互独立，如省份名。</li><li>有序型变量：介于二者之间，不同值之间有顺序关系，但不是连续的数量变化，如good、better、best。</li><li>连续型变量：某个范围中的任意值，如存储年龄、身高、GDP的变量。</li></ol><p>一般，字符型数据多为名义型变量，数值型数据多为连续型变量。</p><p>名义型变量和有序型变量在R中称为因子，这些变量的可能值称为一个水平level，如good，better，best都称为一个level。</p><p><strong>因子的最大作用是用来分类，计算频数和频率。</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 内置数据集</span></span><br><span class="line">state.region</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> South         West          West          South         West          West         </span><br><span class="line"> <span class="punctuation">[</span><span class="number">7</span><span class="punctuation">]</span> Northeast     South         South         South         West          West         </span><br><span class="line"><span class="punctuation">[</span><span class="number">13</span><span class="punctuation">]</span> North Central North Central North Central North Central South         South        </span><br><span class="line">...         </span><br><span class="line">Levels<span class="operator">:</span> Northeast South North Central West</span><br><span class="line"></span><br><span class="line">state.division</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> East South Central Pacific            Mountain           West South Central</span><br><span class="line"> <span class="punctuation">[</span><span class="number">5</span><span class="punctuation">]</span> Pacific            Mountain           New England        South Atlantic    </span><br><span class="line"> <span class="punctuation">[</span><span class="number">9</span><span class="punctuation">]</span> South Atlantic     South Atlantic     Pacific            Mountain          </span><br><span class="line">...        </span><br><span class="line"><span class="number">9</span> Levels<span class="operator">:</span> New England Middle Atlantic South Atlantic ... Pacific</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义因子</span></span><br><span class="line">f <span class="operator">&lt;-</span> factor<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">f</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></span><br><span class="line">Levels<span class="operator">:</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></span><br><span class="line"></span><br><span class="line">mtcars<span class="operator">$</span>cyl</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">6</span> <span class="number">6</span> <span class="number">4</span> <span class="number">6</span> <span class="number">8</span> <span class="number">6</span> <span class="number">8</span> <span class="number">4</span> <span class="number">4</span> <span class="number">6</span> <span class="number">6</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">4</span> <span class="number">4</span> <span class="number">4</span> <span class="number">4</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">4</span> <span class="number">4</span> <span class="number">4</span> <span class="number">8</span> <span class="number">6</span> <span class="number">8</span> <span class="number">4</span></span><br><span class="line">factor<span class="punctuation">(</span>mtcars<span class="operator">$</span>cyl<span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">6</span> <span class="number">6</span> <span class="number">4</span> <span class="number">6</span> <span class="number">8</span> <span class="number">6</span> <span class="number">8</span> <span class="number">4</span> <span class="number">4</span> <span class="number">6</span> <span class="number">6</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">4</span> <span class="number">4</span> <span class="number">4</span> <span class="number">4</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">4</span> <span class="number">4</span> <span class="number">4</span> <span class="number">8</span> <span class="number">6</span> <span class="number">8</span> <span class="number">4</span></span><br><span class="line">Levels<span class="operator">:</span> <span class="number">4</span> <span class="number">6</span> <span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以设置顺序</span></span><br><span class="line">factor<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;one&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;one&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;two&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;three&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;three&#x27;</span><span class="punctuation">)</span><span class="punctuation">,</span> ordered <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">,</span> levels <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;one&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;two&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;three&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;four&#x27;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> one   one   two   three three</span><br><span class="line">Levels<span class="operator">:</span> one <span class="operator">&lt;</span> two <span class="operator">&lt;</span> three <span class="operator">&lt;</span> four</span><br><span class="line">factor<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;five&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;five&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;two&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;three&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;three&#x27;</span><span class="punctuation">)</span><span class="punctuation">,</span> ordered <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">,</span> levels <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;one&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;two&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;three&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;four&#x27;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="operator">&lt;</span><span class="literal">NA</span> <span class="operator">&lt;</span><span class="literal">NA</span> two   three three <span class="comment"># 因子不能含有没有的level</span></span><br><span class="line">Levels<span class="operator">:</span> one <span class="operator">&lt;</span> two <span class="operator">&lt;</span> three <span class="operator">&lt;</span> four</span><br><span class="line"></span><br><span class="line">plot<span class="punctuation">(</span>mtcars<span class="operator">$</span>cyl<span class="punctuation">)</span> <span class="comment"># 散点图</span></span><br><span class="line">plot<span class="punctuation">(</span>factor<span class="punctuation">(</span>mtcars<span class="operator">$</span>cyl<span class="punctuation">)</span><span class="punctuation">)</span> <span class="comment"># 因子做出条形图</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cut函数可将向量按要求分隔为因子</span></span><br><span class="line">n <span class="operator">&lt;-</span> 1<span class="operator">:</span><span class="number">20</span></span><br><span class="line">cut<span class="punctuation">(</span>n<span class="punctuation">,</span><span class="built_in">c</span><span class="punctuation">(</span>seq<span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">20</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span>   <span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span>   <span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span>   <span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span>   <span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span>   <span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">]</span>  <span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">]</span>  <span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">]</span>  <span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">]</span>  <span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">]</span>  <span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span><span class="number">15</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">12</span><span class="punctuation">]</span> <span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span><span class="number">15</span><span class="punctuation">]</span> <span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span><span class="number">15</span><span class="punctuation">]</span> <span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span><span class="number">15</span><span class="punctuation">]</span> <span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span><span class="number">15</span><span class="punctuation">]</span> <span class="punctuation">(</span><span class="number">15</span><span class="punctuation">,</span><span class="number">20</span><span class="punctuation">]</span> <span class="punctuation">(</span><span class="number">15</span><span class="punctuation">,</span><span class="number">20</span><span class="punctuation">]</span> <span class="punctuation">(</span><span class="number">15</span><span class="punctuation">,</span><span class="number">20</span><span class="punctuation">]</span> <span class="punctuation">(</span><span class="number">15</span><span class="punctuation">,</span><span class="number">20</span><span class="punctuation">]</span> <span class="punctuation">(</span><span class="number">15</span><span class="punctuation">,</span><span class="number">20</span><span class="punctuation">]</span></span><br><span class="line">Levels<span class="operator">:</span> <span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span> <span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">]</span> <span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span><span class="number">15</span><span class="punctuation">]</span> <span class="punctuation">(</span><span class="number">15</span><span class="punctuation">,</span><span class="number">20</span><span class="punctuation">]</span></span><br><span class="line"></span><br><span class="line">mtcars<span class="operator">$</span>wt</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2.620</span> <span class="number">2.875</span> <span class="number">2.320</span> <span class="number">3.215</span> <span class="number">3.440</span> <span class="number">3.460</span> <span class="number">3.570</span> <span class="number">3.190</span> <span class="number">3.150</span> <span class="number">3.440</span> <span class="number">3.440</span> <span class="number">4.070</span> <span class="number">3.730</span> <span class="number">3.780</span> <span class="number">5.250</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">16</span><span class="punctuation">]</span> <span class="number">5.424</span> <span class="number">5.345</span> <span class="number">2.200</span> <span class="number">1.615</span> <span class="number">1.835</span> <span class="number">2.465</span> <span class="number">3.520</span> <span class="number">3.435</span> <span class="number">3.840</span> <span class="number">3.845</span> <span class="number">1.935</span> <span class="number">2.140</span> <span class="number">1.513</span> <span class="number">3.170</span> <span class="number">2.770</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">31</span><span class="punctuation">]</span> <span class="number">3.570</span> <span class="number">2.780</span></span><br><span class="line"><span class="built_in">range</span><span class="punctuation">(</span>mtcars<span class="operator">$</span>wt<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1.513</span> <span class="number">5.424</span></span><br><span class="line">plot<span class="punctuation">(</span>cut<span class="punctuation">(</span>mtcars<span class="operator">$</span>wt<span class="punctuation">,</span><span class="built_in">c</span><span class="punctuation">(</span>seq<span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span> <span class="comment"># 直接画出频数条形图</span></span><br></pre></td></tr></table></figure><h3 id="缺失数据">缺失数据</h3><p>NA（not available）代表缺失值，用来存储缺失数据，表示没有。注意没有不是0，可能是任何值。</p><p>NaN代表不可能值，不存在。</p><p>Inf表示无穷大，-Inf为无穷小。</p><p>在R中有相关包和函数可以处理缺失值，如VIM包。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">NaN</span></span><br><span class="line"><span class="literal">NA</span><span class="operator">+</span><span class="number">1</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">NA</span></span><br><span class="line"><span class="number">0</span><span class="operator">/</span><span class="number">0</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">NaN</span></span><br><span class="line"><span class="number">1</span><span class="operator">/</span><span class="number">0</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">Inf</span></span><br><span class="line"><span class="operator">-</span><span class="number">1</span><span class="operator">/</span><span class="number">0</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="operator">-</span><span class="literal">Inf</span></span><br><span class="line"></span><br><span class="line">a <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="literal">NA</span><span class="punctuation">,</span> <span class="literal">NaN</span><span class="punctuation">,</span> <span class="literal">Inf</span><span class="punctuation">,</span> <span class="operator">-</span><span class="literal">Inf</span><span class="punctuation">)</span></span><br><span class="line"><span class="built_in">is.na</span><span class="punctuation">(</span>a<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="built_in">is.infinite</span><span class="punctuation">(</span>a<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span></span><br><span class="line"><span class="built_in">is.nan</span><span class="punctuation">(</span>a<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span></span><br><span class="line"></span><br><span class="line">a</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">NA</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span></span><br><span class="line"><span class="built_in">sum</span><span class="punctuation">(</span>a<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">NA</span></span><br><span class="line">mean<span class="punctuation">(</span>a<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">NA</span></span><br><span class="line"><span class="built_in">sum</span><span class="punctuation">(</span>a<span class="punctuation">,</span> na.rm <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span> <span class="comment"># na.rm = T，计算时跳过缺失值</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">55</span></span><br><span class="line">mean<span class="punctuation">(</span>a<span class="punctuation">,</span> na.rm <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">5.5</span></span><br><span class="line"></span><br><span class="line">a</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">NA</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span> <span class="literal">NA</span> <span class="literal">NA</span></span><br><span class="line">b <span class="operator">&lt;-</span> na.omit<span class="punctuation">(</span>a<span class="punctuation">)</span> <span class="comment"># 去除缺失数据</span></span><br><span class="line">b</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></span><br><span class="line"><span class="built_in">attr</span><span class="punctuation">(</span><span class="punctuation">,</span><span class="string">&quot;na.action&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">6</span> <span class="number">7</span></span><br><span class="line"><span class="built_in">attr</span><span class="punctuation">(</span><span class="punctuation">,</span><span class="string">&quot;class&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;omit&quot;</span></span><br><span class="line"><span class="built_in">is.na</span><span class="punctuation">(</span>b<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="built_in">sum</span><span class="punctuation">(</span>b<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line">a</span><br><span class="line">       state.name state.area</span><br><span class="line"><span class="number">1</span>            <span class="operator">&lt;</span><span class="literal">NA</span>     <span class="number">51609</span></span><br><span class="line"><span class="number">2</span>            <span class="operator">&lt;</span><span class="literal">NA</span>    <span class="number">589757</span></span><br><span class="line"><span class="number">3</span>         Arizona     <span class="number">113909</span></span><br><span class="line"><span class="number">4</span>        Arkansas      <span class="number">53104</span></span><br><span class="line"><span class="number">5</span>      California     <span class="number">158693</span></span><br><span class="line"></span><br><span class="line">na.omit<span class="punctuation">(</span>a<span class="punctuation">)</span> <span class="comment"># 为数据框时删除此行</span></span><br><span class="line">       state.name state.area</span><br><span class="line"><span class="number">3</span>         Arizona     <span class="number">113909</span></span><br><span class="line"><span class="number">4</span>        Arkansas      <span class="number">53104</span></span><br><span class="line"><span class="number">5</span>      California     <span class="number">158693</span></span><br></pre></td></tr></table></figure><h3 id="字符串">字符串</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 计算字符串长度</span></span><br><span class="line">nchar<span class="punctuation">(</span><span class="string">&#x27;hello&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">5</span></span><br><span class="line">a <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;hell o&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;world&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;!&#x27;</span><span class="punctuation">)</span> <span class="comment"># 空格也算</span></span><br><span class="line">nchar<span class="punctuation">(</span>a<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">6</span> <span class="number">5</span> <span class="number">1</span></span><br><span class="line"><span class="built_in">month.name</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;January&quot;</span>   <span class="string">&quot;February&quot;</span>  <span class="string">&quot;March&quot;</span>     <span class="string">&quot;April&quot;</span>     <span class="string">&quot;May&quot;</span>       <span class="string">&quot;June&quot;</span>      <span class="string">&quot;July&quot;</span>     </span><br><span class="line"> <span class="punctuation">[</span><span class="number">8</span><span class="punctuation">]</span> <span class="string">&quot;August&quot;</span>    <span class="string">&quot;September&quot;</span> <span class="string">&quot;October&quot;</span>   <span class="string">&quot;November&quot;</span>  <span class="string">&quot;December&quot;</span> </span><br><span class="line">nchar<span class="punctuation">(</span><span class="built_in">month.name</span><span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">7</span> <span class="number">8</span> <span class="number">5</span> <span class="number">5</span> <span class="number">3</span> <span class="number">4</span> <span class="number">4</span> <span class="number">6</span> <span class="number">9</span> <span class="number">7</span> <span class="number">8</span> <span class="number">8</span></span><br><span class="line"><span class="built_in">length</span><span class="punctuation">(</span><span class="built_in">month.name</span><span class="punctuation">)</span> <span class="comment"># 向量的长度，注意区分二者</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">12</span></span><br><span class="line">nchar<span class="punctuation">(</span><span class="number">12345</span><span class="punctuation">)</span> <span class="comment"># 为数字时当成字符串处理</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">5</span></span><br><span class="line">nchar<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">12</span><span class="punctuation">,</span> <span class="number">133</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串拼接</span></span><br><span class="line">paste<span class="punctuation">(</span><span class="string">&#x27;hello&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;world&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;!&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;hello world !&quot;</span></span><br><span class="line">paste<span class="punctuation">(</span><span class="string">&#x27;hello&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;world&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;!&#x27;</span><span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&#x27;-&#x27;</span><span class="punctuation">)</span> <span class="comment"># 可选分隔符，默认空格</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;hello-world-!&quot;</span></span><br><span class="line">a <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;Zhao&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;Qian&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;Sun&#x27;</span><span class="punctuation">)</span> <span class="comment"># 注意向量</span></span><br><span class="line">paste<span class="punctuation">(</span>a<span class="punctuation">,</span> <span class="string">&#x27;Ming&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Zhao Ming&quot;</span> <span class="string">&quot;Qian Ming&quot;</span> <span class="string">&quot;Sun Ming&quot;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串提取</span></span><br><span class="line">substr<span class="punctuation">(</span>x <span class="operator">=</span> <span class="built_in">month.name</span><span class="punctuation">,</span> start <span class="operator">=</span> <span class="number">1</span><span class="punctuation">,</span> stop <span class="operator">=</span> <span class="number">3</span><span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Jan&quot;</span> <span class="string">&quot;Feb&quot;</span> <span class="string">&quot;Mar&quot;</span> <span class="string">&quot;Apr&quot;</span> <span class="string">&quot;May&quot;</span> <span class="string">&quot;Jun&quot;</span> <span class="string">&quot;Jul&quot;</span> <span class="string">&quot;Aug&quot;</span> <span class="string">&quot;Sep&quot;</span> <span class="string">&quot;Oct&quot;</span> <span class="string">&quot;Nov&quot;</span> <span class="string">&quot;Dec&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 大小写转换</span></span><br><span class="line">toupper<span class="punctuation">(</span><span class="built_in">month.name</span><span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;JANUARY&quot;</span>   <span class="string">&quot;FEBRUARY&quot;</span>  <span class="string">&quot;MARCH&quot;</span>     <span class="string">&quot;APRIL&quot;</span>     <span class="string">&quot;MAY&quot;</span>       <span class="string">&quot;JUNE&quot;</span>      <span class="string">&quot;JULY&quot;</span>     </span><br><span class="line"> <span class="punctuation">[</span><span class="number">8</span><span class="punctuation">]</span> <span class="string">&quot;AUGUST&quot;</span>    <span class="string">&quot;SEPTEMBER&quot;</span> <span class="string">&quot;OCTOBER&quot;</span>   <span class="string">&quot;NOVEMBER&quot;</span>  <span class="string">&quot;DECEMBER&quot;</span> </span><br><span class="line">tolower<span class="punctuation">(</span><span class="built_in">month.name</span><span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;january&quot;</span>   <span class="string">&quot;february&quot;</span>  <span class="string">&quot;march&quot;</span>     <span class="string">&quot;april&quot;</span>     <span class="string">&quot;may&quot;</span>       <span class="string">&quot;june&quot;</span>      <span class="string">&quot;july&quot;</span>     </span><br><span class="line"> <span class="punctuation">[</span><span class="number">8</span><span class="punctuation">]</span> <span class="string">&quot;august&quot;</span>    <span class="string">&quot;september&quot;</span> <span class="string">&quot;october&quot;</span>   <span class="string">&quot;november&quot;</span>  <span class="string">&quot;december&quot;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 局部大小写转换-正则表达式</span></span><br><span class="line"><span class="comment"># 待学</span></span><br><span class="line">gsub<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串匹配</span></span><br><span class="line">a <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;Zhao&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;Qian&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;Sun&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;Li&#x27;</span><span class="punctuation">)</span></span><br><span class="line">grep<span class="punctuation">(</span><span class="string">&#x27;Sun&#x27;</span><span class="punctuation">,</span> a<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">3</span></span><br><span class="line">grep<span class="punctuation">(</span><span class="string">&#x27;a&#x27;</span><span class="punctuation">,</span> a<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">2</span></span><br><span class="line">grep<span class="punctuation">(</span><span class="string">&#x27;ao&#x27;</span><span class="punctuation">,</span> a<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span></span><br><span class="line">grep<span class="punctuation">(</span><span class="string">&#x27;au&#x27;</span><span class="punctuation">,</span> a<span class="punctuation">)</span></span><br><span class="line">integer<span class="punctuation">(</span><span class="number">0</span><span class="punctuation">)</span></span><br><span class="line">a <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;A+&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;AC&#x27;</span><span class="punctuation">)</span></span><br><span class="line">grep<span class="punctuation">(</span><span class="string">&#x27;A+&#x27;</span><span class="punctuation">,</span> a<span class="punctuation">,</span> fixed <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span></span><br><span class="line">grep<span class="punctuation">(</span><span class="string">&#x27;A+&#x27;</span><span class="punctuation">,</span> a<span class="punctuation">,</span> fixed <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span> <span class="comment"># 含有fixed参数表示支持正则表达式，+表示任何字符</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">2</span></span><br><span class="line">match<span class="punctuation">(</span><span class="string">&#x27;A&#x27;</span><span class="punctuation">,</span> a<span class="punctuation">)</span> <span class="comment"># match不支持正则表达式</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">NA</span></span><br><span class="line">match<span class="punctuation">(</span><span class="string">&#x27;A+&#x27;</span><span class="punctuation">,</span> a<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span></span><br><span class="line">match<span class="punctuation">(</span><span class="string">&#x27;AC&#x27;</span><span class="punctuation">,</span> a<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串分隔</span></span><br><span class="line">strsplit<span class="punctuation">(</span>x <span class="operator">=</span> <span class="string">&#x27;hello my dear.&#x27;</span><span class="punctuation">,</span> split <span class="operator">=</span> <span class="string">&#x27; &#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;hello&quot;</span> <span class="string">&quot;my&quot;</span>    <span class="string">&quot;dear.&quot;</span></span><br><span class="line"></span><br><span class="line">a <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;oh my god!&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;hello my dear.&#x27;</span><span class="punctuation">)</span></span><br><span class="line">strsplit<span class="punctuation">(</span>a<span class="punctuation">,</span> <span class="string">&#x27; &#x27;</span><span class="punctuation">)</span> <span class="comment"># 可分隔向量，返回list</span></span><br><span class="line"><span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;oh&quot;</span>   <span class="string">&quot;my&quot;</span>   <span class="string">&quot;god!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;hello&quot;</span> <span class="string">&quot;my&quot;</span>    <span class="string">&quot;dear.&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成扑克牌</span></span><br><span class="line">a</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span></span><br><span class="line">b</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;heitao&quot;</span>   <span class="string">&quot;fangpian&quot;</span> <span class="string">&quot;hongtao&quot;</span>  <span class="string">&quot;meihua&quot;</span>  </span><br><span class="line">outer<span class="punctuation">(</span>b<span class="punctuation">,</span> a<span class="punctuation">,</span> FUN <span class="operator">=</span> paste<span class="punctuation">)</span></span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span>         <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span>         <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span>         <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span>         <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span>         <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">]</span>        </span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;heitao 1&quot;</span>   <span class="string">&quot;heitao 2&quot;</span>   <span class="string">&quot;heitao 3&quot;</span>   <span class="string">&quot;heitao 4&quot;</span>   <span class="string">&quot;heitao 5&quot;</span>   <span class="string">&quot;heitao 6&quot;</span>  </span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;fangpian 1&quot;</span> <span class="string">&quot;fangpian 2&quot;</span> <span class="string">&quot;fangpian 3&quot;</span> <span class="string">&quot;fangpian 4&quot;</span> <span class="string">&quot;fangpian 5&quot;</span> <span class="string">&quot;fangpian 6&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;hongtao 1&quot;</span>  <span class="string">&quot;hongtao 2&quot;</span>  <span class="string">&quot;hongtao 3&quot;</span>  <span class="string">&quot;hongtao 4&quot;</span>  <span class="string">&quot;hongtao 5&quot;</span>  <span class="string">&quot;hongtao 6&quot;</span> </span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;meihua 1&quot;</span>   <span class="string">&quot;meihua 2&quot;</span>   <span class="string">&quot;meihua 3&quot;</span>   <span class="string">&quot;meihua 4&quot;</span>   <span class="string">&quot;meihua 5&quot;</span>   <span class="string">&quot;meihua 6&quot;</span>  </span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">7</span><span class="punctuation">]</span>         <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">8</span><span class="punctuation">]</span>         <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">9</span><span class="punctuation">]</span>         <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">]</span>         <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">11</span><span class="punctuation">]</span>         <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">12</span><span class="punctuation">]</span>        </span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;heitao 7&quot;</span>   <span class="string">&quot;heitao 8&quot;</span>   <span class="string">&quot;heitao 9&quot;</span>   <span class="string">&quot;heitao 10&quot;</span>   <span class="string">&quot;heitao 11&quot;</span>   <span class="string">&quot;heitao 12&quot;</span>  </span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;fangpian 7&quot;</span> <span class="string">&quot;fangpian 8&quot;</span> <span class="string">&quot;fangpian 9&quot;</span> <span class="string">&quot;fangpian 10&quot;</span> <span class="string">&quot;fangpian 11&quot;</span> <span class="string">&quot;fangpian 12&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;hongtao 7&quot;</span>  <span class="string">&quot;hongtao 8&quot;</span>  <span class="string">&quot;hongtao 9&quot;</span>  <span class="string">&quot;hongtao 10&quot;</span>  <span class="string">&quot;hongtao 11&quot;</span>  <span class="string">&quot;hongtao 12&quot;</span> </span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;meihua 7&quot;</span>   <span class="string">&quot;meihua 8&quot;</span>   <span class="string">&quot;meihua 9&quot;</span>   <span class="string">&quot;meihua 10&quot;</span>   <span class="string">&quot;meihua 11&quot;</span>   <span class="string">&quot;meihua 12&quot;</span>  </span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">13</span><span class="punctuation">]</span>        </span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;heitao 13&quot;</span>  </span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;fangpian 13&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;hongtao 13&quot;</span> </span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;meihua 13&quot;</span></span><br><span class="line">outer<span class="punctuation">(</span>b<span class="punctuation">,</span> a<span class="punctuation">,</span> FUN <span class="operator">=</span> paste<span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&#x27;-&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h3 id="正则表达式-2">正则表达式</h3><p>regular expression regex RE</p><p>特点</p><ol><li>正则表达式能够凝练字符串的特征</li><li>是通用的字符串表达框架</li><li>是简洁表达一组字符串的表达式</li><li>可以判断某个字符串的特征归属，是否具有这个特征</li></ol><p>作用</p><p>表达文本类型的特征</p><p>同时查找或替换一组字符串</p><p>匹配字符串的全部或部分</p><h4 id="语法-2">语法</h4><p>由字符和操作符构成</p><p>基本和常用的正则表达式操作符如下</p><table><thead><tr><th>操作符</th><th>说明</th><th>例子</th></tr></thead><tbody><tr><td><code>.</code></td><td>表示任何单个字符</td><td></td></tr><tr><td><code>[]</code></td><td>给出单个字符的取值范围</td><td><code>[abc]</code>：a或b或c，<code>[a-z]</code>：a-z单个字母</td></tr><tr><td><code>[^]</code></td><td>排除此取值范围</td><td><code>[^abc]</code>：非a或b或c</td></tr><tr><td><code>*</code></td><td>前一个字符出现<code>&gt;=0</code>次</td><td><code>abc*</code>：ab、abc、abcc、abccc等</td></tr><tr><td><code>+</code></td><td>前一个字符出现<code>&gt;=1</code>次</td><td><code>abc+</code>：abc、abcc、abccc等</td></tr><tr><td><code>?</code></td><td>前一个字符出现<code>0</code>或<code>1</code>次</td><td><code>abc?</code>：ab、abc</td></tr><tr><td>`</td><td>`</td><td>左右表达式中的一个</td></tr><tr><td><code>&#123;m&#125;</code></td><td>前一个字符出现<code>m</code>次</td><td><code>ab&#123;2&#125;c</code>：abbc</td></tr><tr><td><code>&#123;n,&#125;</code></td><td>前一个字符出现<code>&gt;=n</code>次</td><td><code>ab&#123;2,&#125;c</code>：abbc、abbbc、abbbbc等</td></tr><tr><td><code>&#123;m,n&#125;</code></td><td>前一个字符出现<code>m-n</code>次（含<code>n</code>）</td><td><code>ab&#123;1,3&#125;c</code>：abc、abbc、abbbc</td></tr><tr><td><code>^</code></td><td>匹配字符串的开头</td><td><code>^123</code>：字符串以abc开头</td></tr><tr><td><code>$</code></td><td>匹配字符串的结尾</td><td><code>123$</code>：字符串以123结尾</td></tr><tr><td><code>()</code></td><td>分组标记，内部只能使用`</td><td>`</td></tr><tr><td><code>\d</code></td><td>数字，等价于<code>[0-9]</code></td><td></td></tr><tr><td><code>\w</code></td><td>单词字符，等价于<code>[A-Za-z0-9_]</code></td><td></td></tr></tbody></table><h4 id="经典实例">经典实例</h4><p><code>^[A-Za-z]+$</code>：由字母组成的字符串</p><p><code>^[A-Za-z]+$</code>：由字母和数字组成的字符串</p><p><code>^-?[1-9]\d*$</code>：整数</p><p><code>^[1-9]\d*$</code>：正整数</p><p><code>[\u4e00-\u9fa5]</code>：匹配中文字符</p><h3 id="日期和时间">日期和时间</h3><p>时间序列数据</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 内置时间序列数据</span></span><br><span class="line"><span class="built_in">class</span><span class="punctuation">(</span>sunspots<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;ts&quot;</span></span><br><span class="line">sunspots</span><br><span class="line">       Jan   Feb   Mar   Apr   May   Jun   Jul   Aug   Sep   Oct   Nov   Dec</span><br><span class="line"><span class="number">1749</span>  <span class="number">58.0</span>  <span class="number">62.6</span>  <span class="number">70.0</span>  <span class="number">55.7</span>  <span class="number">85.0</span>  <span class="number">83.5</span>  <span class="number">94.8</span>  <span class="number">66.3</span>  <span class="number">75.9</span>  <span class="number">75.5</span> <span class="number">158.6</span>  <span class="number">85.2</span></span><br><span class="line"><span class="number">1750</span>  <span class="number">73.3</span>  <span class="number">75.9</span>  <span class="number">89.2</span>  <span class="number">88.3</span>  <span class="number">90.0</span> <span class="number">100.0</span>  <span class="number">85.4</span> <span class="number">103.0</span>  <span class="number">91.2</span>  <span class="number">65.7</span>  <span class="number">63.3</span>  <span class="number">75.4</span></span><br><span class="line"><span class="number">1751</span>  <span class="number">70.0</span>  <span class="number">43.5</span>  <span class="number">45.3</span>  <span class="number">56.4</span>  <span class="number">60.7</span>  <span class="number">50.7</span>  <span class="number">66.3</span>  <span class="number">59.8</span>  <span class="number">23.5</span>  <span class="number">23.2</span>  <span class="number">28.5</span>  <span class="number">44.0</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">presidents</span><br><span class="line">     Qtr1 Qtr2 Qtr3 Qtr4</span><br><span class="line"><span class="number">1945</span>   <span class="literal">NA</span>   <span class="number">87</span>   <span class="number">82</span>   <span class="number">75</span></span><br><span class="line"><span class="number">1946</span>   <span class="number">63</span>   <span class="number">50</span>   <span class="number">43</span>   <span class="number">32</span></span><br><span class="line"><span class="number">1947</span>   <span class="number">35</span>   <span class="number">60</span>   <span class="number">54</span>   <span class="number">55</span></span><br><span class="line">...</span><br><span class="line">airmiles</span><br><span class="line">Time Series<span class="operator">:</span></span><br><span class="line">Start <span class="operator">=</span> <span class="number">1937</span> </span><br><span class="line">End <span class="operator">=</span> <span class="number">1960</span> </span><br><span class="line">Frequency <span class="operator">=</span> <span class="number">1</span> </span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>   <span class="number">412</span>   <span class="number">480</span>   <span class="number">683</span>  <span class="number">1052</span>  <span class="number">1385</span>  <span class="number">1418</span>  <span class="number">1634</span>  <span class="number">2178</span>  <span class="number">3362</span>  <span class="number">5948</span>  <span class="number">6109</span>  <span class="number">5981</span>  <span class="number">6753</span>  <span class="number">8003</span> <span class="number">10566</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">16</span><span class="punctuation">]</span> <span class="number">12528</span> <span class="number">14760</span> <span class="number">16769</span> <span class="number">19819</span> <span class="number">22362</span> <span class="number">25340</span> <span class="number">25343</span> <span class="number">29269</span> <span class="number">30514</span></span><br><span class="line"><span class="built_in">class</span><span class="punctuation">(</span>airmiles<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;ts&quot;</span></span><br><span class="line"></span><br><span class="line">Sys.Date<span class="punctuation">(</span><span class="punctuation">)</span> <span class="comment"># 输出系统时间</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;2022-01-31&quot;</span></span><br><span class="line"><span class="built_in">class</span><span class="punctuation">(</span>Sys.Date<span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Date&quot;</span> <span class="comment"># 单独的数据类型，不是字符串</span></span><br><span class="line"></span><br><span class="line">a <span class="operator">&lt;-</span> as.Date<span class="punctuation">(</span><span class="string">&#x27;2022-02-02&#x27;</span><span class="punctuation">,</span> format <span class="operator">=</span> <span class="string">&#x27;%Y-%m-%d&#x27;</span><span class="punctuation">)</span> <span class="comment"># 字符串转换成时间</span></span><br><span class="line"><span class="built_in">class</span><span class="punctuation">(</span>a<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Date&quot;</span></span><br><span class="line"><span class="operator">?</span>strftime <span class="comment"># 更多格式信息查看</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成时间序列，系统自动按时间处理，不会出现2月30日等情况</span></span><br><span class="line">seq<span class="punctuation">(</span>as.Date<span class="punctuation">(</span><span class="string">&#x27;2022-01-01&#x27;</span><span class="punctuation">)</span><span class="punctuation">,</span> as.Date<span class="punctuation">(</span><span class="string">&#x27;2022-03-01&#x27;</span><span class="punctuation">)</span><span class="punctuation">,</span> by<span class="operator">=</span><span class="number">5</span><span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;2022-01-01&quot;</span> <span class="string">&quot;2022-01-06&quot;</span> <span class="string">&quot;2022-01-11&quot;</span> <span class="string">&quot;2022-01-16&quot;</span> <span class="string">&quot;2022-01-21&quot;</span> <span class="string">&quot;2022-01-26&quot;</span> <span class="string">&quot;2022-01-31&quot;</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">8</span><span class="punctuation">]</span> <span class="string">&quot;2022-02-05&quot;</span> <span class="string">&quot;2022-02-10&quot;</span> <span class="string">&quot;2022-02-15&quot;</span> <span class="string">&quot;2022-02-20&quot;</span> <span class="string">&quot;2022-02-25&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成随机数</span></span><br><span class="line">runif<span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span> <span class="built_in">min</span> <span class="operator">=</span> <span class="number">0</span><span class="punctuation">,</span> <span class="built_in">max</span> <span class="operator">=</span> <span class="number">10</span><span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">9.0326531</span> <span class="number">0.5515827</span> <span class="number">6.8552402</span> <span class="number">0.8496375</span> <span class="number">7.1430260</span> <span class="number">5.6753642</span> <span class="number">9.7609197</span> <span class="number">7.2243469</span> <span class="number">5.2854405</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">10</span><span class="punctuation">]</span> <span class="number">7.4681394</span></span><br><span class="line"></span><br><span class="line">sales <span class="operator">&lt;-</span> <span class="built_in">round</span><span class="punctuation">(</span>runif<span class="punctuation">(</span><span class="number">48</span><span class="punctuation">,</span> <span class="built_in">min</span> <span class="operator">=</span> <span class="number">50</span><span class="punctuation">,</span> <span class="built_in">max</span> <span class="operator">=</span> <span class="number">100</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">)</span></span><br><span class="line">sales</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">98</span> <span class="number">96</span> <span class="number">77</span> <span class="number">51</span> <span class="number">55</span> <span class="number">54</span> <span class="number">80</span> <span class="number">71</span> <span class="number">59</span> <span class="number">65</span> <span class="number">70</span> <span class="number">81</span> <span class="number">54</span> <span class="number">75</span> <span class="number">64</span> <span class="number">99</span> <span class="number">74</span> <span class="number">58</span> <span class="number">89</span> <span class="number">93</span> <span class="number">78</span> <span class="number">80</span> <span class="number">83</span> <span class="number">71</span> <span class="number">53</span> <span class="number">99</span> <span class="number">69</span> <span class="number">64</span> <span class="number">91</span> <span class="number">94</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">31</span><span class="punctuation">]</span> <span class="number">72</span> <span class="number">54</span> <span class="number">85</span> <span class="number">83</span> <span class="number">58</span> <span class="number">74</span> <span class="number">55</span> <span class="number">76</span> <span class="number">54</span> <span class="number">57</span> <span class="number">87</span> <span class="number">79</span> <span class="number">83</span> <span class="number">72</span> <span class="number">54</span> <span class="number">87</span> <span class="number">96</span> <span class="number">61</span></span><br><span class="line"></span><br><span class="line">ts<span class="punctuation">(</span>sales<span class="punctuation">,</span> start <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">2022</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">,</span> end <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">2022</span><span class="punctuation">,</span> <span class="number">12</span><span class="punctuation">)</span><span class="punctuation">,</span> frequency <span class="operator">=</span> <span class="number">12</span><span class="punctuation">)</span> <span class="comment"># 生成时间序列</span></span><br><span class="line">     Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span><br><span class="line"><span class="number">2022</span>  <span class="number">98</span>  <span class="number">96</span>  <span class="number">77</span>  <span class="number">51</span>  <span class="number">55</span>  <span class="number">54</span>  <span class="number">80</span>  <span class="number">71</span>  <span class="number">59</span>  <span class="number">65</span>  <span class="number">70</span>  <span class="number">81</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># frequency：1表示按年，12表示按月份，4表示按季度</span></span><br><span class="line">ts<span class="punctuation">(</span>sales<span class="punctuation">,</span> start <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">2022</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">,</span> end <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">2025</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">)</span><span class="punctuation">,</span> frequency <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line">Time Series<span class="operator">:</span></span><br><span class="line">Start <span class="operator">=</span> <span class="number">2022</span> </span><br><span class="line">End <span class="operator">=</span> <span class="number">2025</span> </span><br><span class="line">Frequency <span class="operator">=</span> <span class="number">1</span> </span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">98</span> <span class="number">96</span> <span class="number">77</span> <span class="number">51</span></span><br><span class="line">ts<span class="punctuation">(</span>sales<span class="punctuation">,</span> start <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">2022</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">,</span> end <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">2023</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">)</span><span class="punctuation">,</span> frequency <span class="operator">=</span> <span class="number">12</span><span class="punctuation">)</span></span><br><span class="line">     Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span><br><span class="line"><span class="number">2022</span>  <span class="number">98</span>  <span class="number">96</span>  <span class="number">77</span>  <span class="number">51</span>  <span class="number">55</span>  <span class="number">54</span>  <span class="number">80</span>  <span class="number">71</span>  <span class="number">59</span>  <span class="number">65</span>  <span class="number">70</span>  <span class="number">81</span></span><br><span class="line"><span class="number">2023</span>  <span class="number">54</span>                                            </span><br><span class="line">ts<span class="punctuation">(</span>sales<span class="punctuation">,</span> start <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">2022</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">,</span> end <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">2023</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">)</span><span class="punctuation">,</span> frequency <span class="operator">=</span> <span class="number">4</span><span class="punctuation">)</span></span><br><span class="line">     Qtr1 Qtr2 Qtr3 Qtr4</span><br><span class="line"><span class="number">2022</span>   <span class="number">98</span>   <span class="number">96</span>   <span class="number">77</span>   <span class="number">51</span></span><br><span class="line"><span class="number">2023</span>   <span class="number">55</span> </span><br></pre></td></tr></table></figure><h2 id="数据处理">数据处理</h2><h3 id="数据获取">数据获取</h3><p>获取数据的途径：</p><ol><li>键盘直接敲入</li><li>读取存储在外部文件中已预处理好的数据</li><li>访问数据库系统</li></ol><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过键盘敲入</span></span><br><span class="line">patientID <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">)</span></span><br><span class="line">admdate <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;10/15/2009&quot;</span><span class="punctuation">,</span> <span class="string">&quot;11/01/2009&quot;</span><span class="punctuation">,</span> <span class="string">&quot;10/21/2009&quot;</span><span class="punctuation">,</span> <span class="string">&quot;10/28/2009&quot;</span><span class="punctuation">)</span></span><br><span class="line">age <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">25</span><span class="punctuation">,</span> <span class="number">34</span><span class="punctuation">,</span> <span class="number">28</span><span class="punctuation">,</span> <span class="number">52</span><span class="punctuation">)</span></span><br><span class="line">diabetes <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;Type1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Type2&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Type1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Type1&quot;</span><span class="punctuation">)</span></span><br><span class="line">status <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;Poor&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Improved&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Excellent&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Poor&quot;</span><span class="punctuation">)</span></span><br><span class="line">data <span class="operator">&lt;-</span> data.frame<span class="punctuation">(</span>patientID<span class="punctuation">,</span> age<span class="punctuation">,</span> diabetes<span class="punctuation">,</span> status<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或通过编辑器输入，需先设置变量，否则数据无法保存</span></span><br><span class="line">data2 <span class="operator">&lt;-</span> data.frame<span class="punctuation">(</span>patientID<span class="operator">=</span>character<span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span> admdate<span class="operator">=</span>character<span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span> age<span class="operator">=</span>numeric<span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span> diabetes<span class="operator">=</span>character<span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span> status<span class="operator">=</span>character<span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">data2 <span class="operator">&lt;-</span> edit<span class="punctuation">(</span>data2<span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 或fix()函数修改，不用再赋值</span></span><br><span class="line">fix<span class="punctuation">(</span>data2<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 访问数据库系统</span></span><br><span class="line">install.packages<span class="punctuation">(</span><span class="string">&quot;RODBC&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h3 id="文件读取">文件读取</h3><p>纯文本文件<code>.csv .txt</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">read.table<span class="punctuation">(</span><span class="string">&#x27;/home/lah/Desktop/R_DATA/input.txt&#x27;</span><span class="punctuation">)</span></span><br><span class="line">    Ozone Solar.R Wind Temp Month Day</span><br><span class="line"><span class="number">1</span>      <span class="number">41</span>     <span class="number">190</span>  <span class="number">7.4</span>   <span class="number">67</span>     <span class="number">5</span>   <span class="number">1</span></span><br><span class="line"><span class="number">2</span>      <span class="number">36</span>     <span class="number">118</span>  <span class="number">8.0</span>   <span class="number">72</span>     <span class="number">5</span>   <span class="number">2</span></span><br><span class="line"><span class="number">3</span>      <span class="number">12</span>     <span class="number">149</span> <span class="number">12.6</span>   <span class="number">74</span>     <span class="number">5</span>   <span class="number">3</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认空格分隔符</span></span><br><span class="line">x <span class="operator">&lt;-</span> read.table<span class="punctuation">(</span><span class="string">&#x27;/home/lah/Desktop/R_DATA/input.csv&#x27;</span><span class="punctuation">)</span></span><br><span class="line">x</span><br><span class="line">                    V1                                                                  V2</span><br><span class="line"><span class="number">1</span>                      <span class="punctuation">,</span><span class="string">&quot;mpg&quot;</span><span class="punctuation">,</span><span class="string">&quot;cyl&quot;</span><span class="punctuation">,</span><span class="string">&quot;disp&quot;</span><span class="punctuation">,</span><span class="string">&quot;hp&quot;</span><span class="punctuation">,</span><span class="string">&quot;drat&quot;</span><span class="punctuation">,</span><span class="string">&quot;wt&quot;</span><span class="punctuation">,</span><span class="string">&quot;qsec&quot;</span><span class="punctuation">,</span><span class="string">&quot;vs&quot;</span><span class="punctuation">,</span><span class="string">&quot;am&quot;</span><span class="punctuation">,</span><span class="string">&quot;gear&quot;</span><span class="punctuation">,</span><span class="string">&quot;carb&quot;</span></span><br><span class="line"><span class="number">2</span>            Mazda RX4                                <span class="punctuation">,</span><span class="number">21</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">,</span><span class="number">160</span><span class="punctuation">,</span><span class="number">110</span><span class="punctuation">,</span><span class="number">3.9</span><span class="punctuation">,</span><span class="number">2.62</span><span class="punctuation">,</span><span class="number">16.46</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span><span class="number">4</span></span><br><span class="line"><span class="number">3</span>        Mazda RX4 Wag                               <span class="punctuation">,</span><span class="number">21</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">,</span><span class="number">160</span><span class="punctuation">,</span><span class="number">110</span><span class="punctuation">,</span><span class="number">3.9</span><span class="punctuation">,</span><span class="number">2.875</span><span class="punctuation">,</span><span class="number">17.02</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span><span class="number">4</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">x <span class="operator">&lt;-</span> read.table<span class="punctuation">(</span><span class="string">&#x27;/home/lah/Desktop/R_DATA/input.csv&#x27;</span><span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&#x27;,&#x27;</span><span class="punctuation">)</span></span><br><span class="line">head<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">                 V1   V2  V3   V4  V5   V6    V7    V8 V9 V10  V11  V12</span><br><span class="line"><span class="number">1</span>                    mpg cyl disp  hp drat    wt  qsec vs  am gear carb</span><br><span class="line"><span class="number">2</span>         Mazda RX4   <span class="number">21</span>   <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span>  <span class="number">3.9</span>  <span class="number">2.62</span> <span class="number">16.46</span>  <span class="number">0</span>   <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line"><span class="number">3</span>     Mazda RX4 Wag   <span class="number">21</span>   <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span>  <span class="number">3.9</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>   <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">x <span class="operator">&lt;-</span> read.table<span class="punctuation">(</span><span class="string">&#x27;/home/lah/Desktop/R_DATA/input.csv&#x27;</span><span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&#x27;,&#x27;</span><span class="punctuation">,</span> header <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">,</span> row.names <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line">head<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">                   mpg cyl disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Mazda RX4         <span class="number">21.0</span>   <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Mazda RX4 Wag     <span class="number">21.0</span>   <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Datsun <span class="number">710</span>        <span class="number">22.8</span>   <span class="number">4</span>  <span class="number">108</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">Hornet <span class="number">4</span> Drive    <span class="number">21.4</span>   <span class="number">6</span>  <span class="number">258</span> <span class="number">110</span> <span class="number">3.08</span> <span class="number">3.215</span> <span class="number">19.44</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Hornet Sportabout <span class="number">18.7</span>   <span class="number">8</span>  <span class="number">360</span> <span class="number">175</span> <span class="number">3.15</span> <span class="number">3.440</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">2</span></span><br><span class="line">Valiant           <span class="number">18.1</span>   <span class="number">6</span>  <span class="number">225</span> <span class="number">105</span> <span class="number">2.76</span> <span class="number">3.460</span> <span class="number">20.22</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可跳过前多少行</span></span><br><span class="line">x <span class="operator">&lt;-</span> read.table<span class="punctuation">(</span><span class="string">&#x27;/home/lah/Desktop/R_DATA/input.csv&#x27;</span><span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&#x27;,&#x27;</span><span class="punctuation">,</span> skip <span class="operator">=</span> <span class="number">30</span><span class="punctuation">)</span></span><br><span class="line">x</span><br><span class="line">             V1   V2 V3  V4  V5   V6   V7   V8 V9 V10 V11 V12</span><br><span class="line"><span class="number">1</span>  Ferrari Dino <span class="number">19.7</span>  <span class="number">6</span> <span class="number">145</span> <span class="number">175</span> <span class="number">3.62</span> <span class="number">2.77</span> <span class="number">15.5</span>  <span class="number">0</span>   <span class="number">1</span>   <span class="number">5</span>   <span class="number">6</span></span><br><span class="line"><span class="number">2</span> Maserati Bora <span class="number">15.0</span>  <span class="number">8</span> <span class="number">301</span> <span class="number">335</span> <span class="number">3.54</span> <span class="number">3.57</span> <span class="number">14.6</span>  <span class="number">0</span>   <span class="number">1</span>   <span class="number">5</span>   <span class="number">8</span></span><br><span class="line"><span class="number">3</span>    Volvo <span class="number">142</span>E <span class="number">21.4</span>  <span class="number">4</span> <span class="number">121</span> <span class="number">109</span> <span class="number">4.11</span> <span class="number">2.78</span> <span class="number">18.6</span>  <span class="number">1</span>   <span class="number">1</span>   <span class="number">4</span>   <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只读取多少行</span></span><br><span class="line">x <span class="operator">&lt;-</span> read.table<span class="punctuation">(</span><span class="string">&#x27;/home/lah/Desktop/R_DATA/input.csv&#x27;</span><span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&#x27;,&#x27;</span><span class="punctuation">,</span> nrows <span class="operator">=</span> <span class="number">2</span><span class="punctuation">)</span></span><br><span class="line">x</span><br><span class="line">         V1  V2  V3   V4  V5   V6   V7    V8 V9 V10  V11  V12</span><br><span class="line"><span class="number">1</span>           mpg cyl disp  hp drat   wt  qsec vs  am gear carb</span><br><span class="line"><span class="number">2</span> Mazda RX4  <span class="number">21</span>   <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span>  <span class="number">3.9</span> <span class="number">2.62</span> <span class="number">16.46</span>  <span class="number">0</span>   <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line"></span><br><span class="line">read.fwf<span class="punctuation">(</span><span class="string">&#x27;/home/lah/Desktop/R_DATA/fwf.txt&#x27;</span><span class="punctuation">,</span>widths <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">11</span><span class="punctuation">,</span><span class="number">11</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># read.table()的简化版本</span></span><br><span class="line">read.csv<span class="punctuation">(</span>file<span class="punctuation">,</span> header <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&quot;,&quot;</span><span class="punctuation">,</span> <span class="built_in">quote</span> <span class="operator">=</span> <span class="string">&quot;\&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">         dec <span class="operator">=</span> <span class="string">&quot;.&quot;</span><span class="punctuation">,</span> fill <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span> comment.char <span class="operator">=</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span> ...<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">read.csv2<span class="punctuation">(</span>file<span class="punctuation">,</span> header <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&quot;;&quot;</span><span class="punctuation">,</span> <span class="built_in">quote</span> <span class="operator">=</span> <span class="string">&quot;\&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">          dec <span class="operator">=</span> <span class="string">&quot;,&quot;</span><span class="punctuation">,</span> fill <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span> comment.char <span class="operator">=</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span> ...<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">read.delim<span class="punctuation">(</span>file<span class="punctuation">,</span> header <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&quot;\t&quot;</span><span class="punctuation">,</span> <span class="built_in">quote</span> <span class="operator">=</span> <span class="string">&quot;\&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">           dec <span class="operator">=</span> <span class="string">&quot;.&quot;</span><span class="punctuation">,</span> fill <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span> comment.char <span class="operator">=</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span> ...<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">read.delim2<span class="punctuation">(</span>file<span class="punctuation">,</span> header <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&quot;\t&quot;</span><span class="punctuation">,</span> <span class="built_in">quote</span> <span class="operator">=</span> <span class="string">&quot;\&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            dec <span class="operator">=</span> <span class="string">&quot;,&quot;</span><span class="punctuation">,</span> fill <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span> comment.char <span class="operator">=</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span> ...<span class="punctuation">)</span></span><br></pre></td></tr></table></figure><p>网页表格，剪贴板，压缩文件</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">x <span class="operator">&lt;-</span> read.table<span class="punctuation">(</span><span class="string">&quot;https://codeload.github.com/mperdeck/LINQtoCSV/zip/master&quot;</span><span class="punctuation">,</span> header <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">library<span class="punctuation">(</span>XML<span class="punctuation">)</span></span><br><span class="line">readHTMLTable<span class="punctuation">(</span><span class="string">&quot;https://en.wikipedia.org/wiki/World_population&quot;</span><span class="punctuation">,</span> which<span class="operator">=</span><span class="number">3</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 搜索相关R包</span></span><br><span class="line">RSiteSearch<span class="punctuation">(</span><span class="string">&#x27;manhattan&#x27;</span><span class="punctuation">)</span></span><br><span class="line">A search query has been submitted to http<span class="operator">:</span><span class="operator">/</span><span class="operator">/</span>search.r<span class="operator">-</span>project.org</span><br><span class="line">计算结果应很快就在瀏覽器里打开</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取剪贴板</span></span><br><span class="line">read.table<span class="punctuation">(</span><span class="string">&#x27;clipboard&#x27;</span><span class="punctuation">,</span> header <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接读取压缩文件，不用解压</span></span><br><span class="line">read.table<span class="punctuation">(</span>gzfile<span class="punctuation">(</span><span class="string">&#x27;/home/lah/Desktop/R_DATA/newfile.txt.gz&#x27;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Mazda RX4           <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Mazda RX4 Wag       <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Datsun <span class="number">710</span>          <span class="number">22.8</span>   <span class="number">4</span> <span class="number">108.0</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><code>scan()</code>和<code>readLines()</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">readLines<span class="punctuation">(</span><span class="string">&#x27;/home/lah/Desktop/R_DATA/newfile.txt&#x27;</span><span class="punctuation">,</span> n<span class="operator">=</span><span class="number">4</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;\&quot;Ozone\&quot; \&quot;Solar.R\&quot; \&quot;Wind\&quot; \&quot;Temp\&quot; \&quot;Month\&quot; \&quot;Day\&quot;&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">]</span> <span class="string">&quot;\&quot;1\&quot; 41 190 7.4 67 5 1&quot;</span>                                  </span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">]</span> <span class="string">&quot;\&quot;2\&quot; 36 118 8 72 5 2&quot;</span>                                    </span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">]</span> <span class="string">&quot;\&quot;3\&quot; 12 149 12.6 74 5 3&quot;</span> </span><br><span class="line"></span><br><span class="line">readLines<span class="punctuation">(</span><span class="string">&#x27;/home/lah/Desktop/R_DATA/scan.txt&#x27;</span><span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;one\t2\t3\tfour\t5\t6&quot;</span> <span class="string">&quot;one\t2\t3\tfour\t5\t6&quot;</span> <span class="string">&quot;one\t2\t3\tfour\t5\t6&quot;</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">4</span><span class="punctuation">]</span> <span class="string">&quot;one\t2\t3\tfour\t5\t6&quot;</span> <span class="string">&quot;one\t2\t3\tfour\t5\t6&quot;</span> <span class="string">&quot;one\t2\t3\tfour\t5\t6&quot;</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">7</span><span class="punctuation">]</span> <span class="string">&quot;one\t2\t3\tfour\t5\t6&quot;</span> <span class="string">&quot;one\t2\t3\tfour\t5\t6&quot;</span> <span class="string">&quot;one\t2\t3\tfour\t5\t6&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">10</span><span class="punctuation">]</span> <span class="string">&quot;one\t2\t3\tfour\t5\t6&quot;</span> <span class="string">&quot;&quot;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># scan()按特定方式扫描文件</span></span><br><span class="line">read.table<span class="punctuation">(</span><span class="string">&#x27;/home/lah/Desktop/R_DATA/scan.txt&#x27;</span><span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&#x27;\t&#x27;</span><span class="punctuation">)</span></span><br><span class="line">    V1 V2 V3   V4 V5 V6</span><br><span class="line"><span class="number">1</span>  one  <span class="number">2</span>  <span class="number">3</span> four  <span class="number">5</span>  <span class="number">6</span></span><br><span class="line"><span class="number">2</span>  one  <span class="number">2</span>  <span class="number">3</span> four  <span class="number">5</span>  <span class="number">6</span></span><br><span class="line"><span class="number">3</span>  one  <span class="number">2</span>  <span class="number">3</span> four  <span class="number">5</span>  <span class="number">6</span></span><br><span class="line"><span class="number">4</span>  one  <span class="number">2</span>  <span class="number">3</span> four  <span class="number">5</span>  <span class="number">6</span></span><br><span class="line"><span class="number">5</span>  one  <span class="number">2</span>  <span class="number">3</span> four  <span class="number">5</span>  <span class="number">6</span></span><br><span class="line"><span class="number">6</span>  one  <span class="number">2</span>  <span class="number">3</span> four  <span class="number">5</span>  <span class="number">6</span></span><br><span class="line"><span class="number">7</span>  one  <span class="number">2</span>  <span class="number">3</span> four  <span class="number">5</span>  <span class="number">6</span></span><br><span class="line"><span class="number">8</span>  one  <span class="number">2</span>  <span class="number">3</span> four  <span class="number">5</span>  <span class="number">6</span></span><br><span class="line"><span class="number">9</span>  one  <span class="number">2</span>  <span class="number">3</span> four  <span class="number">5</span>  <span class="number">6</span></span><br><span class="line"><span class="number">10</span> one  <span class="number">2</span>  <span class="number">3</span> four  <span class="number">5</span>  <span class="number">6</span></span><br><span class="line"></span><br><span class="line">scan<span class="punctuation">(</span><span class="string">&#x27;/home/lah/Desktop/R_DATA/scan.txt&#x27;</span><span class="punctuation">,</span> what <span class="operator">=</span> <span class="built_in">list</span><span class="punctuation">(</span>character<span class="punctuation">(</span><span class="number">3</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">Read <span class="number">60</span> records</span><br><span class="line"><span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;one&quot;</span>  <span class="string">&quot;2&quot;</span>    <span class="string">&quot;3&quot;</span>    <span class="string">&quot;four&quot;</span> <span class="string">&quot;5&quot;</span>    <span class="string">&quot;6&quot;</span>    <span class="string">&quot;one&quot;</span>  <span class="string">&quot;2&quot;</span>    <span class="string">&quot;3&quot;</span>    <span class="string">&quot;four&quot;</span> <span class="string">&quot;5&quot;</span>    <span class="string">&quot;6&quot;</span>    <span class="string">&quot;one&quot;</span> </span><br><span class="line"><span class="punctuation">[</span><span class="number">14</span><span class="punctuation">]</span> <span class="string">&quot;2&quot;</span>    <span class="string">&quot;3&quot;</span>    <span class="string">&quot;four&quot;</span> <span class="string">&quot;5&quot;</span>    <span class="string">&quot;6&quot;</span>    <span class="string">&quot;one&quot;</span>  <span class="string">&quot;2&quot;</span>    <span class="string">&quot;3&quot;</span>    <span class="string">&quot;four&quot;</span> <span class="string">&quot;5&quot;</span>    <span class="string">&quot;6&quot;</span>    <span class="string">&quot;one&quot;</span>  <span class="string">&quot;2&quot;</span>   </span><br><span class="line"><span class="punctuation">[</span><span class="number">27</span><span class="punctuation">]</span> <span class="string">&quot;3&quot;</span>    <span class="string">&quot;four&quot;</span> <span class="string">&quot;5&quot;</span>    <span class="string">&quot;6&quot;</span>    <span class="string">&quot;one&quot;</span>  <span class="string">&quot;2&quot;</span>    <span class="string">&quot;3&quot;</span>    <span class="string">&quot;four&quot;</span> <span class="string">&quot;5&quot;</span>    <span class="string">&quot;6&quot;</span>    <span class="string">&quot;one&quot;</span>  <span class="string">&quot;2&quot;</span>    <span class="string">&quot;3&quot;</span>   </span><br><span class="line"><span class="punctuation">[</span><span class="number">40</span><span class="punctuation">]</span> <span class="string">&quot;four&quot;</span> <span class="string">&quot;5&quot;</span>    <span class="string">&quot;6&quot;</span>    <span class="string">&quot;one&quot;</span>  <span class="string">&quot;2&quot;</span>    <span class="string">&quot;3&quot;</span>    <span class="string">&quot;four&quot;</span> <span class="string">&quot;5&quot;</span>    <span class="string">&quot;6&quot;</span>    <span class="string">&quot;one&quot;</span>  <span class="string">&quot;2&quot;</span>    <span class="string">&quot;3&quot;</span>    <span class="string">&quot;four&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">53</span><span class="punctuation">]</span> <span class="string">&quot;5&quot;</span>    <span class="string">&quot;6&quot;</span>    <span class="string">&quot;one&quot;</span>  <span class="string">&quot;2&quot;</span>    <span class="string">&quot;3&quot;</span>    <span class="string">&quot;four&quot;</span> <span class="string">&quot;5&quot;</span>    <span class="string">&quot;6&quot;</span> </span><br><span class="line"></span><br><span class="line">scan<span class="punctuation">(</span><span class="string">&#x27;/home/lah/Desktop/R_DATA/scan.txt&#x27;</span><span class="punctuation">,</span> what <span class="operator">=</span> <span class="built_in">list</span><span class="punctuation">(</span>character<span class="punctuation">(</span><span class="number">3</span><span class="punctuation">)</span><span class="punctuation">,</span> numeric<span class="punctuation">(</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">,</span> numeric<span class="punctuation">(</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">Read <span class="number">20</span> records</span><br><span class="line"><span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;one&quot;</span>  <span class="string">&quot;four&quot;</span> <span class="string">&quot;one&quot;</span>  <span class="string">&quot;four&quot;</span> <span class="string">&quot;one&quot;</span>  <span class="string">&quot;four&quot;</span> <span class="string">&quot;one&quot;</span>  <span class="string">&quot;four&quot;</span> <span class="string">&quot;one&quot;</span>  <span class="string">&quot;four&quot;</span> <span class="string">&quot;one&quot;</span>  <span class="string">&quot;four&quot;</span> <span class="string">&quot;one&quot;</span> </span><br><span class="line"><span class="punctuation">[</span><span class="number">14</span><span class="punctuation">]</span> <span class="string">&quot;four&quot;</span> <span class="string">&quot;one&quot;</span>  <span class="string">&quot;four&quot;</span> <span class="string">&quot;one&quot;</span>  <span class="string">&quot;four&quot;</span> <span class="string">&quot;one&quot;</span>  <span class="string">&quot;four&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span> <span class="number">5</span> <span class="number">2</span> <span class="number">5</span> <span class="number">2</span> <span class="number">5</span> <span class="number">2</span> <span class="number">5</span> <span class="number">2</span> <span class="number">5</span> <span class="number">2</span> <span class="number">5</span> <span class="number">2</span> <span class="number">5</span> <span class="number">2</span> <span class="number">5</span> <span class="number">2</span> <span class="number">5</span> <span class="number">2</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">3</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">3</span> <span class="number">6</span> <span class="number">3</span> <span class="number">6</span> <span class="number">3</span> <span class="number">6</span> <span class="number">3</span> <span class="number">6</span> <span class="number">3</span> <span class="number">6</span> <span class="number">3</span> <span class="number">6</span> <span class="number">3</span> <span class="number">6</span> <span class="number">3</span> <span class="number">6</span> <span class="number">3</span> <span class="number">6</span> <span class="number">3</span> <span class="number">6</span></span><br><span class="line"></span><br><span class="line">scan<span class="punctuation">(</span><span class="string">&#x27;/home/lah/Desktop/R_DATA/scan.txt&#x27;</span><span class="punctuation">,</span> what <span class="operator">=</span> <span class="built_in">list</span><span class="punctuation">(</span>A<span class="operator">=</span>character<span class="punctuation">(</span><span class="number">3</span><span class="punctuation">)</span><span class="punctuation">,</span> B<span class="operator">=</span>numeric<span class="punctuation">(</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">,</span> C<span class="operator">=</span>numeric<span class="punctuation">(</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">,</span> D<span class="operator">=</span>character<span class="punctuation">(</span><span class="number">3</span><span class="punctuation">)</span><span class="punctuation">,</span> E<span class="operator">=</span>numeric<span class="punctuation">(</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="built_in">F</span><span class="operator">=</span>numeric<span class="punctuation">(</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">Read <span class="number">10</span> records</span><br><span class="line"><span class="operator">$</span>A</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;one&quot;</span> <span class="string">&quot;one&quot;</span> <span class="string">&quot;one&quot;</span> <span class="string">&quot;one&quot;</span> <span class="string">&quot;one&quot;</span> <span class="string">&quot;one&quot;</span> <span class="string">&quot;one&quot;</span> <span class="string">&quot;one&quot;</span> <span class="string">&quot;one&quot;</span> <span class="string">&quot;one&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>B</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>C</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">3</span> <span class="number">3</span> <span class="number">3</span> <span class="number">3</span> <span class="number">3</span> <span class="number">3</span> <span class="number">3</span> <span class="number">3</span> <span class="number">3</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>D</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;four&quot;</span> <span class="string">&quot;four&quot;</span> <span class="string">&quot;four&quot;</span> <span class="string">&quot;four&quot;</span> <span class="string">&quot;four&quot;</span> <span class="string">&quot;four&quot;</span> <span class="string">&quot;four&quot;</span> <span class="string">&quot;four&quot;</span> <span class="string">&quot;four&quot;</span> <span class="string">&quot;four&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>E</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">5</span> <span class="number">5</span> <span class="number">5</span> <span class="number">5</span> <span class="number">5</span> <span class="number">5</span> <span class="number">5</span> <span class="number">5</span> <span class="number">5</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span><span class="built_in">F</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">6</span> <span class="number">6</span> <span class="number">6</span> <span class="number">6</span> <span class="number">6</span> <span class="number">6</span> <span class="number">6</span> <span class="number">6</span> <span class="number">6</span> <span class="number">6</span></span><br></pre></td></tr></table></figure><h3 id="文件写入">文件写入</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># write()直接写入向量或矩阵</span></span><br><span class="line">write<span class="punctuation">(</span>x<span class="punctuation">,</span> file <span class="operator">=</span> <span class="string">&#x27;2.txt&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 一行写入的个数</span></span><br><span class="line">write<span class="punctuation">(</span>x<span class="punctuation">,</span> file <span class="operator">=</span> <span class="string">&#x27;2.txt&#x27;</span><span class="punctuation">,</span> ncolumns <span class="operator">=</span> <span class="number">10</span><span class="punctuation">)</span></span><br><span class="line">write<span class="punctuation">(</span>x<span class="punctuation">,</span> file <span class="operator">=</span> <span class="string">&#x27;2.txt&#x27;</span><span class="punctuation">,</span> ncolumns <span class="operator">=</span> <span class="number">10</span><span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&#x27;\t&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># write.table()写入数据框或矩阵</span></span><br><span class="line">write.table<span class="punctuation">(</span>state.x77<span class="punctuation">,</span> <span class="string">&#x27;2.txt&#x27;</span><span class="punctuation">)</span></span><br><span class="line">write.table<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> <span class="string">&#x27;2.txt&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置分隔符</span></span><br><span class="line">write.table<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> <span class="string">&#x27;2.csv&#x27;</span><span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&#x27;,&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 追加</span></span><br><span class="line">write.table<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> <span class="string">&#x27;2.csv&#x27;</span><span class="punctuation">,</span> append <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串不加引号</span></span><br><span class="line">write.table<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> <span class="string">&#x27;2.csv&#x27;</span><span class="punctuation">,</span> <span class="built_in">quote</span> <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 去除行名或列名</span></span><br><span class="line">write.table<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> <span class="string">&#x27;2.csv&#x27;</span><span class="punctuation">,</span> row.names <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line">write.table<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> <span class="string">&#x27;2.csv&#x27;</span><span class="punctuation">,</span> col.names <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接写成压缩文件</span></span><br><span class="line">write.table<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> gzfile<span class="punctuation">(</span><span class="string">&#x27;1.txt.gz&#x27;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 写入或读取其他统计软件格式的文件，用foreign包</span></span><br><span class="line">library<span class="punctuation">(</span>foreign<span class="punctuation">)</span></span><br><span class="line">help<span class="punctuation">(</span>package <span class="operator">=</span> <span class="string">&#x27;foreign&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h3 id="Excel文件读写">Excel文件读写</h3><p><code>XLConnect</code>包（需Java：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_36350581/article/details/114214756%EF%BC%89%E8%BF%90%E8%A1%8C%E5%A4%B1%E8%B4%A5">https://blog.csdn.net/weixin_36350581/article/details/114214756）运行失败</a></p><p><code>XLSX</code>包 运行失败</p><p><code>openxlsx</code>包</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取，默认读取第一个sheet</span></span><br><span class="line">read.xlsx<span class="punctuation">(</span><span class="string">&#x27;writeXLSX2.xlsx&#x27;</span><span class="punctuation">)</span></span><br><span class="line">read.xlsx<span class="punctuation">(</span><span class="string">&#x27;writeXLSX2.xlsx&#x27;</span><span class="punctuation">,</span> sheet <span class="operator">=</span> <span class="string">&#x27;state info&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从某行开始读</span></span><br><span class="line">read.xlsx<span class="punctuation">(</span><span class="string">&#x27;writeXLSX2.xlsx&#x27;</span><span class="punctuation">,</span> startRow <span class="operator">=</span> <span class="number">48</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 是否包括行名和列名</span></span><br><span class="line">read.xlsx<span class="punctuation">(</span><span class="string">&#x27;writeXLSX2.xlsx&#x27;</span><span class="punctuation">,</span> colNames <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line">read.xlsx<span class="punctuation">(</span><span class="string">&#x27;writeXLSX2.xlsx&#x27;</span><span class="punctuation">,</span> rowNames <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 是否跳过空行和空列</span></span><br><span class="line">read.xlsx<span class="punctuation">(</span><span class="string">&#x27;writeXLSX2.xlsx&#x27;</span><span class="punctuation">,</span> skipEmptyRows <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line">read.xlsx<span class="punctuation">(</span><span class="string">&#x27;writeXLSX2.xlsx&#x27;</span><span class="punctuation">,</span> skipEmptyCols <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取指定行列数</span></span><br><span class="line">read.xlsx<span class="punctuation">(</span><span class="string">&#x27;writeXLSX2.xlsx&#x27;</span><span class="punctuation">,</span> sheet <span class="operator">=</span> <span class="string">&#x27;test&#x27;</span><span class="punctuation">,</span> cols <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">  A</span><br><span class="line"><span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="number">2</span> <span class="number">2</span></span><br><span class="line"><span class="number">3</span> <span class="number">3</span></span><br><span class="line"><span class="number">4</span> <span class="number">4</span></span><br><span class="line"><span class="number">5</span> <span class="number">5</span></span><br><span class="line"><span class="number">6</span> <span class="number">6</span></span><br><span class="line">read.xlsx<span class="punctuation">(</span><span class="string">&#x27;writeXLSX2.xlsx&#x27;</span><span class="punctuation">,</span> sheet <span class="operator">=</span> <span class="string">&#x27;test&#x27;</span><span class="punctuation">,</span> cols <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">  A B C</span><br><span class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="number">2</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></span><br><span class="line"><span class="number">3</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br><span class="line"><span class="number">4</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span></span><br><span class="line"><span class="number">5</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span></span><br><span class="line"><span class="number">6</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span></span><br><span class="line">read.xlsx<span class="punctuation">(</span><span class="string">&#x27;writeXLSX2.xlsx&#x27;</span><span class="punctuation">,</span> sheet <span class="operator">=</span> <span class="string">&#x27;test&#x27;</span><span class="punctuation">,</span> cols <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">)</span><span class="punctuation">,</span> rows <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">  A B C</span><br><span class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="number">2</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></span><br><span class="line"><span class="number">3</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 写入</span></span><br><span class="line">write.xlsx<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> <span class="string">&#x27;test.xlsx&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 作为表格写入</span></span><br><span class="line">write.xlsx<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> <span class="string">&#x27;test.xlsx&#x27;</span><span class="punctuation">,</span> asTable <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认覆盖写入</span></span><br><span class="line">write.xlsx<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> <span class="string">&#x27;test.xlsx&#x27;</span><span class="punctuation">,</span> overwrite <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line">Error <span class="keyword">in</span> saveWorkbook<span class="punctuation">(</span>wb<span class="punctuation">,</span> file <span class="operator">=</span> file<span class="punctuation">,</span> overwrite <span class="operator">=</span> overwrite<span class="punctuation">)</span> <span class="operator">:</span> </span><br><span class="line">  File already exists<span class="operator">!</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 写入行名或列名</span></span><br><span class="line">write.xlsx<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> file <span class="operator">=</span> <span class="string">&#x27;car.xlsx&#x27;</span><span class="punctuation">,</span> rowNames<span class="operator">=</span><span class="built_in">T</span><span class="punctuation">,</span> colNames<span class="operator">=</span><span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可写入多个data frame到不同的sheet</span></span><br><span class="line">l <span class="operator">&lt;-</span> <span class="built_in">list</span><span class="punctuation">(</span><span class="string">&#x27;Cars Info&#x27;</span> <span class="operator">=</span> mtcars<span class="punctuation">,</span> <span class="string">&#x27;Iris Info&#x27;</span> <span class="operator">=</span> iris<span class="punctuation">,</span> <span class="string">&#x27;State info&#x27;</span> <span class="operator">=</span> data.frame<span class="punctuation">(</span>state.name<span class="punctuation">,</span> state.abb<span class="punctuation">,</span> state.x77<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">write.xlsx<span class="punctuation">(</span>l<span class="punctuation">,</span> <span class="string">&#x27;test.xlsx&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h3 id="R-格式文件读写">R 格式文件读写</h3><p><code>.rds</code>文件可以保存单个R对象</p><p><code>.rdata</code>文件可以保存对个R对象</p><p>存储为R文件有很多优势，特别是对于大数据文件，R会自动压缩处理并包含更多信息。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">head<span class="punctuation">(</span>iris<span class="punctuation">,</span> n <span class="operator">=</span> <span class="number">3</span><span class="punctuation">)</span></span><br><span class="line">  Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span><br><span class="line"><span class="number">1</span>          <span class="number">5.1</span>         <span class="number">3.5</span>          <span class="number">1.4</span>         <span class="number">0.2</span>  setosa</span><br><span class="line"><span class="number">2</span>          <span class="number">4.9</span>         <span class="number">3.0</span>          <span class="number">1.4</span>         <span class="number">0.2</span>  setosa</span><br><span class="line"><span class="number">3</span>          <span class="number">4.7</span>         <span class="number">3.2</span>          <span class="number">1.3</span>         <span class="number">0.2</span>  setosa</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存为rds文件</span></span><br><span class="line">saveRDS<span class="punctuation">(</span>iris<span class="punctuation">,</span> file<span class="operator">=</span><span class="string">&#x27;iris.rds&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取rds文件为一个R对象，交互界面下双击文件即可</span></span><br><span class="line">iris_test <span class="operator">&lt;-</span> readRDS<span class="punctuation">(</span><span class="string">&quot;~/R_learn/R_Data_Structure/iris.rds&quot;</span><span class="punctuation">)</span></span><br><span class="line">iris_test</span><br><span class="line">    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species</span><br><span class="line"><span class="number">1</span>            <span class="number">5.1</span>         <span class="number">3.5</span>          <span class="number">1.4</span>         <span class="number">0.2</span>     setosa</span><br><span class="line"><span class="number">2</span>            <span class="number">4.9</span>         <span class="number">3.0</span>          <span class="number">1.4</span>         <span class="number">0.2</span>     setosa</span><br><span class="line"><span class="number">3</span>            <span class="number">4.7</span>         <span class="number">3.2</span>          <span class="number">1.3</span>         <span class="number">0.2</span>     setosa</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将R对象保存至Rdata文件</span></span><br><span class="line">save<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> iris<span class="punctuation">,</span> iris3<span class="punctuation">,</span> file <span class="operator">=</span> <span class="string">&#x27;test_data.Rdata&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 载入Rdata文件</span></span><br><span class="line"><span class="comment"># 注意如果要载入的R对象名称与现有工作空间内R对象重名，将覆盖</span></span><br><span class="line">load<span class="punctuation">(</span><span class="string">&quot;~/R_learn/R_Data_Structure/test_data.Rdata&quot;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存所有R对象</span></span><br><span class="line">save.image<span class="punctuation">(</span>file <span class="operator">=</span> <span class="string">&#x27;test.Rdata&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h3 id="数据转换">数据转换</h3><h4 id="数据类型转换">数据类型转换</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">head<span class="punctuation">(</span>car， n <span class="operator">=</span> <span class="number">3</span><span class="punctuation">)</span></span><br><span class="line">                     mpg cyl disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line"><span class="number">1</span>         Mazda RX4 <span class="number">21.0</span>   <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line"><span class="number">2</span>     Mazda RX4 Wag <span class="number">21.0</span>   <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line"><span class="number">3</span>        Datsun <span class="number">710</span> <span class="number">22.8</span>   <span class="number">4</span>  <span class="number">108</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># is多在函数编程时作为条件判断</span></span><br><span class="line">is.data.frame<span class="punctuation">(</span>car<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">TRUE</span></span><br><span class="line"><span class="built_in">is.matrix</span><span class="punctuation">(</span>car<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="built_in">is.na</span><span class="punctuation">(</span>car<span class="punctuation">)</span></span><br><span class="line">                      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span><br><span class="line">Mazda RX4           <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span></span><br><span class="line">Mazda RX4 Wag       <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span></span><br><span class="line">Datsun <span class="number">710</span>          <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有is</span></span><br><span class="line">methods<span class="punctuation">(</span>is<span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="built_in">is.array</span>                <span class="built_in">is.atomic</span>               <span class="built_in">is.call</span>                </span><br><span class="line"> <span class="punctuation">[</span><span class="number">4</span><span class="punctuation">]</span> <span class="built_in">is.character</span>            <span class="built_in">is.complex</span>              is.data.frame          </span><br><span class="line"> <span class="punctuation">[</span><span class="number">7</span><span class="punctuation">]</span> <span class="built_in">is.double</span>               is.element              is.empty.model  </span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># as转换数类型</span></span><br><span class="line"><span class="comment"># as并不总是奏效，如数据框无法转换成向量</span></span><br><span class="line">dstate.x77 <span class="operator">&lt;-</span> as.data.frame<span class="punctuation">(</span>state.x77<span class="punctuation">)</span></span><br><span class="line">View<span class="punctuation">(</span>dstate.x77<span class="punctuation">)</span></span><br><span class="line">is.data.frame<span class="punctuation">(</span>dstate.x77<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">TRUE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有as</span></span><br><span class="line">methods<span class="punctuation">(</span>as<span class="punctuation">)</span></span><br><span class="line">  <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> as.array                      as.array.default              <span class="built_in">as.call</span>                      </span><br><span class="line">  <span class="punctuation">[</span><span class="number">4</span><span class="punctuation">]</span> <span class="built_in">as.character</span>                  as.character.condition        as.character.Date            </span><br><span class="line">  <span class="punctuation">[</span><span class="number">7</span><span class="punctuation">]</span> as.character.default          as.character.error            as.character.factor </span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 向量可以很方便地做各种转换</span></span><br><span class="line">a <span class="operator">&lt;-</span> state.abb</span><br><span class="line">head<span class="punctuation">(</span>a<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;AL&quot;</span> <span class="string">&quot;AK&quot;</span> <span class="string">&quot;AZ&quot;</span> <span class="string">&quot;AR&quot;</span> <span class="string">&quot;CA&quot;</span> <span class="string">&quot;CO&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加上维度转换成矩阵</span></span><br><span class="line"><span class="built_in">dim</span><span class="punctuation">(</span>a<span class="punctuation">)</span> <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">)</span></span><br><span class="line">head<span class="punctuation">(</span>a<span class="punctuation">,</span> n <span class="operator">=</span> <span class="number">3</span><span class="punctuation">)</span></span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">7</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">8</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">9</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;AL&quot;</span> <span class="string">&quot;CO&quot;</span> <span class="string">&quot;HI&quot;</span> <span class="string">&quot;KS&quot;</span> <span class="string">&quot;MA&quot;</span> <span class="string">&quot;MT&quot;</span> <span class="string">&quot;NM&quot;</span> <span class="string">&quot;OK&quot;</span> <span class="string">&quot;SD&quot;</span> <span class="string">&quot;VA&quot;</span> </span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;AK&quot;</span> <span class="string">&quot;CT&quot;</span> <span class="string">&quot;ID&quot;</span> <span class="string">&quot;KY&quot;</span> <span class="string">&quot;MI&quot;</span> <span class="string">&quot;NE&quot;</span> <span class="string">&quot;NY&quot;</span> <span class="string">&quot;OR&quot;</span> <span class="string">&quot;TN&quot;</span> <span class="string">&quot;WA&quot;</span> </span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;AZ&quot;</span> <span class="string">&quot;DE&quot;</span> <span class="string">&quot;IL&quot;</span> <span class="string">&quot;LA&quot;</span> <span class="string">&quot;MN&quot;</span> <span class="string">&quot;NV&quot;</span> <span class="string">&quot;NC&quot;</span> <span class="string">&quot;PA&quot;</span> <span class="string">&quot;TX&quot;</span> <span class="string">&quot;WV&quot;</span> </span><br><span class="line">a <span class="operator">&lt;-</span> state.abb</span><br><span class="line"></span><br><span class="line"><span class="comment"># 转换为因子</span></span><br><span class="line">as.factor<span class="punctuation">(</span>a<span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> AL AK AZ AR CA CO CT DE FL GA HI ID IL IN IA KS KY LA ME MD MA MI MN MS MO MT NE NV NH NJ</span><br><span class="line"><span class="punctuation">[</span><span class="number">31</span><span class="punctuation">]</span> NM NY NC ND OH OK OR PA RI SC SD TN TX UT VT VA WA WV WI WY</span><br><span class="line"><span class="number">50</span> Levels<span class="operator">:</span> AK AL AR AZ CA CO CT DE FL GA HI IA ID IL IN KS KY LA MA MD ME MI MN MO MS MT ... WY</span><br><span class="line">as.list<span class="punctuation">(</span>a<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;AL&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;AK&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">3</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;AZ&quot;</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 组成数据框</span></span><br><span class="line">state <span class="operator">&lt;-</span> data.frame<span class="punctuation">(</span>a<span class="punctuation">,</span>state.x77<span class="punctuation">)</span></span><br><span class="line">head<span class="punctuation">(</span>state<span class="punctuation">,</span> n <span class="operator">=</span> <span class="number">3</span><span class="punctuation">)</span></span><br><span class="line">            a Population Income Illiteracy Life.Exp Murder HS.Grad Frost   Area</span><br><span class="line">Alabama    AL       <span class="number">3615</span>   <span class="number">3624</span>        <span class="number">2.1</span>    <span class="number">69.05</span>   <span class="number">15.1</span>    <span class="number">41.3</span>    <span class="number">20</span>  <span class="number">50708</span></span><br><span class="line">Alaska     AK        <span class="number">365</span>   <span class="number">6315</span>        <span class="number">1.5</span>    <span class="number">69.31</span>   <span class="number">11.3</span>    <span class="number">66.7</span>   <span class="number">152</span> <span class="number">566432</span></span><br><span class="line">Arizona    AZ       <span class="number">2212</span>   <span class="number">4530</span>        <span class="number">1.8</span>    <span class="number">70.55</span>    <span class="number">7.8</span>    <span class="number">58.1</span>    <span class="number">15</span> <span class="number">113417</span></span><br><span class="line">state<span class="operator">$</span>Population</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">3615</span>   <span class="number">365</span>  <span class="number">2212</span>  <span class="number">2110</span> <span class="number">21198</span>  <span class="number">2541</span>  <span class="number">3100</span>   <span class="number">579</span>  <span class="number">8277</span>  <span class="number">4931</span>   <span class="number">868</span>   <span class="number">813</span> <span class="number">11197</span>  <span class="number">5313</span>  <span class="number">2861</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">16</span><span class="punctuation">]</span>  <span class="number">2280</span>  <span class="number">3387</span>  <span class="number">3806</span>  <span class="number">1058</span>  <span class="number">4122</span>  <span class="number">5814</span>  <span class="number">9111</span>  <span class="number">3921</span>  <span class="number">2341</span>  <span class="number">4767</span>   <span class="number">746</span>  <span class="number">1544</span>   <span class="number">590</span>   <span class="number">812</span>  <span class="number">7333</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">31</span><span class="punctuation">]</span>  <span class="number">1144</span> <span class="number">18076</span>  <span class="number">5441</span>   <span class="number">637</span> <span class="number">10735</span>  <span class="number">2715</span>  <span class="number">2284</span> <span class="number">11860</span>   <span class="number">931</span>  <span class="number">2816</span>   <span class="number">681</span>  <span class="number">4173</span> <span class="number">12237</span>  <span class="number">1203</span>   <span class="number">472</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">46</span><span class="punctuation">]</span>  <span class="number">4981</span>  <span class="number">3559</span>  <span class="number">1799</span>  <span class="number">4589</span>   <span class="number">376</span></span><br><span class="line"></span><br><span class="line">b <span class="operator">&lt;-</span> state<span class="punctuation">[</span><span class="string">&#x27;California&#x27;</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line">is.data.frame<span class="punctuation">(</span>b<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">TRUE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 不显示名字</span></span><br><span class="line">unname<span class="punctuation">(</span>b<span class="punctuation">)</span></span><br><span class="line">                                                      </span><br><span class="line">California CA <span class="number">21198</span> <span class="number">5114</span> <span class="number">1.1</span> <span class="number">71.71</span> <span class="number">10.3</span> <span class="number">62.6</span> <span class="number">20</span> <span class="number">156361</span></span><br><span class="line">head<span class="punctuation">(</span>b<span class="punctuation">)</span></span><br><span class="line">            a Population Income Illiteracy Life.Exp Murder HS.Grad Frost   Area</span><br><span class="line">California CA      <span class="number">21198</span>   <span class="number">5114</span>        <span class="number">1.1</span>    <span class="number">71.71</span>   <span class="number">10.3</span>    <span class="number">62.6</span>    <span class="number">20</span> <span class="number">156361</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据框转换为向量</span></span><br><span class="line">unlist<span class="punctuation">(</span>b<span class="punctuation">)</span></span><br><span class="line">         a Population     Income Illiteracy   Life.Exp     Murder    HS.Grad      Frost </span><br><span class="line">      <span class="string">&quot;CA&quot;</span>    <span class="string">&quot;21198&quot;</span>     <span class="string">&quot;5114&quot;</span>      <span class="string">&quot;1.1&quot;</span>    <span class="string">&quot;71.71&quot;</span>     <span class="string">&quot;10.3&quot;</span>     <span class="string">&quot;62.6&quot;</span>       <span class="string">&quot;20&quot;</span> </span><br><span class="line">      Area </span><br><span class="line">  <span class="string">&quot;156361&quot;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 这样不能转换</span></span><br><span class="line">as.vector<span class="punctuation">(</span>b<span class="punctuation">)</span></span><br><span class="line">            a Population Income Illiteracy Life.Exp Murder HS.Grad Frost   Area</span><br><span class="line">California CA      <span class="number">21198</span>   <span class="number">5114</span>        <span class="number">1.1</span>    <span class="number">71.71</span>   <span class="number">10.3</span>    <span class="number">62.6</span>    <span class="number">20</span> <span class="number">156361</span></span><br><span class="line"><span class="built_in">c</span> <span class="operator">&lt;-</span> as.vector<span class="punctuation">(</span>b<span class="punctuation">)</span></span><br><span class="line"><span class="built_in">class</span><span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;data.frame&quot;</span></span><br></pre></td></tr></table></figure><h4 id="数据取子集、合并、添加">数据取子集、合并、添加</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 索引</span></span><br><span class="line">state.x77<span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span><span class="number">5</span><span class="punctuation">,</span> <span class="number">1</span><span class="operator">:</span><span class="number">5</span><span class="punctuation">]</span></span><br><span class="line">           Population Income Illiteracy Life Exp Murder</span><br><span class="line">Alabama          <span class="number">3615</span>   <span class="number">3624</span>        <span class="number">2.1</span>    <span class="number">69.05</span>   <span class="number">15.1</span></span><br><span class="line">Alaska            <span class="number">365</span>   <span class="number">6315</span>        <span class="number">1.5</span>    <span class="number">69.31</span>   <span class="number">11.3</span></span><br><span class="line">Arizona          <span class="number">2212</span>   <span class="number">4530</span>        <span class="number">1.8</span>    <span class="number">70.55</span>    <span class="number">7.8</span></span><br><span class="line">Arkansas         <span class="number">2110</span>   <span class="number">3378</span>        <span class="number">1.9</span>    <span class="number">70.66</span>   <span class="number">10.1</span></span><br><span class="line">California      <span class="number">21198</span>   <span class="number">5114</span>        <span class="number">1.1</span>    <span class="number">71.71</span>   <span class="number">10.3</span></span><br><span class="line"></span><br><span class="line">state.x77<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="number">1</span><span class="operator">:</span><span class="number">2</span><span class="punctuation">]</span></span><br><span class="line">        Population Income</span><br><span class="line">Alabama       <span class="number">3615</span>   <span class="number">3624</span></span><br><span class="line">Alaska         <span class="number">365</span>   <span class="number">6315</span></span><br><span class="line">Arizona       <span class="number">2212</span>   <span class="number">4530</span></span><br><span class="line"></span><br><span class="line">state.x77<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">7</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="number">1</span><span class="operator">:</span><span class="number">2</span><span class="punctuation">]</span></span><br><span class="line">            Population Income</span><br><span class="line">Alabama           <span class="number">3615</span>   <span class="number">3624</span></span><br><span class="line">Alaska             <span class="number">365</span>   <span class="number">6315</span></span><br><span class="line">Connecticut       <span class="number">3100</span>   <span class="number">5348</span></span><br><span class="line"></span><br><span class="line">state.x77<span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span><span class="number">3</span><span class="punctuation">,</span> <span class="operator">-</span><span class="number">1</span><span class="operator">:</span><span class="operator">-</span><span class="number">5</span><span class="punctuation">]</span></span><br><span class="line">        HS Grad Frost   Area</span><br><span class="line">Alabama    <span class="number">41.3</span>    <span class="number">20</span>  <span class="number">50708</span></span><br><span class="line">Alaska     <span class="number">66.7</span>   <span class="number">152</span> <span class="number">566432</span></span><br><span class="line">Arizona    <span class="number">58.1</span>    <span class="number">15</span> <span class="number">113417</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 条件索引</span></span><br><span class="line">mtcars<span class="punctuation">[</span>mtcars<span class="operator">$</span>cyl<span class="operator">==</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line">                mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Datsun <span class="number">710</span>     <span class="number">22.8</span>   <span class="number">4</span> <span class="number">108.0</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">Merc <span class="number">240</span>D      <span class="number">24.4</span>   <span class="number">4</span> <span class="number">146.7</span>  <span class="number">62</span> <span class="number">3.69</span> <span class="number">3.190</span> <span class="number">20.00</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">4</span>    <span class="number">2</span></span><br><span class="line">Merc <span class="number">230</span>       <span class="number">22.8</span>   <span class="number">4</span> <span class="number">140.8</span>  <span class="number">95</span> <span class="number">3.92</span> <span class="number">3.150</span> <span class="number">22.90</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">4</span>    <span class="number">2</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">mtcars<span class="punctuation">[</span>mtcars<span class="operator">$</span>mpg<span class="operator">&gt;</span><span class="number">30</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line">                mpg cyl disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Fiat <span class="number">128</span>       <span class="number">32.4</span>   <span class="number">4</span> <span class="number">78.7</span>  <span class="number">66</span> <span class="number">4.08</span> <span class="number">2.200</span> <span class="number">19.47</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">Honda Civic    <span class="number">30.4</span>   <span class="number">4</span> <span class="number">75.7</span>  <span class="number">52</span> <span class="number">4.93</span> <span class="number">1.615</span> <span class="number">18.52</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">2</span></span><br><span class="line">Toyota Corolla <span class="number">33.9</span>   <span class="number">4</span> <span class="number">71.1</span>  <span class="number">65</span> <span class="number">4.22</span> <span class="number">1.835</span> <span class="number">19.90</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">Lotus Europa   <span class="number">30.4</span>   <span class="number">4</span> <span class="number">95.1</span> <span class="number">113</span> <span class="number">3.77</span> <span class="number">1.513</span> <span class="number">16.90</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">5</span>    <span class="number">2</span></span><br><span class="line"></span><br><span class="line">subset<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> mtcars<span class="operator">$</span>mpg<span class="operator">&gt;</span><span class="number">32</span><span class="punctuation">)</span></span><br><span class="line">                mpg cyl disp hp drat    wt  qsec vs am gear carb</span><br><span class="line">Fiat <span class="number">128</span>       <span class="number">32.4</span>   <span class="number">4</span> <span class="number">78.7</span> <span class="number">66</span> <span class="number">4.08</span> <span class="number">2.200</span> <span class="number">19.47</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">Toyota Corolla <span class="number">33.9</span>   <span class="number">4</span> <span class="number">71.1</span> <span class="number">65</span> <span class="number">4.22</span> <span class="number">1.835</span> <span class="number">19.90</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line"></span><br><span class="line">mtcars<span class="punctuation">[</span>mtcars<span class="operator">$</span>mpg<span class="operator">&gt;</span><span class="number">30</span> <span class="operator">&amp;</span> mtcars<span class="operator">$</span>wt<span class="operator">&gt;</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line">          mpg cyl disp hp drat  wt  qsec vs am gear carb</span><br><span class="line">Fiat <span class="number">128</span> <span class="number">32.4</span>   <span class="number">4</span> <span class="number">78.7</span> <span class="number">66</span> <span class="number">4.08</span> <span class="number">2.2</span> <span class="number">19.47</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用subset函数</span></span><br><span class="line">subset<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> mtcars<span class="operator">$</span>mpg<span class="operator">&gt;</span><span class="number">32</span> <span class="operator">&amp;</span> mtcars<span class="operator">$</span>wt<span class="operator">&gt;</span><span class="number">2</span><span class="punctuation">)</span></span><br><span class="line">          mpg cyl disp hp drat  wt  qsec vs am gear carb</span><br><span class="line">Fiat <span class="number">128</span> <span class="number">32.4</span>   <span class="number">4</span> <span class="number">78.7</span> <span class="number">66</span> <span class="number">4.08</span> <span class="number">2.2</span> <span class="number">19.47</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sample函数抽样</span></span><br><span class="line">x <span class="operator">&lt;-</span> 1<span class="operator">:</span><span class="number">100</span></span><br><span class="line">sample<span class="punctuation">(</span>x<span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">46</span> <span class="number">29</span> <span class="number">39</span> <span class="number">20</span> <span class="number">12</span> <span class="number">70</span> <span class="number">66</span> <span class="number">74</span> <span class="number">33</span> <span class="number">94</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 有放回抽样，可以重复</span></span><br><span class="line">sample<span class="punctuation">(</span>x<span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> replace <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">23</span> <span class="number">23</span> <span class="number">22</span> <span class="number">52</span> <span class="number">37</span> <span class="number">20</span> <span class="number">78</span> <span class="number">96</span> <span class="number">34</span> <span class="number">92</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对数据框进行抽样</span></span><br><span class="line">sample<span class="punctuation">(</span>mtcars<span class="operator">$</span>mpg<span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">22.8</span> <span class="number">15.2</span> <span class="number">10.4</span> <span class="number">21.0</span> <span class="number">21.0</span></span><br><span class="line">mtcars<span class="punctuation">[</span>sample<span class="punctuation">(</span>mtcars<span class="operator">$</span>mpg<span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="punctuation">]</span></span><br><span class="line">                    mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Honda Civic        <span class="number">30.4</span>   <span class="number">4</span>  <span class="number">75.7</span>  <span class="number">52</span> <span class="number">4.93</span> <span class="number">1.615</span> <span class="number">18.52</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">2</span></span><br><span class="line">Chrysler Imperial  <span class="number">14.7</span>   <span class="number">8</span> <span class="number">440.0</span> <span class="number">230</span> <span class="number">3.23</span> <span class="number">5.345</span> <span class="number">17.42</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">Toyota Corona      <span class="number">21.5</span>   <span class="number">4</span> <span class="number">120.1</span>  <span class="number">97</span> <span class="number">3.70</span> <span class="number">2.465</span> <span class="number">20.01</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Cadillac Fleetwood <span class="number">10.4</span>   <span class="number">8</span> <span class="number">472.0</span> <span class="number">205</span> <span class="number">2.93</span> <span class="number">5.250</span> <span class="number">17.98</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">Fiat X1<span class="operator">-</span><span class="number">9</span>          <span class="number">27.3</span>   <span class="number">4</span>  <span class="number">79.0</span>  <span class="number">66</span> <span class="number">4.08</span> <span class="number">1.935</span> <span class="number">18.90</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除数据框的某些行和列</span></span><br><span class="line">mtcars<span class="operator">$</span>mpg <span class="operator">&lt;-</span> <span class="literal">NULL</span></span><br><span class="line">head<span class="punctuation">(</span>mtcars<span class="punctuation">)</span></span><br><span class="line">                  cyl disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Mazda RX4           <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Mazda RX4 Wag       <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Datsun <span class="number">710</span>          <span class="number">4</span>  <span class="number">108</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">Hornet <span class="number">4</span> Drive      <span class="number">6</span>  <span class="number">258</span> <span class="number">110</span> <span class="number">3.08</span> <span class="number">3.215</span> <span class="number">19.44</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Hornet Sportabout   <span class="number">8</span>  <span class="number">360</span> <span class="number">175</span> <span class="number">3.15</span> <span class="number">3.440</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">2</span></span><br><span class="line">Valiant             <span class="number">6</span>  <span class="number">225</span> <span class="number">105</span> <span class="number">2.76</span> <span class="number">3.460</span> <span class="number">20.22</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line"></span><br><span class="line">mtcars<span class="punctuation">[</span><span class="operator">-</span><span class="number">1</span><span class="operator">:</span><span class="operator">-</span><span class="number">30</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line">              cyl disp  hp drat   wt qsec vs am gear carb</span><br><span class="line">Maserati Bora   <span class="number">8</span>  <span class="number">301</span> <span class="number">335</span> <span class="number">3.54</span> <span class="number">3.57</span> <span class="number">14.6</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">5</span>    <span class="number">8</span></span><br><span class="line">Volvo <span class="number">142</span>E      <span class="number">4</span>  <span class="number">121</span> <span class="number">109</span> <span class="number">4.11</span> <span class="number">2.78</span> <span class="number">18.6</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">2</span></span><br><span class="line"></span><br><span class="line">mtcars<span class="punctuation">[</span><span class="punctuation">,</span><span class="operator">-</span><span class="number">1</span><span class="operator">:</span><span class="operator">-</span><span class="number">8</span><span class="punctuation">]</span></span><br><span class="line">                    gear carb</span><br><span class="line">Mazda RX4              <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Mazda RX4 Wag          <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Datsun <span class="number">710</span>             <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据框的添加与合并</span></span><br><span class="line">state.abb</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;AL&quot;</span> <span class="string">&quot;AK&quot;</span> <span class="string">&quot;AZ&quot;</span> <span class="string">&quot;AR&quot;</span> <span class="string">&quot;CA&quot;</span> <span class="string">&quot;CO&quot;</span> <span class="string">&quot;CT&quot;</span> <span class="string">&quot;DE&quot;</span> <span class="string">&quot;FL&quot;</span> <span class="string">&quot;GA&quot;</span> <span class="string">&quot;HI&quot;</span> <span class="string">&quot;ID&quot;</span> <span class="string">&quot;IL&quot;</span> <span class="string">&quot;IN&quot;</span> <span class="string">&quot;IA&quot;</span> <span class="string">&quot;KS&quot;</span> <span class="string">&quot;KY&quot;</span> <span class="string">&quot;LA&quot;</span> <span class="string">&quot;ME&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">20</span><span class="punctuation">]</span> <span class="string">&quot;MD&quot;</span> <span class="string">&quot;MA&quot;</span> <span class="string">&quot;MI&quot;</span> <span class="string">&quot;MN&quot;</span> <span class="string">&quot;MS&quot;</span> <span class="string">&quot;MO&quot;</span> <span class="string">&quot;MT&quot;</span> <span class="string">&quot;NE&quot;</span> <span class="string">&quot;NV&quot;</span> <span class="string">&quot;NH&quot;</span> <span class="string">&quot;NJ&quot;</span> <span class="string">&quot;NM&quot;</span> <span class="string">&quot;NY&quot;</span> <span class="string">&quot;NC&quot;</span> <span class="string">&quot;ND&quot;</span> <span class="string">&quot;OH&quot;</span> <span class="string">&quot;OK&quot;</span> <span class="string">&quot;OR&quot;</span> <span class="string">&quot;PA&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">39</span><span class="punctuation">]</span> <span class="string">&quot;RI&quot;</span> <span class="string">&quot;SC&quot;</span> <span class="string">&quot;SD&quot;</span> <span class="string">&quot;TN&quot;</span> <span class="string">&quot;TX&quot;</span> <span class="string">&quot;UT&quot;</span> <span class="string">&quot;VT&quot;</span> <span class="string">&quot;VA&quot;</span> <span class="string">&quot;WA&quot;</span> <span class="string">&quot;WV&quot;</span> <span class="string">&quot;WI&quot;</span> <span class="string">&quot;WY&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并列</span></span><br><span class="line">data.frame<span class="punctuation">(</span>USArrests<span class="punctuation">,</span> state.abb<span class="punctuation">)</span></span><br><span class="line">               Murder Assault UrbanPop Rape state.abb</span><br><span class="line">Alabama          <span class="number">13.2</span>     <span class="number">236</span>       <span class="number">58</span> <span class="number">21.2</span>        AL</span><br><span class="line">Alaska           <span class="number">10.0</span>     <span class="number">263</span>       <span class="number">48</span> <span class="number">44.5</span>        AK</span><br><span class="line">Arizona           <span class="number">8.1</span>     <span class="number">294</span>       <span class="number">80</span> <span class="number">31.0</span>        AZ</span><br><span class="line">...</span><br><span class="line">   </span><br><span class="line">cbind<span class="punctuation">(</span>USArrests<span class="punctuation">,</span> state.abb<span class="punctuation">)</span></span><br><span class="line">               Murder Assault UrbanPop Rape state.abb</span><br><span class="line">Alabama          <span class="number">13.2</span>     <span class="number">236</span>       <span class="number">58</span> <span class="number">21.2</span>        AL</span><br><span class="line">Alaska           <span class="number">10.0</span>     <span class="number">263</span>       <span class="number">48</span> <span class="number">44.5</span>        AK</span><br><span class="line">Arizona           <span class="number">8.1</span>     <span class="number">294</span>       <span class="number">80</span> <span class="number">31.0</span>        AZ</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并行</span></span><br><span class="line">data1 <span class="operator">&lt;-</span> head<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">)</span></span><br><span class="line">data2 <span class="operator">&lt;-</span> tail<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">)</span></span><br><span class="line">rbind<span class="punctuation">(</span>data1<span class="punctuation">,</span> data2<span class="punctuation">)</span></span><br><span class="line">                  cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Mazda RX4           <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Mazda RX4 Wag       <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Datsun <span class="number">710</span>          <span class="number">4</span> <span class="number">108.0</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">Hornet <span class="number">4</span> Drive      <span class="number">6</span> <span class="number">258.0</span> <span class="number">110</span> <span class="number">3.08</span> <span class="number">3.215</span> <span class="number">19.44</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Hornet Sportabout   <span class="number">8</span> <span class="number">360.0</span> <span class="number">175</span> <span class="number">3.15</span> <span class="number">3.440</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">2</span></span><br><span class="line">Lotus Europa        <span class="number">4</span>  <span class="number">95.1</span> <span class="number">113</span> <span class="number">3.77</span> <span class="number">1.513</span> <span class="number">16.90</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">5</span>    <span class="number">2</span></span><br><span class="line">Ford Pantera L      <span class="number">8</span> <span class="number">351.0</span> <span class="number">264</span> <span class="number">4.22</span> <span class="number">3.170</span> <span class="number">14.50</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">5</span>    <span class="number">4</span></span><br><span class="line">Ferrari Dino        <span class="number">6</span> <span class="number">145.0</span> <span class="number">175</span> <span class="number">3.62</span> <span class="number">2.770</span> <span class="number">15.50</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">5</span>    <span class="number">6</span></span><br><span class="line">Maserati Bora       <span class="number">8</span> <span class="number">301.0</span> <span class="number">335</span> <span class="number">3.54</span> <span class="number">3.570</span> <span class="number">14.60</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">5</span>    <span class="number">8</span></span><br><span class="line">Volvo <span class="number">142</span>E          <span class="number">4</span> <span class="number">121.0</span> <span class="number">109</span> <span class="number">4.11</span> <span class="number">2.780</span> <span class="number">18.60</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重复数据不会自动去除</span></span><br><span class="line">data2 <span class="operator">&lt;-</span> head<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">)</span></span><br><span class="line">rbind<span class="punctuation">(</span>data1<span class="punctuation">,</span> data2<span class="punctuation">)</span></span><br><span class="line">                   cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Mazda RX4            <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Mazda RX4 Wag        <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Datsun <span class="number">710</span>           <span class="number">4</span> <span class="number">108.0</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">Hornet <span class="number">4</span> Drive       <span class="number">6</span> <span class="number">258.0</span> <span class="number">110</span> <span class="number">3.08</span> <span class="number">3.215</span> <span class="number">19.44</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Hornet Sportabout    <span class="number">8</span> <span class="number">360.0</span> <span class="number">175</span> <span class="number">3.15</span> <span class="number">3.440</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">2</span></span><br><span class="line">Mazda RX41           <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Mazda RX4 Wag1       <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Datsun <span class="number">7101</span>          <span class="number">4</span> <span class="number">108.0</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">Hornet <span class="number">4</span> Drive1      <span class="number">6</span> <span class="number">258.0</span> <span class="number">110</span> <span class="number">3.08</span> <span class="number">3.215</span> <span class="number">19.44</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Hornet Sportabout1   <span class="number">8</span> <span class="number">360.0</span> <span class="number">175</span> <span class="number">3.15</span> <span class="number">3.440</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">2</span></span><br><span class="line">Valiant              <span class="number">6</span> <span class="number">225.0</span> <span class="number">105</span> <span class="number">2.76</span> <span class="number">3.460</span> <span class="number">20.22</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Duster <span class="number">360</span>           <span class="number">8</span> <span class="number">360.0</span> <span class="number">245</span> <span class="number">3.21</span> <span class="number">3.570</span> <span class="number">15.84</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">Merc <span class="number">240</span>D            <span class="number">4</span> <span class="number">146.7</span>  <span class="number">62</span> <span class="number">3.69</span> <span class="number">3.190</span> <span class="number">20.00</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">4</span>    <span class="number">2</span></span><br><span class="line">Merc <span class="number">230</span>             <span class="number">4</span> <span class="number">140.8</span>  <span class="number">95</span> <span class="number">3.92</span> <span class="number">3.150</span> <span class="number">22.90</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">4</span>    <span class="number">2</span></span><br><span class="line">Merc <span class="number">280</span>             <span class="number">6</span> <span class="number">167.6</span> <span class="number">123</span> <span class="number">3.92</span> <span class="number">3.440</span> <span class="number">18.30</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line"></span><br><span class="line">data3 <span class="operator">&lt;-</span> rbind<span class="punctuation">(</span>data1<span class="punctuation">,</span> data2<span class="punctuation">)</span></span><br><span class="line"><span class="comment"># duplicated函数判断是否存在重复数据</span></span><br><span class="line">duplicated<span class="punctuation">(</span>data3<span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 取出重复数据</span></span><br><span class="line">data3<span class="punctuation">[</span>duplicated<span class="punctuation">(</span>data3<span class="punctuation">)</span><span class="punctuation">,</span> <span class="punctuation">]</span></span><br><span class="line">                   cyl disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Mazda RX41           <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Mazda RX4 Wag1       <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Datsun <span class="number">7101</span>          <span class="number">4</span>  <span class="number">108</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">Hornet <span class="number">4</span> Drive1      <span class="number">6</span>  <span class="number">258</span> <span class="number">110</span> <span class="number">3.08</span> <span class="number">3.215</span> <span class="number">19.44</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Hornet Sportabout1   <span class="number">8</span>  <span class="number">360</span> <span class="number">175</span> <span class="number">3.15</span> <span class="number">3.440</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#!对TRUE和FALSE取反</span></span><br><span class="line">data3<span class="punctuation">[</span><span class="operator">!</span>duplicated<span class="punctuation">(</span>data3<span class="punctuation">)</span><span class="punctuation">,</span> <span class="punctuation">]</span></span><br><span class="line">                  cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Mazda RX4           <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Mazda RX4 Wag       <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Datsun <span class="number">710</span>          <span class="number">4</span> <span class="number">108.0</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">Hornet <span class="number">4</span> Drive      <span class="number">6</span> <span class="number">258.0</span> <span class="number">110</span> <span class="number">3.08</span> <span class="number">3.215</span> <span class="number">19.44</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Hornet Sportabout   <span class="number">8</span> <span class="number">360.0</span> <span class="number">175</span> <span class="number">3.15</span> <span class="number">3.440</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">2</span></span><br><span class="line">Valiant             <span class="number">6</span> <span class="number">225.0</span> <span class="number">105</span> <span class="number">2.76</span> <span class="number">3.460</span> <span class="number">20.22</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Duster <span class="number">360</span>          <span class="number">8</span> <span class="number">360.0</span> <span class="number">245</span> <span class="number">3.21</span> <span class="number">3.570</span> <span class="number">15.84</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">Merc <span class="number">240</span>D           <span class="number">4</span> <span class="number">146.7</span>  <span class="number">62</span> <span class="number">3.69</span> <span class="number">3.190</span> <span class="number">20.00</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">4</span>    <span class="number">2</span></span><br><span class="line">Merc <span class="number">230</span>            <span class="number">4</span> <span class="number">140.8</span>  <span class="number">95</span> <span class="number">3.92</span> <span class="number">3.150</span> <span class="number">22.90</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">4</span>    <span class="number">2</span></span><br><span class="line">Merc <span class="number">280</span>            <span class="number">6</span> <span class="number">167.6</span> <span class="number">123</span> <span class="number">3.92</span> <span class="number">3.440</span> <span class="number">18.30</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># unique函数一步搞定</span></span><br><span class="line">unique<span class="punctuation">(</span>data3<span class="punctuation">)</span></span><br><span class="line">                  cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Mazda RX4           <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Mazda RX4 Wag       <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Datsun <span class="number">710</span>          <span class="number">4</span> <span class="number">108.0</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">Hornet <span class="number">4</span> Drive      <span class="number">6</span> <span class="number">258.0</span> <span class="number">110</span> <span class="number">3.08</span> <span class="number">3.215</span> <span class="number">19.44</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Hornet Sportabout   <span class="number">8</span> <span class="number">360.0</span> <span class="number">175</span> <span class="number">3.15</span> <span class="number">3.440</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">2</span></span><br><span class="line">Valiant             <span class="number">6</span> <span class="number">225.0</span> <span class="number">105</span> <span class="number">2.76</span> <span class="number">3.460</span> <span class="number">20.22</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Duster <span class="number">360</span>          <span class="number">8</span> <span class="number">360.0</span> <span class="number">245</span> <span class="number">3.21</span> <span class="number">3.570</span> <span class="number">15.84</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">Merc <span class="number">240</span>D           <span class="number">4</span> <span class="number">146.7</span>  <span class="number">62</span> <span class="number">3.69</span> <span class="number">3.190</span> <span class="number">20.00</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">4</span>    <span class="number">2</span></span><br><span class="line">Merc <span class="number">230</span>            <span class="number">4</span> <span class="number">140.8</span>  <span class="number">95</span> <span class="number">3.92</span> <span class="number">3.150</span> <span class="number">22.90</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">4</span>    <span class="number">2</span></span><br><span class="line">Merc <span class="number">280</span>            <span class="number">6</span> <span class="number">167.6</span> <span class="number">123</span> <span class="number">3.92</span> <span class="number">3.440</span> <span class="number">18.30</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">4</span>    <span class="number">4</span></span><br></pre></td></tr></table></figure><h4 id="数据翻转、更改、排序">数据翻转、更改、排序</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据框转置</span></span><br><span class="line">t<span class="punctuation">(</span>mtcars<span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span><span class="number">3</span><span class="punctuation">,</span><span class="number">1</span><span class="operator">:</span><span class="number">3</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line">     Mazda RX4 Mazda RX4 Wag Datsun <span class="number">710</span></span><br><span class="line">mpg         <span class="number">21</span>            <span class="number">21</span>       <span class="number">22.8</span></span><br><span class="line">cyl          <span class="number">6</span>             <span class="number">6</span>        <span class="number">4.0</span></span><br><span class="line">disp       <span class="number">160</span>           <span class="number">160</span>      <span class="number">108.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 翻转向量</span></span><br><span class="line"><span class="built_in">letters</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;a&quot;</span> <span class="string">&quot;b&quot;</span> <span class="string">&quot;c&quot;</span> <span class="string">&quot;d&quot;</span> <span class="string">&quot;e&quot;</span> <span class="string">&quot;f&quot;</span> <span class="string">&quot;g&quot;</span> <span class="string">&quot;h&quot;</span> <span class="string">&quot;i&quot;</span> <span class="string">&quot;j&quot;</span> <span class="string">&quot;k&quot;</span> <span class="string">&quot;l&quot;</span> <span class="string">&quot;m&quot;</span> <span class="string">&quot;n&quot;</span> <span class="string">&quot;o&quot;</span> <span class="string">&quot;p&quot;</span> <span class="string">&quot;q&quot;</span> <span class="string">&quot;r&quot;</span> <span class="string">&quot;s&quot;</span> <span class="string">&quot;t&quot;</span> <span class="string">&quot;u&quot;</span> <span class="string">&quot;v&quot;</span> <span class="string">&quot;w&quot;</span> <span class="string">&quot;x&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">25</span><span class="punctuation">]</span> <span class="string">&quot;y&quot;</span> <span class="string">&quot;z&quot;</span></span><br><span class="line">rev<span class="punctuation">(</span><span class="built_in">letters</span><span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;z&quot;</span> <span class="string">&quot;y&quot;</span> <span class="string">&quot;x&quot;</span> <span class="string">&quot;w&quot;</span> <span class="string">&quot;v&quot;</span> <span class="string">&quot;u&quot;</span> <span class="string">&quot;t&quot;</span> <span class="string">&quot;s&quot;</span> <span class="string">&quot;r&quot;</span> <span class="string">&quot;q&quot;</span> <span class="string">&quot;p&quot;</span> <span class="string">&quot;o&quot;</span> <span class="string">&quot;n&quot;</span> <span class="string">&quot;m&quot;</span> <span class="string">&quot;l&quot;</span> <span class="string">&quot;k&quot;</span> <span class="string">&quot;j&quot;</span> <span class="string">&quot;i&quot;</span> <span class="string">&quot;h&quot;</span> <span class="string">&quot;g&quot;</span> <span class="string">&quot;f&quot;</span> <span class="string">&quot;e&quot;</span> <span class="string">&quot;d&quot;</span> <span class="string">&quot;c&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">25</span><span class="punctuation">]</span> <span class="string">&quot;b&quot;</span> <span class="string">&quot;a&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 翻转数据框</span></span><br><span class="line">women</span><br><span class="line">   height weight</span><br><span class="line"><span class="number">1</span>      <span class="number">58</span>    <span class="number">115</span></span><br><span class="line"><span class="number">2</span>      <span class="number">59</span>    <span class="number">117</span></span><br><span class="line"><span class="number">3</span>      <span class="number">60</span>    <span class="number">120</span></span><br><span class="line">...</span><br><span class="line">rev<span class="punctuation">(</span>row.names<span class="punctuation">(</span>women<span class="punctuation">)</span><span class="punctuation">)</span> <span class="comment"># 翻转行名后索引即可</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;15&quot;</span> <span class="string">&quot;14&quot;</span> <span class="string">&quot;13&quot;</span> <span class="string">&quot;12&quot;</span> <span class="string">&quot;11&quot;</span> <span class="string">&quot;10&quot;</span> <span class="string">&quot;9&quot;</span>  <span class="string">&quot;8&quot;</span>  <span class="string">&quot;7&quot;</span>  <span class="string">&quot;6&quot;</span>  <span class="string">&quot;5&quot;</span>  <span class="string">&quot;4&quot;</span>  <span class="string">&quot;3&quot;</span>  <span class="string">&quot;2&quot;</span>  <span class="string">&quot;1&quot;</span> </span><br><span class="line">women<span class="punctuation">[</span>rev<span class="punctuation">(</span>row.names<span class="punctuation">(</span>women<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="punctuation">]</span></span><br><span class="line">   height weight</span><br><span class="line"><span class="number">15</span>     <span class="number">72</span>    <span class="number">164</span></span><br><span class="line"><span class="number">14</span>     <span class="number">71</span>    <span class="number">159</span></span><br><span class="line"><span class="number">13</span>     <span class="number">70</span>    <span class="number">154</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更改数据框某列的值</span></span><br><span class="line">women<span class="operator">$</span>height<span class="operator">*</span><span class="number">2.54</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">147.32</span> <span class="number">149.86</span> <span class="number">152.40</span> <span class="number">154.94</span> <span class="number">157.48</span> <span class="number">160.02</span> <span class="number">162.56</span> <span class="number">165.10</span> <span class="number">167.64</span> <span class="number">170.18</span> <span class="number">172.72</span> <span class="number">175.26</span> <span class="number">177.80</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">14</span><span class="punctuation">]</span> <span class="number">180.34</span> <span class="number">182.88</span></span><br><span class="line">data.frame<span class="punctuation">(</span>weight<span class="operator">=</span>women<span class="operator">$</span>height<span class="operator">*</span><span class="number">2.54</span><span class="punctuation">,</span> women<span class="operator">$</span>weight<span class="punctuation">)</span></span><br><span class="line">   weight women.weight</span><br><span class="line"><span class="number">1</span>  <span class="number">147.32</span>          <span class="number">115</span></span><br><span class="line"><span class="number">2</span>  <span class="number">149.86</span>          <span class="number">117</span></span><br><span class="line"><span class="number">3</span>  <span class="number">152.40</span>          <span class="number">120</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># transform函数更高效，也可新增一列</span></span><br><span class="line">transform<span class="punctuation">(</span>women<span class="punctuation">,</span> height<span class="operator">=</span>height<span class="operator">*</span><span class="number">2.54</span><span class="punctuation">)</span></span><br><span class="line">   height weight</span><br><span class="line"><span class="number">1</span>  <span class="number">147.32</span>    <span class="number">115</span></span><br><span class="line"><span class="number">2</span>  <span class="number">149.86</span>    <span class="number">117</span></span><br><span class="line"><span class="number">3</span>  <span class="number">152.40</span>    <span class="number">120</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">transform<span class="punctuation">(</span>women<span class="punctuation">,</span> cm<span class="operator">=</span>height<span class="operator">*</span><span class="number">2.54</span><span class="punctuation">)</span></span><br><span class="line">   height weight     cm</span><br><span class="line"><span class="number">1</span>      <span class="number">58</span>    <span class="number">115</span> <span class="number">147.32</span></span><br><span class="line"><span class="number">2</span>      <span class="number">59</span>    <span class="number">117</span> <span class="number">149.86</span></span><br><span class="line"><span class="number">3</span>      <span class="number">60</span>    <span class="number">120</span> <span class="number">152.40</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据排序</span></span><br><span class="line">rivers</span><br><span class="line">  <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">735</span>  <span class="number">320</span>  <span class="number">325</span>  <span class="number">392</span>  <span class="number">524</span>  <span class="number">450</span> <span class="number">1459</span>  <span class="number">135</span>  <span class="number">465</span>  <span class="number">600</span>  <span class="number">330</span>  <span class="number">336</span>  <span class="number">280</span>  <span class="number">315</span>  <span class="number">870</span>  <span class="number">906</span>  <span class="number">202</span>  <span class="number">329</span>  <span class="number">290</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">20</span><span class="punctuation">]</span> <span class="number">1000</span>  <span class="number">600</span>  <span class="number">505</span> <span class="number">1450</span>  <span class="number">840</span> <span class="number">1243</span>  <span class="number">890</span>  <span class="number">350</span>  <span class="number">407</span>  <span class="number">286</span>  <span class="number">280</span>  <span class="number">525</span>  <span class="number">720</span>  <span class="number">390</span>  <span class="number">250</span>  <span class="number">327</span>  <span class="number">230</span>  <span class="number">265</span>  <span class="number">850</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">39</span><span class="punctuation">]</span>  <span class="number">210</span>  <span class="number">630</span>  <span class="number">260</span>  <span class="number">230</span>  <span class="number">360</span>  <span class="number">730</span>  <span class="number">600</span>  <span class="number">306</span>  <span class="number">390</span>  <span class="number">420</span>  <span class="number">291</span>  <span class="number">710</span>  <span class="number">340</span>  <span class="number">217</span>  <span class="number">281</span>  <span class="number">352</span>  <span class="number">259</span>  <span class="number">250</span>  <span class="number">470</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">58</span><span class="punctuation">]</span>  <span class="number">680</span>  <span class="number">570</span>  <span class="number">350</span>  <span class="number">300</span>  <span class="number">560</span>  <span class="number">900</span>  <span class="number">625</span>  <span class="number">332</span> <span class="number">2348</span> <span class="number">1171</span> <span class="number">3710</span> <span class="number">2315</span> <span class="number">2533</span>  <span class="number">780</span>  <span class="number">280</span>  <span class="number">410</span>  <span class="number">460</span>  <span class="number">260</span>  <span class="number">255</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">77</span><span class="punctuation">]</span>  <span class="number">431</span>  <span class="number">350</span>  <span class="number">760</span>  <span class="number">618</span>  <span class="number">338</span>  <span class="number">981</span> <span class="number">1306</span>  <span class="number">500</span>  <span class="number">696</span>  <span class="number">605</span>  <span class="number">250</span>  <span class="number">411</span> <span class="number">1054</span>  <span class="number">735</span>  <span class="number">233</span>  <span class="number">435</span>  <span class="number">490</span>  <span class="number">310</span>  <span class="number">460</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">96</span><span class="punctuation">]</span>  <span class="number">383</span>  <span class="number">375</span> <span class="number">1270</span>  <span class="number">545</span>  <span class="number">445</span> <span class="number">1885</span>  <span class="number">380</span>  <span class="number">300</span>  <span class="number">380</span>  <span class="number">377</span>  <span class="number">425</span>  <span class="number">276</span>  <span class="number">210</span>  <span class="number">800</span>  <span class="number">420</span>  <span class="number">350</span>  <span class="number">360</span>  <span class="number">538</span> <span class="number">1100</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">115</span><span class="punctuation">]</span> <span class="number">1205</span>  <span class="number">314</span>  <span class="number">237</span>  <span class="number">610</span>  <span class="number">360</span>  <span class="number">540</span> <span class="number">1038</span>  <span class="number">424</span>  <span class="number">310</span>  <span class="number">300</span>  <span class="number">444</span>  <span class="number">301</span>  <span class="number">268</span>  <span class="number">620</span>  <span class="number">215</span>  <span class="number">652</span>  <span class="number">900</span>  <span class="number">525</span>  <span class="number">246</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">134</span><span class="punctuation">]</span>  <span class="number">360</span>  <span class="number">529</span>  <span class="number">500</span>  <span class="number">720</span>  <span class="number">270</span>  <span class="number">430</span>  <span class="number">671</span> <span class="number">1770</span></span><br><span class="line">rev<span class="punctuation">(</span>rivers<span class="punctuation">)</span></span><br><span class="line">  <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1770</span>  <span class="number">671</span>  <span class="number">430</span>  <span class="number">270</span>  <span class="number">720</span>  <span class="number">500</span>  <span class="number">529</span>  <span class="number">360</span>  <span class="number">246</span>  <span class="number">525</span>  <span class="number">900</span>  <span class="number">652</span>  <span class="number">215</span>  <span class="number">620</span>  <span class="number">268</span>  <span class="number">301</span>  <span class="number">444</span>  <span class="number">300</span>  <span class="number">310</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">20</span><span class="punctuation">]</span>  <span class="number">424</span> <span class="number">1038</span>  <span class="number">540</span>  <span class="number">360</span>  <span class="number">610</span>  <span class="number">237</span>  <span class="number">314</span> <span class="number">1205</span> <span class="number">1100</span>  <span class="number">538</span>  <span class="number">360</span>  <span class="number">350</span>  <span class="number">420</span>  <span class="number">800</span>  <span class="number">210</span>  <span class="number">276</span>  <span class="number">425</span>  <span class="number">377</span>  <span class="number">380</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">39</span><span class="punctuation">]</span>  <span class="number">300</span>  <span class="number">380</span> <span class="number">1885</span>  <span class="number">445</span>  <span class="number">545</span> <span class="number">1270</span>  <span class="number">375</span>  <span class="number">383</span>  <span class="number">460</span>  <span class="number">310</span>  <span class="number">490</span>  <span class="number">435</span>  <span class="number">233</span>  <span class="number">735</span> <span class="number">1054</span>  <span class="number">411</span>  <span class="number">250</span>  <span class="number">605</span>  <span class="number">696</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">58</span><span class="punctuation">]</span>  <span class="number">500</span> <span class="number">1306</span>  <span class="number">981</span>  <span class="number">338</span>  <span class="number">618</span>  <span class="number">760</span>  <span class="number">350</span>  <span class="number">431</span>  <span class="number">255</span>  <span class="number">260</span>  <span class="number">460</span>  <span class="number">410</span>  <span class="number">280</span>  <span class="number">780</span> <span class="number">2533</span> <span class="number">2315</span> <span class="number">3710</span> <span class="number">1171</span> <span class="number">2348</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">77</span><span class="punctuation">]</span>  <span class="number">332</span>  <span class="number">625</span>  <span class="number">900</span>  <span class="number">560</span>  <span class="number">300</span>  <span class="number">350</span>  <span class="number">570</span>  <span class="number">680</span>  <span class="number">470</span>  <span class="number">250</span>  <span class="number">259</span>  <span class="number">352</span>  <span class="number">281</span>  <span class="number">217</span>  <span class="number">340</span>  <span class="number">710</span>  <span class="number">291</span>  <span class="number">420</span>  <span class="number">390</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">96</span><span class="punctuation">]</span>  <span class="number">306</span>  <span class="number">600</span>  <span class="number">730</span>  <span class="number">360</span>  <span class="number">230</span>  <span class="number">260</span>  <span class="number">630</span>  <span class="number">210</span>  <span class="number">850</span>  <span class="number">265</span>  <span class="number">230</span>  <span class="number">327</span>  <span class="number">250</span>  <span class="number">390</span>  <span class="number">720</span>  <span class="number">525</span>  <span class="number">280</span>  <span class="number">286</span>  <span class="number">407</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">115</span><span class="punctuation">]</span>  <span class="number">350</span>  <span class="number">890</span> <span class="number">1243</span>  <span class="number">840</span> <span class="number">1450</span>  <span class="number">505</span>  <span class="number">600</span> <span class="number">1000</span>  <span class="number">290</span>  <span class="number">329</span>  <span class="number">202</span>  <span class="number">906</span>  <span class="number">870</span>  <span class="number">315</span>  <span class="number">280</span>  <span class="number">336</span>  <span class="number">330</span>  <span class="number">600</span>  <span class="number">465</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">134</span><span class="punctuation">]</span>  <span class="number">135</span> <span class="number">1459</span>  <span class="number">450</span>  <span class="number">524</span>  <span class="number">392</span>  <span class="number">325</span>  <span class="number">320</span>  <span class="number">735</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从小到大排序</span></span><br><span class="line">sort<span class="punctuation">(</span>rivers<span class="punctuation">)</span></span><br><span class="line">  <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">135</span>  <span class="number">202</span>  <span class="number">210</span>  <span class="number">210</span>  <span class="number">215</span>  <span class="number">217</span>  <span class="number">230</span>  <span class="number">230</span>  <span class="number">233</span>  <span class="number">237</span>  <span class="number">246</span>  <span class="number">250</span>  <span class="number">250</span>  <span class="number">250</span>  <span class="number">255</span>  <span class="number">259</span>  <span class="number">260</span>  <span class="number">260</span>  <span class="number">265</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">20</span><span class="punctuation">]</span>  <span class="number">268</span>  <span class="number">270</span>  <span class="number">276</span>  <span class="number">280</span>  <span class="number">280</span>  <span class="number">280</span>  <span class="number">281</span>  <span class="number">286</span>  <span class="number">290</span>  <span class="number">291</span>  <span class="number">300</span>  <span class="number">300</span>  <span class="number">300</span>  <span class="number">301</span>  <span class="number">306</span>  <span class="number">310</span>  <span class="number">310</span>  <span class="number">314</span>  <span class="number">315</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">39</span><span class="punctuation">]</span>  <span class="number">320</span>  <span class="number">325</span>  <span class="number">327</span>  <span class="number">329</span>  <span class="number">330</span>  <span class="number">332</span>  <span class="number">336</span>  <span class="number">338</span>  <span class="number">340</span>  <span class="number">350</span>  <span class="number">350</span>  <span class="number">350</span>  <span class="number">350</span>  <span class="number">352</span>  <span class="number">360</span>  <span class="number">360</span>  <span class="number">360</span>  <span class="number">360</span>  <span class="number">375</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">58</span><span class="punctuation">]</span>  <span class="number">377</span>  <span class="number">380</span>  <span class="number">380</span>  <span class="number">383</span>  <span class="number">390</span>  <span class="number">390</span>  <span class="number">392</span>  <span class="number">407</span>  <span class="number">410</span>  <span class="number">411</span>  <span class="number">420</span>  <span class="number">420</span>  <span class="number">424</span>  <span class="number">425</span>  <span class="number">430</span>  <span class="number">431</span>  <span class="number">435</span>  <span class="number">444</span>  <span class="number">445</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">77</span><span class="punctuation">]</span>  <span class="number">450</span>  <span class="number">460</span>  <span class="number">460</span>  <span class="number">465</span>  <span class="number">470</span>  <span class="number">490</span>  <span class="number">500</span>  <span class="number">500</span>  <span class="number">505</span>  <span class="number">524</span>  <span class="number">525</span>  <span class="number">525</span>  <span class="number">529</span>  <span class="number">538</span>  <span class="number">540</span>  <span class="number">545</span>  <span class="number">560</span>  <span class="number">570</span>  <span class="number">600</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">96</span><span class="punctuation">]</span>  <span class="number">600</span>  <span class="number">600</span>  <span class="number">605</span>  <span class="number">610</span>  <span class="number">618</span>  <span class="number">620</span>  <span class="number">625</span>  <span class="number">630</span>  <span class="number">652</span>  <span class="number">671</span>  <span class="number">680</span>  <span class="number">696</span>  <span class="number">710</span>  <span class="number">720</span>  <span class="number">720</span>  <span class="number">730</span>  <span class="number">735</span>  <span class="number">735</span>  <span class="number">760</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">115</span><span class="punctuation">]</span>  <span class="number">780</span>  <span class="number">800</span>  <span class="number">840</span>  <span class="number">850</span>  <span class="number">870</span>  <span class="number">890</span>  <span class="number">900</span>  <span class="number">900</span>  <span class="number">906</span>  <span class="number">981</span> <span class="number">1000</span> <span class="number">1038</span> <span class="number">1054</span> <span class="number">1100</span> <span class="number">1171</span> <span class="number">1205</span> <span class="number">1243</span> <span class="number">1270</span> <span class="number">1306</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">134</span><span class="punctuation">]</span> <span class="number">1450</span> <span class="number">1459</span> <span class="number">1770</span> <span class="number">1885</span> <span class="number">2315</span> <span class="number">2348</span> <span class="number">2533</span> <span class="number">3710</span></span><br><span class="line">sort<span class="punctuation">(</span>rivers<span class="punctuation">,</span> decreasing <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line">  <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">3710</span> <span class="number">2533</span> <span class="number">2348</span> <span class="number">2315</span> <span class="number">1885</span> <span class="number">1770</span> <span class="number">1459</span> <span class="number">1450</span> <span class="number">1306</span> <span class="number">1270</span> <span class="number">1243</span> <span class="number">1205</span> <span class="number">1171</span> <span class="number">1100</span> <span class="number">1054</span> <span class="number">1038</span> <span class="number">1000</span>  <span class="number">981</span>  <span class="number">906</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">20</span><span class="punctuation">]</span>  <span class="number">900</span>  <span class="number">900</span>  <span class="number">890</span>  <span class="number">870</span>  <span class="number">850</span>  <span class="number">840</span>  <span class="number">800</span>  <span class="number">780</span>  <span class="number">760</span>  <span class="number">735</span>  <span class="number">735</span>  <span class="number">730</span>  <span class="number">720</span>  <span class="number">720</span>  <span class="number">710</span>  <span class="number">696</span>  <span class="number">680</span>  <span class="number">671</span>  <span class="number">652</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">39</span><span class="punctuation">]</span>  <span class="number">630</span>  <span class="number">625</span>  <span class="number">620</span>  <span class="number">618</span>  <span class="number">610</span>  <span class="number">605</span>  <span class="number">600</span>  <span class="number">600</span>  <span class="number">600</span>  <span class="number">570</span>  <span class="number">560</span>  <span class="number">545</span>  <span class="number">540</span>  <span class="number">538</span>  <span class="number">529</span>  <span class="number">525</span>  <span class="number">525</span>  <span class="number">524</span>  <span class="number">505</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">58</span><span class="punctuation">]</span>  <span class="number">500</span>  <span class="number">500</span>  <span class="number">490</span>  <span class="number">470</span>  <span class="number">465</span>  <span class="number">460</span>  <span class="number">460</span>  <span class="number">450</span>  <span class="number">445</span>  <span class="number">444</span>  <span class="number">435</span>  <span class="number">431</span>  <span class="number">430</span>  <span class="number">425</span>  <span class="number">424</span>  <span class="number">420</span>  <span class="number">420</span>  <span class="number">411</span>  <span class="number">410</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">77</span><span class="punctuation">]</span>  <span class="number">407</span>  <span class="number">392</span>  <span class="number">390</span>  <span class="number">390</span>  <span class="number">383</span>  <span class="number">380</span>  <span class="number">380</span>  <span class="number">377</span>  <span class="number">375</span>  <span class="number">360</span>  <span class="number">360</span>  <span class="number">360</span>  <span class="number">360</span>  <span class="number">352</span>  <span class="number">350</span>  <span class="number">350</span>  <span class="number">350</span>  <span class="number">350</span>  <span class="number">340</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">96</span><span class="punctuation">]</span>  <span class="number">338</span>  <span class="number">336</span>  <span class="number">332</span>  <span class="number">330</span>  <span class="number">329</span>  <span class="number">327</span>  <span class="number">325</span>  <span class="number">320</span>  <span class="number">315</span>  <span class="number">314</span>  <span class="number">310</span>  <span class="number">310</span>  <span class="number">306</span>  <span class="number">301</span>  <span class="number">300</span>  <span class="number">300</span>  <span class="number">300</span>  <span class="number">291</span>  <span class="number">290</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">115</span><span class="punctuation">]</span>  <span class="number">286</span>  <span class="number">281</span>  <span class="number">280</span>  <span class="number">280</span>  <span class="number">280</span>  <span class="number">276</span>  <span class="number">270</span>  <span class="number">268</span>  <span class="number">265</span>  <span class="number">260</span>  <span class="number">260</span>  <span class="number">259</span>  <span class="number">255</span>  <span class="number">250</span>  <span class="number">250</span>  <span class="number">250</span>  <span class="number">246</span>  <span class="number">237</span>  <span class="number">233</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">134</span><span class="punctuation">]</span>  <span class="number">230</span>  <span class="number">230</span>  <span class="number">217</span>  <span class="number">215</span>  <span class="number">210</span>  <span class="number">210</span>  <span class="number">202</span>  <span class="number">135</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 无法直接排序数据框，先对某一列排序后索引即可</span></span><br><span class="line">sort<span class="punctuation">(</span>mtcars<span class="punctuation">)</span></span><br><span class="line">Error <span class="keyword">in</span> `[.data.frame`<span class="punctuation">(</span>x<span class="punctuation">,</span> order<span class="punctuation">(</span>x<span class="punctuation">,</span> na.last <span class="operator">=</span> na.last<span class="punctuation">,</span> decreasing <span class="operator">=</span> decreasing<span class="punctuation">)</span><span class="punctuation">)</span> <span class="operator">:</span> </span><br><span class="line">  选择了未定义的列</span><br><span class="line">In addition<span class="operator">:</span> Warning message<span class="operator">:</span></span><br><span class="line">In xtfrm.data.frame<span class="punctuation">(</span>x<span class="punctuation">)</span> <span class="operator">:</span> cannot <span class="built_in">xtfrm</span> data frames</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据行名排序</span></span><br><span class="line">mtcars<span class="punctuation">[</span>sort<span class="punctuation">(</span>row.names<span class="punctuation">(</span>mtcars<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="punctuation">]</span></span><br><span class="line">                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">AMC Javelin         <span class="number">15.2</span>   <span class="number">8</span> <span class="number">304.0</span> <span class="number">150</span> <span class="number">3.15</span> <span class="number">3.435</span> <span class="number">17.30</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">2</span></span><br><span class="line">Cadillac Fleetwood  <span class="number">10.4</span>   <span class="number">8</span> <span class="number">472.0</span> <span class="number">205</span> <span class="number">2.93</span> <span class="number">5.250</span> <span class="number">17.98</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">Camaro Z28          <span class="number">13.3</span>   <span class="number">8</span> <span class="number">350.0</span> <span class="number">245</span> <span class="number">3.73</span> <span class="number">3.840</span> <span class="number">15.41</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">Chrysler Imperial   <span class="number">14.7</span>   <span class="number">8</span> <span class="number">440.0</span> <span class="number">230</span> <span class="number">3.23</span> <span class="number">5.345</span> <span class="number">17.42</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">rivers</span><br><span class="line">  <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">735</span>  <span class="number">320</span>  <span class="number">325</span>  <span class="number">392</span>  <span class="number">524</span>  <span class="number">450</span> <span class="number">1459</span>  <span class="number">135</span>  <span class="number">465</span>  <span class="number">600</span>  <span class="number">330</span>  <span class="number">336</span>  <span class="number">280</span>  <span class="number">315</span>  <span class="number">870</span>  <span class="number">906</span>  <span class="number">202</span>  <span class="number">329</span>  <span class="number">290</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">20</span><span class="punctuation">]</span> <span class="number">1000</span>  <span class="number">600</span>  <span class="number">505</span> <span class="number">1450</span>  <span class="number">840</span> <span class="number">1243</span>  <span class="number">890</span>  <span class="number">350</span>  <span class="number">407</span>  <span class="number">286</span>  <span class="number">280</span>  <span class="number">525</span>  <span class="number">720</span>  <span class="number">390</span>  <span class="number">250</span>  <span class="number">327</span>  <span class="number">230</span>  <span class="number">265</span>  <span class="number">850</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">39</span><span class="punctuation">]</span>  <span class="number">210</span>  <span class="number">630</span>  <span class="number">260</span>  <span class="number">230</span>  <span class="number">360</span>  <span class="number">730</span>  <span class="number">600</span>  <span class="number">306</span>  <span class="number">390</span>  <span class="number">420</span>  <span class="number">291</span>  <span class="number">710</span>  <span class="number">340</span>  <span class="number">217</span>  <span class="number">281</span>  <span class="number">352</span>  <span class="number">259</span>  <span class="number">250</span>  <span class="number">470</span></span><br><span class="line">...</span><br><span class="line">sort<span class="punctuation">(</span>rivers<span class="punctuation">)</span></span><br><span class="line">  <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">135</span>  <span class="number">202</span>  <span class="number">210</span>  <span class="number">210</span>  <span class="number">215</span>  <span class="number">217</span>  <span class="number">230</span>  <span class="number">230</span>  <span class="number">233</span>  <span class="number">237</span>  <span class="number">246</span>  <span class="number">250</span>  <span class="number">250</span>  <span class="number">250</span>  <span class="number">255</span>  <span class="number">259</span>  <span class="number">260</span>  <span class="number">260</span>  <span class="number">265</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">20</span><span class="punctuation">]</span>  <span class="number">268</span>  <span class="number">270</span>  <span class="number">276</span>  <span class="number">280</span>  <span class="number">280</span>  <span class="number">280</span>  <span class="number">281</span>  <span class="number">286</span>  <span class="number">290</span>  <span class="number">291</span>  <span class="number">300</span>  <span class="number">300</span>  <span class="number">300</span>  <span class="number">301</span>  <span class="number">306</span>  <span class="number">310</span>  <span class="number">310</span>  <span class="number">314</span>  <span class="number">315</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">39</span><span class="punctuation">]</span>  <span class="number">320</span>  <span class="number">325</span>  <span class="number">327</span>  <span class="number">329</span>  <span class="number">330</span>  <span class="number">332</span>  <span class="number">336</span>  <span class="number">338</span>  <span class="number">340</span>  <span class="number">350</span>  <span class="number">350</span>  <span class="number">350</span>  <span class="number">350</span>  <span class="number">352</span>  <span class="number">360</span>  <span class="number">360</span>  <span class="number">360</span>  <span class="number">360</span>  <span class="number">375</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># order，从小到大排序之后，数据在未排序状态下的序号，可用于索引</span></span><br><span class="line">order<span class="punctuation">(</span>rivers<span class="punctuation">)</span></span><br><span class="line">  <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>   <span class="number">8</span>  <span class="number">17</span>  <span class="number">39</span> <span class="number">108</span> <span class="number">129</span>  <span class="number">52</span>  <span class="number">36</span>  <span class="number">42</span>  <span class="number">91</span> <span class="number">117</span> <span class="number">133</span>  <span class="number">34</span>  <span class="number">56</span>  <span class="number">87</span>  <span class="number">76</span>  <span class="number">55</span>  <span class="number">41</span>  <span class="number">75</span>  <span class="number">37</span> <span class="number">127</span> <span class="number">138</span> <span class="number">107</span>  <span class="number">13</span>  <span class="number">30</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">25</span><span class="punctuation">]</span>  <span class="number">72</span>  <span class="number">53</span>  <span class="number">29</span>  <span class="number">19</span>  <span class="number">49</span>  <span class="number">61</span> <span class="number">103</span> <span class="number">124</span> <span class="number">126</span>  <span class="number">46</span>  <span class="number">94</span> <span class="number">123</span> <span class="number">116</span>  <span class="number">14</span>   <span class="number">2</span>   <span class="number">3</span>  <span class="number">35</span>  <span class="number">18</span>  <span class="number">11</span>  <span class="number">65</span>  <span class="number">12</span>  <span class="number">81</span>  <span class="number">51</span>  <span class="number">27</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">49</span><span class="punctuation">]</span>  <span class="number">60</span>  <span class="number">78</span> <span class="number">111</span>  <span class="number">54</span>  <span class="number">43</span> <span class="number">112</span> <span class="number">119</span> <span class="number">134</span>  <span class="number">97</span> <span class="number">105</span> <span class="number">102</span> <span class="number">104</span>  <span class="number">96</span>  <span class="number">33</span>  <span class="number">47</span>   <span class="number">4</span>  <span class="number">28</span>  <span class="number">73</span>  <span class="number">88</span>  <span class="number">48</span> <span class="number">110</span> <span class="number">122</span> <span class="number">106</span> <span class="number">139</span></span><br><span class="line">...</span><br><span class="line">rivers<span class="punctuation">[</span><span class="number">8</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">135</span></span><br><span class="line">rivers<span class="punctuation">[</span><span class="number">17</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">202</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从大到小</span></span><br><span class="line">order<span class="punctuation">(</span><span class="operator">-</span>rivers<span class="punctuation">)</span></span><br><span class="line">  <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">68</span>  <span class="number">70</span>  <span class="number">66</span>  <span class="number">69</span> <span class="number">101</span> <span class="number">141</span>   <span class="number">7</span>  <span class="number">23</span>  <span class="number">83</span>  <span class="number">98</span>  <span class="number">25</span> <span class="number">115</span>  <span class="number">67</span> <span class="number">114</span>  <span class="number">89</span> <span class="number">121</span>  <span class="number">20</span>  <span class="number">82</span>  <span class="number">16</span>  <span class="number">63</span> <span class="number">131</span>  <span class="number">26</span>  <span class="number">15</span>  <span class="number">38</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">25</span><span class="punctuation">]</span>  <span class="number">24</span> <span class="number">109</span>  <span class="number">71</span>  <span class="number">79</span>   <span class="number">1</span>  <span class="number">90</span>  <span class="number">44</span>  <span class="number">32</span> <span class="number">137</span>  <span class="number">50</span>  <span class="number">85</span>  <span class="number">58</span> <span class="number">140</span> <span class="number">130</span>  <span class="number">40</span>  <span class="number">64</span> <span class="number">128</span>  <span class="number">80</span> <span class="number">118</span>  <span class="number">86</span>  <span class="number">10</span>  <span class="number">21</span>  <span class="number">45</span>  <span class="number">59</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">49</span><span class="punctuation">]</span>  <span class="number">62</span>  <span class="number">99</span> <span class="number">120</span> <span class="number">113</span> <span class="number">135</span>  <span class="number">31</span> <span class="number">132</span>   <span class="number">5</span>  <span class="number">22</span>  <span class="number">84</span> <span class="number">136</span>  <span class="number">93</span>  <span class="number">57</span>   <span class="number">9</span>  <span class="number">74</span>  <span class="number">95</span>   <span class="number">6</span> <span class="number">100</span> <span class="number">125</span>  <span class="number">92</span>  <span class="number">77</span> <span class="number">139</span> <span class="number">106</span> <span class="number">122</span></span><br><span class="line">rivers<span class="punctuation">[</span><span class="number">68</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">3710</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 排序后索引即可对数据框排序</span></span><br><span class="line">sort<span class="punctuation">(</span>mtcars<span class="operator">$</span>mpg<span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">10.4</span> <span class="number">10.4</span> <span class="number">13.3</span> <span class="number">14.3</span> <span class="number">14.7</span> <span class="number">15.0</span> <span class="number">15.2</span> <span class="number">15.2</span> <span class="number">15.5</span> <span class="number">15.8</span> <span class="number">16.4</span> <span class="number">17.3</span> <span class="number">17.8</span> <span class="number">18.1</span> <span class="number">18.7</span> <span class="number">19.2</span> <span class="number">19.2</span> <span class="number">19.7</span> <span class="number">21.0</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">20</span><span class="punctuation">]</span> <span class="number">21.0</span> <span class="number">21.4</span> <span class="number">21.4</span> <span class="number">21.5</span> <span class="number">22.8</span> <span class="number">22.8</span> <span class="number">24.4</span> <span class="number">26.0</span> <span class="number">27.3</span> <span class="number">30.4</span> <span class="number">30.4</span> <span class="number">32.4</span> <span class="number">33.9</span></span><br><span class="line">order<span class="punctuation">(</span>mtcars<span class="operator">$</span>mpg<span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">15</span> <span class="number">16</span> <span class="number">24</span>  <span class="number">7</span> <span class="number">17</span> <span class="number">31</span> <span class="number">14</span> <span class="number">23</span> <span class="number">22</span> <span class="number">29</span> <span class="number">12</span> <span class="number">13</span> <span class="number">11</span>  <span class="number">6</span>  <span class="number">5</span> <span class="number">10</span> <span class="number">25</span> <span class="number">30</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">4</span> <span class="number">32</span> <span class="number">21</span>  <span class="number">3</span>  <span class="number">9</span>  <span class="number">8</span> <span class="number">27</span> <span class="number">26</span> <span class="number">19</span> <span class="number">28</span> <span class="number">18</span> <span class="number">20</span></span><br><span class="line">mtcars<span class="punctuation">[</span>order<span class="punctuation">(</span>mtcars<span class="operator">$</span>mpg<span class="punctuation">)</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line">                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Cadillac Fleetwood  <span class="number">10.4</span>   <span class="number">8</span> <span class="number">472.0</span> <span class="number">205</span> <span class="number">2.93</span> <span class="number">5.250</span> <span class="number">17.98</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">Lincoln Continental <span class="number">10.4</span>   <span class="number">8</span> <span class="number">460.0</span> <span class="number">215</span> <span class="number">3.00</span> <span class="number">5.424</span> <span class="number">17.82</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">Camaro Z28          <span class="number">13.3</span>   <span class="number">8</span> <span class="number">350.0</span> <span class="number">245</span> <span class="number">3.73</span> <span class="number">3.840</span> <span class="number">15.41</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">Duster <span class="number">360</span>          <span class="number">14.3</span>   <span class="number">8</span> <span class="number">360.0</span> <span class="number">245</span> <span class="number">3.21</span> <span class="number">3.570</span> <span class="number">15.84</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">#  可以多个排序条件</span></span><br><span class="line">mtcars<span class="punctuation">[</span>order<span class="punctuation">(</span>mtcars<span class="operator">$</span>mpg<span class="punctuation">,</span> mtcars<span class="operator">$</span>disp<span class="punctuation">)</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line">                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Lincoln Continental <span class="number">10.4</span>   <span class="number">8</span> <span class="number">460.0</span> <span class="number">215</span> <span class="number">3.00</span> <span class="number">5.424</span> <span class="number">17.82</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">Cadillac Fleetwood  <span class="number">10.4</span>   <span class="number">8</span> <span class="number">472.0</span> <span class="number">205</span> <span class="number">2.93</span> <span class="number">5.250</span> <span class="number">17.98</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">Camaro Z28          <span class="number">13.3</span>   <span class="number">8</span> <span class="number">350.0</span> <span class="number">245</span> <span class="number">3.73</span> <span class="number">3.840</span> <span class="number">15.41</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">Duster <span class="number">360</span>          <span class="number">14.3</span>   <span class="number">8</span> <span class="number">360.0</span> <span class="number">245</span> <span class="number">3.21</span> <span class="number">3.570</span> <span class="number">15.84</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">...</span><br><span class="line">order<span class="punctuation">(</span><span class="operator">-</span>rivers<span class="punctuation">)</span></span><br><span class="line">  <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">68</span>  <span class="number">70</span>  <span class="number">66</span>  <span class="number">69</span> <span class="number">101</span> <span class="number">141</span>   <span class="number">7</span>  <span class="number">23</span>  <span class="number">83</span>  <span class="number">98</span>  <span class="number">25</span> <span class="number">115</span>  <span class="number">67</span> <span class="number">114</span>  <span class="number">89</span> <span class="number">121</span>  <span class="number">20</span>  <span class="number">82</span>  <span class="number">16</span>  <span class="number">63</span> <span class="number">131</span>  <span class="number">26</span>  <span class="number">15</span>  <span class="number">38</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">25</span><span class="punctuation">]</span>  <span class="number">24</span> <span class="number">109</span>  <span class="number">71</span>  <span class="number">79</span>   <span class="number">1</span>  <span class="number">90</span>  <span class="number">44</span>  <span class="number">32</span> <span class="number">137</span>  <span class="number">50</span>  <span class="number">85</span>  <span class="number">58</span> <span class="number">140</span> <span class="number">130</span>  <span class="number">40</span>  <span class="number">64</span> <span class="number">128</span>  <span class="number">80</span> <span class="number">118</span>  <span class="number">86</span>  <span class="number">10</span>  <span class="number">21</span>  <span class="number">45</span>  <span class="number">59</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">49</span><span class="punctuation">]</span>  <span class="number">62</span>  <span class="number">99</span> <span class="number">120</span> <span class="number">113</span> <span class="number">135</span>  <span class="number">31</span> <span class="number">132</span>   <span class="number">5</span>  <span class="number">22</span>  <span class="number">84</span> <span class="number">136</span>  <span class="number">93</span>  <span class="number">57</span>   <span class="number">9</span>  <span class="number">74</span>  <span class="number">95</span>   <span class="number">6</span> <span class="number">100</span> <span class="number">125</span>  <span class="number">92</span>  <span class="number">77</span> <span class="number">139</span> <span class="number">106</span> <span class="number">122</span></span><br></pre></td></tr></table></figure><h4 id="数据框内数据计算">数据框内数据计算</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">wp <span class="operator">&lt;-</span> as.data.frame<span class="punctuation">(</span>WorldPhones<span class="punctuation">)</span></span><br><span class="line">head<span class="punctuation">(</span>wp<span class="punctuation">)</span></span><br><span class="line">     N.Amer Europe Asia S.Amer Oceania Africa Mid.Amer</span><br><span class="line"><span class="number">1951</span>  <span class="number">45939</span>  <span class="number">21574</span> <span class="number">2876</span>   <span class="number">1815</span>    <span class="number">1646</span>     <span class="number">89</span>      <span class="number">555</span></span><br><span class="line"><span class="number">1956</span>  <span class="number">60423</span>  <span class="number">29990</span> <span class="number">4708</span>   <span class="number">2568</span>    <span class="number">2366</span>   <span class="number">1411</span>      <span class="number">733</span></span><br><span class="line"><span class="number">1957</span>  <span class="number">64721</span>  <span class="number">32510</span> <span class="number">5230</span>   <span class="number">2695</span>    <span class="number">2526</span>   <span class="number">1546</span>      <span class="number">773</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算每行列的和及平均值</span></span><br><span class="line">rowSums<span class="punctuation">(</span>wp<span class="punctuation">)</span></span><br><span class="line">  <span class="number">1951</span>   <span class="number">1956</span>   <span class="number">1957</span>   <span class="number">1958</span>   <span class="number">1959</span>   <span class="number">1960</span>   <span class="number">1961</span> </span><br><span class="line"> <span class="number">74494</span> <span class="number">102199</span> <span class="number">110001</span> <span class="number">118399</span> <span class="number">124801</span> <span class="number">133709</span> <span class="number">141700</span> </span><br><span class="line">colMeans<span class="punctuation">(</span>wp<span class="punctuation">)</span></span><br><span class="line">    N.Amer     Europe       Asia     S.Amer    Oceania     Africa   Mid.Amer </span><br><span class="line"><span class="number">66747.5714</span> <span class="number">34343.4286</span>  <span class="number">6229.2857</span>  <span class="number">2772.2857</span>  <span class="number">2625.0000</span>  <span class="number">1484.0000</span>   <span class="number">841.7143</span> </span><br><span class="line">cbind<span class="punctuation">(</span>wp<span class="punctuation">,</span> Total<span class="operator">=</span>rowSums<span class="punctuation">(</span>wp<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">     N.Amer Europe Asia S.Amer Oceania Africa Mid.Amer  Total</span><br><span class="line"><span class="number">1951</span>  <span class="number">45939</span>  <span class="number">21574</span> <span class="number">2876</span>   <span class="number">1815</span>    <span class="number">1646</span>     <span class="number">89</span>      <span class="number">555</span>  <span class="number">74494</span></span><br><span class="line"><span class="number">1956</span>  <span class="number">60423</span>  <span class="number">29990</span> <span class="number">4708</span>   <span class="number">2568</span>    <span class="number">2366</span>   <span class="number">1411</span>      <span class="number">733</span> <span class="number">102199</span></span><br><span class="line"><span class="number">1957</span>  <span class="number">64721</span>  <span class="number">32510</span> <span class="number">5230</span>   <span class="number">2695</span>    <span class="number">2526</span>   <span class="number">1546</span>      <span class="number">773</span> <span class="number">110001</span></span><br><span class="line">...</span><br><span class="line">new <span class="operator">&lt;-</span> cbind<span class="punctuation">(</span>wp<span class="punctuation">,</span> Total<span class="operator">=</span>rowSums<span class="punctuation">(</span>wp<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">rbind<span class="punctuation">(</span>new<span class="punctuation">,</span> Mean<span class="operator">=</span>colMeans<span class="punctuation">(</span>new<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">       N.Amer   Europe     Asia   S.Amer Oceania Africa  Mid.Amer    Total</span><br><span class="line"><span class="number">1951</span> <span class="number">45939.00</span> <span class="number">21574.00</span> <span class="number">2876.000</span> <span class="number">1815.000</span>    <span class="number">1646</span>     <span class="number">89</span>  <span class="number">555.0000</span>  <span class="number">74494.0</span></span><br><span class="line"><span class="number">1956</span> <span class="number">60423.00</span> <span class="number">29990.00</span> <span class="number">4708.000</span> <span class="number">2568.000</span>    <span class="number">2366</span>   <span class="number">1411</span>  <span class="number">733.0000</span> <span class="number">102199.0</span></span><br><span class="line"><span class="number">1957</span> <span class="number">64721.00</span> <span class="number">32510.00</span> <span class="number">5230.000</span> <span class="number">2695.000</span>    <span class="number">2526</span>   <span class="number">1546</span>  <span class="number">773.0000</span> <span class="number">110001.0</span></span><br><span class="line"><span class="number">1958</span> <span class="number">68484.00</span> <span class="number">35218.00</span> <span class="number">6662.000</span> <span class="number">2845.000</span>    <span class="number">2691</span>   <span class="number">1663</span>  <span class="number">836.0000</span> <span class="number">118399.0</span></span><br><span class="line"><span class="number">1959</span> <span class="number">71799.00</span> <span class="number">37598.00</span> <span class="number">6856.000</span> <span class="number">3000.000</span>    <span class="number">2868</span>   <span class="number">1769</span>  <span class="number">911.0000</span> <span class="number">124801.0</span></span><br><span class="line"><span class="number">1960</span> <span class="number">76036.00</span> <span class="number">40341.00</span> <span class="number">8220.000</span> <span class="number">3145.000</span>    <span class="number">3054</span>   <span class="number">1905</span> <span class="number">1008.0000</span> <span class="number">133709.0</span></span><br><span class="line"><span class="number">1961</span> <span class="number">79831.00</span> <span class="number">43173.00</span> <span class="number">9053.000</span> <span class="number">3338.000</span>    <span class="number">3224</span>   <span class="number">2005</span> <span class="number">1076.0000</span> <span class="number">141700.0</span></span><br><span class="line">Mean <span class="number">66747.57</span> <span class="number">34343.43</span> <span class="number">6229.286</span> <span class="number">2772.286</span>    <span class="number">2625</span>   <span class="number">1484</span>  <span class="number">841.7143</span> <span class="number">115043.3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将一个FUN应用给数据框，包括自己编写的函数</span></span><br><span class="line">apply<span class="punctuation">(</span>wp<span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> FUN <span class="operator">=</span> <span class="built_in">sum</span><span class="punctuation">)</span></span><br><span class="line">  <span class="number">1951</span>   <span class="number">1956</span>   <span class="number">1957</span>   <span class="number">1958</span>   <span class="number">1959</span>   <span class="number">1960</span>   <span class="number">1961</span> </span><br><span class="line"> <span class="number">74494</span> <span class="number">102199</span> <span class="number">110001</span> <span class="number">118399</span> <span class="number">124801</span> <span class="number">133709</span> <span class="number">141700</span> </span><br><span class="line">apply<span class="punctuation">(</span>wp<span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="built_in">sum</span><span class="punctuation">)</span></span><br><span class="line">  N.Amer   Europe     Asia   S.Amer  Oceania   Africa Mid.Amer </span><br><span class="line">  <span class="number">467233</span>   <span class="number">240404</span>    <span class="number">43605</span>    <span class="number">19406</span>    <span class="number">18375</span>    <span class="number">10388</span>     <span class="number">5892</span> </span><br><span class="line"><span class="built_in">class</span><span class="punctuation">(</span>apply<span class="punctuation">(</span>wp<span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="built_in">sum</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;numeric&quot;</span></span><br><span class="line">apply<span class="punctuation">(</span>wp<span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> sd<span class="punctuation">)</span></span><br><span class="line">    <span class="number">1951</span>     <span class="number">1956</span>     <span class="number">1957</span>     <span class="number">1958</span>     <span class="number">1959</span>     <span class="number">1960</span>     <span class="number">1961</span> </span><br><span class="line"><span class="number">17309.22</span> <span class="number">22712.46</span> <span class="number">24362.16</span> <span class="number">25790.60</span> <span class="number">27116.58</span> <span class="number">28712.04</span> <span class="number">30213.56</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 对列表操作，返回列表</span></span><br><span class="line">lapply<span class="punctuation">(</span>state.center<span class="punctuation">,</span> <span class="built_in">length</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">$</span>x</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">50</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>y</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">50</span></span><br><span class="line"><span class="comment"># 对列表操作，返回向量</span></span><br><span class="line">sapply<span class="punctuation">(</span>state.center<span class="punctuation">,</span> <span class="built_in">length</span><span class="punctuation">)</span></span><br><span class="line"> x  y </span><br><span class="line"><span class="number">50</span> <span class="number">50</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二个参数为因子</span></span><br><span class="line">tapply<span class="punctuation">(</span>state.name<span class="punctuation">,</span> state.division<span class="punctuation">,</span> <span class="built_in">length</span><span class="punctuation">)</span></span><br><span class="line">       New England    Middle Atlantic     South Atlantic East South Central West South Central </span><br><span class="line">                 <span class="number">6</span>                  <span class="number">3</span>                  <span class="number">8</span>                  <span class="number">4</span>                  <span class="number">4</span> </span><br><span class="line">East North Central West North Central           Mountain            Pacific </span><br><span class="line">                 <span class="number">5</span>                  <span class="number">7</span>                  <span class="number">8</span>                  <span class="number">5</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据中心化，各数据减去均值</span></span><br><span class="line">x <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">)</span></span><br><span class="line">x<span class="operator">-</span>mean<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="operator">-</span><span class="number">2</span> <span class="operator">-</span><span class="number">1</span>  <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据标准化，减去均值后再除以标准差</span></span><br><span class="line">sd<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1.581139</span></span><br><span class="line"><span class="punctuation">(</span>x<span class="operator">-</span>mean<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="operator">/</span>sd<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="operator">-</span><span class="number">1.2649111</span> <span class="operator">-</span><span class="number">0.6324555</span>  <span class="number">0.0000000</span>  <span class="number">0.6324555</span>  <span class="number">1.2649111</span></span><br><span class="line"></span><br><span class="line">scale<span class="punctuation">(</span>x<span class="punctuation">,</span> center <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">,</span> scale <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="operator">-</span><span class="number">2</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="operator">-</span><span class="number">1</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">0</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">5</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span></span><br><span class="line"><span class="built_in">attr</span><span class="punctuation">(</span><span class="punctuation">,</span><span class="string">&quot;scaled:center&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">3</span></span><br><span class="line">scale<span class="punctuation">(</span>x<span class="punctuation">,</span> center <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">,</span> scale <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line">           <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="operator">-</span><span class="number">1.2649111</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="operator">-</span><span class="number">0.6324555</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>  <span class="number">0.0000000</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>  <span class="number">0.6324555</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">5</span><span class="punctuation">,</span><span class="punctuation">]</span>  <span class="number">1.2649111</span></span><br><span class="line"><span class="built_in">attr</span><span class="punctuation">(</span><span class="punctuation">,</span><span class="string">&quot;scaled:center&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">3</span></span><br><span class="line"><span class="built_in">attr</span><span class="punctuation">(</span><span class="punctuation">,</span><span class="string">&quot;scaled:scale&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1.581139</span></span><br><span class="line"></span><br><span class="line">heatmap<span class="punctuation">(</span>scale<span class="punctuation">(</span>state.x77<span class="punctuation">,</span> <span class="built_in">T</span><span class="punctuation">,</span><span class="built_in">T</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h4 id="reshape2包应用"><code>reshape2</code>包应用</h4><h4 id="tidyr包应用"><code>tidyr</code>包应用</h4><p>作用：整理数据，合并数据，长宽数据互转</p><p><code>gather()</code>：宽数据→长数据（建议使用更新的<code>pivot_longer()</code>和<code>pivot_wider()</code>）</p><p><code>spread()</code>：长数据→宽数据</p><p><code>unite()</code>：多列合并为一列</p><p><code>seperate()</code>：一列拆分为多列</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># gather()</span></span><br><span class="line">td <span class="operator">&lt;-</span> mtcars<span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span><span class="number">2</span><span class="punctuation">,</span><span class="number">1</span><span class="operator">:</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line">td</span><br><span class="line">                   mpg cyl  disp</span><br><span class="line">Mazda RX4         <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span></span><br><span class="line">Mazda RX4 Wag     <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span></span><br><span class="line">td <span class="operator">&lt;-</span> data.frame<span class="punctuation">(</span>car<span class="operator">=</span>rownames<span class="punctuation">(</span>td<span class="punctuation">)</span><span class="punctuation">,</span>td<span class="punctuation">)</span></span><br><span class="line">td</span><br><span class="line">                                car  mpg cyl  disp</span><br><span class="line">Mazda RX4                 Mazda RX4 <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span></span><br><span class="line">Mazda RX4 Wag         Mazda RX4 Wag <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span></span><br><span class="line"></span><br><span class="line">gather<span class="punctuation">(</span>td<span class="punctuation">,</span> key <span class="operator">=</span> <span class="string">&#x27;Type&#x27;</span><span class="punctuation">,</span> value <span class="operator">=</span> <span class="string">&#x27;Value&#x27;</span><span class="punctuation">,</span> mpg<span class="punctuation">,</span> cyl<span class="punctuation">,</span> disp<span class="punctuation">)</span></span><br><span class="line">            car Type Value</span><br><span class="line"><span class="number">1</span>     Mazda RX4  mpg    <span class="number">21</span></span><br><span class="line"><span class="number">2</span> Mazda RX4 Wag  mpg    <span class="number">21</span></span><br><span class="line"><span class="number">3</span>     Mazda RX4  cyl     <span class="number">6</span></span><br><span class="line"><span class="number">4</span> Mazda RX4 Wag  cyl     <span class="number">6</span></span><br><span class="line"><span class="number">5</span>     Mazda RX4 disp   <span class="number">160</span></span><br><span class="line"><span class="number">6</span> Mazda RX4 Wag disp   <span class="number">160</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择转换的不同方法</span></span><br><span class="line">gather<span class="punctuation">(</span>td<span class="punctuation">,</span> key <span class="operator">=</span> <span class="string">&#x27;Type&#x27;</span><span class="punctuation">,</span> value <span class="operator">=</span> <span class="string">&#x27;Value&#x27;</span><span class="punctuation">,</span> mpg<span class="operator">:</span>disp<span class="punctuation">)</span></span><br><span class="line">            car Type Value</span><br><span class="line"><span class="number">1</span>     Mazda RX4  mpg    <span class="number">21</span></span><br><span class="line"><span class="number">2</span> Mazda RX4 Wag  mpg    <span class="number">21</span></span><br><span class="line"><span class="number">3</span>     Mazda RX4  cyl     <span class="number">6</span></span><br><span class="line"><span class="number">4</span> Mazda RX4 Wag  cyl     <span class="number">6</span></span><br><span class="line"><span class="number">5</span>     Mazda RX4 disp   <span class="number">160</span></span><br><span class="line"><span class="number">6</span> Mazda RX4 Wag disp   <span class="number">160</span></span><br><span class="line"></span><br><span class="line">gather<span class="punctuation">(</span>td<span class="punctuation">,</span> key <span class="operator">=</span> <span class="string">&#x27;Type&#x27;</span><span class="punctuation">,</span> value <span class="operator">=</span> <span class="string">&#x27;Value&#x27;</span><span class="punctuation">,</span> mpg<span class="operator">:</span>disp<span class="punctuation">,</span> <span class="operator">-</span>cyl<span class="punctuation">)</span></span><br><span class="line">            car cyl Type Value</span><br><span class="line"><span class="number">1</span>     Mazda RX4   <span class="number">6</span>  mpg    <span class="number">21</span></span><br><span class="line"><span class="number">2</span> Mazda RX4 Wag   <span class="number">6</span>  mpg    <span class="number">21</span></span><br><span class="line"><span class="number">3</span>     Mazda RX4   <span class="number">6</span> disp   <span class="number">160</span></span><br><span class="line"><span class="number">4</span> Mazda RX4 Wag   <span class="number">6</span> disp   <span class="number">160</span></span><br><span class="line"></span><br><span class="line">gather<span class="punctuation">(</span>td<span class="punctuation">,</span> key <span class="operator">=</span> <span class="string">&#x27;Type&#x27;</span><span class="punctuation">,</span> value <span class="operator">=</span> <span class="string">&#x27;Value&#x27;</span><span class="punctuation">,</span> <span class="number">3</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">)</span></span><br><span class="line">            car mpg Type Value</span><br><span class="line"><span class="number">1</span>     Mazda RX4  <span class="number">21</span>  cyl     <span class="number">6</span></span><br><span class="line"><span class="number">2</span> Mazda RX4 Wag  <span class="number">21</span>  cyl     <span class="number">6</span></span><br><span class="line"><span class="number">3</span>     Mazda RX4  <span class="number">21</span> disp   <span class="number">160</span></span><br><span class="line"><span class="number">4</span> Mazda RX4 Wag  <span class="number">21</span> disp   <span class="number">160</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># spread()</span></span><br><span class="line">gtd <span class="operator">&lt;-</span> gather<span class="punctuation">(</span>td<span class="punctuation">,</span> key <span class="operator">=</span> <span class="string">&#x27;Type&#x27;</span><span class="punctuation">,</span> value <span class="operator">=</span> <span class="string">&#x27;Value&#x27;</span><span class="punctuation">,</span> mpg<span class="operator">:</span>disp<span class="punctuation">,</span> <span class="operator">-</span>cyl<span class="punctuation">)</span></span><br><span class="line">gtd</span><br><span class="line">            car cyl Type Value</span><br><span class="line"><span class="number">1</span>     Mazda RX4   <span class="number">6</span>  mpg    <span class="number">21</span></span><br><span class="line"><span class="number">2</span> Mazda RX4 Wag   <span class="number">6</span>  mpg    <span class="number">21</span></span><br><span class="line"><span class="number">3</span>     Mazda RX4   <span class="number">6</span> disp   <span class="number">160</span></span><br><span class="line"><span class="number">4</span> Mazda RX4 Wag   <span class="number">6</span> disp   <span class="number">160</span></span><br><span class="line">spread<span class="punctuation">(</span>gtd<span class="punctuation">,</span> key <span class="operator">=</span> <span class="string">&#x27;Type&#x27;</span><span class="punctuation">,</span> value <span class="operator">=</span> <span class="string">&#x27;Value&#x27;</span><span class="punctuation">)</span></span><br><span class="line">            car cyl disp mpg</span><br><span class="line"><span class="number">1</span>     Mazda RX4   <span class="number">6</span>  <span class="number">160</span>  <span class="number">21</span></span><br><span class="line"><span class="number">2</span> Mazda RX4 Wag   <span class="number">6</span>  <span class="number">160</span>  <span class="number">21</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># separate()</span></span><br><span class="line">x</span><br><span class="line">     X</span><br><span class="line"><span class="number">1</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span></span><br><span class="line"><span class="number">2</span>  <span class="number">1</span><span class="operator">-</span><span class="number">2</span></span><br><span class="line"><span class="number">3</span>  <span class="number">2</span><span class="operator">-</span><span class="number">3</span></span><br><span class="line"><span class="number">4</span>  <span class="number">3</span><span class="operator">-</span><span class="number">4</span></span><br><span class="line"></span><br><span class="line">separate<span class="punctuation">(</span>x<span class="punctuation">,</span> col <span class="operator">=</span> X<span class="punctuation">,</span> into <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;A&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;B&#x27;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">     A    B</span><br><span class="line"><span class="number">1</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span></span><br><span class="line"><span class="number">2</span>    <span class="number">1</span>    <span class="number">2</span></span><br><span class="line"><span class="number">3</span>    <span class="number">2</span>    <span class="number">3</span></span><br><span class="line"><span class="number">4</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">separate<span class="punctuation">(</span>x<span class="punctuation">,</span> col <span class="operator">=</span> X<span class="punctuation">,</span> into <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;A&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;B&#x27;</span><span class="punctuation">)</span><span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&#x27;-&#x27;</span><span class="punctuation">)</span></span><br><span class="line">     A    B</span><br><span class="line"><span class="number">1</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span></span><br><span class="line"><span class="number">2</span>    <span class="number">1</span>    <span class="number">2</span></span><br><span class="line"><span class="number">3</span>    <span class="number">2</span>    <span class="number">3</span></span><br><span class="line"><span class="number">4</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># unite()</span></span><br><span class="line">x</span><br><span class="line">     A    B</span><br><span class="line"><span class="number">1</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span></span><br><span class="line"><span class="number">2</span>    <span class="number">1</span>    <span class="number">2</span></span><br><span class="line"><span class="number">3</span>    <span class="number">2</span>    <span class="number">3</span></span><br><span class="line"><span class="number">4</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line"></span><br><span class="line">unite<span class="punctuation">(</span>x<span class="punctuation">,</span> col<span class="operator">=</span>X<span class="punctuation">)</span></span><br><span class="line">      X</span><br><span class="line"><span class="number">1</span> NA_NA</span><br><span class="line"><span class="number">2</span>   <span class="number">1</span>_2</span><br><span class="line"><span class="number">3</span>   <span class="number">2</span>_3</span><br><span class="line"><span class="number">4</span>   <span class="number">3</span>_4</span><br><span class="line">unite<span class="punctuation">(</span>x<span class="punctuation">,</span> col<span class="operator">=</span>X<span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&#x27;-&#x27;</span><span class="punctuation">)</span></span><br><span class="line">      X</span><br><span class="line"><span class="number">1</span> <span class="literal">NA</span><span class="operator">-</span><span class="literal">NA</span></span><br><span class="line"><span class="number">2</span>   <span class="number">1</span><span class="operator">-</span><span class="number">2</span></span><br><span class="line"><span class="number">3</span>   <span class="number">2</span><span class="operator">-</span><span class="number">3</span></span><br><span class="line"><span class="number">4</span>   <span class="number">3</span><span class="operator">-</span><span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pivot_longer() 宽数据转换为长数据</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="dplyr包应用"><code>dplyr</code>包应用</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># filter()过滤</span></span><br><span class="line"><span class="operator">&gt;</span> dplyr<span class="operator">::</span>filter<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> mpg<span class="operator">&gt;</span><span class="number">30</span><span class="punctuation">)</span></span><br><span class="line">                mpg cyl disp  hp drat    wt  qsec vs am gear carb          model</span><br><span class="line">Fiat <span class="number">128</span>       <span class="number">32.4</span>   <span class="number">4</span> <span class="number">78.7</span>  <span class="number">66</span> <span class="number">4.08</span> <span class="number">2.200</span> <span class="number">19.47</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span>       Fiat <span class="number">128</span></span><br><span class="line">Honda Civic    <span class="number">30.4</span>   <span class="number">4</span> <span class="number">75.7</span>  <span class="number">52</span> <span class="number">4.93</span> <span class="number">1.615</span> <span class="number">18.52</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">2</span>    Honda Civic</span><br><span class="line">Toyota Corolla <span class="number">33.9</span>   <span class="number">4</span> <span class="number">71.1</span>  <span class="number">65</span> <span class="number">4.22</span> <span class="number">1.835</span> <span class="number">19.90</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span> Toyota Corolla</span><br><span class="line">Lotus Europa   <span class="number">30.4</span>   <span class="number">4</span> <span class="number">95.1</span> <span class="number">113</span> <span class="number">3.77</span> <span class="number">1.513</span> <span class="number">16.90</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">5</span>    <span class="number">2</span>   Lotus Europa</span><br><span class="line"><span class="operator">&gt;</span> dplyr<span class="operator">::</span>filter<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> mpg<span class="operator">&gt;</span><span class="number">30</span> <span class="operator">&amp;</span> wt<span class="operator">&gt;</span><span class="number">2</span><span class="punctuation">)</span></span><br><span class="line">          mpg cyl disp hp drat  wt  qsec vs am gear carb    model</span><br><span class="line">Fiat <span class="number">128</span> <span class="number">32.4</span>   <span class="number">4</span> <span class="number">78.7</span> <span class="number">66</span> <span class="number">4.08</span> <span class="number">2.2</span> <span class="number">19.47</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span> Fiat <span class="number">128</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># distinct()去除重复</span></span><br><span class="line"><span class="operator">&gt;</span> dplyr<span class="operator">::</span>distinct<span class="punctuation">(</span>rbind<span class="punctuation">(</span>mtcars<span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span><span class="punctuation">,</span> mtcars<span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">               mpg cyl disp  hp drat    wt  qsec vs am gear carb         model</span><br><span class="line">Mazda RX4     <span class="number">21.0</span>   <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span>     Mazda RX4</span><br><span class="line">Mazda RX4 Wag <span class="number">21.0</span>   <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span> Mazda RX4 Wag</span><br><span class="line">Datsun <span class="number">710</span>    <span class="number">22.8</span>   <span class="number">4</span>  <span class="number">108</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span>    Datsun <span class="number">710</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># slice()切片</span></span><br><span class="line"><span class="operator">&gt;</span> dplyr<span class="operator">::</span>slice<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> <span class="number">1</span><span class="operator">:</span><span class="number">3</span><span class="punctuation">)</span></span><br><span class="line">               mpg cyl disp  hp drat    wt  qsec vs am gear carb         model</span><br><span class="line">Mazda RX4     <span class="number">21.0</span>   <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span>     Mazda RX4</span><br><span class="line">Mazda RX4 Wag <span class="number">21.0</span>   <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span> Mazda RX4 Wag</span><br><span class="line">Datsun <span class="number">710</span>    <span class="number">22.8</span>   <span class="number">4</span>  <span class="number">108</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span>    Datsun <span class="number">710</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sample_n()抽样，sample_frac()按比例抽样</span></span><br><span class="line"><span class="operator">&gt;</span> dplyr<span class="operator">::</span>sample_n<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">)</span></span><br><span class="line">               mpg cyl  disp  hp drat    wt  qsec vs am gear carb         model</span><br><span class="line">Porsche <span class="number">914</span><span class="operator">-</span><span class="number">2</span> <span class="number">26.0</span>   <span class="number">4</span> <span class="number">120.3</span>  <span class="number">91</span> <span class="number">4.43</span> <span class="number">2.140</span> <span class="number">16.70</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">5</span>    <span class="number">2</span> Porsche <span class="number">914</span><span class="operator">-</span><span class="number">2</span></span><br><span class="line">Fiat <span class="number">128</span>      <span class="number">32.4</span>   <span class="number">4</span>  <span class="number">78.7</span>  <span class="number">66</span> <span class="number">4.08</span> <span class="number">2.200</span> <span class="number">19.47</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span>      Fiat <span class="number">128</span></span><br><span class="line">Mazda RX4 Wag <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span> Mazda RX4 Wag</span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">length</span><span class="punctuation">(</span>row.names<span class="punctuation">(</span>mtcars<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">32</span></span><br><span class="line"><span class="operator">&gt;</span> dplyr<span class="operator">::</span>sample_frac<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> <span class="number">0.1</span><span class="punctuation">)</span></span><br><span class="line">              mpg cyl  disp  hp drat    wt qsec vs am gear carb        model</span><br><span class="line">Ferrari Dino <span class="number">19.7</span>   <span class="number">6</span> <span class="number">145.0</span> <span class="number">175</span> <span class="number">3.62</span> <span class="number">2.770</span> <span class="number">15.5</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">5</span>    <span class="number">6</span> Ferrari Dino</span><br><span class="line">AMC Javelin  <span class="number">15.2</span>   <span class="number">8</span> <span class="number">304.0</span> <span class="number">150</span> <span class="number">3.15</span> <span class="number">3.435</span> <span class="number">17.3</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">2</span>  AMC Javelin</span><br><span class="line">Merc <span class="number">450</span>SE   <span class="number">16.4</span>   <span class="number">8</span> <span class="number">275.8</span> <span class="number">180</span> <span class="number">3.07</span> <span class="number">4.070</span> <span class="number">17.4</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">3</span>   Merc <span class="number">450</span>SE</span><br><span class="line"></span><br><span class="line"><span class="comment"># arrange()排序</span></span><br><span class="line"><span class="operator">&gt;</span> dplyr<span class="operator">::</span>arrange<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> mpg<span class="punctuation">)</span></span><br><span class="line">                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb               model</span><br><span class="line">Cadillac Fleetwood  <span class="number">10.4</span>   <span class="number">8</span> <span class="number">472.0</span> <span class="number">205</span> <span class="number">2.93</span> <span class="number">5.250</span> <span class="number">17.98</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span>  Cadillac Fleetwood</span><br><span class="line">Lincoln Continental <span class="number">10.4</span>   <span class="number">8</span> <span class="number">460.0</span> <span class="number">215</span> <span class="number">3.00</span> <span class="number">5.424</span> <span class="number">17.82</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span> Lincoln Continental</span><br><span class="line">Camaro Z28          <span class="number">13.3</span>   <span class="number">8</span> <span class="number">350.0</span> <span class="number">245</span> <span class="number">3.73</span> <span class="number">3.840</span> <span class="number">15.41</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span>          Camaro Z28</span><br><span class="line">...</span><br><span class="line"><span class="operator">&gt;</span> dplyr<span class="operator">::</span>arrange<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> <span class="operator">-</span>mpg<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> dplyr<span class="operator">::</span>arrange<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> desc<span class="punctuation">(</span>mpg<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb               model</span><br><span class="line">Toyota Corolla      <span class="number">33.9</span>   <span class="number">4</span>  <span class="number">71.1</span>  <span class="number">65</span> <span class="number">4.22</span> <span class="number">1.835</span> <span class="number">19.90</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span>      Toyota Corolla</span><br><span class="line">Fiat <span class="number">128</span>            <span class="number">32.4</span>   <span class="number">4</span>  <span class="number">78.7</span>  <span class="number">66</span> <span class="number">4.08</span> <span class="number">2.200</span> <span class="number">19.47</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span>            Fiat <span class="number">128</span></span><br><span class="line">Honda Civic         <span class="number">30.4</span>   <span class="number">4</span>  <span class="number">75.7</span>  <span class="number">52</span> <span class="number">4.93</span> <span class="number">1.615</span> <span class="number">18.52</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">2</span>         Honda Civic</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># select()数据框取子集</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># summarise()描述性统计，还有summarise_all(), summarise_at(), summarise_each()等</span></span><br><span class="line"><span class="operator">&gt;</span> summarise<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> avg<span class="operator">=</span>mean<span class="punctuation">(</span>mpg<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">       avg</span><br><span class="line"><span class="number">1</span> <span class="number">20.09062</span></span><br><span class="line"><span class="operator">&gt;</span> summarise<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> avg<span class="operator">=</span>mean<span class="punctuation">(</span>cyl<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">     avg</span><br><span class="line"><span class="number">1</span> <span class="number">6.1875</span></span><br><span class="line"><span class="operator">&gt;</span> summarise<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> <span class="built_in">sum</span><span class="operator">=</span><span class="built_in">sum</span><span class="punctuation">(</span>mpg<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">    <span class="built_in">sum</span></span><br><span class="line"><span class="number">1</span> <span class="number">642.9</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># % &gt; %链式操作符，管道符，前一个运算结果作为后一个的输入</span></span><br><span class="line"><span class="operator">&gt;</span> mtcars <span class="operator">%&gt;%</span> summarise<span class="punctuation">(</span><span class="built_in">sum</span><span class="operator">=</span><span class="built_in">sum</span><span class="punctuation">(</span>mpg<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">    <span class="built_in">sum</span></span><br><span class="line"><span class="number">1</span> <span class="number">642.9</span></span><br><span class="line"><span class="operator">&gt;</span> head<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span> tail<span class="punctuation">(</span><span class="number">3</span><span class="punctuation">)</span></span><br><span class="line">           mpg cyl  disp  hp drat   wt qsec vs am gear carb</span><br><span class="line">Merc <span class="number">240</span>D <span class="number">24.4</span>   <span class="number">4</span> <span class="number">146.7</span>  <span class="number">62</span> <span class="number">3.69</span> <span class="number">3.19</span> <span class="number">20.0</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">4</span>    <span class="number">2</span></span><br><span class="line">Merc <span class="number">230</span>  <span class="number">22.8</span>   <span class="number">4</span> <span class="number">140.8</span>  <span class="number">95</span> <span class="number">3.92</span> <span class="number">3.15</span> <span class="number">22.9</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">4</span>    <span class="number">2</span></span><br><span class="line">Merc <span class="number">280</span>  <span class="number">19.2</span>   <span class="number">6</span> <span class="number">167.6</span> <span class="number">123</span> <span class="number">3.92</span> <span class="number">3.44</span> <span class="number">18.3</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># group_by()分组</span></span><br><span class="line"><span class="operator">&gt;</span> dplyr<span class="operator">::</span>group_by<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> cyl<span class="punctuation">)</span></span><br><span class="line"><span class="comment"># A tibble: 32 x 11</span></span><br><span class="line"><span class="comment"># Groups:   cyl [3]</span></span><br><span class="line">     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span><br><span class="line">   <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span> <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span> <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span> <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span> <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span> <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span> <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span> <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span> <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span> <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span> <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span></span><br><span class="line"> <span class="number">1</span>  <span class="number">21</span>       <span class="number">6</span>  <span class="number">160</span>    <span class="number">110</span>  <span class="number">3.9</span>   <span class="number">2.62</span>  <span class="number">16.5</span>     <span class="number">0</span>     <span class="number">1</span>     <span class="number">4</span>     <span class="number">4</span></span><br><span class="line"> <span class="number">2</span>  <span class="number">21</span>       <span class="number">6</span>  <span class="number">160</span>    <span class="number">110</span>  <span class="number">3.9</span>   <span class="number">2.88</span>  <span class="number">17.0</span>     <span class="number">0</span>     <span class="number">1</span>     <span class="number">4</span>     <span class="number">4</span></span><br><span class="line"> <span class="number">3</span>  <span class="number">22.8</span>     <span class="number">4</span>  <span class="number">108</span>     <span class="number">93</span>  <span class="number">3.85</span>  <span class="number">2.32</span>  <span class="number">18.6</span>     <span class="number">1</span>     <span class="number">1</span>     <span class="number">4</span>     <span class="number">1</span></span><br><span class="line"> <span class="number">4</span>  <span class="number">21.4</span>     <span class="number">6</span>  <span class="number">258</span>    <span class="number">110</span>  <span class="number">3.08</span>  <span class="number">3.22</span>  <span class="number">19.4</span>     <span class="number">1</span>     <span class="number">0</span>     <span class="number">3</span>     <span class="number">1</span></span><br><span class="line"> <span class="number">5</span>  <span class="number">18.7</span>     <span class="number">8</span>  <span class="number">360</span>    <span class="number">175</span>  <span class="number">3.15</span>  <span class="number">3.44</span>  <span class="number">17.0</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">3</span>     <span class="number">2</span></span><br><span class="line"> <span class="number">6</span>  <span class="number">18.1</span>     <span class="number">6</span>  <span class="number">225</span>    <span class="number">105</span>  <span class="number">2.76</span>  <span class="number">3.46</span>  <span class="number">20.2</span>     <span class="number">1</span>     <span class="number">0</span>     <span class="number">3</span>     <span class="number">1</span></span><br><span class="line"> <span class="number">7</span>  <span class="number">14.3</span>     <span class="number">8</span>  <span class="number">360</span>    <span class="number">245</span>  <span class="number">3.21</span>  <span class="number">3.57</span>  <span class="number">15.8</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">3</span>     <span class="number">4</span></span><br><span class="line"> <span class="number">8</span>  <span class="number">24.4</span>     <span class="number">4</span>  <span class="number">147.</span>    <span class="number">62</span>  <span class="number">3.69</span>  <span class="number">3.19</span>  <span class="number">20</span>       <span class="number">1</span>     <span class="number">0</span>     <span class="number">4</span>     <span class="number">2</span></span><br><span class="line"> <span class="number">9</span>  <span class="number">22.8</span>     <span class="number">4</span>  <span class="number">141.</span>    <span class="number">95</span>  <span class="number">3.92</span>  <span class="number">3.15</span>  <span class="number">22.9</span>     <span class="number">1</span>     <span class="number">0</span>     <span class="number">4</span>     <span class="number">2</span></span><br><span class="line"><span class="number">10</span>  <span class="number">19.2</span>     <span class="number">6</span>  <span class="number">168.</span>   <span class="number">123</span>  <span class="number">3.92</span>  <span class="number">3.44</span>  <span class="number">18.3</span>     <span class="number">1</span>     <span class="number">0</span>     <span class="number">4</span>     <span class="number">4</span></span><br><span class="line"><span class="comment"># ... with 22 more rows</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> dplyr<span class="operator">::</span>group_by<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> cyl<span class="punctuation">)</span> <span class="operator">%&gt;%</span> summarise<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># A tibble: 3 x 1</span></span><br><span class="line">    cyl</span><br><span class="line">  <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span></span><br><span class="line"><span class="number">1</span>     <span class="number">4</span></span><br><span class="line"><span class="number">2</span>     <span class="number">6</span></span><br><span class="line"><span class="number">3</span>     <span class="number">8</span></span><br><span class="line"><span class="operator">&gt;</span> dplyr<span class="operator">::</span>group_by<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> cyl<span class="punctuation">)</span> <span class="operator">%&gt;%</span> summarise<span class="punctuation">(</span>ave<span class="operator">=</span>mean<span class="punctuation">(</span>mpg<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># A tibble: 3 x 2</span></span><br><span class="line">    cyl   ave</span><br><span class="line">  <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span> <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span></span><br><span class="line"><span class="number">1</span>     <span class="number">4</span>  <span class="number">26.7</span></span><br><span class="line"><span class="number">2</span>     <span class="number">6</span>  <span class="number">19.7</span></span><br><span class="line"><span class="number">3</span>     <span class="number">8</span>  <span class="number">15.1</span></span><br><span class="line"><span class="operator">&gt;</span> dplyr<span class="operator">::</span>group_by<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> cyl<span class="punctuation">)</span> <span class="operator">%&gt;%</span> summarise<span class="punctuation">(</span>ave<span class="operator">=</span>mean<span class="punctuation">(</span>mpg<span class="punctuation">)</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span> arrange<span class="punctuation">(</span>ave<span class="punctuation">)</span></span><br><span class="line"><span class="comment"># A tibble: 3 x 2</span></span><br><span class="line">    cyl   ave</span><br><span class="line">  <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span> <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span></span><br><span class="line"><span class="number">1</span>     <span class="number">8</span>  <span class="number">15.1</span></span><br><span class="line"><span class="number">2</span>     <span class="number">6</span>  <span class="number">19.7</span></span><br><span class="line"><span class="number">3</span>     <span class="number">4</span>  <span class="number">26.7</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># mutate()加入新变量</span></span><br><span class="line"><span class="operator">&gt;</span> mt <span class="operator">&lt;-</span> mutate<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> new <span class="operator">=</span> mpg<span class="operator">+</span>disp<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> head<span class="punctuation">(</span>mt<span class="punctuation">,</span><span class="number">3</span><span class="punctuation">)</span></span><br><span class="line">               mpg cyl disp  hp drat    wt  qsec vs am gear carb   new</span><br><span class="line">Mazda RX4     <span class="number">21.0</span>   <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span> <span class="number">181.0</span></span><br><span class="line">Mazda RX4 Wag <span class="number">21.0</span>   <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span> <span class="number">181.0</span></span><br><span class="line">Datsun <span class="number">710</span>    <span class="number">22.8</span>   <span class="number">4</span>  <span class="number">108</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span> <span class="number">130.8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 整合x, y两个表格，类似于集合的操作</span></span><br><span class="line"><span class="operator">&gt;</span> a</span><br><span class="line">  x1 x2</span><br><span class="line"><span class="number">1</span>  A  <span class="number">1</span></span><br><span class="line"><span class="number">2</span>  B  <span class="number">2</span></span><br><span class="line"><span class="number">3</span>  C  <span class="number">3</span></span><br><span class="line"><span class="operator">&gt;</span> b</span><br><span class="line">  x1    x3</span><br><span class="line"><span class="number">1</span>  A  <span class="literal">TRUE</span></span><br><span class="line"><span class="number">2</span>  B <span class="literal">FALSE</span></span><br><span class="line"><span class="number">3</span>  D  <span class="literal">TRUE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 左右链接，以某列为标准</span></span><br><span class="line"><span class="operator">&gt;</span> dplyr<span class="operator">::</span>left_join<span class="punctuation">(</span>a<span class="punctuation">,</span>b<span class="punctuation">,</span>by<span class="operator">=</span><span class="string">&quot;x1&quot;</span><span class="punctuation">)</span></span><br><span class="line">  x1 x2    x3</span><br><span class="line"><span class="number">1</span>  A  <span class="number">1</span>  <span class="literal">TRUE</span></span><br><span class="line"><span class="number">2</span>  B  <span class="number">2</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="number">3</span>  C  <span class="number">3</span>    <span class="literal">NA</span></span><br><span class="line"><span class="operator">&gt;</span> dplyr<span class="operator">::</span>right_join<span class="punctuation">(</span>a<span class="punctuation">,</span> b<span class="punctuation">,</span> <span class="string">&#x27;x1&#x27;</span><span class="punctuation">)</span></span><br><span class="line">  x1 x2    x3</span><br><span class="line"><span class="number">1</span>  A  <span class="number">1</span>  <span class="literal">TRUE</span></span><br><span class="line"><span class="number">2</span>  B  <span class="number">2</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="number">3</span>  D <span class="literal">NA</span>  <span class="literal">TRUE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 内链接取x1交集，外链接取全集</span></span><br><span class="line"><span class="operator">&gt;</span> inner_join<span class="punctuation">(</span>a<span class="punctuation">,</span> b<span class="punctuation">,</span> <span class="string">&#x27;x1&#x27;</span><span class="punctuation">)</span></span><br><span class="line">  x1 x2    x3</span><br><span class="line"><span class="number">1</span>  A  <span class="number">1</span>  <span class="literal">TRUE</span></span><br><span class="line"><span class="number">2</span>  B  <span class="number">2</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="operator">&gt;</span> dplyr<span class="operator">::</span>full_join<span class="punctuation">(</span>a<span class="punctuation">,</span>b<span class="punctuation">,</span>by<span class="operator">=</span><span class="string">&quot;x1&quot;</span><span class="punctuation">)</span></span><br><span class="line">  x1 x2    x3</span><br><span class="line"><span class="number">1</span>  A  <span class="number">1</span>  <span class="literal">TRUE</span></span><br><span class="line"><span class="number">2</span>  B  <span class="number">2</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="number">3</span>  C  <span class="number">3</span>    <span class="literal">NA</span></span><br><span class="line"><span class="number">4</span>  D <span class="literal">NA</span>  <span class="literal">TRUE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 半链接取交集，反链接取补集</span></span><br><span class="line"><span class="operator">&gt;</span> dplyr<span class="operator">::</span>semi_join<span class="punctuation">(</span>a<span class="punctuation">,</span>b<span class="punctuation">,</span>by<span class="operator">=</span><span class="string">&quot;x1&quot;</span><span class="punctuation">)</span></span><br><span class="line">  x1 x2</span><br><span class="line"><span class="number">1</span>  A  <span class="number">1</span></span><br><span class="line"><span class="number">2</span>  B  <span class="number">2</span></span><br><span class="line"><span class="operator">&gt;</span> dplyr<span class="operator">::</span>anti_join<span class="punctuation">(</span>a<span class="punctuation">,</span>b<span class="punctuation">,</span>by<span class="operator">=</span><span class="string">&quot;x1&quot;</span><span class="punctuation">)</span></span><br><span class="line">  x1 x2</span><br><span class="line"><span class="number">1</span>  C  <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据框交集、补集、并集操作</span></span><br><span class="line"><span class="operator">&gt;</span> car1</span><br><span class="line">                   mpg cyl disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Mazda RX4         <span class="number">21.0</span>   <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Mazda RX4 Wag     <span class="number">21.0</span>   <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Datsun <span class="number">710</span>        <span class="number">22.8</span>   <span class="number">4</span>  <span class="number">108</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">Hornet <span class="number">4</span> Drive    <span class="number">21.4</span>   <span class="number">6</span>  <span class="number">258</span> <span class="number">110</span> <span class="number">3.08</span> <span class="number">3.215</span> <span class="number">19.44</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Hornet Sportabout <span class="number">18.7</span>   <span class="number">8</span>  <span class="number">360</span> <span class="number">175</span> <span class="number">3.15</span> <span class="number">3.440</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">2</span></span><br><span class="line"><span class="operator">&gt;</span> car2</span><br><span class="line">                   mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Datsun <span class="number">710</span>        <span class="number">22.8</span>   <span class="number">4</span> <span class="number">108.0</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">Hornet <span class="number">4</span> Drive    <span class="number">21.4</span>   <span class="number">6</span> <span class="number">258.0</span> <span class="number">110</span> <span class="number">3.08</span> <span class="number">3.215</span> <span class="number">19.44</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Hornet Sportabout <span class="number">18.7</span>   <span class="number">8</span> <span class="number">360.0</span> <span class="number">175</span> <span class="number">3.15</span> <span class="number">3.440</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">2</span></span><br><span class="line">Valiant           <span class="number">18.1</span>   <span class="number">6</span> <span class="number">225.0</span> <span class="number">105</span> <span class="number">2.76</span> <span class="number">3.460</span> <span class="number">20.22</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Duster <span class="number">360</span>        <span class="number">14.3</span>   <span class="number">8</span> <span class="number">360.0</span> <span class="number">245</span> <span class="number">3.21</span> <span class="number">3.570</span> <span class="number">15.84</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">Merc <span class="number">240</span>D         <span class="number">24.4</span>   <span class="number">4</span> <span class="number">146.7</span>  <span class="number">62</span> <span class="number">3.69</span> <span class="number">3.190</span> <span class="number">20.00</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">4</span>    <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 取交集</span></span><br><span class="line"><span class="operator">&gt;</span> intersect<span class="punctuation">(</span>car1<span class="punctuation">,</span> car2<span class="punctuation">)</span></span><br><span class="line">                   mpg cyl disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Datsun <span class="number">710</span>        <span class="number">22.8</span>   <span class="number">4</span>  <span class="number">108</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">Hornet <span class="number">4</span> Drive    <span class="number">21.4</span>   <span class="number">6</span>  <span class="number">258</span> <span class="number">110</span> <span class="number">3.08</span> <span class="number">3.215</span> <span class="number">19.44</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Hornet Sportabout <span class="number">18.7</span>   <span class="number">8</span>  <span class="number">360</span> <span class="number">175</span> <span class="number">3.15</span> <span class="number">3.440</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 取并集，不包括重复项</span></span><br><span class="line"><span class="operator">&gt;</span> union<span class="punctuation">(</span>car1<span class="punctuation">,</span> car2<span class="punctuation">)</span></span><br><span class="line">                   mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Mazda RX4         <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Mazda RX4 Wag     <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Datsun <span class="number">710</span>        <span class="number">22.8</span>   <span class="number">4</span> <span class="number">108.0</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">Hornet <span class="number">4</span> Drive    <span class="number">21.4</span>   <span class="number">6</span> <span class="number">258.0</span> <span class="number">110</span> <span class="number">3.08</span> <span class="number">3.215</span> <span class="number">19.44</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Hornet Sportabout <span class="number">18.7</span>   <span class="number">8</span> <span class="number">360.0</span> <span class="number">175</span> <span class="number">3.15</span> <span class="number">3.440</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">2</span></span><br><span class="line">Valiant           <span class="number">18.1</span>   <span class="number">6</span> <span class="number">225.0</span> <span class="number">105</span> <span class="number">2.76</span> <span class="number">3.460</span> <span class="number">20.22</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Duster <span class="number">360</span>        <span class="number">14.3</span>   <span class="number">8</span> <span class="number">360.0</span> <span class="number">245</span> <span class="number">3.21</span> <span class="number">3.570</span> <span class="number">15.84</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">Merc <span class="number">240</span>D         <span class="number">24.4</span>   <span class="number">4</span> <span class="number">146.7</span>  <span class="number">62</span> <span class="number">3.69</span> <span class="number">3.190</span> <span class="number">20.00</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">4</span>    <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 取并集，包括重复项</span></span><br><span class="line"><span class="operator">&gt;</span> union_all<span class="punctuation">(</span>car1<span class="punctuation">,</span> car2<span class="punctuation">)</span></span><br><span class="line">                       mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Mazda RX4             <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Mazda RX4 Wag         <span class="number">21.0</span>   <span class="number">6</span> <span class="number">160.0</span> <span class="number">110</span> <span class="number">3.90</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Datsun <span class="number">710.</span>..3        <span class="number">22.8</span>   <span class="number">4</span> <span class="number">108.0</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">Hornet <span class="number">4</span> Drive...4    <span class="number">21.4</span>   <span class="number">6</span> <span class="number">258.0</span> <span class="number">110</span> <span class="number">3.08</span> <span class="number">3.215</span> <span class="number">19.44</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Hornet Sportabout...5 <span class="number">18.7</span>   <span class="number">8</span> <span class="number">360.0</span> <span class="number">175</span> <span class="number">3.15</span> <span class="number">3.440</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">2</span></span><br><span class="line">Datsun <span class="number">710.</span>..6        <span class="number">22.8</span>   <span class="number">4</span> <span class="number">108.0</span>  <span class="number">93</span> <span class="number">3.85</span> <span class="number">2.320</span> <span class="number">18.61</span>  <span class="number">1</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">1</span></span><br><span class="line">Hornet <span class="number">4</span> Drive...7    <span class="number">21.4</span>   <span class="number">6</span> <span class="number">258.0</span> <span class="number">110</span> <span class="number">3.08</span> <span class="number">3.215</span> <span class="number">19.44</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Hornet Sportabout...8 <span class="number">18.7</span>   <span class="number">8</span> <span class="number">360.0</span> <span class="number">175</span> <span class="number">3.15</span> <span class="number">3.440</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">2</span></span><br><span class="line">Valiant               <span class="number">18.1</span>   <span class="number">6</span> <span class="number">225.0</span> <span class="number">105</span> <span class="number">2.76</span> <span class="number">3.460</span> <span class="number">20.22</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Duster <span class="number">360</span>            <span class="number">14.3</span>   <span class="number">8</span> <span class="number">360.0</span> <span class="number">245</span> <span class="number">3.21</span> <span class="number">3.570</span> <span class="number">15.84</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">Merc <span class="number">240</span>D             <span class="number">24.4</span>   <span class="number">4</span> <span class="number">146.7</span>  <span class="number">62</span> <span class="number">3.69</span> <span class="number">3.190</span> <span class="number">20.00</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">4</span>    <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 取car1补集</span></span><br><span class="line"><span class="operator">&gt;</span> setdiff<span class="punctuation">(</span>car1<span class="punctuation">,</span> car2<span class="punctuation">)</span></span><br><span class="line">              mpg cyl disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Mazda RX4      <span class="number">21</span>   <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span>  <span class="number">3.9</span> <span class="number">2.620</span> <span class="number">16.46</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line">Mazda RX4 Wag  <span class="number">21</span>   <span class="number">6</span>  <span class="number">160</span> <span class="number">110</span>  <span class="number">3.9</span> <span class="number">2.875</span> <span class="number">17.02</span>  <span class="number">0</span>  <span class="number">1</span>    <span class="number">4</span>    <span class="number">4</span></span><br><span class="line"><span class="comment"># 取car2补集</span></span><br><span class="line"><span class="operator">&gt;</span> setdiff<span class="punctuation">(</span>car2<span class="punctuation">,</span> car1<span class="punctuation">)</span></span><br><span class="line">            mpg cyl  disp  hp drat   wt  qsec vs am gear carb</span><br><span class="line">Valiant    <span class="number">18.1</span>   <span class="number">6</span> <span class="number">225.0</span> <span class="number">105</span> <span class="number">2.76</span> <span class="number">3.46</span> <span class="number">20.22</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line">Duster <span class="number">360</span> <span class="number">14.3</span>   <span class="number">8</span> <span class="number">360.0</span> <span class="number">245</span> <span class="number">3.21</span> <span class="number">3.57</span> <span class="number">15.84</span>  <span class="number">0</span>  <span class="number">0</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">Merc <span class="number">240</span>D  <span class="number">24.4</span>   <span class="number">4</span> <span class="number">146.7</span>  <span class="number">62</span> <span class="number">3.69</span> <span class="number">3.19</span> <span class="number">20.00</span>  <span class="number">1</span>  <span class="number">0</span>    <span class="number">4</span>    <span class="number">2</span></span><br></pre></td></tr></table></figure><h2 id="R函数">R函数</h2><h3 id="函数的选项参数">函数的选项参数</h3><p>函数选项类型</p><ol><li>输入控制</li><li>输出控制</li><li>调节</li></ol><h3 id="数学统计函数">数学统计函数</h3><p><code>d</code>概率密度函数</p><p><code>p</code>分布函数</p><p><code>q</code>分布函数的反函数</p><p><code>r</code>随机数函数</p><p>如正态分布函数norm()加上这4个前缀：</p><p><code>dnorm(), pnorm(), qnorm(), rnorm()</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成10个符合正态分布的随机数</span></span><br><span class="line"><span class="operator">&gt;</span> rnorm<span class="punctuation">(</span>n<span class="operator">=</span><span class="number">10</span><span class="punctuation">,</span> mean<span class="operator">=</span><span class="number">5</span><span class="punctuation">,</span> sd<span class="operator">=</span><span class="number">1</span><span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">6.329543</span> <span class="number">4.232249</span> <span class="number">6.033233</span> <span class="number">4.837938</span> <span class="number">3.984797</span> <span class="number">5.299808</span> <span class="number">5.202550</span> <span class="number">2.070615</span> <span class="number">5.830317</span> <span class="number">5.936402</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">round</span><span class="punctuation">(</span>rnorm<span class="punctuation">(</span>n<span class="operator">=</span><span class="number">10</span><span class="punctuation">,</span> mean<span class="operator">=</span><span class="number">5</span><span class="punctuation">,</span> sd<span class="operator">=</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">5</span> <span class="number">4</span> <span class="number">5</span> <span class="number">5</span> <span class="number">5</span> <span class="number">4</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># runif()生成随机数</span></span><br><span class="line"><span class="operator">&gt;</span> runif<span class="punctuation">(</span><span class="number">5</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">0.04366431</span> <span class="number">0.34873894</span> <span class="number">0.29974298</span> <span class="number">0.39224632</span> <span class="number">0.08980883</span></span><br><span class="line"><span class="operator">&gt;</span> runif<span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">0.83081773</span> <span class="number">2.22285093</span> <span class="number">0.07499167</span> <span class="number">4.59838033</span> <span class="number">6.37444314</span></span><br><span class="line"><span class="operator">&gt;</span> runif<span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span> <span class="built_in">min</span><span class="operator">=</span><span class="number">0</span><span class="punctuation">,</span> <span class="built_in">max</span><span class="operator">=</span><span class="number">10</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">4.5102458</span> <span class="number">0.3494494</span> <span class="number">9.4862655</span> <span class="number">4.6722139</span> <span class="number">0.5983668</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">round</span><span class="punctuation">(</span>runif<span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span> <span class="built_in">min</span><span class="operator">=</span><span class="number">0</span><span class="punctuation">,</span> <span class="built_in">max</span><span class="operator">=</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">1</span>  <span class="number">5</span>  <span class="number">8</span>  <span class="number">6</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 固定生成的随机数</span></span><br><span class="line"><span class="operator">&gt;</span> set.seed<span class="punctuation">(</span><span class="number">10</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">round</span><span class="punctuation">(</span>runif<span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span> <span class="built_in">min</span><span class="operator">=</span><span class="number">0</span><span class="punctuation">,</span> <span class="built_in">max</span><span class="operator">=</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">5</span> <span class="number">3</span> <span class="number">4</span> <span class="number">7</span> <span class="number">1</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">round</span><span class="punctuation">(</span>runif<span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span> <span class="built_in">min</span><span class="operator">=</span><span class="number">0</span><span class="punctuation">,</span> <span class="built_in">max</span><span class="operator">=</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span> <span class="number">3</span> <span class="number">3</span> <span class="number">6</span> <span class="number">4</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">round</span><span class="punctuation">(</span>runif<span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span> <span class="built_in">min</span><span class="operator">=</span><span class="number">0</span><span class="punctuation">,</span> <span class="built_in">max</span><span class="operator">=</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">7</span> <span class="number">6</span> <span class="number">1</span> <span class="number">6</span> <span class="number">4</span></span><br><span class="line"><span class="operator">&gt;</span> set.seed<span class="punctuation">(</span><span class="number">10</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">round</span><span class="punctuation">(</span>runif<span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span> <span class="built_in">min</span><span class="operator">=</span><span class="number">0</span><span class="punctuation">,</span> <span class="built_in">max</span><span class="operator">=</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">5</span> <span class="number">3</span> <span class="number">4</span> <span class="number">7</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="描述性统计函数">描述性统计函数</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h3 id="频数统计函数">频数统计函数</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># table()直接统计频数</span></span><br><span class="line"><span class="operator">&gt;</span> table<span class="punctuation">(</span>mtcars<span class="operator">$</span>cyl<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"> <span class="number">4</span>  <span class="number">6</span>  <span class="number">8</span> </span><br><span class="line"><span class="number">11</span>  <span class="number">7</span> <span class="number">14</span> </span><br><span class="line"><span class="comment"># prop.table()计算频率</span></span><br><span class="line"><span class="operator">&gt;</span> prop.table<span class="punctuation">(</span>table<span class="punctuation">(</span>mtcars<span class="operator">$</span>cyl<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">      <span class="number">4</span>       <span class="number">6</span>       <span class="number">8</span> </span><br><span class="line"><span class="number">0.34375</span> <span class="number">0.21875</span> <span class="number">0.43750</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># split()将数据分组(list)</span></span><br><span class="line"><span class="operator">&gt;</span> split<span class="punctuation">(</span>mtcars<span class="punctuation">,</span> mtcars<span class="operator">$</span>cyl<span class="punctuation">)</span></span><br><span class="line"><span class="operator">$</span>`<span class="number">4</span>`</span><br><span class="line">                mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1</span><br><span class="line">Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2</span><br><span class="line"></span><br><span class="line">$`6`</span><br><span class="line">                mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Mazda RX4      21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4</span><br><span class="line">Mazda RX4 Wag  21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4</span><br><span class="line"></span><br><span class="line">$`8`</span><br><span class="line">                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2</span><br><span class="line">Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4</span><br><span class="line">&gt; split(mtcars, mtcars$cyl)[&#x27;4&#x27;]</span><br><span class="line">$`4`</span><br><span class="line">                mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span><br><span class="line">Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1</span><br><span class="line">Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2</span><br><span class="line"></span><br><span class="line"># 计算连续值频数和频率</span><br><span class="line">&gt; range(mtcars$mpg)</span><br><span class="line">[1] 10.4 33.9</span><br><span class="line">&gt; seq(10, 40, 5)</span><br><span class="line">[1] 10 15 20 25 30 35 40</span><br><span class="line">&gt; cut(mtcars$mpg, seq(10, 35, 5))</span><br><span class="line"> [1] (20,25] (20,25] (20,25] (20,25] (15,20] (15,20] (10,15] (20,25] (20,25] (15,20] (15,20] (15,20]</span><br><span class="line">[13] (15,20] (15,20] (10,15] (10,15] (10,15] (30,35] (30,35] (30,35] (20,25] (15,20] (15,20] (10,15]</span><br><span class="line">[25] (15,20] (25,30] (25,30] (30,35] (15,20] (15,20] (10,15] (20,25]</span><br><span class="line">Levels: (10,15] (15,20] (20,25] (25,30] (30,35]</span><br><span class="line"></span><br><span class="line">&gt; table(cut(mtcars$mpg, seq(10, 35, 5)))</span><br><span class="line"></span><br><span class="line">(10,15] (15,20] (20,25] (25,30] (30,35] </span><br><span class="line">      6      12       8       2       4 </span><br><span class="line"></span><br><span class="line">&gt; prop.table(table(cut(mtcars$mpg, seq(10, 35, 5))))</span><br><span class="line"></span><br><span class="line">(10,15] (15,20] (20,25] (25,30] (30,35] </span><br><span class="line"> 0.1875  0.3750  0.2500  0.0625  0.1250 </span><br><span class="line"></span><br><span class="line"># 二维，talbe() xtabs()</span><br><span class="line">&gt; library(vcd) </span><br><span class="line">&gt; Arthritis</span><br><span class="line">   ID Treatment    Sex Age Improved</span><br><span class="line">1  57   Treated   Male  27     Some</span><br><span class="line">2  46   Treated   Male  29     None</span><br><span class="line">3  77   Treated   Male  30     None</span><br><span class="line">                                 </span><br><span class="line">&gt; table(Arthritis$Treatment, Arthritis$Improved)</span><br><span class="line">         </span><br><span class="line">          None Some Marked</span><br><span class="line">  Placebo   29    7      7</span><br><span class="line">  Treated   13    7     21</span><br><span class="line">                                 </span><br><span class="line">&gt; xtabs(~ Treatment + Improved, data = Arthritis)</span><br><span class="line">         Improved</span><br><span class="line">Treatment None Some Marked</span><br><span class="line">  Placebo   29    7      7</span><br><span class="line">  Treated   13    7     21</span><br><span class="line"></span><br><span class="line">&gt; with(data = Arthritis, &#123;table(Treatment, Improved)&#125;)</span><br><span class="line">         Improved</span><br><span class="line">Treatment None Some Marked</span><br><span class="line">  Placebo   29    7      7</span><br><span class="line">  Treated   13    7     21</span><br><span class="line"> </span><br><span class="line"># 边际频数及统计，1表示按行统计，2表示按列统计</span><br><span class="line"># margin.table() addmargins()</span><br><span class="line">&gt; x &lt;- xtabs(~ Treatment + Improved, data = Arthritis)</span><br><span class="line">&gt; margin.table(x)</span><br><span class="line">[1] 84</span><br><span class="line">&gt; margin.table(x, 1)</span><br><span class="line">Treatment</span><br><span class="line">Placebo Treated </span><br><span class="line">     43      41 </span><br><span class="line">&gt; margin.table(x, 2)</span><br><span class="line">Improved</span><br><span class="line">  None   Some Marked </span><br><span class="line">    42     14     28 </span><br><span class="line">                                 </span><br><span class="line">&gt; prop.table(x, 1)</span><br><span class="line">         Improved</span><br><span class="line">Treatment      None      Some    Marked</span><br><span class="line">  Placebo 0.6744186 0.1627907 0.1627907</span><br><span class="line">  Treated 0.3170732 0.1707317 0.5121951</span><br><span class="line">&gt; prop.table(x, 2)</span><br><span class="line">         Improved</span><br><span class="line">Treatment      None      Some    Marked</span><br><span class="line">  Placebo 0.6904762 0.5000000 0.2500000</span><br><span class="line">  Treated 0.3095238 0.5000000 0.7500000</span><br><span class="line">&gt; prop.table(x)</span><br><span class="line">         Improved</span><br><span class="line">Treatment       None       Some     Marked</span><br><span class="line">  Placebo 0.34523810 0.08333333 0.08333333</span><br><span class="line">  Treated 0.15476190 0.08333333 0.25000000</span><br><span class="line"></span><br><span class="line">&gt; addmargins(x)</span><br><span class="line">         Improved</span><br><span class="line">Treatment None Some Marked Sum</span><br><span class="line">  Placebo   29    7      7  43</span><br><span class="line">  Treated   13    7     21  41</span><br><span class="line">  Sum       42   14     28  84</span><br><span class="line">&gt; addmargins(x, 1)</span><br><span class="line">         Improved</span><br><span class="line">Treatment None Some Marked</span><br><span class="line">  Placebo   29    7      7</span><br><span class="line">  Treated   13    7     21</span><br><span class="line">  Sum       42   14     28</span><br><span class="line">&gt; addmargins(x, 2)</span><br><span class="line">         Improved</span><br><span class="line">Treatment None Some Marked Sum</span><br><span class="line">  Placebo   29    7      7  43</span><br><span class="line">  Treated   13    7     21  41</span><br><span class="line"></span><br><span class="line"># 三维ftable()</span><br><span class="line">&gt; y &lt;- xtabs(~ Treatment + Improved + Sex, data = Arthritis)</span><br><span class="line">&gt; y</span><br><span class="line">, , Sex = Female</span><br><span class="line"></span><br><span class="line">         Improved</span><br><span class="line">Treatment None Some Marked</span><br><span class="line">  Placebo   19    7      6</span><br><span class="line">  Treated    6    5     16</span><br><span class="line"></span><br><span class="line">, , Sex = Male</span><br><span class="line"></span><br><span class="line">         Improved</span><br><span class="line">Treatment None Some Marked</span><br><span class="line">  Placebo   10    0      1</span><br><span class="line">  Treated    7    2      5</span><br><span class="line"></span><br><span class="line">&gt; ftable(y)</span><br><span class="line">                   Sex Female Male</span><br><span class="line">Treatment Improved                </span><br><span class="line">Placebo   None             19   10</span><br><span class="line">          Some              7    0</span><br><span class="line">          Marked            6    1</span><br><span class="line">Treated   None              6    7</span><br><span class="line">          Some              5    2</span><br><span class="line">          Marked           16    5</span><br></pre></td></tr></table></figure><h3 id="独立性检验函数">独立性检验函数</h3><p>独立性检验是根据频数信息判断两类因子彼此相关或者独立的假设检验。</p><p>独立性检验算法：</p><ol><li>卡方检验</li><li>Fisher检验</li><li>Cochran-Mantel-Haenszel检验</li></ol><p>假设检验（Hypothesis Testing）：由抽样判断总体。</p><p>原假设：没有发生；</p><p>备择假设：发生了</p><p><code>p value</code>：原假设为真时，得到最大的或者超出所得到的的检验统计计算量的概率</p><p><code>p</code>值一般定到0.05，当<code>p&lt;0.05</code>时，拒绝原假设，<code>p&gt;0.05</code>时，不拒绝原假设（根据情况调整<code>p</code>值）</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> Arthritis</span><br><span class="line">   ID Treatment    Sex Age Improved</span><br><span class="line"><span class="number">1</span>  <span class="number">57</span>   Treated   Male  <span class="number">27</span>     Some</span><br><span class="line"><span class="number">2</span>  <span class="number">46</span>   Treated   Male  <span class="number">29</span>     None</span><br><span class="line"><span class="number">3</span>  <span class="number">77</span>   Treated   Male  <span class="number">30</span>     None</span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> table<span class="punctuation">(</span>Arthritis<span class="operator">$</span>Treatment<span class="punctuation">,</span> Arthritis<span class="operator">$</span>Improved<span class="punctuation">)</span></span><br><span class="line">         </span><br><span class="line">          None Some Marked</span><br><span class="line">  Placebo   <span class="number">29</span>    <span class="number">7</span>      <span class="number">7</span></span><br><span class="line">  Treated   <span class="number">13</span>    <span class="number">7</span>     <span class="number">21</span></span><br><span class="line"><span class="operator">&gt;</span> mytable <span class="operator">&lt;-</span> table<span class="punctuation">(</span>Arthritis<span class="operator">$</span>Treatment<span class="punctuation">,</span> Arthritis<span class="operator">$</span>Improved<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 卡方检验，p&lt;0.05，拒绝原假设，Treatment和Improved有关</span></span><br><span class="line"><span class="operator">&gt;</span> chisq.test<span class="punctuation">(</span>mytable<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">	Pearson<span class="string">&#x27;s Chi-squared test</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">data:  mytable</span></span><br><span class="line"><span class="string">X-squared = 13.055, df = 2, p-value = 0.001463</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># p&gt;0.05，不拒绝原假设，Sex和Improved独立</span></span><br><span class="line"><span class="string">&gt; mytable &lt;- table(Arthritis$Sex, Arthritis$Improved)</span></span><br><span class="line"><span class="string">&gt; chisq.test(mytable)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	Pearson&#x27;</span>s Chi<span class="operator">-</span>squared test</span><br><span class="line"></span><br><span class="line">data<span class="operator">:</span>  mytable</span><br><span class="line">X<span class="operator">-</span>squared <span class="operator">=</span> <span class="number">4.8407</span><span class="punctuation">,</span> df <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> p<span class="operator">-</span>value <span class="operator">=</span> <span class="number">0.08889</span></span><br><span class="line"></span><br><span class="line">Warning message<span class="operator">:</span></span><br><span class="line">In chisq.test<span class="punctuation">(</span>mytable<span class="punctuation">)</span> <span class="operator">:</span> Chi<span class="operator">-</span>squared approximation may be incorrect</span><br><span class="line"></span><br><span class="line"><span class="comment"># Fisher检验，p&lt;0.05，拒绝原假设，Treatment和Improved有关</span></span><br><span class="line"><span class="operator">&gt;</span> mytable <span class="operator">&lt;-</span> table<span class="punctuation">(</span>Arthritis<span class="operator">$</span>Treatment<span class="punctuation">,</span> Arthritis<span class="operator">$</span>Improved<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> fisher.test<span class="punctuation">(</span>mytable<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">	Fisher<span class="string">&#x27;s Exact Test for Count Data</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">data:  mytable</span></span><br><span class="line"><span class="string">p-value = 0.001393</span></span><br><span class="line"><span class="string">alternative hypothesis: two.sided</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Cochran-Mantel-Haenszel检验，p&lt;0.05，拒绝原假设，Treatment和Improved有关</span></span><br><span class="line"><span class="string">&gt; mytable &lt;- xtabs(~ Treatment+Improved+Sex, data = Arthritis)</span></span><br><span class="line"><span class="string">&gt; mytable</span></span><br><span class="line"><span class="string">, , Sex = Female</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         Improved</span></span><br><span class="line"><span class="string">Treatment None Some Marked</span></span><br><span class="line"><span class="string">  Placebo   19    7      6</span></span><br><span class="line"><span class="string">  Treated    6    5     16</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">, , Sex = Male</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         Improved</span></span><br><span class="line"><span class="string">Treatment None Some Marked</span></span><br><span class="line"><span class="string">  Placebo   10    0      1</span></span><br><span class="line"><span class="string">  Treated    7    2      5</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&gt; mantelhaen.test(mytable)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	Cochran-Mantel-Haenszel test</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">data:  mytable</span></span><br><span class="line"><span class="string">Cochran-Mantel-Haenszel M^2 = 14.632, df = 2, p-value = 0.0006647</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 顺序很重要</span></span><br><span class="line"><span class="string">&gt; mytable &lt;- xtabs(~ Treatment+Sex+Improved, data = Arthritis)</span></span><br><span class="line"><span class="string">&gt; mantelhaen.test(mytable)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	Mantel-Haenszel chi-squared test with continuity correction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">data:  mytable</span></span><br><span class="line"><span class="string">Mantel-Haenszel X-squared = 2.0863, df = 1, p-value = 0.1486</span></span><br><span class="line"><span class="string">alternative hypothesis: true common odds ratio is not equal to 1</span></span><br><span class="line"><span class="string">95 percent confidence interval:</span></span><br><span class="line"><span class="string"> 0.8566711 8.0070521</span></span><br><span class="line"><span class="string">sample estimates:</span></span><br><span class="line"><span class="string">common odds ratio </span></span><br><span class="line"><span class="string">         2.619048 </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&gt; mytable &lt;- xtabs(~ Sex+Improved+Treatment, data = Arthritis)</span></span><br><span class="line"><span class="string">&gt; mantelhaen.test(mytable)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	Cochran-Mantel-Haenszel test</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">data:  mytable</span></span><br><span class="line"><span class="string">Cochran-Mantel-Haenszel M^2 = 6.846, df = 2, p-value = 0.03261</span></span><br></pre></td></tr></table></figure><h3 id="相关性分析函数">相关性分析函数</h3><p>相关系数：</p><ol><li>Pearson相关系数</li><li>Spearman相关系数</li><li>Kendall相关系数</li><li>偏相关系数</li><li>多分格相关系数（polychoric）</li><li>多系列相关系数（polyserial）</li></ol><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> x <span class="operator">&lt;-</span> state.x77<span class="punctuation">[</span><span class="punctuation">,</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line"><span class="comment"># 文盲率和高中毕业率负相关</span></span><br><span class="line"><span class="comment"># 可选参数method = &#x27;spearman&#x27;，计算不同的相关系数</span></span><br><span class="line"><span class="operator">&gt;</span> cor<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">            Population     Income Illiteracy     HS Grad</span><br><span class="line">Population  <span class="number">1.00000000</span>  <span class="number">0.2082276</span>  <span class="number">0.1076224</span> <span class="operator">-</span><span class="number">0.09848975</span></span><br><span class="line">Income      <span class="number">0.20822756</span>  <span class="number">1.0000000</span> <span class="operator">-</span><span class="number">0.4370752</span>  <span class="number">0.61993232</span></span><br><span class="line">Illiteracy  <span class="number">0.10762237</span> <span class="operator">-</span><span class="number">0.4370752</span>  <span class="number">1.0000000</span> <span class="operator">-</span><span class="number">0.65718861</span></span><br><span class="line">HS Grad    <span class="operator">-</span><span class="number">0.09848975</span>  <span class="number">0.6199323</span> <span class="operator">-</span><span class="number">0.6571886</span>  <span class="number">1.00000000</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> y <span class="operator">&lt;-</span> state.x77<span class="punctuation">[</span><span class="punctuation">,</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">4</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line"><span class="operator">&gt;</span> cor<span class="punctuation">(</span>y<span class="punctuation">)</span></span><br><span class="line">           Life Exp     Murder</span><br><span class="line">Life Exp  <span class="number">1.0000000</span> <span class="operator">-</span><span class="number">0.7808458</span></span><br><span class="line">Murder   <span class="operator">-</span><span class="number">0.7808458</span>  <span class="number">1.0000000</span></span><br><span class="line"><span class="comment"># 计算两个变量的相关系数</span></span><br><span class="line"><span class="operator">&gt;</span> cor<span class="punctuation">(</span>x<span class="punctuation">,</span>y<span class="punctuation">)</span></span><br><span class="line">              Life Exp     Murder</span><br><span class="line">Population <span class="operator">-</span><span class="number">0.06805195</span>  <span class="number">0.3436428</span></span><br><span class="line">Income      <span class="number">0.34025534</span> <span class="operator">-</span><span class="number">0.2300776</span></span><br><span class="line">Illiteracy <span class="operator">-</span><span class="number">0.58847793</span>  <span class="number">0.7029752</span></span><br><span class="line">HS Grad     <span class="number">0.58221620</span> <span class="operator">-</span><span class="number">0.4879710</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算协方差</span></span><br><span class="line"><span class="operator">&gt;</span> cov<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">             Population     Income   Illiteracy      HS Grad</span><br><span class="line">Population <span class="number">19931683.759</span> <span class="number">571229.780</span>  <span class="number">292.8679592</span> <span class="operator">-</span><span class="number">3551.509551</span></span><br><span class="line">Income       <span class="number">571229.780</span> <span class="number">377573.306</span> <span class="operator">-</span><span class="number">163.7020408</span>  <span class="number">3076.768980</span></span><br><span class="line">Illiteracy      <span class="number">292.868</span>   <span class="operator">-</span><span class="number">163.702</span>    <span class="number">0.3715306</span>    <span class="operator">-</span><span class="number">3.235469</span></span><br><span class="line">HS Grad       <span class="operator">-</span><span class="number">3551.510</span>   <span class="number">3076.769</span>   <span class="operator">-</span><span class="number">3.2354694</span>    <span class="number">65.237894</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ggm包中的pcor()计算偏相关系数</span></span><br><span class="line"><span class="operator">&gt;</span> library<span class="punctuation">(</span>ggm<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> colnames<span class="punctuation">(</span>state.x77<span class="punctuation">)</span>    </span><br><span class="line"><span class="operator">&gt;</span> pcor<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">)</span><span class="punctuation">,</span> cov<span class="punctuation">(</span>state.x77<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">0.3462724</span></span><br></pre></td></tr></table></figure><h3 id="相关性检验函数">相关性检验函数</h3><p>相关性检验函数<code>cor.test()</code>，给出<code>p</code>值和相关系数</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> cor.test<span class="punctuation">(</span>state.x77<span class="punctuation">[</span><span class="punctuation">,</span><span class="string">&#x27;Murder&#x27;</span><span class="punctuation">]</span><span class="punctuation">,</span> state.x77<span class="punctuation">[</span><span class="punctuation">,</span><span class="string">&#x27;Illiteracy&#x27;</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">	Pearson<span class="string">&#x27;s product-moment correlation</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">data:  state.x77[, &quot;Murder&quot;] and state.x77[, &quot;Illiteracy&quot;]</span></span><br><span class="line"><span class="string">t = 6.8479, df = 48, p-value = 1.258e-08</span></span><br><span class="line"><span class="string">alternative hypothesis: true correlation is not equal to 0</span></span><br><span class="line"><span class="string">95 percent confidence interval:</span></span><br><span class="line"><span class="string"> 0.5279280 0.8207295</span></span><br><span class="line"><span class="string">sample estimates:</span></span><br><span class="line"><span class="string">      cor </span></span><br><span class="line"><span class="string">0.7029752 </span></span><br></pre></td></tr></table></figure><p><code>psych</code>包的<code>corr.test()</code>函数可计算多个变量的相关性，并给出<code>p</code>值</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> library<span class="punctuation">(</span>psych<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> corr.test<span class="punctuation">(</span>x<span class="punctuation">,</span>y<span class="punctuation">)</span></span><br><span class="line">Call<span class="operator">:</span>corr.test<span class="punctuation">(</span>x <span class="operator">=</span> x<span class="punctuation">,</span> y <span class="operator">=</span> y<span class="punctuation">)</span></span><br><span class="line">Correlation matrix </span><br><span class="line">           Life Exp Murder</span><br><span class="line">Population    <span class="operator">-</span><span class="number">0.07</span>   <span class="number">0.34</span></span><br><span class="line">Income         <span class="number">0.34</span>  <span class="operator">-</span><span class="number">0.23</span></span><br><span class="line">Illiteracy    <span class="operator">-</span><span class="number">0.59</span>   <span class="number">0.70</span></span><br><span class="line">HS Grad        <span class="number">0.58</span>  <span class="operator">-</span><span class="number">0.49</span></span><br><span class="line">Sample Size </span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">50</span></span><br><span class="line">These are the unadjusted probability values.</span><br><span class="line">  The probability values  adjusted <span class="keyword">for</span> multiple tests are <span class="keyword">in</span> the p.adj object. </span><br><span class="line">           Life Exp Murder</span><br><span class="line">Population     <span class="number">0.64</span>   <span class="number">0.01</span></span><br><span class="line">Income         <span class="number">0.02</span>   <span class="number">0.11</span></span><br><span class="line">Illiteracy     <span class="number">0.00</span>   <span class="number">0.00</span></span><br><span class="line">HS Grad        <span class="number">0.00</span>   <span class="number">0.00</span></span><br><span class="line"></span><br><span class="line"> To see confidence intervals of the correlations<span class="punctuation">,</span> print with the short<span class="operator">=</span><span class="literal">FALSE</span> option</span><br></pre></td></tr></table></figure><p>偏相关性检验</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> library<span class="punctuation">(</span>ggm<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> x <span class="operator">&lt;-</span> pcor<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">)</span><span class="punctuation">,</span> cov<span class="punctuation">(</span>state.x77<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> x</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">0.3462724</span></span><br><span class="line"><span class="operator">&gt;</span> pcor.test<span class="punctuation">(</span>x<span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="number">50</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">$</span>tval</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2.476049</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>df</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">45</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>pvalue</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">0.01711252</span></span><br></pre></td></tr></table></figure><p>Student’s t test</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> library<span class="punctuation">(</span>MASS<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> UScrime</span><br><span class="line"><span class="operator">&gt;</span> t.test<span class="punctuation">(</span>Prob <span class="operator">~</span> So<span class="punctuation">,</span> data <span class="operator">=</span> UScrime<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">	Welch Two Sample t<span class="operator">-</span>test</span><br><span class="line"></span><br><span class="line">data<span class="operator">:</span>  Prob by So</span><br><span class="line">t <span class="operator">=</span> <span class="operator">-</span><span class="number">3.8954</span><span class="punctuation">,</span> df <span class="operator">=</span> <span class="number">24.925</span><span class="punctuation">,</span> p<span class="operator">-</span>value <span class="operator">=</span> <span class="number">0.0006506</span></span><br><span class="line">alternative hypothesis<span class="operator">:</span> true difference <span class="keyword">in</span> means between group <span class="number">0</span> and group <span class="number">1</span> is not equal to <span class="number">0</span></span><br><span class="line"><span class="number">95</span> percent confidence interval<span class="operator">:</span></span><br><span class="line"> <span class="operator">-</span><span class="number">0.03852569</span> <span class="operator">-</span><span class="number">0.01187439</span></span><br><span class="line">sample estimates<span class="operator">:</span></span><br><span class="line">mean <span class="keyword">in</span> group <span class="number">0</span> mean <span class="keyword">in</span> group <span class="number">1</span> </span><br><span class="line">     <span class="number">0.03851265</span>      <span class="number">0.06371269</span> </span><br></pre></td></tr></table></figure><h3 id="绘图函数">绘图函数</h3><p>见第三章</p><h3 id="自定义函数">自定义函数</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自定义计算偏度和丰度的函数</span></span><br><span class="line">myfun <span class="operator">&lt;-</span> <span class="keyword">function</span><span class="punctuation">(</span>x<span class="punctuation">,</span> na.omit<span class="operator">=</span><span class="literal">FALSE</span><span class="punctuation">)</span><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="keyword">if</span><span class="punctuation">(</span>na.omit<span class="punctuation">)</span></span><br><span class="line">    x <span class="operator">&lt;-</span> x<span class="punctuation">[</span><span class="operator">!</span><span class="built_in">is.na</span><span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line">  m <span class="operator">&lt;-</span> mean<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">  n <span class="operator">&lt;-</span> <span class="built_in">length</span><span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">  s <span class="operator">&lt;-</span> sd<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">  skew <span class="operator">&lt;-</span> <span class="built_in">sum</span><span class="punctuation">(</span>x<span class="operator">-</span>m<span class="operator">^</span><span class="number">3</span><span class="operator">/</span>s<span class="operator">^</span><span class="number">3</span><span class="punctuation">)</span><span class="operator">/</span>n</span><br><span class="line">  kurt <span class="operator">&lt;-</span> <span class="built_in">sum</span><span class="punctuation">(</span>x<span class="operator">-</span>m<span class="operator">^</span><span class="number">4</span><span class="operator">/</span>s<span class="operator">^</span><span class="number">4</span><span class="punctuation">)</span><span class="operator">/</span>n<span class="operator">-</span><span class="number">3</span></span><br><span class="line">  <span class="built_in">return</span><span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span>n<span class="operator">=</span>m<span class="punctuation">,</span> mean<span class="operator">=</span>m<span class="punctuation">,</span> stdev<span class="operator">=</span>s<span class="punctuation">,</span> skew<span class="operator">=</span>skew<span class="punctuation">,</span> kurtosis<span class="operator">=</span>kurt<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 循环</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">for</span><span class="punctuation">(</span>i <span class="keyword">in</span> <span class="number">1</span><span class="operator">:</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">&#123;</span>print<span class="punctuation">(</span><span class="string">&#x27;11&#x27;</span><span class="punctuation">)</span><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> i<span class="operator">=</span><span class="number">1</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">while</span><span class="punctuation">(</span>i<span class="operator">&lt;=</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">&#123;</span>print<span class="punctuation">(</span><span class="string">&#x27;2&#x27;</span><span class="punctuation">)</span>;i<span class="operator">=</span>i<span class="operator">+</span><span class="number">1</span><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> ifelse<span class="punctuation">(</span>i<span class="operator">&gt;</span><span class="number">10</span><span class="punctuation">,</span> print<span class="punctuation">(</span><span class="string">&#x27;yes&#x27;</span><span class="punctuation">)</span><span class="punctuation">,</span> print<span class="punctuation">(</span><span class="string">&#x27;No&#x27;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h2 id="数据分析实战">数据分析实战</h2><h3 id="线性回归">线性回归</h3><p>回归（Regression）：用用预测变量（自变量、解释变量）来预测响应变量（因变量、结果变量）</p><table><thead><tr><th style="text-align:center">回归</th><th style="text-align:left">用途</th></tr></thead><tbody><tr><td style="text-align:center">简单线性</td><td style="text-align:left">用一个量化的解释变量预测一个量化的响应变量</td></tr><tr><td style="text-align:center">多项式</td><td style="text-align:left">用一个量化的解释变量预测一个量化的响应变量，模型的关系是n阶多项式</td></tr><tr><td style="text-align:center">多元线性</td><td style="text-align:left">用两个或多个量化的解释变量预测一个量化的响应变量</td></tr><tr><td style="text-align:center">多变量</td><td style="text-align:left">用一个或多个解释变量预测多个响应变量</td></tr><tr><td style="text-align:center">Logistic</td><td style="text-align:left">用一个或多个解释变量预测一个类别型响应变量</td></tr><tr><td style="text-align:center">泊松</td><td style="text-align:left">用一个或多个解释变量预测一个代表频数的响应变量</td></tr><tr><td style="text-align:center">Cox比例风险</td><td style="text-align:left">用一个或多个解释变量预测一个事件 ( 死亡、失败或旧病复发)发生的时间</td></tr><tr><td style="text-align:center">时间序列</td><td style="text-align:left">对误差项相关的时间序列数据建模</td></tr><tr><td style="text-align:center">非线性</td><td style="text-align:left">用一个或多个量化的解释变量预测一个量化的响应变量，不过模型是非线性的</td></tr><tr><td style="text-align:center">非参数</td><td style="text-align:left">用一个或多个量化的解释变量预测一个量化的响应变量，模型的形式源自数据形式,不事先设定</td></tr><tr><td style="text-align:center">稳健</td><td style="text-align:left">用一个或多个量化的解释变量预测一个量化的响应变量，能抵御强影响点的干扰</td></tr></tbody></table><p>线性回归：</p><ol><li>简单线性回归</li><li>多项式</li><li>多元线性</li><li>多变量</li><li>Logistic</li></ol><h4 id="简单线性回归">简单线性回归</h4><p>普通最小二乘回归法（OLS）</p><p><code>lm()</code>函数进行线性回归</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> women</span><br><span class="line">   height weight</span><br><span class="line"><span class="number">1</span>      <span class="number">58</span>    <span class="number">115</span></span><br><span class="line"><span class="number">2</span>      <span class="number">59</span>    <span class="number">117</span></span><br><span class="line"><span class="number">3</span>      <span class="number">60</span>    <span class="number">120</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> fit <span class="operator">&lt;-</span> lm<span class="punctuation">(</span>weight <span class="operator">~</span> height<span class="punctuation">,</span> data <span class="operator">=</span> women<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> fit</span><br><span class="line"></span><br><span class="line">Call<span class="operator">:</span></span><br><span class="line">lm<span class="punctuation">(</span>formula <span class="operator">=</span> weight <span class="operator">~</span> height<span class="punctuation">,</span> data <span class="operator">=</span> women<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Coefficients<span class="operator">:</span></span><br><span class="line"><span class="punctuation">(</span>Intercept<span class="punctuation">)</span>       height  </span><br><span class="line">     <span class="operator">-</span><span class="number">87.52</span>         <span class="number">3.45</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 回归分析结果</span></span><br><span class="line"><span class="operator">&gt;</span> summary<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Call<span class="operator">:</span></span><br><span class="line">lm<span class="punctuation">(</span>formula <span class="operator">=</span> weight <span class="operator">~</span> height<span class="punctuation">,</span> data <span class="operator">=</span> women<span class="punctuation">)</span> <span class="comment"># 回归所用公式</span></span><br><span class="line"></span><br><span class="line">Residuals<span class="operator">:</span> <span class="comment"># 残差：真实值与预测值的差，越小越精确，残差分布</span></span><br><span class="line">    Min      <span class="number">1</span>Q  Median      <span class="number">3</span>Q     Max </span><br><span class="line"><span class="operator">-</span><span class="number">1.7333</span> <span class="operator">-</span><span class="number">1.1333</span> <span class="operator">-</span><span class="number">0.3833</span>  <span class="number">0.7417</span>  <span class="number">3.1167</span> </span><br><span class="line"></span><br><span class="line">Coefficients<span class="operator">:</span></span><br><span class="line">             Estimate Std. Error t value Pr<span class="punctuation">(</span><span class="operator">&gt;</span><span class="operator">|</span>t<span class="operator">|</span><span class="punctuation">)</span>     <span class="comment"># p value</span></span><br><span class="line"><span class="punctuation">(</span>Intercept<span class="punctuation">)</span> <span class="operator">-</span><span class="number">87.51667</span>    <span class="number">5.93694</span>  <span class="operator">-</span><span class="number">14.74</span> <span class="number">1.71e-09</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span> <span class="comment"># 截距</span></span><br><span class="line">height        <span class="number">3.45000</span>    <span class="number">0.09114</span>   <span class="number">37.85</span> <span class="number">1.09e-14</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span> <span class="comment"># 系数</span></span><br><span class="line"><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span></span><br><span class="line">Signif. codes<span class="operator">:</span>  <span class="number">0</span> ‘<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.001</span> ‘<span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.01</span> ‘<span class="operator">*</span>’ <span class="number">0.05</span> ‘.’ <span class="number">0.1</span> ‘ ’ <span class="number">1</span></span><br><span class="line"></span><br><span class="line">Residual standard error<span class="operator">:</span> <span class="number">1.525</span> on <span class="number">13</span> degrees of freedom <span class="comment"># 残差的标准误差，越小越好</span></span><br><span class="line">Multiple R<span class="operator">-</span>squared<span class="operator">:</span>  <span class="number">0.991</span><span class="punctuation">,</span>	Adjusted R<span class="operator">-</span>squared<span class="operator">:</span>  <span class="number">0.9903</span> <span class="comment"># R2判定系数，回归模型能解释的响应变量的方差比例</span></span><br><span class="line"><span class="built_in">F</span><span class="operator">-</span>statistic<span class="operator">:</span>  <span class="number">1433</span> on <span class="number">1</span> and <span class="number">13</span> DF<span class="punctuation">,</span>  p<span class="operator">-</span>value<span class="operator">:</span> <span class="number">1.091e-14</span>  <span class="comment"># F统计量，说明模型是否显著</span></span><br><span class="line"><span class="comment"># 一般先看F统计量，p&gt;0.05模型就没有价值，需重新拟合</span></span><br><span class="line"><span class="comment"># 再看R2，看模型能够解释多少变量</span></span><br></pre></td></tr></table></figure><p>响应变量<code>~</code>预测变量1<code>+</code>预测变量2<code>+</code>预测变量3</p><img src="https://s2.loli.net/2022/07/09/b9nYREt3lvquSkO.png" style="zoom:80%"><p>拟合线性模型的常用函数</p><img src="https://s2.loli.net/2022/07/09/J95a37wPEOlc6bd.png" style="zoom:80%"><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> fit</span><br><span class="line"></span><br><span class="line">Call<span class="operator">:</span></span><br><span class="line">lm<span class="punctuation">(</span>formula <span class="operator">=</span> weight <span class="operator">~</span> height<span class="punctuation">,</span> data <span class="operator">=</span> women<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Coefficients<span class="operator">:</span></span><br><span class="line"><span class="punctuation">(</span>Intercept<span class="punctuation">)</span>       height  </span><br><span class="line">     <span class="operator">-</span><span class="number">87.52</span>         <span class="number">3.45</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出拟合模型的截距和斜率</span></span><br><span class="line"><span class="operator">&gt;</span> coefficients<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">(</span>Intercept<span class="punctuation">)</span>      height </span><br><span class="line">  <span class="operator">-</span><span class="number">87.51667</span>     <span class="number">3.45000</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 给出置信区间</span></span><br><span class="line"><span class="operator">&gt;</span> confint<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line">                  <span class="number">2.5</span> <span class="operator">%     97.5 %</span></span><br><span class="line"><span class="punctuation">(</span>Intercept<span class="punctuation">)</span> <span class="operator">-</span><span class="number">100.342655</span> <span class="operator">-</span><span class="number">74.690679</span></span><br><span class="line">height         <span class="number">3.253112</span>   <span class="number">3.646888</span></span><br><span class="line"><span class="operator">&gt;</span> confint<span class="punctuation">(</span>fit<span class="punctuation">,</span> level <span class="operator">=</span> <span class="number">0.5</span><span class="punctuation">)</span></span><br><span class="line">                  <span class="number">25</span> <span class="operator">%       75 %</span></span><br><span class="line"><span class="punctuation">(</span>Intercept<span class="punctuation">)</span> <span class="operator">-</span><span class="number">91.635892</span> <span class="operator">-</span><span class="number">83.397441</span></span><br><span class="line">height        <span class="number">3.386767</span>   <span class="number">3.513233</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 给出预测值</span></span><br><span class="line"><span class="operator">&gt;</span> fitted<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line">       <span class="number">1</span>        <span class="number">2</span>        <span class="number">3</span>        <span class="number">4</span>        <span class="number">5</span>        <span class="number">6</span>        <span class="number">7</span>        <span class="number">8</span>        <span class="number">9</span>       <span class="number">10</span> </span><br><span class="line"><span class="number">112.5833</span> <span class="number">116.0333</span> <span class="number">119.4833</span> <span class="number">122.9333</span> <span class="number">126.3833</span> <span class="number">129.8333</span> <span class="number">133.2833</span> <span class="number">136.7333</span> <span class="number">140.1833</span> <span class="number">143.6333</span> </span><br><span class="line">      <span class="number">11</span>       <span class="number">12</span>       <span class="number">13</span>       <span class="number">14</span>       <span class="number">15</span> </span><br><span class="line"><span class="number">147.0833</span> <span class="number">150.5333</span> <span class="number">153.9833</span> <span class="number">157.4333</span> <span class="number">160.8833</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 给出残差</span></span><br><span class="line"><span class="operator">&gt;</span> residuals<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line">          <span class="number">1</span>           <span class="number">2</span>           <span class="number">3</span>           <span class="number">4</span>           <span class="number">5</span>           <span class="number">6</span>           <span class="number">7</span>           <span class="number">8</span> </span><br><span class="line"> <span class="number">2.41666667</span>  <span class="number">0.96666667</span>  <span class="number">0.51666667</span>  <span class="number">0.06666667</span> <span class="operator">-</span><span class="number">0.38333333</span> <span class="operator">-</span><span class="number">0.83333333</span> <span class="operator">-</span><span class="number">1.28333333</span> <span class="operator">-</span><span class="number">1.73333333</span> </span><br><span class="line">          <span class="number">9</span>          <span class="number">10</span>          <span class="number">11</span>          <span class="number">12</span>          <span class="number">13</span>          <span class="number">14</span>          <span class="number">15</span> </span><br><span class="line"><span class="operator">-</span><span class="number">1.18333333</span> <span class="operator">-</span><span class="number">1.63333333</span> <span class="operator">-</span><span class="number">1.08333333</span> <span class="operator">-</span><span class="number">0.53333333</span>  <span class="number">0.01666667</span>  <span class="number">1.56666667</span>  <span class="number">3.11666667</span> </span><br><span class="line"> </span><br><span class="line"><span class="operator">&gt;</span> women<span class="operator">$</span>weight<span class="operator">-</span>fitted<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line">          <span class="number">1</span>           <span class="number">2</span>           <span class="number">3</span>           <span class="number">4</span>           <span class="number">5</span>           <span class="number">6</span>           <span class="number">7</span>           <span class="number">8</span> </span><br><span class="line"> <span class="number">2.41666667</span>  <span class="number">0.96666667</span>  <span class="number">0.51666667</span>  <span class="number">0.06666667</span> <span class="operator">-</span><span class="number">0.38333333</span> <span class="operator">-</span><span class="number">0.83333333</span> <span class="operator">-</span><span class="number">1.28333333</span> <span class="operator">-</span><span class="number">1.73333333</span> </span><br><span class="line">          <span class="number">9</span>          <span class="number">10</span>          <span class="number">11</span>          <span class="number">12</span>          <span class="number">13</span>          <span class="number">14</span>          <span class="number">15</span> </span><br><span class="line"><span class="operator">-</span><span class="number">1.18333333</span> <span class="operator">-</span><span class="number">1.63333333</span> <span class="operator">-</span><span class="number">1.08333333</span> <span class="operator">-</span><span class="number">0.53333333</span>  <span class="number">0.01666667</span>  <span class="number">1.56666667</span>  <span class="number">3.11666667</span> </span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> women1 <span class="operator">&lt;-</span> women</span><br><span class="line"><span class="comment"># 利用拟合模型对新数据集的响应变量进行预测</span></span><br><span class="line"><span class="operator">&gt;</span> predict<span class="punctuation">(</span>fit<span class="punctuation">,</span> women1<span class="punctuation">)</span></span><br><span class="line">       <span class="number">1</span>        <span class="number">2</span>        <span class="number">3</span>        <span class="number">4</span>        <span class="number">5</span>        <span class="number">6</span>        <span class="number">7</span>        <span class="number">8</span>        <span class="number">9</span>       <span class="number">10</span> </span><br><span class="line"><span class="number">112.5833</span> <span class="number">116.0333</span> <span class="number">119.4833</span> <span class="number">122.9333</span> <span class="number">126.3833</span> <span class="number">129.8333</span> <span class="number">133.2833</span> <span class="number">136.7333</span> <span class="number">140.1833</span> <span class="number">143.6333</span> </span><br><span class="line">      <span class="number">11</span>       <span class="number">12</span>       <span class="number">13</span>       <span class="number">14</span>       <span class="number">15</span> </span><br><span class="line"><span class="number">147.0833</span> <span class="number">150.5333</span> <span class="number">153.9833</span> <span class="number">157.4333</span> <span class="number">160.8833</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成评价拟合模型的诊断图</span></span><br><span class="line"><span class="operator">&gt;</span> plot<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h4 id="多项式回归">多项式回归</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 多项式用I()括起来</span></span><br><span class="line"><span class="operator">&gt;</span> fit2 <span class="operator">&lt;-</span> lm<span class="punctuation">(</span>weight<span class="operator">~</span>height<span class="operator">+</span>I<span class="punctuation">(</span>height<span class="operator">^</span><span class="number">2</span><span class="punctuation">)</span><span class="punctuation">,</span> data<span class="operator">=</span>women<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> fit2</span><br><span class="line"></span><br><span class="line">Call<span class="operator">:</span></span><br><span class="line">lm<span class="punctuation">(</span>formula <span class="operator">=</span> weight <span class="operator">~</span> height <span class="operator">+</span> I<span class="punctuation">(</span>height<span class="operator">^</span><span class="number">2</span><span class="punctuation">)</span><span class="punctuation">,</span> data <span class="operator">=</span> women<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Coefficients<span class="operator">:</span> <span class="comment"># 给出各项系数</span></span><br><span class="line"><span class="punctuation">(</span>Intercept<span class="punctuation">)</span>       height  I<span class="punctuation">(</span>height<span class="operator">^</span><span class="number">2</span><span class="punctuation">)</span>  </span><br><span class="line">  <span class="number">261.87818</span>     <span class="operator">-</span><span class="number">7.34832</span>      <span class="number">0.08306</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 拟合效果优于简单线性回归</span></span><br><span class="line"><span class="operator">&gt;</span> summary<span class="punctuation">(</span>fit2<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Call<span class="operator">:</span></span><br><span class="line">lm<span class="punctuation">(</span>formula <span class="operator">=</span> weight <span class="operator">~</span> height <span class="operator">+</span> I<span class="punctuation">(</span>height<span class="operator">^</span><span class="number">2</span><span class="punctuation">)</span><span class="punctuation">,</span> data <span class="operator">=</span> women<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Residuals<span class="operator">:</span></span><br><span class="line">     Min       <span class="number">1</span>Q   Median       <span class="number">3</span>Q      Max </span><br><span class="line"><span class="operator">-</span><span class="number">0.50941</span> <span class="operator">-</span><span class="number">0.29611</span> <span class="operator">-</span><span class="number">0.00941</span>  <span class="number">0.28615</span>  <span class="number">0.59706</span> </span><br><span class="line"></span><br><span class="line">Coefficients<span class="operator">:</span></span><br><span class="line">             Estimate Std. Error t value Pr<span class="punctuation">(</span><span class="operator">&gt;</span><span class="operator">|</span>t<span class="operator">|</span><span class="punctuation">)</span>    </span><br><span class="line"><span class="punctuation">(</span>Intercept<span class="punctuation">)</span> <span class="number">261.87818</span>   <span class="number">25.19677</span>  <span class="number">10.393</span> <span class="number">2.36e-07</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">height       <span class="operator">-</span><span class="number">7.34832</span>    <span class="number">0.77769</span>  <span class="operator">-</span><span class="number">9.449</span> <span class="number">6.58e-07</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">I<span class="punctuation">(</span>height<span class="operator">^</span><span class="number">2</span><span class="punctuation">)</span>   <span class="number">0.08306</span>    <span class="number">0.00598</span>  <span class="number">13.891</span> <span class="number">9.32e-09</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line"><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span></span><br><span class="line">Signif. codes<span class="operator">:</span>  <span class="number">0</span> ‘<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.001</span> ‘<span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.01</span> ‘<span class="operator">*</span>’ <span class="number">0.05</span> ‘.’ <span class="number">0.1</span> ‘ ’ <span class="number">1</span></span><br><span class="line"></span><br><span class="line">Residual standard error<span class="operator">:</span> <span class="number">0.3841</span> on <span class="number">12</span> degrees of freedom</span><br><span class="line">Multiple R<span class="operator">-</span>squared<span class="operator">:</span>  <span class="number">0.9995</span><span class="punctuation">,</span>	Adjusted R<span class="operator">-</span>squared<span class="operator">:</span>  <span class="number">0.9994</span> </span><br><span class="line"><span class="built_in">F</span><span class="operator">-</span>statistic<span class="operator">:</span> <span class="number">1.139e+04</span> on <span class="number">2</span> and <span class="number">12</span> DF<span class="punctuation">,</span>  p<span class="operator">-</span>value<span class="operator">:</span> <span class="operator">&lt;</span> <span class="number">2.2e-16</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> fit3 <span class="operator">&lt;-</span> lm<span class="punctuation">(</span>weight<span class="operator">~</span>height<span class="operator">+</span>I<span class="punctuation">(</span>height<span class="operator">^</span><span class="number">2</span><span class="punctuation">)</span><span class="operator">+</span>I<span class="punctuation">(</span>height<span class="operator">^</span><span class="number">3</span><span class="punctuation">)</span><span class="punctuation">,</span> data<span class="operator">=</span>women<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> summary<span class="punctuation">(</span>fit3<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Call<span class="operator">:</span></span><br><span class="line">lm<span class="punctuation">(</span>formula <span class="operator">=</span> weight <span class="operator">~</span> height <span class="operator">+</span> I<span class="punctuation">(</span>height<span class="operator">^</span><span class="number">2</span><span class="punctuation">)</span> <span class="operator">+</span> I<span class="punctuation">(</span>height<span class="operator">^</span><span class="number">3</span><span class="punctuation">)</span><span class="punctuation">,</span> data <span class="operator">=</span> women<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Residuals<span class="operator">:</span></span><br><span class="line">     Min       <span class="number">1</span>Q   Median       <span class="number">3</span>Q      Max </span><br><span class="line"><span class="operator">-</span><span class="number">0.40677</span> <span class="operator">-</span><span class="number">0.17391</span>  <span class="number">0.03091</span>  <span class="number">0.12051</span>  <span class="number">0.42191</span> </span><br><span class="line"></span><br><span class="line">Coefficients<span class="operator">:</span></span><br><span class="line">              Estimate Std. Error t value Pr<span class="punctuation">(</span><span class="operator">&gt;</span><span class="operator">|</span>t<span class="operator">|</span><span class="punctuation">)</span>   </span><br><span class="line"><span class="punctuation">(</span>Intercept<span class="punctuation">)</span> <span class="operator">-</span><span class="number">8.967e+02</span>  <span class="number">2.946e+02</span>  <span class="operator">-</span><span class="number">3.044</span>  <span class="number">0.01116</span> <span class="operator">*</span> </span><br><span class="line">height       <span class="number">4.641e+01</span>  <span class="number">1.366e+01</span>   <span class="number">3.399</span>  <span class="number">0.00594</span> <span class="operator">*</span><span class="operator">*</span></span><br><span class="line">I<span class="punctuation">(</span>height<span class="operator">^</span><span class="number">2</span><span class="punctuation">)</span> <span class="operator">-</span><span class="number">7.462e-01</span>  <span class="number">2.105e-01</span>  <span class="operator">-</span><span class="number">3.544</span>  <span class="number">0.00460</span> <span class="operator">*</span><span class="operator">*</span></span><br><span class="line">I<span class="punctuation">(</span>height<span class="operator">^</span><span class="number">3</span><span class="punctuation">)</span>  <span class="number">4.253e-03</span>  <span class="number">1.079e-03</span>   <span class="number">3.940</span>  <span class="number">0.00231</span> <span class="operator">*</span><span class="operator">*</span></span><br><span class="line"><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span></span><br><span class="line">Signif. codes<span class="operator">:</span>  <span class="number">0</span> ‘<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.001</span> ‘<span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.01</span> ‘<span class="operator">*</span>’ <span class="number">0.05</span> ‘.’ <span class="number">0.1</span> ‘ ’ <span class="number">1</span></span><br><span class="line"></span><br><span class="line">Residual standard error<span class="operator">:</span> <span class="number">0.2583</span> on <span class="number">11</span> degrees of freedom</span><br><span class="line">Multiple R<span class="operator">-</span>squared<span class="operator">:</span>  <span class="number">0.9998</span><span class="punctuation">,</span>	Adjusted R<span class="operator">-</span>squared<span class="operator">:</span>  <span class="number">0.9997</span> </span><br><span class="line"><span class="built_in">F</span><span class="operator">-</span>statistic<span class="operator">:</span> <span class="number">1.679e+04</span> on <span class="number">3</span> and <span class="number">11</span> DF<span class="punctuation">,</span>  p<span class="operator">-</span>value<span class="operator">:</span> <span class="operator">&lt;</span> <span class="number">2.2e-16</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看拟合效果</span></span><br><span class="line"><span class="operator">&gt;</span> plot<span class="punctuation">(</span>women<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> abline<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> lines<span class="punctuation">(</span>women<span class="operator">$</span>height<span class="punctuation">,</span> fitted<span class="punctuation">(</span>fit2<span class="punctuation">)</span><span class="punctuation">,</span> col<span class="operator">=</span><span class="string">&#x27;red&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> lines<span class="punctuation">(</span>women<span class="operator">$</span>height<span class="punctuation">,</span> fitted<span class="punctuation">(</span>fit3<span class="punctuation">)</span><span class="punctuation">,</span> col<span class="operator">=</span><span class="string">&#x27;blue&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h4 id="多元线性回归">多元线性回归</h4><p>回归系数的含义：其他预测变量保持不变时，一个预测变量增加一个单位后，因变量的增量。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> state <span class="operator">&lt;-</span> as.data.frame<span class="punctuation">(</span>state.x77<span class="punctuation">[</span><span class="punctuation">,</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;Murder&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;Life Exp&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;Illiteracy&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;Income&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;HS Grad&#x27;</span><span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> colnames<span class="punctuation">(</span>state<span class="punctuation">)</span> <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;Murder&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;Life_Exp&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;Illiteracy&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;Income&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;HS_Grad&#x27;</span><span class="punctuation">)</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 加入多个变量</span></span><br><span class="line"><span class="operator">&gt;</span> fit <span class="operator">&lt;-</span> lm<span class="punctuation">(</span>Murder <span class="operator">~</span> Life_Exp<span class="operator">+</span>Illiteracy<span class="operator">+</span>Income<span class="operator">+</span>HS_Grad<span class="punctuation">,</span> data<span class="operator">=</span>state<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> fit</span><br><span class="line"></span><br><span class="line">Call<span class="operator">:</span></span><br><span class="line">lm<span class="punctuation">(</span>formula <span class="operator">=</span> Murder <span class="operator">~</span> Life_Exp <span class="operator">+</span> Illiteracy <span class="operator">+</span> Income <span class="operator">+</span> HS_Grad<span class="punctuation">,</span> </span><br><span class="line">    data <span class="operator">=</span> state<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Coefficients<span class="operator">:</span></span><br><span class="line"><span class="punctuation">(</span>Intercept<span class="punctuation">)</span>     Life_Exp   Illiteracy       Income      HS_Grad  </span><br><span class="line"> <span class="number">116.507133</span>    <span class="operator">-</span><span class="number">1.662190</span>     <span class="number">2.786755</span>     <span class="number">0.000718</span>     <span class="number">0.042163</span>  </span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> summary<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Call<span class="operator">:</span></span><br><span class="line">lm<span class="punctuation">(</span>formula <span class="operator">=</span> Murder <span class="operator">~</span> Life_Exp <span class="operator">+</span> Illiteracy <span class="operator">+</span> Income <span class="operator">+</span> HS_Grad<span class="punctuation">,</span> </span><br><span class="line">    data <span class="operator">=</span> state<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Residuals<span class="operator">:</span></span><br><span class="line">   Min     <span class="number">1</span>Q Median     <span class="number">3</span>Q    Max </span><br><span class="line"><span class="operator">-</span><span class="number">3.715</span> <span class="operator">-</span><span class="number">1.524</span>  <span class="number">0.113</span>  <span class="number">1.737</span>  <span class="number">3.848</span> </span><br><span class="line"></span><br><span class="line">Coefficients<span class="operator">:</span></span><br><span class="line">              Estimate Std. Error t value Pr<span class="punctuation">(</span><span class="operator">&gt;</span><span class="operator">|</span>t<span class="operator">|</span><span class="punctuation">)</span>    </span><br><span class="line"><span class="punctuation">(</span>Intercept<span class="punctuation">)</span>  <span class="number">1.165e+02</span>  <span class="number">1.976e+01</span>   <span class="number">5.897</span> <span class="number">4.44e-07</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">Life_Exp    <span class="operator">-</span><span class="number">1.662e+00</span>  <span class="number">2.822e-01</span>  <span class="operator">-</span><span class="number">5.891</span> <span class="number">4.53e-07</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">Illiteracy   <span class="number">2.787e+00</span>  <span class="number">6.708e-01</span>   <span class="number">4.154</span> <span class="number">0.000144</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">Income       <span class="number">7.180e-04</span>  <span class="number">6.024e-04</span>   <span class="number">1.192</span> <span class="number">0.239535</span>    </span><br><span class="line">HS_Grad      <span class="number">4.216e-02</span>  <span class="number">5.736e-02</span>   <span class="number">0.735</span> <span class="number">0.466095</span>    </span><br><span class="line"><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span></span><br><span class="line">Signif. codes<span class="operator">:</span>  <span class="number">0</span> ‘<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.001</span> ‘<span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.01</span> ‘<span class="operator">*</span>’ <span class="number">0.05</span> ‘.’ <span class="number">0.1</span> ‘ ’ <span class="number">1</span></span><br><span class="line"></span><br><span class="line">Residual standard error<span class="operator">:</span> <span class="number">2.028</span> on <span class="number">45</span> degrees of freedom</span><br><span class="line">Multiple R<span class="operator">-</span>squared<span class="operator">:</span>  <span class="number">0.7229</span><span class="punctuation">,</span>	Adjusted R<span class="operator">-</span>squared<span class="operator">:</span>  <span class="number">0.6983</span> </span><br><span class="line"><span class="built_in">F</span><span class="operator">-</span>statistic<span class="operator">:</span> <span class="number">29.35</span> on <span class="number">4</span> and <span class="number">45</span> DF<span class="punctuation">,</span>  p<span class="operator">-</span>value<span class="operator">:</span> <span class="number">4.961e-12</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看系数</span></span><br><span class="line"><span class="operator">&gt;</span> coef<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line">  <span class="punctuation">(</span>Intercept<span class="punctuation">)</span>      Life_Exp    Illiteracy        Income       HS_Grad </span><br><span class="line"> <span class="number">1.165071e+02</span> <span class="operator">-</span><span class="number">1.662190e+00</span>  <span class="number">2.786755e+00</span>  <span class="number">7.179837e-04</span>  <span class="number">4.216343e-02</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 回归模型比较</span></span><br><span class="line"><span class="operator">&gt;</span> fit1 <span class="operator">&lt;-</span> lm<span class="punctuation">(</span>Murder <span class="operator">~</span> Life_Exp<span class="operator">+</span>Illiteracy<span class="operator">+</span>Income<span class="operator">+</span>HS_Grad<span class="punctuation">,</span> data<span class="operator">=</span>state<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> fit2 <span class="operator">&lt;-</span> lm<span class="punctuation">(</span>Murder <span class="operator">~</span> Life_Exp<span class="operator">+</span>Illiteracy<span class="punctuation">,</span> data<span class="operator">=</span>state<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> summary<span class="punctuation">(</span>fit2<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Call<span class="operator">:</span></span><br><span class="line">lm<span class="punctuation">(</span>formula <span class="operator">=</span> Murder <span class="operator">~</span> Life_Exp <span class="operator">+</span> Illiteracy<span class="punctuation">,</span> data <span class="operator">=</span> state<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Residuals<span class="operator">:</span></span><br><span class="line">    Min      <span class="number">1</span>Q  Median      <span class="number">3</span>Q     Max </span><br><span class="line"><span class="operator">-</span><span class="number">4.3725</span> <span class="operator">-</span><span class="number">1.5867</span>  <span class="number">0.0284</span>  <span class="number">1.1919</span>  <span class="number">4.3641</span> </span><br><span class="line"></span><br><span class="line">Coefficients<span class="operator">:</span></span><br><span class="line">            Estimate Std. Error t value Pr<span class="punctuation">(</span><span class="operator">&gt;</span><span class="operator">|</span>t<span class="operator">|</span><span class="punctuation">)</span>    </span><br><span class="line"><span class="punctuation">(</span>Intercept<span class="punctuation">)</span> <span class="number">114.2162</span>    <span class="number">19.6698</span>   <span class="number">5.807</span> <span class="number">5.27e-07</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">Life_Exp     <span class="operator">-</span><span class="number">1.5446</span>     <span class="number">0.2716</span>  <span class="operator">-</span><span class="number">5.688</span> <span class="number">7.96e-07</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">Illiteracy    <span class="number">2.2557</span>     <span class="number">0.5981</span>   <span class="number">3.772</span> <span class="number">0.000453</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line"><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span></span><br><span class="line">Signif. codes<span class="operator">:</span>  <span class="number">0</span> ‘<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.001</span> ‘<span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.01</span> ‘<span class="operator">*</span>’ <span class="number">0.05</span> ‘.’ <span class="number">0.1</span> ‘ ’ <span class="number">1</span></span><br><span class="line"></span><br><span class="line">Residual standard error<span class="operator">:</span> <span class="number">2.063</span> on <span class="number">47</span> degrees of freedom</span><br><span class="line">Multiple R<span class="operator">-</span>squared<span class="operator">:</span>  <span class="number">0.7004</span><span class="punctuation">,</span>	Adjusted R<span class="operator">-</span>squared<span class="operator">:</span>  <span class="number">0.6876</span> </span><br><span class="line"><span class="built_in">F</span><span class="operator">-</span>statistic<span class="operator">:</span> <span class="number">54.94</span> on <span class="number">2</span> and <span class="number">47</span> DF<span class="punctuation">,</span>  p<span class="operator">-</span>value<span class="operator">:</span> <span class="number">4.998e-13</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># AIC()函数比较拟合模型，越小越好，表明模型用较少的参数就可以得到很好的拟合度</span></span><br><span class="line"><span class="operator">&gt;</span> AIC<span class="punctuation">(</span>fit1<span class="punctuation">,</span> fit2<span class="punctuation">)</span></span><br><span class="line">     df      AIC</span><br><span class="line">fit1  <span class="number">6</span> <span class="number">219.3144</span></span><br><span class="line">fit2  <span class="number">4</span> <span class="number">219.2232</span></span><br></pre></td></tr></table></figure><h4 id="有交互项的多元线性回归">有交互项的多元线性回归</h4><p>有时候变量之间不是独立的，有交互关系，如车辆马力与车重有关系.</p><p>若两个预测变量的交互项显著，说明响应变量与其中一个预测变量的关系依赖于另一个预测变量的水平。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> fit <span class="operator">&lt;-</span> lm<span class="punctuation">(</span>mpg<span class="operator">~</span>hp<span class="operator">+</span>wt<span class="operator">+</span>hp<span class="operator">:</span>wt<span class="punctuation">,</span> data<span class="operator">=</span>mtcars<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> summary<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Call<span class="operator">:</span></span><br><span class="line">lm<span class="punctuation">(</span>formula <span class="operator">=</span> mpg <span class="operator">~</span> hp <span class="operator">+</span> wt <span class="operator">+</span> hp<span class="operator">:</span>wt<span class="punctuation">,</span> data <span class="operator">=</span> mtcars<span class="punctuation">)</span> <span class="comment"># 不清楚是什么交互关系，用:连接</span></span><br><span class="line"></span><br><span class="line">Residuals<span class="operator">:</span></span><br><span class="line">    Min      <span class="number">1</span>Q  Median      <span class="number">3</span>Q     Max </span><br><span class="line"><span class="operator">-</span><span class="number">3.0632</span> <span class="operator">-</span><span class="number">1.6491</span> <span class="operator">-</span><span class="number">0.7362</span>  <span class="number">1.4211</span>  <span class="number">4.5513</span> </span><br><span class="line"></span><br><span class="line">Coefficients<span class="operator">:</span></span><br><span class="line">            Estimate Std. Error t value Pr<span class="punctuation">(</span><span class="operator">&gt;</span><span class="operator">|</span>t<span class="operator">|</span><span class="punctuation">)</span>    </span><br><span class="line"><span class="punctuation">(</span>Intercept<span class="punctuation">)</span> <span class="number">49.80842</span>    <span class="number">3.60516</span>  <span class="number">13.816</span> <span class="number">5.01e-14</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">hp          <span class="operator">-</span><span class="number">0.12010</span>    <span class="number">0.02470</span>  <span class="operator">-</span><span class="number">4.863</span> <span class="number">4.04e-05</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">wt          <span class="operator">-</span><span class="number">8.21662</span>    <span class="number">1.26971</span>  <span class="operator">-</span><span class="number">6.471</span> <span class="number">5.20e-07</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">hp<span class="operator">:</span>wt        <span class="number">0.02785</span>    <span class="number">0.00742</span>   <span class="number">3.753</span> <span class="number">0.000811</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span> <span class="comment"># hp与wt交互显著</span></span><br><span class="line"><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span></span><br><span class="line">Signif. codes<span class="operator">:</span>  <span class="number">0</span> ‘<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.001</span> ‘<span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.01</span> ‘<span class="operator">*</span>’ <span class="number">0.05</span> ‘.’ <span class="number">0.1</span> ‘ ’ <span class="number">1</span></span><br><span class="line"></span><br><span class="line">Residual standard error<span class="operator">:</span> <span class="number">2.153</span> on <span class="number">28</span> degrees of freedom</span><br><span class="line">Multiple R<span class="operator">-</span>squared<span class="operator">:</span>  <span class="number">0.8848</span><span class="punctuation">,</span>	Adjusted R<span class="operator">-</span>squared<span class="operator">:</span>  <span class="number">0.8724</span> </span><br><span class="line"><span class="built_in">F</span><span class="operator">-</span>statistic<span class="operator">:</span> <span class="number">71.66</span> on <span class="number">3</span> and <span class="number">28</span> DF<span class="punctuation">,</span>  p<span class="operator">-</span>value<span class="operator">:</span> <span class="number">2.981e-13</span></span><br></pre></td></tr></table></figure><p><code>AIC()</code>只能比较两个模型</p><p>如果变量很多，可以采用逐步回归法和全子集回归法</p><p>逐步回归法：模型会一次添加或删除变量，向前或向后逐步回归</p><p>全子集回归法：计算所有模型后选出最优模型，更全面</p><p>逐步回归法</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> library<span class="punctuation">(</span>MASS<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> states <span class="operator">&lt;-</span> as.data.frame<span class="punctuation">(</span>state.x77<span class="punctuation">[</span><span class="punctuation">,</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;Murder&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Population&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>                                      <span class="string">&quot;Illiteracy&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Income&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Frost&quot;</span><span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> fit <span class="operator">&lt;-</span> lm<span class="punctuation">(</span>Murder <span class="operator">~</span> Population <span class="operator">+</span> Illiteracy <span class="operator">+</span> Income <span class="operator">+</span> Frost<span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>           data<span class="operator">=</span>states<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> stepAIC<span class="punctuation">(</span>fit<span class="punctuation">,</span> direction <span class="operator">=</span> <span class="string">&quot;backward&quot;</span><span class="punctuation">)</span></span><br><span class="line">Start<span class="operator">:</span>  AIC<span class="operator">=</span><span class="number">97.75</span></span><br><span class="line">Murder <span class="operator">~</span> Population <span class="operator">+</span> Illiteracy <span class="operator">+</span> Income <span class="operator">+</span> Frost</span><br><span class="line"></span><br><span class="line">             Df Sum of Sq    RSS     AIC</span><br><span class="line"><span class="operator">-</span> Frost       <span class="number">1</span>     <span class="number">0.021</span> <span class="number">289.19</span>  <span class="number">95.753</span></span><br><span class="line"><span class="operator">-</span> Income      <span class="number">1</span>     <span class="number">0.057</span> <span class="number">289.22</span>  <span class="number">95.759</span></span><br><span class="line"><span class="operator">&lt;</span>none<span class="operator">&gt;</span>                    <span class="number">289.17</span>  <span class="number">97.749</span></span><br><span class="line"><span class="operator">-</span> Population  <span class="number">1</span>    <span class="number">39.238</span> <span class="number">328.41</span> <span class="number">102.111</span></span><br><span class="line"><span class="operator">-</span> Illiteracy  <span class="number">1</span>   <span class="number">144.264</span> <span class="number">433.43</span> <span class="number">115.986</span></span><br><span class="line"></span><br><span class="line">Step<span class="operator">:</span>  AIC<span class="operator">=</span><span class="number">95.75</span></span><br><span class="line">Murder <span class="operator">~</span> Population <span class="operator">+</span> Illiteracy <span class="operator">+</span> Income</span><br><span class="line"></span><br><span class="line">             Df Sum of Sq    RSS     AIC</span><br><span class="line"><span class="operator">-</span> Income      <span class="number">1</span>     <span class="number">0.057</span> <span class="number">289.25</span>  <span class="number">93.763</span></span><br><span class="line"><span class="operator">&lt;</span>none<span class="operator">&gt;</span>                    <span class="number">289.19</span>  <span class="number">95.753</span></span><br><span class="line"><span class="operator">-</span> Population  <span class="number">1</span>    <span class="number">43.658</span> <span class="number">332.85</span> <span class="number">100.783</span></span><br><span class="line"><span class="operator">-</span> Illiteracy  <span class="number">1</span>   <span class="number">236.196</span> <span class="number">525.38</span> <span class="number">123.605</span></span><br><span class="line"></span><br><span class="line">Step<span class="operator">:</span>  AIC<span class="operator">=</span><span class="number">93.76</span></span><br><span class="line">Murder <span class="operator">~</span> Population <span class="operator">+</span> Illiteracy</span><br><span class="line"></span><br><span class="line">             Df Sum of Sq    RSS     AIC</span><br><span class="line"><span class="operator">&lt;</span>none<span class="operator">&gt;</span>                    <span class="number">289.25</span>  <span class="number">93.763</span></span><br><span class="line"><span class="operator">-</span> Population  <span class="number">1</span>    <span class="number">48.517</span> <span class="number">337.76</span>  <span class="number">99.516</span></span><br><span class="line"><span class="operator">-</span> Illiteracy  <span class="number">1</span>   <span class="number">299.646</span> <span class="number">588.89</span> <span class="number">127.311</span></span><br><span class="line"></span><br><span class="line">Call<span class="operator">:</span></span><br><span class="line">lm<span class="punctuation">(</span>formula <span class="operator">=</span> Murder <span class="operator">~</span> Population <span class="operator">+</span> Illiteracy<span class="punctuation">,</span> data <span class="operator">=</span> states<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Coefficients<span class="operator">:</span></span><br><span class="line"><span class="punctuation">(</span>Intercept<span class="punctuation">)</span>   Population   Illiteracy  </span><br><span class="line">  <span class="number">1.6515497</span>    <span class="number">0.0002242</span>    <span class="number">4.0807366</span>  </span><br></pre></td></tr></table></figure><p>全子集回归法</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> library<span class="punctuation">(</span>leaps<span class="punctuation">)</span></span><br><span class="line">Warning message<span class="operator">:</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> states <span class="operator">&lt;-</span> as.data.frame<span class="punctuation">(</span>state.x77<span class="punctuation">[</span><span class="punctuation">,</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;Murder&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Population&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Illiteracy&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Income&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Frost&quot;</span><span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> leaps <span class="operator">&lt;-</span>regsubsets<span class="punctuation">(</span>Murder <span class="operator">~</span> Population <span class="operator">+</span> Illiteracy <span class="operator">+</span> Income <span class="operator">+</span> Frost<span class="punctuation">,</span> data<span class="operator">=</span>states<span class="punctuation">,</span> nbest<span class="operator">=</span><span class="number">4</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> plot<span class="punctuation">(</span>leaps<span class="punctuation">,</span> scale<span class="operator">=</span><span class="string">&quot;adjr2&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h4 id="回归诊断">回归诊断</h4><p>模型是否最佳？是否经得起更多数据的检验？</p><p>满足OLS模型的统计假设才能够用<code>lm()</code>进行拟合</p><ol><li>正态性：对于固定的自变量值，因变量成正态分布</li><li>独立性：因变量之间相互独立</li><li>线性：因变量和自变量之间为线性关系</li><li>同方差性：因变量的方差不随自变量的水平不同而变化。也称不变方差</li></ol><p><code>plot(fit)</code>的四幅图即是对这四个条件的反应</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">opar <span class="operator">&lt;-</span> par<span class="punctuation">(</span>no.readonly<span class="operator">=</span><span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line">fit <span class="operator">&lt;-</span> lm<span class="punctuation">(</span>weight <span class="operator">~</span> height<span class="punctuation">,</span> data<span class="operator">=</span>women<span class="punctuation">)</span></span><br><span class="line">par<span class="punctuation">(</span>mfrow<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">2</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">plot<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line">par<span class="punctuation">(</span>opar<span class="punctuation">)</span></span><br></pre></td></tr></table></figure><p>残差——拟合图</p><h3 id="ANOVA">ANOVA</h3><p>Analysis of Variance，ANOVA，也称变异数分析，一种统计检验，用于分析<u>两个以上</u>样本之间的均值的差异。</p><p>方差分析分类：</p><ol><li>单因素方差分析ANOVA（组内、组间）</li><li>双因素方差分析ANOVA</li><li>协方差分析ANCOVA</li><li>多元方差分析MANOVA</li><li>多元协方差分析MANCOVA</li></ol><p><code>aov()</code>和<code>lm()</code>均可进行方差分析，<code>aov()</code>用法类似</p><img src="https://s2.loli.net/2022/07/09/ISzl3vNGH9dYnuC.png" alt="image-20220404095055952" style="zoom:80%"><p>常见的公式</p><p><img src="https://s2.loli.net/2022/07/09/ktHCIpOB3KhVPl9.png" alt="image-20220404095308548"></p><p>公式中各项的顺序很重要。</p><h4 id="one-way-ANOVA">one-way ANOVA</h4><p>探究单个单个因素（自变量）对响应变量的影响。</p><p>one-way ANOVA，单因素方差分析，一个自变量（independent variable）</p><p>适用情况： 自变量至少有3个水平（level，即类型为因子factor），即至少3个不同组或类别，因变量（dependent variable）为数值型（numeric）</p><p>ANOVA可检测因变量是否随自变量的水平变化而变化，比如</p><ul><li>自变量为微信使用频率，分为低、中、高三个组，探究其晚上睡眠时长是否有差异。</li><li>自变量为汽水品牌，收集可口可乐、百事、芬达、康师傅的数据，分析其每100 mL汽水的价格是否有差异。</li><li>自变量为肥料种类，使用3种肥料对作物施肥，分析作物产量是否有差异。</li></ul><p>ANOVA的零假设（null hypothesis，H<sub>0</sub>）：不同组之间的均值没有差异</p><p>备择假设（alternative hypothesis， H<sub>a</sub>）：至少有一个组与因变量的总体均值显著不同</p><p>原理：计算各组的均值是否与因变量总体均值不同，如果有任何一个组的均值与总体均值显著不同，则拒绝零假设。ANOVA使用F检验（F-test）进行统计的显著性分析。由于误差是针对整个组比较计算的，所以F检验允许一次比较多个均值，而不是针对每个单独的双向比较（t-test）。F检验将每组均值的方差与总体组的方差进行比较，如果组内方差小于组间方差，则F检验得到的F值很大，因此观察到的差异是真实存在的可能性更高，而不是偶然现象。</p><p><strong>ANOVA假设条件</strong></p><ol><li>观测之间相互独立：使用有效的统计学方法收集数据，观测之间没有隐藏的联系</li><li>响应变量符合正态分布：因变量的值符合正态分布</li><li>同方差性：被比较的每组的方差是相似的，如果组间方差不同，则方差分析可能不适合</li></ol><p><strong>实例</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 作物数据</span></span><br><span class="line"><span class="comment"># density：种植密度，1：低，2：高</span></span><br><span class="line"><span class="comment"># block：种植区域，1,2,3,4</span></span><br><span class="line"><span class="comment"># fertilizer：肥料种类：1,2,3</span></span><br><span class="line"><span class="comment"># yield：产量（bushels/acre，蒲式耳/英亩）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读入数据时，直接转换为 factor</span></span><br><span class="line"><span class="operator">&gt;</span> oneway <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&#x27;crop.data.csv&#x27;</span><span class="punctuation">,</span> colClasses <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;factor&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;factor&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;factor&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;numeric&#x27;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> head<span class="punctuation">(</span>oneway<span class="punctuation">)</span></span><br><span class="line">  density block fertilizer    yield</span><br><span class="line"><span class="number">1</span>       <span class="number">1</span>     <span class="number">1</span>          <span class="number">1</span> <span class="number">177.2287</span></span><br><span class="line"><span class="number">2</span>       <span class="number">2</span>     <span class="number">2</span>          <span class="number">1</span> <span class="number">177.5500</span></span><br><span class="line"><span class="number">3</span>       <span class="number">1</span>     <span class="number">3</span>          <span class="number">1</span> <span class="number">176.4085</span></span><br><span class="line"><span class="number">4</span>       <span class="number">2</span>     <span class="number">4</span>          <span class="number">1</span> <span class="number">177.7036</span></span><br><span class="line"><span class="number">5</span>       <span class="number">1</span>     <span class="number">1</span>          <span class="number">1</span> <span class="number">177.1255</span></span><br><span class="line"><span class="number">6</span>       <span class="number">2</span>     <span class="number">2</span>          <span class="number">1</span> <span class="number">176.7783</span></span><br><span class="line"><span class="operator">&gt;</span> summary<span class="punctuation">(</span>oneway<span class="punctuation">)</span></span><br><span class="line"> density block  fertilizer     yield      </span><br><span class="line"> <span class="number">1</span><span class="operator">:</span><span class="number">48</span>    <span class="number">1</span><span class="operator">:</span><span class="number">24</span>   <span class="number">1</span><span class="operator">:</span><span class="number">32</span>       Min.   <span class="operator">:</span><span class="number">175.4</span>  </span><br><span class="line"> <span class="number">2</span><span class="operator">:</span><span class="number">48</span>    <span class="number">2</span><span class="operator">:</span><span class="number">24</span>   <span class="number">2</span><span class="operator">:</span><span class="number">32</span>       <span class="number">1</span>st Qu.<span class="operator">:</span><span class="number">176.5</span>  </span><br><span class="line">         <span class="number">3</span><span class="operator">:</span><span class="number">24</span>   <span class="number">3</span><span class="operator">:</span><span class="number">32</span>       Median <span class="operator">:</span><span class="number">177.1</span>  </span><br><span class="line">         <span class="number">4</span><span class="operator">:</span><span class="number">24</span>              Mean   <span class="operator">:</span><span class="number">177.0</span>  </span><br><span class="line">                           <span class="number">3</span>rd Qu.<span class="operator">:</span><span class="number">177.4</span>  </span><br><span class="line">                           Max.   <span class="operator">:</span><span class="number">179.1</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 探究肥料与产量的关系</span></span><br><span class="line"><span class="operator">&gt;</span> fit <span class="operator">&lt;-</span> aov<span class="punctuation">(</span>yield<span class="operator">~</span>fertilizer<span class="punctuation">,</span> data <span class="operator">=</span> oneway<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> summary<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line">            Df Sum Sq Mean Sq <span class="built_in">F</span> value Pr<span class="punctuation">(</span><span class="operator">&gt;</span><span class="built_in">F</span><span class="punctuation">)</span>    </span><br><span class="line">fertilizer   <span class="number">2</span>   <span class="number">6.07</span>  <span class="number">3.0340</span>   <span class="number">7.863</span>  <span class="number">7e-04</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">Residuals   <span class="number">93</span>  <span class="number">35.89</span>  <span class="number">0.3859</span>                   </span><br><span class="line"><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span></span><br><span class="line">Signif. codes<span class="operator">:</span>  <span class="number">0</span> ‘<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.001</span> ‘<span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.01</span> ‘<span class="operator">*</span>’ <span class="number">0.05</span> ‘.’ <span class="number">0.1</span> ‘ ’ <span class="number">1</span></span><br></pre></td></tr></table></figure><p>ANOVA 输出内容解释</p><ul><li>第一列：自变量和模型残差（model residuals），也即模型误差（model error）</li><li><code>Df</code>：为自变量的自由度（自变量level-1）和残差的自由度（观测总数-1-？？？？），fertilizer自由度为3-1=2，残差为96-1-2=93</li><li><code>Sum Sq</code>：由该变量解释的组均值和总体均值之间的平方和（sum of squares），fertilizer平方和为6.07，残差为35.89</li><li><code>Mean Sq</code>：平方和的均值，即平方和÷自由度</li><li><code>F value</code>：来自F检验（F-test）的检验统计量，每个自变量的平均方差÷残差的平均方差，F值越大，与自变量相关的变化越有可能是真实的，而不是偶然的</li><li><code>Pr(&gt;F)</code>：F统计量的p值，表示，如果组均值之间没有差异的零假设为真时，F值发生的可能性</li></ul><p>由于自变量fertilizer的<code>p &lt; 0.05</code>，显著，拒绝零假设，所以肥料种类对作物产量有显著影响。</p><p>ANOVA 能够分析自变量的水平之间是否存在差异，但哪些差异是显著的却不知道。</p><p>可以使用<code>TukeyHSD()</code>函数进行 Tukey’s Honestly-Significant Difference post-hoc test</p><p>Tukey test 对组进行两两比较，并使用保守误差（conservative error estimate）估计找出在统计上不同的组</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> TukeyHSD<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line">  Tukey multiple comparisons of means</span><br><span class="line">    <span class="number">95</span>% family<span class="operator">-</span>wise confidence level</span><br><span class="line"></span><br><span class="line">Fit<span class="operator">:</span> aov<span class="punctuation">(</span>formula <span class="operator">=</span> yield <span class="operator">~</span> fertilizer<span class="punctuation">,</span> data <span class="operator">=</span> oneway<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>fertilizer</span><br><span class="line">         diff         lwr       upr     p adj</span><br><span class="line"><span class="number">2</span><span class="operator">-</span><span class="number">1</span> <span class="number">0.1761687</span> <span class="operator">-</span><span class="number">0.19371896</span> <span class="number">0.5460564</span> <span class="number">0.4954705</span></span><br><span class="line"><span class="number">3</span><span class="operator">-</span><span class="number">1</span> <span class="number">0.5991256</span>  <span class="number">0.22923789</span> <span class="number">0.9690133</span> <span class="number">0.0006125</span></span><br><span class="line"><span class="number">3</span><span class="operator">-</span><span class="number">2</span> <span class="number">0.4229569</span>  <span class="number">0.05306916</span> <span class="number">0.7928445</span> <span class="number">0.0208735</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> aggregate<span class="punctuation">(</span>oneway<span class="operator">$</span>yield<span class="punctuation">,</span> by<span class="operator">=</span><span class="built_in">list</span><span class="punctuation">(</span>oneway<span class="operator">$</span>fertilizer<span class="punctuation">)</span><span class="punctuation">,</span> FUN<span class="operator">=</span>mean<span class="punctuation">)</span></span><br><span class="line">  Group.1        x</span><br><span class="line"><span class="number">1</span>       <span class="number">1</span> <span class="number">176.7570</span></span><br><span class="line"><span class="number">2</span>       <span class="number">2</span> <span class="number">176.9332</span></span><br><span class="line"><span class="number">3</span>       <span class="number">3</span> <span class="number">177.3562</span></span><br></pre></td></tr></table></figure><p>输出内容解释</p><p><code>Fit</code>：检验的模型</p><p><code>diff</code>：两组的均值差</p><p><code>lwr, upr</code>：95%置信区间的上下限</p><p><code>p adj</code>：调整后的p值</p><p>结果表明，3-2和3-1之间的差异显著（p &lt; 0.05），肥料3的作物平均产量显著高于肥料1和2；</p><p>而肥料1和2之间的作物平均产量差异不显著。</p><p>ANOVA 总结方式</p><blockquote><p>We found a statistically-significant difference in average crop yield according to fertilizer type (f(2)=9.073, p &lt; 0.001). A Tukey post-hoc test revealed significant pairwise differences between fertilizer types 3 and 2, with an average difference of 0.42 bushels/acre (p &lt; 0.05) and between fertilizer types 3 and 1, with an average difference of 0.59 bushels/acre (p &lt; 0.01).</p></blockquote><p><code>multcomp</code>包中的<code>cholesterol</code>数据集</p><p>自变量：5种疗法<code>trt</code></p><p>响应变量：问卷得分<code>response</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> library<span class="punctuation">(</span>multcomp<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> head<span class="punctuation">(</span>cholesterol<span class="punctuation">)</span></span><br><span class="line">    trt response</span><br><span class="line"><span class="number">1</span> <span class="number">1</span>time   <span class="number">3.8612</span></span><br><span class="line"><span class="number">2</span> <span class="number">1</span>time  <span class="number">10.3868</span></span><br><span class="line"><span class="number">3</span> <span class="number">1</span>time   <span class="number">5.9059</span></span><br><span class="line"><span class="number">4</span> <span class="number">1</span>time   <span class="number">3.0609</span></span><br><span class="line"><span class="number">5</span> <span class="number">1</span>time   <span class="number">7.7204</span></span><br><span class="line"><span class="number">6</span> <span class="number">1</span>time   <span class="number">2.7139</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 频数统计</span></span><br><span class="line"><span class="operator">&gt;</span> table<span class="punctuation">(</span>cholesterol<span class="operator">$</span>trt<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"> <span class="number">1</span>time <span class="number">2</span>times <span class="number">4</span>times  drugD  drugE </span><br><span class="line">    <span class="number">10</span>     <span class="number">10</span>     <span class="number">10</span>     <span class="number">10</span>     <span class="number">10</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 分组统计均值和标准差</span></span><br><span class="line"><span class="operator">&gt;</span> aggregate<span class="punctuation">(</span>cholesterol<span class="operator">$</span>response<span class="punctuation">,</span> by<span class="operator">=</span><span class="built_in">list</span><span class="punctuation">(</span>cholesterol<span class="operator">$</span>trt<span class="punctuation">)</span><span class="punctuation">,</span> FUN<span class="operator">=</span>mean<span class="punctuation">)</span></span><br><span class="line">  Group.1        x</span><br><span class="line"><span class="number">1</span>   <span class="number">1</span>time  <span class="number">5.78197</span></span><br><span class="line"><span class="number">2</span>  <span class="number">2</span>times  <span class="number">9.22497</span></span><br><span class="line"><span class="number">3</span>  <span class="number">4</span>times <span class="number">12.37478</span></span><br><span class="line"><span class="number">4</span>   drugD <span class="number">15.36117</span></span><br><span class="line"><span class="number">5</span>   drugE <span class="number">20.94752</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> aggregate<span class="punctuation">(</span>cholesterol<span class="operator">$</span>response<span class="punctuation">,</span> by<span class="operator">=</span><span class="built_in">list</span><span class="punctuation">(</span>cholesterol<span class="operator">$</span>trt<span class="punctuation">)</span><span class="punctuation">,</span> FUN<span class="operator">=</span>sd<span class="punctuation">)</span></span><br><span class="line">  Group.1        x</span><br><span class="line"><span class="number">1</span>   <span class="number">1</span>time <span class="number">2.878113</span></span><br><span class="line"><span class="number">2</span>  <span class="number">2</span>times <span class="number">3.483054</span></span><br><span class="line"><span class="number">3</span>  <span class="number">4</span>times <span class="number">2.923119</span></span><br><span class="line"><span class="number">4</span>   drugD <span class="number">3.454636</span></span><br><span class="line"><span class="number">5</span>   drugE <span class="number">3.345003</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方差分析</span></span><br><span class="line"><span class="operator">&gt;</span> fit <span class="operator">&lt;-</span> aov<span class="punctuation">(</span>response<span class="operator">~</span>trt<span class="punctuation">,</span> data <span class="operator">=</span> cholesterol<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> fit</span><br><span class="line">Call<span class="operator">:</span></span><br><span class="line">   aov<span class="punctuation">(</span>formula <span class="operator">=</span> response <span class="operator">~</span> trt<span class="punctuation">,</span> data <span class="operator">=</span> cholesterol<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Terms<span class="operator">:</span></span><br><span class="line">                      trt Residuals</span><br><span class="line">Sum of Squares  <span class="number">1351.3690</span>  <span class="number">468.7504</span></span><br><span class="line">Deg. of Freedom         <span class="number">4</span>        <span class="number">45</span></span><br><span class="line"></span><br><span class="line">Residual standard error<span class="operator">:</span> <span class="number">3.227488</span></span><br><span class="line">Estimated effects may be unbalanced</span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> summary<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line">            Df Sum Sq Mean Sq <span class="built_in">F</span> value   Pr<span class="punctuation">(</span><span class="operator">&gt;</span><span class="built_in">F</span><span class="punctuation">)</span>    </span><br><span class="line">trt          <span class="number">4</span> <span class="number">1351.4</span>   <span class="number">337.8</span>   <span class="number">32.43</span> <span class="number">9.82e-13</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span> <span class="comment"># F值越大，组间差异越大，p值越小，F值越可靠</span></span><br><span class="line">Residuals   <span class="number">45</span>  <span class="number">468.8</span>    <span class="number">10.4</span>                     </span><br><span class="line"><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span></span><br><span class="line">Signif. codes<span class="operator">:</span>  <span class="number">0</span> ‘<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.001</span> ‘<span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.01</span> ‘<span class="operator">*</span>’ <span class="number">0.05</span> ‘.’ <span class="number">0.1</span> ‘ ’ <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检测数据是否满足假设条件</span></span><br><span class="line"><span class="operator">&gt;</span> plot<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># lm()函数方差分析</span></span><br><span class="line"><span class="operator">&gt;</span> fit_lm <span class="operator">&lt;-</span> lm<span class="punctuation">(</span>response<span class="operator">~</span>trt<span class="punctuation">,</span> data <span class="operator">=</span> cholesterol<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> summary<span class="punctuation">(</span>fit_lm<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Call<span class="operator">:</span></span><br><span class="line">lm<span class="punctuation">(</span>formula <span class="operator">=</span> response <span class="operator">~</span> trt<span class="punctuation">,</span> data <span class="operator">=</span> cholesterol<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Residuals<span class="operator">:</span></span><br><span class="line">    Min      <span class="number">1</span>Q  Median      <span class="number">3</span>Q     Max </span><br><span class="line"><span class="operator">-</span><span class="number">6.5418</span> <span class="operator">-</span><span class="number">1.9672</span> <span class="operator">-</span><span class="number">0.0016</span>  <span class="number">1.8901</span>  <span class="number">6.6008</span> </span><br><span class="line"></span><br><span class="line">Coefficients<span class="operator">:</span></span><br><span class="line">            Estimate Std. Error t value Pr<span class="punctuation">(</span><span class="operator">&gt;</span><span class="operator">|</span>t<span class="operator">|</span><span class="punctuation">)</span>    </span><br><span class="line"><span class="punctuation">(</span>Intercept<span class="punctuation">)</span>    <span class="number">5.782</span>      <span class="number">1.021</span>   <span class="number">5.665</span> <span class="number">9.78e-07</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">trt2times      <span class="number">3.443</span>      <span class="number">1.443</span>   <span class="number">2.385</span>   <span class="number">0.0213</span> <span class="operator">*</span>  </span><br><span class="line">trt4times      <span class="number">6.593</span>      <span class="number">1.443</span>   <span class="number">4.568</span> <span class="number">3.82e-05</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">trtdrugD       <span class="number">9.579</span>      <span class="number">1.443</span>   <span class="number">6.637</span> <span class="number">3.53e-08</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">trtdrugE      <span class="number">15.166</span>      <span class="number">1.443</span>  <span class="number">10.507</span> <span class="number">1.08e-13</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line"><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span></span><br><span class="line">Signif. codes<span class="operator">:</span>  <span class="number">0</span> ‘<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.001</span> ‘<span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.01</span> ‘<span class="operator">*</span>’ <span class="number">0.05</span> ‘.’ <span class="number">0.1</span> ‘ ’ <span class="number">1</span></span><br><span class="line"></span><br><span class="line">Residual standard error<span class="operator">:</span> <span class="number">3.227</span> on <span class="number">45</span> degrees of freedom</span><br><span class="line">Multiple R<span class="operator">-</span>squared<span class="operator">:</span>  <span class="number">0.7425</span><span class="punctuation">,</span>	Adjusted R<span class="operator">-</span>squared<span class="operator">:</span>  <span class="number">0.7196</span> </span><br><span class="line"><span class="built_in">F</span><span class="operator">-</span>statistic<span class="operator">:</span> <span class="number">32.43</span> on <span class="number">4</span> and <span class="number">45</span> DF<span class="punctuation">,</span>  p<span class="operator">-</span>value<span class="operator">:</span> <span class="number">9.819e-13</span> <span class="comment"># F值与p值和aov()函数得出的相同</span></span><br></pre></td></tr></table></figure><p>单因素协方差分析</p><p><code>litter</code>怀孕小鼠数据集</p><p>因变量：给药剂量<code>dose</code>，0, 5, 50, 500</p><p>响应变量：每窝幼崽平均出生体重<code>weight</code></p><p>协变量：怀孕时间<code>gesttime</code>、产仔数</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> library<span class="punctuation">(</span>multcomp<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> head<span class="punctuation">(</span>litter<span class="punctuation">)</span></span><br><span class="line">  dose weight gesttime number</span><br><span class="line"><span class="number">1</span>    <span class="number">0</span>  <span class="number">28.05</span>     <span class="number">22.5</span>     <span class="number">15</span></span><br><span class="line"><span class="number">2</span>    <span class="number">0</span>  <span class="number">33.33</span>     <span class="number">22.5</span>     <span class="number">14</span></span><br><span class="line"><span class="number">3</span>    <span class="number">0</span>  <span class="number">36.37</span>     <span class="number">22.0</span>     <span class="number">14</span></span><br><span class="line"><span class="number">4</span>    <span class="number">0</span>  <span class="number">35.52</span>     <span class="number">22.0</span>     <span class="number">13</span></span><br><span class="line"><span class="number">5</span>    <span class="number">0</span>  <span class="number">36.77</span>     <span class="number">21.5</span>     <span class="number">15</span></span><br><span class="line"><span class="number">6</span>    <span class="number">0</span>  <span class="number">29.60</span>     <span class="number">23.0</span>      <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 频数统计</span></span><br><span class="line"><span class="operator">&gt;</span> table<span class="punctuation">(</span>litter<span class="operator">$</span>dose<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">  <span class="number">0</span>   <span class="number">5</span>  <span class="number">50</span> <span class="number">500</span> </span><br><span class="line"> <span class="number">20</span>  <span class="number">19</span>  <span class="number">18</span>  <span class="number">17</span> </span><br><span class="line"><span class="operator">&gt;</span> table<span class="punctuation">(</span>litter<span class="operator">$</span>gesttime<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="number">21.5</span>   <span class="number">22</span> <span class="number">22.5</span>   <span class="number">23</span> </span><br><span class="line">  <span class="number">20</span>   <span class="number">24</span>   <span class="number">27</span>    <span class="number">3</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 分组统计平均值，差异不明显</span></span><br><span class="line"><span class="operator">&gt;</span> aggregate<span class="punctuation">(</span>litter<span class="operator">$</span>weight<span class="punctuation">,</span> by<span class="operator">=</span><span class="built_in">list</span><span class="punctuation">(</span>litter<span class="operator">$</span>dose<span class="punctuation">)</span><span class="punctuation">,</span> FUN<span class="operator">=</span>mean<span class="punctuation">)</span></span><br><span class="line">  Group.1        x</span><br><span class="line"><span class="number">1</span>       <span class="number">0</span> <span class="number">32.30850</span></span><br><span class="line"><span class="number">2</span>       <span class="number">5</span> <span class="number">29.30842</span></span><br><span class="line"><span class="number">3</span>      <span class="number">50</span> <span class="number">29.86611</span></span><br><span class="line"><span class="number">4</span>     <span class="number">500</span> <span class="number">29.64647</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 协变量放在前面，分析控制协变量时，自变量的影响</span></span><br><span class="line"><span class="operator">&gt;</span> fit <span class="operator">&lt;-</span> aov<span class="punctuation">(</span>weight<span class="operator">~</span>gesttime<span class="operator">+</span>dose<span class="punctuation">,</span> data <span class="operator">=</span> litter<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> summary<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line">            Df Sum Sq Mean Sq <span class="built_in">F</span> value  Pr<span class="punctuation">(</span><span class="operator">&gt;</span><span class="built_in">F</span><span class="punctuation">)</span>   </span><br><span class="line">gesttime     <span class="number">1</span>  <span class="number">134.3</span>  <span class="number">134.30</span>   <span class="number">8.049</span> <span class="number">0.00597</span> <span class="operator">*</span><span class="operator">*</span> <span class="comment"># 怀孕时间与出生幼崽的体重有关</span></span><br><span class="line">dose         <span class="number">3</span>  <span class="number">137.1</span>   <span class="number">45.71</span>   <span class="number">2.739</span> <span class="number">0.04988</span> <span class="operator">*</span> <span class="comment"># 控制怀孕时间，药物剂量与出生体重相关</span></span><br><span class="line">Residuals   <span class="number">69</span> <span class="number">1151.3</span>   <span class="number">16.69</span>                   </span><br><span class="line"><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span></span><br><span class="line">Signif. codes<span class="operator">:</span>  <span class="number">0</span> ‘<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.001</span> ‘<span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.01</span> ‘<span class="operator">*</span>’ <span class="number">0.05</span> ‘.’ <span class="number">0.1</span> ‘ ’ <span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="two-way-ANOVA">two-way ANOVA</h4><p>two-way ANOVA，双因素方差分析，两个自变量</p><p><code>ToothGrowth</code>数据集</p><p>自变量：喂食种类<code>supp</code>、剂量<code>dose</code></p><p>响应变量：牙齿长度<code>len</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> head<span class="punctuation">(</span>ToothGrowth<span class="punctuation">)</span></span><br><span class="line">   len supp dose</span><br><span class="line"><span class="number">1</span>  <span class="number">4.2</span>   VC  <span class="number">0.5</span></span><br><span class="line"><span class="number">2</span> <span class="number">11.5</span>   VC  <span class="number">0.5</span></span><br><span class="line"><span class="number">3</span>  <span class="number">7.3</span>   VC  <span class="number">0.5</span></span><br><span class="line"><span class="number">4</span>  <span class="number">5.8</span>   VC  <span class="number">0.5</span></span><br><span class="line"><span class="number">5</span>  <span class="number">6.4</span>   VC  <span class="number">0.5</span></span><br><span class="line"><span class="number">6</span> <span class="number">10.0</span>   VC  <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将自变量转化为因子类型</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>ToothGrowth<span class="operator">$</span>supp<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;factor&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>ToothGrowth<span class="operator">$</span>dose<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;numeric&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> ToothGrowth<span class="operator">$</span>dose <span class="operator">&lt;-</span> factor<span class="punctuation">(</span>ToothGrowth<span class="operator">$</span>dose<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>ToothGrowth<span class="operator">$</span>dose<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;factor&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 频数统计二联表</span></span><br><span class="line"><span class="operator">&gt;</span> xtabs<span class="punctuation">(</span><span class="operator">~</span>dose<span class="operator">+</span>supp<span class="punctuation">,</span> data <span class="operator">=</span> ToothGrowth<span class="punctuation">)</span></span><br><span class="line">     supp</span><br><span class="line">dose  OJ VC</span><br><span class="line">  <span class="number">0.5</span> <span class="number">10</span> <span class="number">10</span></span><br><span class="line">  <span class="number">1</span>   <span class="number">10</span> <span class="number">10</span></span><br><span class="line">  <span class="number">2</span>   <span class="number">10</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 分组统计均值</span></span><br><span class="line"><span class="operator">&gt;</span> aggregate<span class="punctuation">(</span>ToothGrowth<span class="operator">$</span>len<span class="punctuation">,</span> by<span class="operator">=</span><span class="built_in">list</span><span class="punctuation">(</span>ToothGrowth<span class="operator">$</span>dose<span class="punctuation">,</span> ToothGrowth<span class="operator">$</span>supp<span class="punctuation">)</span><span class="punctuation">,</span> FUN<span class="operator">=</span>mean<span class="punctuation">)</span></span><br><span class="line">  Group.1 Group.2     x</span><br><span class="line"><span class="number">1</span>     <span class="number">0.5</span>      OJ <span class="number">13.23</span></span><br><span class="line"><span class="number">2</span>       <span class="number">1</span>      OJ <span class="number">22.70</span></span><br><span class="line"><span class="number">3</span>       <span class="number">2</span>      OJ <span class="number">26.06</span></span><br><span class="line"><span class="number">4</span>     <span class="number">0.5</span>      VC  <span class="number">7.98</span></span><br><span class="line"><span class="number">5</span>       <span class="number">1</span>      VC <span class="number">16.77</span></span><br><span class="line"><span class="number">6</span>       <span class="number">2</span>      VC <span class="number">26.14</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 二者存在交互，用*表示所有情况，即A+B+A:B</span></span><br><span class="line"><span class="operator">&gt;</span> fit <span class="operator">&lt;-</span> aov<span class="punctuation">(</span>len<span class="operator">~</span>supp<span class="operator">*</span>dose<span class="punctuation">,</span> data <span class="operator">=</span> ToothGrowth<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> summary<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line">            Df Sum Sq Mean Sq <span class="built_in">F</span> value   Pr<span class="punctuation">(</span><span class="operator">&gt;</span><span class="built_in">F</span><span class="punctuation">)</span>    </span><br><span class="line">supp         <span class="number">1</span>  <span class="number">205.4</span>   <span class="number">205.4</span>  <span class="number">15.572</span> <span class="number">0.000231</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span> <span class="comment"># 结果显著，supp和dose对len都有影响</span></span><br><span class="line">dose         <span class="number">2</span> <span class="number">2426.4</span>  <span class="number">1213.2</span>  <span class="number">92.000</span>  <span class="operator">&lt;</span> <span class="number">2e-16</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">supp<span class="operator">:</span>dose    <span class="number">2</span>  <span class="number">108.3</span>    <span class="number">54.2</span>   <span class="number">4.107</span> <span class="number">0.021860</span> <span class="operator">*</span>   <span class="comment"># 交互项也显著</span></span><br><span class="line">Residuals   <span class="number">54</span>  <span class="number">712.1</span>    <span class="number">13.2</span>                     </span><br><span class="line"><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span></span><br><span class="line">Signif. codes<span class="operator">:</span>  <span class="number">0</span> ‘<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.001</span> ‘<span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.01</span> ‘<span class="operator">*</span>’ <span class="number">0.05</span> ‘.’ <span class="number">0.1</span> ‘ ’ <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可使用HH包的函数将dose和supp的交互效应可视化</span></span><br><span class="line"><span class="operator">&gt;</span> library<span class="punctuation">(</span>HH<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> interaction.plot<span class="punctuation">(</span>ToothGrowth<span class="operator">$</span>dose<span class="punctuation">,</span> ToothGrowth<span class="operator">$</span>supp<span class="punctuation">,</span> ToothGrowth<span class="operator">$</span>len<span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h4 id="多元方差分析">多元方差分析</h4><p>当因变量不止一个时，可以使用多元方差分析</p><p>MASS包UScereal数据集</p><p>自变量：货架shelf</p><p>因变量：谷物所含卡路里calories、脂肪fat、糖sugars</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> library<span class="punctuation">(</span>MASS<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> attach<span class="punctuation">(</span>UScereal<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># aggregate()只接受一个值，cbind()连接</span></span><br><span class="line"><span class="operator">&gt;</span> aggregate<span class="punctuation">(</span>calories<span class="punctuation">,</span> fat<span class="punctuation">,</span> sugars<span class="punctuation">,</span> by<span class="operator">=</span><span class="built_in">list</span><span class="punctuation">(</span>shelf<span class="punctuation">)</span><span class="punctuation">,</span> FUN<span class="operator">=</span>mean<span class="punctuation">)</span></span><br><span class="line">Error <span class="keyword">in</span> mean.default<span class="punctuation">(</span>X<span class="punctuation">[[</span>i<span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">,</span> ...<span class="punctuation">)</span> <span class="operator">:</span> <span class="string">&#x27;trim&#x27;</span>必需是长度必需为一的数值</span><br><span class="line">In addition<span class="operator">:</span> Warning message<span class="operator">:</span></span><br><span class="line">In <span class="keyword">if</span> <span class="punctuation">(</span>na.rm<span class="punctuation">)</span> x <span class="operator">&lt;-</span> x<span class="punctuation">[</span><span class="operator">!</span><span class="built_in">is.na</span><span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">]</span> <span class="operator">:</span></span><br><span class="line">  the condition has <span class="built_in">length</span> <span class="operator">&gt;</span> <span class="number">1</span> and only the first element will be used</span><br><span class="line"><span class="operator">&gt;</span> aggregate<span class="punctuation">(</span>cbind<span class="punctuation">(</span>calories<span class="punctuation">,</span> fat<span class="punctuation">,</span> sugars<span class="punctuation">)</span><span class="punctuation">,</span> by<span class="operator">=</span><span class="built_in">list</span><span class="punctuation">(</span>shelf<span class="punctuation">)</span><span class="punctuation">,</span> FUN<span class="operator">=</span>mean<span class="punctuation">)</span></span><br><span class="line">  Group.1 calories       fat    sugars</span><br><span class="line"><span class="number">1</span>       <span class="number">1</span> <span class="number">119.4774</span> <span class="number">0.6621338</span>  <span class="number">6.295493</span></span><br><span class="line"><span class="number">2</span>       <span class="number">2</span> <span class="number">129.8162</span> <span class="number">1.3413488</span> <span class="number">12.507670</span></span><br><span class="line"><span class="number">3</span>       <span class="number">3</span> <span class="number">180.1466</span> <span class="number">1.9449071</span> <span class="number">10.856821</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自变量转化为因子</span></span><br><span class="line"><span class="operator">&gt;</span> shelf <span class="operator">&lt;-</span> factor<span class="punctuation">(</span>shelf<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># +号只能写右边，同样cbind()连接</span></span><br><span class="line"><span class="operator">&gt;</span> fit <span class="operator">&lt;-</span> manova<span class="punctuation">(</span>cbind<span class="punctuation">(</span>calories<span class="punctuation">,</span> fat<span class="punctuation">,</span> sugars<span class="punctuation">)</span><span class="operator">~</span>shelf<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> summary<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line">          Df Pillai approx <span class="built_in">F</span> num Df den Df    Pr<span class="punctuation">(</span><span class="operator">&gt;</span><span class="built_in">F</span><span class="punctuation">)</span>    </span><br><span class="line">shelf      <span class="number">2</span> <span class="number">0.4021</span>   <span class="number">5.1167</span>      <span class="number">6</span>    <span class="number">122</span> <span class="number">0.0001015</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">Residuals <span class="number">62</span>                                            </span><br><span class="line"><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span></span><br><span class="line">Signif. codes<span class="operator">:</span>  <span class="number">0</span> ‘<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.001</span> ‘<span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.01</span> ‘<span class="operator">*</span>’ <span class="number">0.05</span> ‘.’ <span class="number">0.1</span> ‘ ’ <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出单变量结果</span></span><br><span class="line"><span class="operator">&gt;</span> summary.aov<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line"> Response calories <span class="operator">:</span></span><br><span class="line">            Df Sum Sq Mean Sq <span class="built_in">F</span> value    Pr<span class="punctuation">(</span><span class="operator">&gt;</span><span class="built_in">F</span><span class="punctuation">)</span>    </span><br><span class="line">shelf        <span class="number">2</span>  <span class="number">50435</span> <span class="number">25217.6</span>  <span class="number">7.8623</span> <span class="number">0.0009054</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">Residuals   <span class="number">62</span> <span class="number">198860</span>  <span class="number">3207.4</span>                      </span><br><span class="line"><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span></span><br><span class="line">Signif. codes<span class="operator">:</span>  <span class="number">0</span> ‘<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.001</span> ‘<span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.01</span> ‘<span class="operator">*</span>’ <span class="number">0.05</span> ‘.’ <span class="number">0.1</span> ‘ ’ <span class="number">1</span></span><br><span class="line"></span><br><span class="line"> Response fat <span class="operator">:</span></span><br><span class="line">            Df Sum Sq Mean Sq <span class="built_in">F</span> value  Pr<span class="punctuation">(</span><span class="operator">&gt;</span><span class="built_in">F</span><span class="punctuation">)</span>  </span><br><span class="line">shelf        <span class="number">2</span>  <span class="number">18.44</span>  <span class="number">9.2199</span>  <span class="number">3.6828</span> <span class="number">0.03081</span> <span class="operator">*</span></span><br><span class="line">Residuals   <span class="number">62</span> <span class="number">155.22</span>  <span class="number">2.5035</span>                  </span><br><span class="line"><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span></span><br><span class="line">Signif. codes<span class="operator">:</span>  <span class="number">0</span> ‘<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.001</span> ‘<span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.01</span> ‘<span class="operator">*</span>’ <span class="number">0.05</span> ‘.’ <span class="number">0.1</span> ‘ ’ <span class="number">1</span></span><br><span class="line"></span><br><span class="line"> Response sugars <span class="operator">:</span></span><br><span class="line">            Df  Sum Sq Mean Sq <span class="built_in">F</span> value   Pr<span class="punctuation">(</span><span class="operator">&gt;</span><span class="built_in">F</span><span class="punctuation">)</span>   </span><br><span class="line">shelf        <span class="number">2</span>  <span class="number">381.33</span> <span class="number">190.667</span>  <span class="number">6.5752</span> <span class="number">0.002572</span> <span class="operator">*</span><span class="operator">*</span></span><br><span class="line">Residuals   <span class="number">62</span> <span class="number">1797.87</span>  <span class="number">28.998</span>                    </span><br><span class="line"><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span></span><br><span class="line">Signif. codes<span class="operator">:</span>  <span class="number">0</span> ‘<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.001</span> ‘<span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.01</span> ‘<span class="operator">*</span>’ <span class="number">0.05</span> ‘.’ <span class="number">0.1</span> ‘ ’ <span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="Student’s-t-test-2">Student’s t test</h3><p>学生 t 检验（student’s t test，也称 t-test）是一种统计检验，用于比较两组的均值。在假设检验中常用于确定某个过程、处理是否对目标真的有显著影响，或者两组是否有显著差异。</p><p>比如：想知道鸢尾花的平均花瓣长度是否和花的种类有关，收集两种鸢尾花的花瓣长度数据，每组测量25次，可使用 t 检验检测两组之间的差异。</p><p>零假设 H<sub>0</sub>：两组均值之间的真实差异为零，即没有差异</p><p>备择假设H<sub>a</sub>：真实差异不为零</p><p>适用情况： t 检验只能用于比较两组的均值（也称成对比较），如果想比较两组以上，用 ANOVA 检验或 post-hoc test。</p><p><strong>t 检验假设</strong></p><ol><li>数据之间相互独立</li><li>数据满足（或近似满足）正态分布</li><li>方差同质性：被比较的组的方差相似</li></ol><p>若数据不满足要求，可以尝试非参数检验（nonparametric test），如 Wilcoxon Signed-Rank test。</p><p><strong>t 检验类型</strong></p><p>one-sample，two-sample，paired t-test？</p><ul><li>paired t-test，配对样本均值检验：组来自同一类别（如某种处理的前后测量）</li><li>two-sample，两独立样本均值检验：组来自两个不同类别（如两种物种，来自两个城市的人），也即 independent t-stet</li><li>one-sample，单样本均值检验：一组和标准值相比较（如将液体的 ph 与中性 ph7 相比）</li></ul><p>one-tailed，two-tailed t-test？</p><ul><li>two-tailed， 双侧 t 检验：只关注两组是否有差异</li><li>one-tailed，单侧 t 检验：需要知道两组的均值谁大谁小</li></ul><p>如想知道鸢尾花的平均花瓣长度是否和花的种类有关，观测来自两种花，故使用 two-sample t-test；只关注是否有差异，故使用 two-tailed t-test。</p><p><strong>t 检验方程</strong></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>t</mi><mo>=</mo><mfrac><mrow><mover accent="true"><msub><mi>x</mi><mn>1</mn></msub><mo>ˉ</mo></mover><mo>−</mo><mover accent="true"><msub><mi>x</mi><mn>2</mn></msub><mo>ˉ</mo></mover></mrow><msqrt><mrow><msup><mi>s</mi><mn>2</mn></msup><mo stretchy="false">(</mo><mfrac><mn>1</mn><msub><mi>n</mi><mn>1</mn></msub></mfrac><mo>+</mo><mfrac><mn>1</mn><msub><mi>n</mi><mn>2</mn></msub></mfrac><mo stretchy="false">)</mo></mrow></msqrt></mfrac></mrow><annotation encoding="application/x-tex">t=\frac{\bar{x_{1}}-\bar{x_{2}}}{\sqrt{s^{2}(\frac{1}{n_{1} }+ \frac{1}{n_{2} })} }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6151em"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:2.9903em;vertical-align:-1.73em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2603em"><span style="top:-2.11em"><span class="pstrut" style="height:3.185em"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.185em"><span class="svg-align" style="top:-3.8em"><span class="pstrut" style="height:3.8em"></span><span class="mord" style="padding-left:1em"><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.7401em"><span style="top:-2.989em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8451em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3173em"><span style="top:-2.357em;margin-left:0;margin-right:.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.143em"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.4451em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8451em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3173em"><span style="top:-2.357em;margin-left:0;margin-right:.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.143em"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.4451em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span><span style="top:-3.145em"><span class="pstrut" style="height:3.8em"></span><span class="hide-tail" style="min-width:1.02em;height:1.88em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.88em" viewBox="0 0 400000 1944" preserveAspectRatio="xMinYMin slice"><path d="M983 90l0 0c4-6.7 10-10 18-10H400000v40H1013.1s-83.4 268-264.1 840c-180.7 572-277 876.3-289 913-4.7 4.7-12.7 7-24 7s-12 0-12 0c-1.3-3.3-3.7-11.7-7-25-35.3-125.3-106.7-373.3-214-744-10 12-21 25-33 39s-32 39-32 39c-6-5.3-15-14-27-26s25-30 25-30c26.7-32.7 52-63 76-91s52-60 52-60 208 722 208 722c56-175.3 126.3-397.3 211-666 84.7-268.7 153.8-488.2 207.5-658.5 53.7-170.3 84.5-266.8 92.5-289.5zM1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.655em"><span></span></span></span></span></span></span></span><span style="top:-3.415em"><span class="pstrut" style="height:3.185em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.862em"><span class="pstrut" style="height:3.185em"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.5678em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3011em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.25em"><span class="mord">ˉ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222em"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.5678em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3011em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.25em"><span class="mord">ˉ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.73em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>式中，t 为 t 值，x1，x2是两组的均值，s两组的合并标准误差，n1，n2是每组的观测个数</p><p>t 值大，则两组的均值差异大于合并标准误差，表明两组的差异显著</p><p><strong>实例</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检验鸢尾花花瓣长度是否与花的种类有关</span></span><br><span class="line"><span class="comment"># Petal.Length：花瓣长度</span></span><br><span class="line"><span class="comment"># Species：花种类</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> flower.data <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&#x27;flower.data.csv&#x27;</span><span class="punctuation">,</span> row.names <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>flower.data<span class="operator">$</span>Species<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;character&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 转换为因子</span></span><br><span class="line"><span class="operator">&gt;</span> flower.data<span class="operator">$</span>Species <span class="operator">&lt;-</span> factor<span class="punctuation">(</span>flower.data<span class="operator">$</span>Species<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>flower.data<span class="operator">$</span>Species<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;factor&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> head<span class="punctuation">(</span>flower.data<span class="punctuation">)</span></span><br><span class="line">  Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span><br><span class="line"><span class="number">1</span>          <span class="number">5.1</span>         <span class="number">3.5</span>          <span class="number">1.4</span>         <span class="number">0.2</span>  setosa</span><br><span class="line"><span class="number">2</span>          <span class="number">4.7</span>         <span class="number">3.2</span>          <span class="number">1.3</span>         <span class="number">0.2</span>  setosa</span><br><span class="line"><span class="number">3</span>          <span class="number">5.0</span>         <span class="number">3.6</span>          <span class="number">1.4</span>         <span class="number">0.2</span>  setosa</span><br><span class="line"><span class="number">4</span>          <span class="number">4.6</span>         <span class="number">3.4</span>          <span class="number">1.4</span>         <span class="number">0.3</span>  setosa</span><br><span class="line"><span class="number">5</span>          <span class="number">4.4</span>         <span class="number">2.9</span>          <span class="number">1.4</span>         <span class="number">0.2</span>  setosa</span><br><span class="line"><span class="number">6</span>          <span class="number">5.4</span>         <span class="number">3.7</span>          <span class="number">1.5</span>         <span class="number">0.2</span>  setosa</span><br><span class="line"><span class="operator">&gt;</span> table<span class="punctuation">(</span>flower.data<span class="operator">$</span>Species<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">   setosa virginica </span><br><span class="line">       <span class="number">25</span>        <span class="number">25</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># two-sample two-tailed t test</span></span><br><span class="line"><span class="operator">&gt;</span> t.test<span class="punctuation">(</span>Petal.Length<span class="operator">~</span>Species<span class="punctuation">,</span> flower.data<span class="punctuation">,</span> paired<span class="operator">=</span><span class="built_in">F</span><span class="punctuation">,</span> alternative<span class="operator">=</span><span class="string">&#x27;two.sided&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">	Welch Two Sample t<span class="operator">-</span>test</span><br><span class="line"></span><br><span class="line">data<span class="operator">:</span>  Petal.Length by Species</span><br><span class="line">t <span class="operator">=</span> <span class="operator">-</span><span class="number">33.719</span><span class="punctuation">,</span> df <span class="operator">=</span> <span class="number">30.196</span><span class="punctuation">,</span> p<span class="operator">-</span>value <span class="operator">&lt;</span> <span class="number">2.2e-16</span></span><br><span class="line">alternative hypothesis<span class="operator">:</span> true difference <span class="keyword">in</span> means between group setosa and group virginica is not equal to <span class="number">0</span></span><br><span class="line"><span class="number">95</span> percent confidence interval<span class="operator">:</span></span><br><span class="line"> <span class="operator">-</span><span class="number">4.331287</span> <span class="operator">-</span><span class="number">3.836713</span></span><br><span class="line">sample estimates<span class="operator">:</span></span><br><span class="line">   mean <span class="keyword">in</span> group setosa mean <span class="keyword">in</span> group virginica </span><br><span class="line">                  <span class="number">1.456</span>                   <span class="number">5.540</span> </span><br></pre></td></tr></table></figure><p><code>t.test()</code>输出内容解释</p><ul><li><code>data</code>：对比项</li><li><code>t</code>值：-33.719，虽然是负的，但是大多数情况下，只关注其绝对值</li><li><code>df</code>：自由度，30.196，自由度与样本大小有关，表示有多少数据点可用于比较，自由度越大，统计检验越有效</li><li><code>p</code>值：2.2e-16，偶然得到这样的<code>t</code>值的概率</li><li><code>alternative hypothesis</code>：备择假设，setosa 和 virginica 组的真实均值差异不为0</li><li><code>95% confidence interval</code>：95% 置信区间，真实的均值差在 95% 可能性下所处的区间，即两组的真实均值差有 95% 可能性处于<code>[-4.331287, -3.836713]</code>区间内；可以更改区间，但 95% 常用</li><li><code>mean</code>：各组的均值</li></ul><p>由以上结果，样本数据的均值差 = 1.456 - 5.540 = -4.084，置信区间显示均值的真实差异在<code>[-4.331287, -3.836713]</code>之间。所以，95% 的情况下均值的真实差异不为0。<code>p</code>值远小于 0.05，所以可以拒绝原假设（均值差异为0），即可以说，均值的真实差异显著不为0。</p><p><strong>t 检验总结方式</strong></p><p>展示重要的信息：t 值，p 值，自由度</p><p>也可以带上均值（mean）和标准差差（standard deviation）</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> flower.data <span class="operator">%&gt;%</span></span><br><span class="line">  dplyr<span class="operator">::</span>group_by<span class="punctuation">(</span>Species<span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">  dplyr<span class="operator">::</span>summarize<span class="punctuation">(</span>mean_length<span class="operator">=</span>mean<span class="punctuation">(</span>Petal.Length<span class="punctuation">)</span><span class="punctuation">,</span>sd_length<span class="operator">=</span>sd<span class="punctuation">(</span>Petal.Length<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># A tibble: 2 x 3</span></span><br><span class="line">  Species   mean_length sd_length</span><br><span class="line">  <span class="operator">&lt;</span>fct<span class="operator">&gt;</span>           <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span>     <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span></span><br><span class="line"><span class="number">1</span> setosa           <span class="number">1.46</span>     <span class="number">0.206</span></span><br><span class="line"><span class="number">2</span> virginica        <span class="number">5.54</span>     <span class="number">0.569</span></span><br></pre></td></tr></table></figure><h3 id="功效分析">功效分析</h3><p>power analysis，可以帮助在给定置信度的情况下，判断检测到给定效应值所需的样本量。反过来，也可以在给定置信度水平情况下，计算某样本量内能检测到给定效应值的概率。</p><p>理论基础</p><ol><li>样本大小<code>n</code>：实验设计中每种条件/组中观测的数目</li><li>显著性水平<code>p</code>（也称alpha）：Type I error probability。也可把他看做是发现效应不发生的概率</li><li>功效<code>1-p</code>：1 minus Type II error probability。可把他看成是真实效应发生的概率</li><li>效应值<code>ES</code>：在备择假设或研究假设下效应的量。效应值的表达式依赖于假设检验中使用的统计方法</li></ol><p>功效分析中研究设计的四个基本量，知三求一</p><p>R中使用<code>pwr</code>包进行功效分析，根据不同的假设检验选择不同的函数</p><p>线性回归的功效分析：<code>pwr.f2.test()</code></p><p>假设要研究老板风格对员工满意度的影响，是否超过薪水和消费对员工满意度的影响。老板风格用4个变量来估计，薪水和小费与3个变量有关。已有研究表明，薪水和小费能够解释约30%员工满意度的方差，而从现实出发，老板风格至少能解释35%的方差，假定显著性水平为0.05，在90%的置信度水平下，需要多少受试者，才能得到这样的方差贡献率？</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Linear Models</span></span><br><span class="line"><span class="comment"># sig.level：显著性水平，默认0.05；power：功效水平；u, v：分子自由度和分母自由度；f2：效应值</span></span><br><span class="line"><span class="operator">&gt;</span> pwr.f2.test<span class="punctuation">(</span>u<span class="operator">=</span><span class="number">3</span><span class="punctuation">,</span> f2<span class="operator">=</span><span class="number">0.0769</span><span class="punctuation">,</span> sig.level<span class="operator">=</span><span class="number">0.05</span><span class="punctuation">,</span> power<span class="operator">=</span><span class="number">0.90</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">     Multiple regression power calculation </span><br><span class="line"></span><br><span class="line">              u <span class="operator">=</span> <span class="number">3</span></span><br><span class="line">              v <span class="operator">=</span> <span class="number">184.2426</span> <span class="comment"># 至少需要185个样本</span></span><br><span class="line">             f2 <span class="operator">=</span> <span class="number">0.0769</span>   <span class="comment"># f2通过计算得来</span></span><br><span class="line">      sig.level <span class="operator">=</span> <span class="number">0.05</span></span><br><span class="line">          power <span class="operator">=</span> <span class="number">0.9</span></span><br></pre></td></tr></table></figure><p>方差分析：<code>pwr.anova.test()</code></p><p>假设2组样品做单因素方差分析，要达到0.9的功效，效应值为0.25，并选择0.05的显著性水平，求每一组的样本量</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ANOVA</span></span><br><span class="line"><span class="comment"># k：组数；n：每组的样本大小；f：效应值；sig.level：显著性水平；power：功效</span></span><br><span class="line"><span class="operator">&gt;</span> pwr.anova.test<span class="punctuation">(</span>k<span class="operator">=</span><span class="number">2</span><span class="punctuation">,</span>f<span class="operator">=</span><span class="number">.25</span><span class="punctuation">,</span>sig.level<span class="operator">=</span><span class="number">.05</span><span class="punctuation">,</span>power<span class="operator">=</span><span class="number">.9</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">     Balanced one<span class="operator">-</span>way analysis of variance power calculation </span><br><span class="line"></span><br><span class="line">              k <span class="operator">=</span> <span class="number">2</span></span><br><span class="line">              n <span class="operator">=</span> <span class="number">85.03128</span> <span class="comment"># 每组需要86个样本，总样本大小×2</span></span><br><span class="line">              f <span class="operator">=</span> <span class="number">0.25</span></span><br><span class="line">      sig.level <span class="operator">=</span> <span class="number">0.05</span></span><br><span class="line">          power <span class="operator">=</span> <span class="number">0.9</span></span><br><span class="line"></span><br><span class="line">NOTE<span class="operator">:</span> n is number <span class="keyword">in</span> each group</span><br></pre></td></tr></table></figure><p>t检验：<code>pwr.t.test()</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># t tests</span></span><br><span class="line"><span class="comment"># n：每组样本大小；d：效应值，即标准化的均值之差</span></span><br><span class="line"><span class="comment"># sig.level：显著性水平；power：功效；type：t检验类型（单样本、双样本或相依样本）</span></span><br><span class="line"><span class="comment"># alternative：统计检验为双侧还是单侧检验</span></span><br><span class="line"><span class="operator">&gt;</span> pwr.t.test<span class="punctuation">(</span>d<span class="operator">=</span><span class="number">.8</span><span class="punctuation">,</span> sig.level<span class="operator">=</span><span class="number">.05</span><span class="punctuation">,</span>power<span class="operator">=</span><span class="number">.9</span><span class="punctuation">,</span> type<span class="operator">=</span><span class="string">&quot;two.sample&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">           alternative<span class="operator">=</span><span class="string">&quot;two.sided&quot;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">     Two<span class="operator">-</span>sample t test power calculation </span><br><span class="line"></span><br><span class="line">              n <span class="operator">=</span> <span class="number">33.82555</span></span><br><span class="line">              d <span class="operator">=</span> <span class="number">0.8</span></span><br><span class="line">      sig.level <span class="operator">=</span> <span class="number">0.05</span></span><br><span class="line">          power <span class="operator">=</span> <span class="number">0.9</span></span><br><span class="line">    alternative <span class="operator">=</span> two.sided</span><br><span class="line"></span><br><span class="line">NOTE<span class="operator">:</span> n is number <span class="keyword">in</span> <span class="operator">*</span>each<span class="operator">*</span> group</span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> pwr.t.test<span class="punctuation">(</span>n<span class="operator">=</span><span class="number">20</span><span class="punctuation">,</span> d<span class="operator">=</span><span class="number">.5</span><span class="punctuation">,</span> sig.level<span class="operator">=</span><span class="number">.01</span><span class="punctuation">,</span> type<span class="operator">=</span><span class="string">&quot;two.sample&quot;</span><span class="punctuation">,</span> </span><br><span class="line">           alternative<span class="operator">=</span><span class="string">&quot;two.sided&quot;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">     Two<span class="operator">-</span>sample t test power calculation </span><br><span class="line"></span><br><span class="line">              n <span class="operator">=</span> <span class="number">20</span></span><br><span class="line">              d <span class="operator">=</span> <span class="number">0.5</span></span><br><span class="line">      sig.level <span class="operator">=</span> <span class="number">0.01</span></span><br><span class="line">          power <span class="operator">=</span> <span class="number">0.1439551</span></span><br><span class="line">    alternative <span class="operator">=</span> two.sided</span><br><span class="line"></span><br><span class="line">NOTE<span class="operator">:</span> n is number <span class="keyword">in</span> <span class="operator">*</span>each<span class="operator">*</span> group</span><br></pre></td></tr></table></figure><p>相关性</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Correlations</span></span><br><span class="line">pwr.r.test<span class="punctuation">(</span>r<span class="operator">=</span><span class="number">.25</span><span class="punctuation">,</span> sig.level<span class="operator">=</span><span class="number">.05</span><span class="punctuation">,</span> power<span class="operator">=</span><span class="number">.90</span><span class="punctuation">,</span> alternative<span class="operator">=</span><span class="string">&quot;greater&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><p>比例检验</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Tests of proportions</span></span><br><span class="line">pwr.2p.test<span class="punctuation">(</span>h<span class="operator">=</span>ES.h<span class="punctuation">(</span><span class="number">.65</span><span class="punctuation">,</span> <span class="number">.6</span><span class="punctuation">)</span><span class="punctuation">,</span> sig.level<span class="operator">=</span><span class="number">.05</span><span class="punctuation">,</span> power<span class="operator">=</span><span class="number">.9</span><span class="punctuation">,</span> </span><br><span class="line">            alternative<span class="operator">=</span><span class="string">&quot;greater&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><p>卡方检验</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Chi-square tests</span></span><br><span class="line">prob <span class="operator">&lt;-</span> matrix<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">.42</span><span class="punctuation">,</span> <span class="number">.28</span><span class="punctuation">,</span> <span class="number">.03</span><span class="punctuation">,</span> <span class="number">.07</span><span class="punctuation">,</span> <span class="number">.10</span><span class="punctuation">,</span> <span class="number">.10</span><span class="punctuation">)</span><span class="punctuation">,</span> byrow<span class="operator">=</span><span class="literal">TRUE</span><span class="punctuation">,</span> nrow<span class="operator">=</span><span class="number">3</span><span class="punctuation">)</span></span><br><span class="line">ES.w2<span class="punctuation">(</span>prob<span class="punctuation">)</span></span><br><span class="line">pwr.chisq.test<span class="punctuation">(</span>w<span class="operator">=</span><span class="number">.1853</span><span class="punctuation">,</span> df<span class="operator">=</span><span class="number">3</span> <span class="punctuation">,</span> sig.level<span class="operator">=</span><span class="number">.05</span><span class="punctuation">,</span> power<span class="operator">=</span><span class="number">.9</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h3 id="广义线性模型">广义线性模型</h3><p>前面所学的线性回归和方差分析基于正态分布的假设</p><p>许多变量并不是正态分布</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">install.packages<span class="punctuation">(</span><span class="string">&#x27;robust&#x27;</span><span class="punctuation">)</span></span><br><span class="line">data<span class="punctuation">(</span>breslow.dat<span class="punctuation">,</span> package<span class="operator">=</span><span class="string">&#x27;robust&#x27;</span><span class="punctuation">)</span></span><br><span class="line">summary<span class="punctuation">(</span>breslow.dat<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">fit <span class="operator">&lt;-</span> glm<span class="punctuation">(</span>sumY<span class="operator">~</span>Base<span class="operator">+</span>Age<span class="operator">+</span>Trt<span class="punctuation">,</span> data<span class="operator">=</span>breslow.dat<span class="punctuation">,</span> family <span class="operator">=</span> poisson<span class="punctuation">(</span>link <span class="operator">=</span> <span class="string">&#x27;log&#x27;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">summary<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line">coef<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line"><span class="built_in">exp</span><span class="punctuation">(</span>coef<span class="punctuation">(</span>fit<span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h2 id="R语言作图">R语言作图</h2><h3 id="条形图">条形图</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读数据</span></span><br><span class="line">x <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&#x27;../Rdata/homo_length.csv&#x27;</span><span class="punctuation">)</span> <span class="comment"># 可加参数 header = FALSE，不读表头</span></span><br><span class="line"><span class="comment"># 取所需数据</span></span><br><span class="line">xx</span><br><span class="line">xx <span class="operator">&lt;-</span> x<span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span><span class="number">24</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line">xx<span class="operator">$</span>chr <span class="comment"># $查看</span></span><br><span class="line">xx<span class="operator">$</span><span class="built_in">length</span></span><br><span class="line"><span class="comment"># 画图</span></span><br><span class="line">barplot<span class="punctuation">(</span>height <span class="operator">=</span> xx<span class="operator">$</span><span class="built_in">length</span><span class="punctuation">)</span> <span class="comment"># 先画基本图，避免报错</span></span><br><span class="line">barplot<span class="punctuation">(</span>height <span class="operator">=</span> xx<span class="operator">$</span><span class="built_in">length</span><span class="punctuation">,</span> names.arg <span class="operator">=</span> xx<span class="operator">$</span>chr<span class="punctuation">)</span> <span class="comment"># 每个条形加标签</span></span><br><span class="line">barplot<span class="punctuation">(</span>height <span class="operator">=</span> xx<span class="operator">$</span><span class="built_in">length</span><span class="punctuation">,</span> names.arg <span class="operator">=</span> xx<span class="operator">$</span>chr<span class="punctuation">,</span> las <span class="operator">=</span> <span class="number">2</span><span class="punctuation">)</span> <span class="comment"># 改变标尺数字方向</span></span><br><span class="line">yanse <span class="operator">&lt;-</span> sample<span class="punctuation">(</span>colours<span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="number">24</span><span class="punctuation">,</span>replace <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span> <span class="comment"># 设置随机颜色</span></span><br><span class="line">barplot<span class="punctuation">(</span>height <span class="operator">=</span> xx<span class="operator">$</span><span class="built_in">length</span><span class="punctuation">,</span> names.arg <span class="operator">=</span> xx<span class="operator">$</span>chr<span class="punctuation">,</span> las <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> col <span class="operator">=</span> yanse<span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>height <span class="operator">=</span> xx<span class="operator">$</span><span class="built_in">length</span><span class="punctuation">,</span> names.arg <span class="operator">=</span> xx<span class="operator">$</span>chr<span class="punctuation">,</span> las <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> col <span class="operator">=</span> yanse<span class="punctuation">,</span> border <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span> <span class="comment"># 取消条形图描边</span></span><br><span class="line">barplot<span class="punctuation">(</span>height <span class="operator">=</span> xx<span class="operator">$</span><span class="built_in">length</span><span class="punctuation">,</span> names.arg <span class="operator">=</span> xx<span class="operator">$</span>chr<span class="punctuation">,</span> las <span class="operator">=</span> <span class="number">3</span><span class="punctuation">,</span> col <span class="operator">=</span> yanse<span class="punctuation">,</span> border <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&#x27;Human Chromosome Length Distribution&#x27;</span><span class="punctuation">,</span> xlab <span class="operator">=</span> <span class="string">&#x27;Chromosome&#x27;</span><span class="punctuation">,</span> ylab <span class="operator">=</span> <span class="string">&#x27;Length&#x27;</span><span class="punctuation">)</span> <span class="comment"># 设置图表标题、坐标轴标题</span></span><br></pre></td></tr></table></figure><h3 id="分组条形图">分组条形图</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读数据</span></span><br><span class="line">x <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span>file <span class="operator">=</span> <span class="string">&#x27;../Rdata/sv_distrubution.csv&#x27;</span><span class="punctuation">,</span> row.names <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span> <span class="comment"># 第一列作为行名</span></span><br><span class="line">tail<span class="punctuation">(</span>x<span class="punctuation">)</span> <span class="comment"># 查看最末或最前几行</span></span><br><span class="line">head<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 画图</span></span><br><span class="line">barplot<span class="punctuation">(</span>as.matrix<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span> <span class="comment"># x为数据框，转换为矩阵</span></span><br><span class="line">barplot<span class="punctuation">(</span>t<span class="punctuation">(</span>as.matrix<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span> <span class="comment"># 转置一下</span></span><br><span class="line">barplot<span class="punctuation">(</span>t<span class="punctuation">(</span>as.matrix<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span> col <span class="operator">=</span> rainbow<span class="punctuation">(</span><span class="number">4</span><span class="punctuation">)</span><span class="punctuation">,</span> beside <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span> <span class="comment"># 默认堆砌，可以转换为分组</span></span><br><span class="line">colnames<span class="punctuation">(</span>x<span class="punctuation">)</span> <span class="comment"># 矩阵每列名称，即表头</span></span><br><span class="line">barplot<span class="punctuation">(</span>t<span class="punctuation">(</span>as.matrix<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span> col <span class="operator">=</span> rainbow<span class="punctuation">(</span><span class="number">4</span><span class="punctuation">)</span><span class="punctuation">,</span> legend.text <span class="operator">=</span> colnames<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span> <span class="comment">#将图例设置为列名</span></span><br><span class="line">barplot<span class="punctuation">(</span>t<span class="punctuation">(</span>as.matrix<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span> col <span class="operator">=</span> rainbow<span class="punctuation">(</span><span class="number">4</span><span class="punctuation">)</span><span class="punctuation">,</span> legend.text <span class="operator">=</span> colnames<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">,</span> ylim <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">800</span><span class="punctuation">)</span><span class="punctuation">)</span> <span class="comment"># 设置y轴范围</span></span><br><span class="line">barplot<span class="punctuation">(</span>t<span class="punctuation">(</span>as.matrix<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span> col <span class="operator">=</span> rainbow<span class="punctuation">(</span><span class="number">4</span><span class="punctuation">)</span><span class="punctuation">,</span> legend.text <span class="operator">=</span> colnames<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">,</span> ylim <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">800</span><span class="punctuation">)</span><span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&#x27;SV Distribution&#x27;</span><span class="punctuation">,</span> ylab <span class="operator">=</span> <span class="string">&#x27;Numbers&#x27;</span><span class="punctuation">,</span> xlab <span class="operator">=</span> <span class="string">&#x27;Chromosomes&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h3 id="直方图">直方图</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读数据，跳过前7行，字符串取消用&#x27;&#x27;显示</span></span><br><span class="line">x <span class="operator">&lt;-</span> read.table<span class="punctuation">(</span><span class="string">&#x27;../Rdata/H37Rv.gff&#x27;</span><span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&#x27;\t&#x27;</span><span class="punctuation">,</span> header <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">,</span> skip <span class="operator">=</span> <span class="number">7</span><span class="punctuation">,</span> <span class="built_in">quote</span> <span class="operator">=</span> <span class="string">&#x27;&#x27;</span><span class="punctuation">)</span></span><br><span class="line">View<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">head<span class="punctuation">(</span>x<span class="operator">$</span>V3<span class="operator">==</span><span class="string">&#x27;gene&#x27;</span><span class="punctuation">)</span> <span class="comment">#取类型为gene的行</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span></span><br><span class="line">x<span class="punctuation">[</span>x<span class="operator">$</span>V3<span class="operator">==</span><span class="string">&#x27;gene&#x27;</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line">x <span class="operator">&lt;-</span> x<span class="punctuation">[</span>x<span class="operator">$</span>V3<span class="operator">==</span><span class="string">&#x27;gene&#x27;</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line">x <span class="operator">&lt;-</span> <span class="built_in">abs</span><span class="punctuation">(</span>x<span class="operator">$</span>V5<span class="operator">-</span>x<span class="operator">$</span>V4<span class="operator">+</span><span class="number">1</span><span class="punctuation">)</span> <span class="comment"># 计算基因长度，保险起见加绝对值</span></span><br><span class="line"><span class="built_in">length</span><span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">3978</span></span><br><span class="line"><span class="built_in">range</span><span class="punctuation">(</span>x<span class="punctuation">)</span> <span class="comment"># 范围</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>    <span class="number">61</span> <span class="number">12456</span></span><br><span class="line">hist<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">hist<span class="punctuation">(</span>x<span class="punctuation">,</span> breaks <span class="operator">=</span> <span class="number">80</span><span class="punctuation">)</span> <span class="comment"># 分成80个</span></span><br><span class="line">hist<span class="punctuation">(</span>x<span class="punctuation">,</span> breaks <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">500</span><span class="punctuation">,</span><span class="number">1000</span><span class="punctuation">,</span><span class="number">1500</span><span class="punctuation">,</span><span class="number">2000</span><span class="punctuation">,</span><span class="number">2500</span><span class="punctuation">,</span><span class="number">15000</span><span class="punctuation">)</span><span class="punctuation">)</span> <span class="comment"># 也可以手动设置范围</span></span><br><span class="line">hist<span class="punctuation">(</span>x<span class="punctuation">,</span> breaks <span class="operator">=</span> <span class="number">80</span><span class="punctuation">,</span> freq <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span> <span class="comment"># 默认以频数显示，可以改成频率</span></span><br><span class="line">hist<span class="punctuation">(</span>x<span class="punctuation">,</span> breaks <span class="operator">=</span> <span class="number">80</span><span class="punctuation">,</span> freq <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">,</span> density <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line">hist<span class="punctuation">(</span>x<span class="punctuation">,</span> breaks <span class="operator">=</span> <span class="number">80</span><span class="punctuation">,</span> freq <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">,</span> density <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">,</span> col <span class="operator">=</span> <span class="string">&#x27;pink&#x27;</span><span class="punctuation">)</span></span><br><span class="line">hist<span class="punctuation">(</span>x<span class="punctuation">,</span> breaks <span class="operator">=</span> <span class="number">80</span><span class="punctuation">,</span> freq <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">,</span> col <span class="operator">=</span> <span class="string">&#x27;pink&#x27;</span><span class="punctuation">,</span> border <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&#x27;histogram of Gene Length&#x27;</span><span class="punctuation">,</span> xlab <span class="operator">=</span> <span class="string">&#x27;Gene Length (bp)&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">h <span class="operator">&lt;-</span> hist<span class="punctuation">(</span>x<span class="punctuation">,</span> breaks <span class="operator">=</span> <span class="number">80</span><span class="punctuation">,</span> freq <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">,</span> col <span class="operator">=</span> <span class="string">&#x27;pink&#x27;</span><span class="punctuation">,</span> border <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&#x27;histogram of Gene Length&#x27;</span><span class="punctuation">,</span> xlab <span class="operator">=</span> <span class="string">&#x27;Gene Length (bp)&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="built_in">class</span><span class="punctuation">(</span>h<span class="punctuation">)</span> <span class="comment"># h包含了此直方图的所有信息</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;histogram&quot;</span></span><br><span class="line">h<span class="operator">$</span>xname</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;x&quot;</span></span><br><span class="line">h<span class="operator">$</span>breaks</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>     <span class="number">0</span>   <span class="number">200</span>   <span class="number">400</span>   <span class="number">600</span>   <span class="number">800</span>  <span class="number">1000</span>  <span class="number">1200</span>  <span class="number">1400</span>  <span class="number">1600</span>  <span class="number">1800</span>  <span class="number">2000</span>  <span class="number">2200</span>  <span class="number">2400</span>  <span class="number">2600</span>  <span class="number">2800</span>  <span class="number">3000</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">17</span><span class="punctuation">]</span>  <span class="number">3200</span>  <span class="number">3400</span>  <span class="number">3600</span>  <span class="number">3800</span>  <span class="number">4000</span>  <span class="number">4200</span>  <span class="number">4400</span>  <span class="number">4600</span>  <span class="number">4800</span>  <span class="number">5000</span>  <span class="number">5200</span>  <span class="number">5400</span>  <span class="number">5600</span>  <span class="number">5800</span>  <span class="number">6000</span>  <span class="number">6200</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">33</span><span class="punctuation">]</span>  <span class="number">6400</span>  <span class="number">6600</span>  <span class="number">6800</span>  <span class="number">7000</span>  <span class="number">7200</span>  <span class="number">7400</span>  <span class="number">7600</span>  <span class="number">7800</span>  <span class="number">8000</span>  <span class="number">8200</span>  <span class="number">8400</span>  <span class="number">8600</span>  <span class="number">8800</span>  <span class="number">9000</span>  <span class="number">9200</span>  <span class="number">9400</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">49</span><span class="punctuation">]</span>  <span class="number">9600</span>  <span class="number">9800</span> <span class="number">10000</span> <span class="number">10200</span> <span class="number">10400</span> <span class="number">10600</span> <span class="number">10800</span> <span class="number">11000</span> <span class="number">11200</span> <span class="number">11400</span> <span class="number">11600</span> <span class="number">11800</span> <span class="number">12000</span> <span class="number">12200</span> <span class="number">12400</span> <span class="number">12600</span></span><br><span class="line">h<span class="operator">$</span>counts</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">120</span> <span class="number">548</span> <span class="number">578</span> <span class="number">601</span> <span class="number">571</span> <span class="number">430</span> <span class="number">356</span> <span class="number">268</span> <span class="number">165</span>  <span class="number">84</span>  <span class="number">55</span>  <span class="number">43</span>  <span class="number">27</span>  <span class="number">20</span>  <span class="number">24</span>  <span class="number">12</span>  <span class="number">12</span>  <span class="number">13</span>   <span class="number">7</span>   <span class="number">5</span>   <span class="number">3</span>   <span class="number">5</span>   <span class="number">4</span>   <span class="number">4</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">25</span><span class="punctuation">]</span>   <span class="number">5</span>   <span class="number">1</span>   <span class="number">1</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">4</span>   <span class="number">1</span>   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">2</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">1</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">49</span><span class="punctuation">]</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span></span><br><span class="line">h<span class="operator">$</span>density</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1.508296e-04</span> <span class="number">6.887883e-04</span> <span class="number">7.264957e-04</span> <span class="number">7.554047e-04</span> <span class="number">7.176973e-04</span> <span class="number">5.404726e-04</span> <span class="number">4.474610e-04</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">8</span><span class="punctuation">]</span> <span class="number">3.368527e-04</span> <span class="number">2.073906e-04</span> <span class="number">1.055807e-04</span> <span class="number">6.913022e-05</span> <span class="number">5.404726e-05</span> <span class="number">3.393665e-05</span> <span class="number">2.513826e-05</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">15</span><span class="punctuation">]</span> <span class="number">3.016591e-05</span> <span class="number">1.508296e-05</span> <span class="number">1.508296e-05</span> <span class="number">1.633987e-05</span> <span class="number">8.798391e-06</span> <span class="number">6.284565e-06</span> <span class="number">3.770739e-06</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">22</span><span class="punctuation">]</span> <span class="number">6.284565e-06</span> <span class="number">5.027652e-06</span> <span class="number">5.027652e-06</span> <span class="number">6.284565e-06</span> <span class="number">1.256913e-06</span> <span class="number">1.256913e-06</span> <span class="number">1.256913e-06</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">29</span><span class="punctuation">]</span> <span class="number">2.513826e-06</span> <span class="number">0.000000e+00</span> <span class="number">0.000000e+00</span> <span class="number">5.027652e-06</span> <span class="number">1.256913e-06</span> <span class="number">1.256913e-06</span> <span class="number">0.000000e+00</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">36</span><span class="punctuation">]</span> <span class="number">0.000000e+00</span> <span class="number">0.000000e+00</span> <span class="number">2.513826e-06</span> <span class="number">0.000000e+00</span> <span class="number">0.000000e+00</span> <span class="number">0.000000e+00</span> <span class="number">0.000000e+00</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">43</span><span class="punctuation">]</span> <span class="number">0.000000e+00</span> <span class="number">0.000000e+00</span> <span class="number">0.000000e+00</span> <span class="number">0.000000e+00</span> <span class="number">1.256913e-06</span> <span class="number">1.256913e-06</span> <span class="number">0.000000e+00</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">50</span><span class="punctuation">]</span> <span class="number">1.256913e-06</span> <span class="number">0.000000e+00</span> <span class="number">0.000000e+00</span> <span class="number">0.000000e+00</span> <span class="number">0.000000e+00</span> <span class="number">0.000000e+00</span> <span class="number">1.256913e-06</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">57</span><span class="punctuation">]</span> <span class="number">0.000000e+00</span> <span class="number">0.000000e+00</span> <span class="number">0.000000e+00</span> <span class="number">0.000000e+00</span> <span class="number">0.000000e+00</span> <span class="number">0.000000e+00</span> <span class="number">1.256913e-06</span></span><br></pre></td></tr></table></figure><h3 id="散点图">散点图</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读数据</span></span><br><span class="line">m <span class="operator">&lt;-</span> read.table<span class="punctuation">(</span><span class="string">&#x27;../Rdata/prok_representative.txt&#x27;</span><span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&#x27;\t&#x27;</span><span class="punctuation">)</span></span><br><span class="line">View<span class="punctuation">(</span>m<span class="punctuation">)</span></span><br><span class="line">gene_number <span class="operator">&lt;-</span> m<span class="operator">$</span>V4</span><br><span class="line">gnome_size <span class="operator">&lt;-</span> m<span class="operator">$</span>V2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置散点类型(0-25)，散点大小</span></span><br><span class="line">plot<span class="punctuation">(</span>gnome_size<span class="punctuation">,</span> gene_number<span class="punctuation">,</span>pch<span class="operator">=</span><span class="number">16</span><span class="punctuation">,</span>cex<span class="operator">=</span><span class="number">0.8</span><span class="punctuation">,</span>xlab <span class="operator">=</span> <span class="string">&#x27;Gnome Size&#x27;</span><span class="punctuation">,</span>ylab <span class="operator">=</span> <span class="string">&#x27;Genes&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 线性回归</span></span><br><span class="line">fit <span class="operator">&lt;-</span> lm<span class="punctuation">(</span>gene_number <span class="operator">~</span> gnome_size<span class="punctuation">)</span></span><br><span class="line">fit</span><br><span class="line"></span><br><span class="line">Call<span class="operator">:</span></span><br><span class="line">lm<span class="punctuation">(</span>formula <span class="operator">=</span> gene_number <span class="operator">~</span> gnome_size<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Coefficients<span class="operator">:</span></span><br><span class="line"><span class="punctuation">(</span>Intercept<span class="punctuation">)</span>   gnome_size  </span><br><span class="line">      <span class="number">286.6</span>        <span class="number">843.7</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 画线</span></span><br><span class="line">abline<span class="punctuation">(</span>fit<span class="punctuation">,</span> col<span class="operator">=</span><span class="string">&#x27;red&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 可以直接根据回归结果添加文本</span></span><br><span class="line">text<span class="punctuation">(</span><span class="number">12</span><span class="punctuation">,</span><span class="number">6000</span><span class="punctuation">,</span>labels<span class="operator">=</span><span class="string">&#x27;y=843.691x+286.598\nR2=0.97&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以设置变量取到相应值，这样不用每次都手动敲</span></span><br><span class="line"><span class="built_in">c</span> <span class="comment"># R2存储位置</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">0.9676204</span></span><br><span class="line"><span class="built_in">round</span><span class="punctuation">(</span>summary<span class="punctuation">(</span>fit<span class="punctuation">)</span><span class="operator">$</span>adj.r.squared<span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">0.97</span></span><br><span class="line">rr <span class="operator">&lt;-</span> <span class="built_in">round</span><span class="punctuation">(</span>summary<span class="punctuation">(</span>fit<span class="punctuation">)</span><span class="operator">$</span>adj.r.squared<span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">)</span></span><br><span class="line">intercept <span class="operator">&lt;-</span> <span class="built_in">round</span><span class="punctuation">(</span>summary<span class="punctuation">(</span>fit<span class="punctuation">)</span><span class="operator">$</span>coefficients<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">)</span> <span class="comment"># 截距存储位置</span></span><br><span class="line">intercept</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">286.6</span></span><br><span class="line">slope <span class="operator">&lt;-</span> <span class="built_in">round</span><span class="punctuation">(</span>summary<span class="punctuation">(</span>fit<span class="punctuation">)</span><span class="operator">$</span>coefficients<span class="punctuation">[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">)</span> <span class="comment"># 斜率存储位置</span></span><br><span class="line">slope</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">843.69</span></span><br><span class="line">eq <span class="operator">&lt;-</span> bquote<span class="punctuation">(</span> atop<span class="punctuation">(</span> <span class="string">&quot;y = &quot;</span> <span class="operator">*</span> .<span class="punctuation">(</span>slope<span class="punctuation">)</span> <span class="operator">*</span> <span class="string">&quot; x + &quot;</span> <span class="operator">*</span> .<span class="punctuation">(</span>intercept<span class="punctuation">)</span><span class="punctuation">,</span> R<span class="operator">^</span><span class="number">2</span> <span class="operator">==</span> .<span class="punctuation">(</span>rr<span class="punctuation">)</span> <span class="punctuation">)</span> <span class="punctuation">)</span></span><br><span class="line">text<span class="punctuation">(</span><span class="number">12</span><span class="punctuation">,</span><span class="number">6000</span><span class="punctuation">,</span>eq<span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h3 id="饼图">饼图</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读文件</span></span><br><span class="line">read.table<span class="punctuation">(</span><span class="string">&#x27;../Rdata/Species.txt&#x27;</span><span class="punctuation">)</span></span><br><span class="line">        V1             V2       V3</span><br><span class="line"><span class="number">1</span>  Viruses         noname <span class="number">31.42034</span></span><br><span class="line"><span class="number">2</span> Bacteria  Bacteroidetes <span class="number">31.27472</span></span><br><span class="line"><span class="number">3</span> Bacteria  Fibrobacteres <span class="number">24.74666</span></span><br><span class="line"><span class="number">4</span> Bacteria     Firmicutes  <span class="number">8.06092</span></span><br><span class="line"><span class="number">5</span> Bacteria   Spirochaetes  <span class="number">2.32585</span></span><br><span class="line"><span class="number">6</span>  Archaea  Euryarchaeota  <span class="number">1.42253</span></span><br><span class="line"><span class="number">7</span> Bacteria Proteobacteria  <span class="number">0.74899</span></span><br><span class="line">x <span class="operator">&lt;-</span> read.table<span class="punctuation">(</span><span class="string">&#x27;../Rdata/Species.txt&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 画饼图</span></span><br><span class="line">pie<span class="punctuation">(</span>x<span class="operator">$</span>V3<span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 设置数据标签</span></span><br><span class="line">lab <span class="operator">&lt;-</span> paste<span class="punctuation">(</span>x<span class="operator">$</span>V2<span class="punctuation">,</span><span class="string">&#x27;\n&#x27;</span><span class="punctuation">,</span>x<span class="operator">$</span>V3<span class="punctuation">,</span><span class="string">&#x27;%&#x27;</span><span class="punctuation">)</span></span><br><span class="line">lab</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;noname \n 31.42034 %&quot;</span>        <span class="string">&quot;Bacteroidetes \n 31.27472 %&quot;</span> <span class="string">&quot;Fibrobacteres \n 24.74666 %&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">]</span> <span class="string">&quot;Firmicutes \n 8.06092 %&quot;</span>     <span class="string">&quot;Spirochaetes \n 2.32585 %&quot;</span>   <span class="string">&quot;Euryarchaeota \n 1.42253 %&quot;</span> </span><br><span class="line"><span class="punctuation">[</span><span class="number">7</span><span class="punctuation">]</span> <span class="string">&quot;Proteobacteria \n 0.74899 %&quot;</span></span><br><span class="line"><span class="comment"># 设置颜色、饼图半径、标签大小</span></span><br><span class="line"><span class="comment"># pie数据个数多的话，标签容易堆在一起，可以调小字体，还是重叠可以用plotrix的pie.labels()函数</span></span><br><span class="line">pie<span class="punctuation">(</span>x<span class="operator">$</span>V3<span class="punctuation">,</span> labels <span class="operator">=</span> lab<span class="punctuation">,</span> col <span class="operator">=</span> rainbow<span class="punctuation">(</span>nrow<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">pie<span class="punctuation">(</span>x<span class="operator">$</span>V3<span class="punctuation">,</span> labels <span class="operator">=</span> lab<span class="punctuation">,</span> col <span class="operator">=</span> rainbow<span class="punctuation">(</span>nrow<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span> radius <span class="operator">=</span> <span class="number">1</span><span class="punctuation">,</span> cex <span class="operator">=</span> <span class="number">0.8</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 3D饼图需要plotrix库</span></span><br><span class="line">install.packages<span class="punctuation">(</span><span class="string">&quot;plotrix&quot;</span><span class="punctuation">)</span></span><br><span class="line">library<span class="punctuation">(</span>plotrix<span class="punctuation">)</span>s</span><br><span class="line"><span class="comment"># pie换成pie3D即可，可以设置explode分割距离</span></span><br><span class="line">pie3D<span class="punctuation">(</span>x<span class="operator">$</span>V3<span class="punctuation">,</span> labels <span class="operator">=</span> lab<span class="punctuation">,</span> col <span class="operator">=</span> rainbow<span class="punctuation">(</span>nrow<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span> radius <span class="operator">=</span> <span class="number">1</span><span class="punctuation">,</span> cex <span class="operator">=</span> <span class="number">0.8</span><span class="punctuation">)</span></span><br><span class="line">pie3D<span class="punctuation">(</span>x<span class="operator">$</span>V3<span class="punctuation">,</span> labels <span class="operator">=</span> lab<span class="punctuation">,</span> col <span class="operator">=</span> rainbow<span class="punctuation">(</span>nrow<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span> radius <span class="operator">=</span> <span class="number">1</span><span class="punctuation">,</span> cex <span class="operator">=</span> <span class="number">0.8</span><span class="punctuation">,</span> explode <span class="operator">=</span> <span class="number">0.2</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pie3D.labels()解决标签堆叠问题</span></span><br><span class="line">pieplot3d <span class="operator">&lt;-</span> pie<span class="punctuation">(</span>x<span class="operator">$</span>V3<span class="punctuation">,</span> col <span class="operator">=</span> rainbow<span class="punctuation">(</span>nrow<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span> radius <span class="operator">=</span> <span class="number">1</span><span class="punctuation">,</span> explode <span class="operator">=</span> <span class="number">0.1</span><span class="punctuation">)</span></span><br><span class="line">pie3D.labels<span class="punctuation">(</span>pieplot3d<span class="punctuation">,</span>labels <span class="operator">=</span> lab<span class="punctuation">,</span>labelcex <span class="operator">=</span> <span class="number">0.8</span><span class="punctuation">,</span>height <span class="operator">=</span> <span class="number">0.3</span><span class="punctuation">,</span>labelrad <span class="operator">=</span> <span class="number">1.4</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pie.labels()解决标签堆叠问题</span></span><br><span class="line">pieplot3d <span class="operator">&lt;-</span> pie<span class="punctuation">(</span>x<span class="operator">$</span>V3<span class="punctuation">,</span> labels <span class="operator">=</span> <span class="string">&#x27;&#x27;</span><span class="punctuation">,</span>col <span class="operator">=</span> rainbow<span class="punctuation">(</span>nrow<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span> radius <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line">ang <span class="operator">&lt;-</span> floating.pie<span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span>x<span class="operator">$</span>V3<span class="punctuation">)</span> <span class="comment"># 标签分散的角度，可以设置成数据的百分比</span></span><br><span class="line">pie.labels<span class="punctuation">(</span>x<span class="operator">=</span><span class="number">0</span><span class="punctuation">,</span>y<span class="operator">=</span><span class="number">0</span><span class="punctuation">,</span> angles <span class="operator">=</span> ang<span class="punctuation">,</span> labels<span class="operator">=</span>lab<span class="punctuation">,</span> radius<span class="operator">=</span><span class="number">1.2</span><span class="punctuation">,</span> minangle <span class="operator">=</span> <span class="number">0.17</span><span class="punctuation">)</span> <span class="comment"># 最小角度设置为10/180*pie</span></span><br></pre></td></tr></table></figure><h3 id="箱线图">箱线图</h3><p>箱线图展示了数据的5个指标（最小值、下四分位数、中位数、上四分位数、最大值）和离群点。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">boxplot<span class="punctuation">(</span>mtcars<span class="operator">$</span>mpg<span class="punctuation">)</span></span><br><span class="line">fivenum<span class="punctuation">(</span>mtcars<span class="operator">$</span>mpg<span class="punctuation">)</span> <span class="comment"># 给出数据的最小值、下四分位数、中位数、上四分位数、最大值</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">10.40</span> <span class="number">15.35</span> <span class="number">19.20</span> <span class="number">22.80</span> <span class="number">33.90</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># x ~ y，y为分组因子，多个y用:隔开</span></span><br><span class="line">boxplot<span class="punctuation">(</span>mpg <span class="operator">~</span> cyl<span class="punctuation">,</span> data <span class="operator">=</span> mtcars<span class="punctuation">)</span></span><br><span class="line">boxplot<span class="punctuation">(</span>hp <span class="operator">~</span> cyl<span class="punctuation">,</span> data <span class="operator">=</span> mtcars<span class="punctuation">)</span></span><br><span class="line">boxplot<span class="punctuation">(</span>len <span class="operator">~</span> dose<span class="punctuation">,</span> data <span class="operator">=</span> ToothGrowth<span class="punctuation">)</span></span><br><span class="line">boxplot<span class="punctuation">(</span>len <span class="operator">~</span> dose<span class="operator">:</span>supp<span class="punctuation">,</span> data <span class="operator">=</span> ToothGrowth<span class="punctuation">)</span></span><br><span class="line">boxplot<span class="punctuation">(</span>mpg <span class="operator">~</span> cyl<span class="punctuation">,</span> data <span class="operator">=</span> mtcars<span class="punctuation">,</span> col <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;pink&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;orange&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;red&#x27;</span><span class="punctuation">)</span><span class="punctuation">)</span> <span class="comment"># 颜色</span></span><br><span class="line">boxplot<span class="punctuation">(</span>mpg <span class="operator">~</span> cyl<span class="punctuation">,</span> data <span class="operator">=</span> mtcars<span class="punctuation">,</span> col <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;pink&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;orange&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;red&#x27;</span><span class="punctuation">)</span><span class="punctuation">,</span> pch <span class="operator">=</span> <span class="number">16</span><span class="punctuation">,</span> cex <span class="operator">=</span> <span class="number">0.8</span><span class="punctuation">)</span> <span class="comment"># 离散点形状、大小</span></span><br><span class="line">boxplot<span class="punctuation">(</span>mpg <span class="operator">~</span> cyl<span class="punctuation">,</span> data <span class="operator">=</span> mtcars<span class="punctuation">,</span> col <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;pink&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;orange&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;red&#x27;</span><span class="punctuation">)</span><span class="punctuation">,</span> pch <span class="operator">=</span> <span class="number">16</span><span class="punctuation">,</span> cex <span class="operator">=</span> <span class="number">0.8</span><span class="punctuation">,</span> xlab <span class="operator">=</span> <span class="string">&#x27;number of cylinders&#x27;</span><span class="punctuation">,</span> ylab <span class="operator">=</span> <span class="string">&#x27;miles/gallon&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">boxplot<span class="punctuation">(</span>len <span class="operator">~</span> dose<span class="punctuation">,</span> data <span class="operator">=</span> ToothGrowth<span class="punctuation">,</span> notch <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span> <span class="comment"># 显示缺口</span></span><br><span class="line">boxplot<span class="punctuation">(</span>len <span class="operator">~</span> dose<span class="punctuation">,</span> data <span class="operator">=</span> ToothGrowth<span class="punctuation">,</span> width <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">0.5</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">)</span><span class="punctuation">)</span> <span class="comment"># 指定箱子宽度</span></span><br><span class="line">boxplot<span class="punctuation">(</span>len <span class="operator">~</span> dose<span class="punctuation">,</span> data <span class="operator">=</span> ToothGrowth<span class="punctuation">,</span> varwidth <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span> <span class="comment"># 箱子宽度与组中观察数的平方根成正比</span></span><br><span class="line">boxplot<span class="punctuation">(</span>len <span class="operator">~</span> dose<span class="punctuation">,</span> data <span class="operator">=</span> ToothGrowth<span class="punctuation">,</span> boxwex <span class="operator">=</span> <span class="number">0.5</span><span class="punctuation">)</span> <span class="comment"># 所有箱子宽度等比缩放</span></span><br><span class="line">boxplot<span class="punctuation">(</span>len <span class="operator">~</span> dose<span class="punctuation">,</span> data <span class="operator">=</span> ToothGrowth<span class="punctuation">,</span> staplewex <span class="operator">=</span> <span class="number">0.5</span><span class="punctuation">)</span> <span class="comment"># 最大最小值横线的宽度</span></span><br><span class="line">boxplot<span class="punctuation">(</span>len <span class="operator">~</span> dose<span class="operator">:</span>supp<span class="punctuation">,</span> data <span class="operator">=</span> ToothGrowth<span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&#x27;:&#x27;</span><span class="punctuation">)</span> <span class="comment"># 多个分组因子y的分隔符号</span></span><br><span class="line">boxplot<span class="punctuation">(</span>len <span class="operator">~</span> dose<span class="operator">:</span>supp<span class="punctuation">,</span> data <span class="operator">=</span> ToothGrowth<span class="punctuation">,</span> sep <span class="operator">=</span> <span class="string">&#x27;:&#x27;</span><span class="punctuation">,</span> lex.order <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span> <span class="comment"># 箱子排序</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读数据，第一列作为行名</span></span><br><span class="line">x <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&#x27;../Rdata/gene_expression.csv&#x27;</span><span class="punctuation">,</span> header <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">,</span> row.names <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line">head<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">         A1    A2    A3    B1    B2    B3</span><br><span class="line">gene1  <span class="number">0.33</span>  <span class="number">0.13</span>  <span class="number">0.30</span>  <span class="number">0.48</span>  <span class="number">0.37</span>  <span class="number">1.73</span></span><br><span class="line">gene2  <span class="number">0.00</span>  <span class="number">0.00</span>  <span class="number">0.30</span>  <span class="number">0.54</span>  <span class="number">0.43</span>  <span class="number">0.35</span></span><br><span class="line">gene3 <span class="number">10.27</span> <span class="number">10.05</span>  <span class="number">5.51</span> <span class="number">30.95</span> <span class="number">15.85</span> <span class="number">25.72</span></span><br><span class="line">gene4  <span class="number">3.74</span>  <span class="number">4.44</span>  <span class="number">4.24</span>  <span class="number">0.24</span>  <span class="number">0.06</span>  <span class="number">1.04</span></span><br><span class="line">gene5  <span class="number">9.66</span> <span class="number">10.05</span> <span class="number">15.57</span>  <span class="number">6.83</span>  <span class="number">2.66</span>  <span class="number">5.89</span></span><br><span class="line">gene6  <span class="number">0.50</span>  <span class="number">0.64</span>  <span class="number">0.18</span>  <span class="number">0.72</span>  <span class="number">1.24</span>  <span class="number">2.60</span></span><br><span class="line">boxplot<span class="punctuation">(</span>x<span class="punctuation">)</span> <span class="comment"># 可以直接绘制</span></span><br><span class="line">boxplot<span class="punctuation">(</span>x<span class="punctuation">,</span> outline <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span> <span class="comment"># 去除离群点</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以用reshape2函数重新组合数据，用x ~ y的方式，推荐这种</span></span><br><span class="line">library<span class="punctuation">(</span>reshape2<span class="punctuation">)</span></span><br><span class="line">x <span class="operator">&lt;-</span> melt<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">No id variables; using <span class="built_in">all</span> as measure variables</span><br><span class="line">head<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">  variable value</span><br><span class="line"><span class="number">1</span>       A1  <span class="number">0.33</span></span><br><span class="line"><span class="number">2</span>       A1  <span class="number">0.00</span></span><br><span class="line"><span class="number">3</span>       A1 <span class="number">10.27</span></span><br><span class="line"><span class="number">4</span>       A1  <span class="number">3.74</span></span><br><span class="line"><span class="number">5</span>       A1  <span class="number">9.66</span></span><br><span class="line"><span class="number">6</span>       A1  <span class="number">0.50</span></span><br><span class="line">boxplot<span class="punctuation">(</span>value <span class="operator">~</span> variable<span class="punctuation">,</span> data <span class="operator">=</span> x<span class="punctuation">,</span> outline <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h3 id="热图">热图</h3><p>生信分析中常见的图，根据颜色的深浅反应数值的大小，可用于基因表达的可视化和聚类。</p><p>绘制热图的对象是数值矩阵。</p><p>绘制热图的方法：</p><ol><li><code>heatmap()</code></li><li><code>gplot</code>包<code>heatmap.2()</code></li><li><code>pheatmap</code>包<code>pheatmap()</code></li><li><code>ComplexHeatmap</code>包</li></ol><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不是数值矩阵要先转换</span></span><br><span class="line"><span class="built_in">class</span><span class="punctuation">(</span>mtcars<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;data.frame&quot;</span></span><br><span class="line">heatmap<span class="punctuation">(</span>mtcars<span class="punctuation">)</span></span><br><span class="line">Error <span class="keyword">in</span> heatmap<span class="punctuation">(</span>mtcars<span class="punctuation">)</span> <span class="operator">:</span> <span class="string">&#x27;x&#x27;</span> must be a numeric matrix</span><br><span class="line">heatmap<span class="punctuation">(</span>as.matrix<span class="punctuation">(</span>mtcars<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果数据差距过大，热图无法分辨，可以加入scale参数按row或col进行标准化</span></span><br><span class="line">heatmap<span class="punctuation">(</span>as.matrix<span class="punctuation">(</span>mtcars<span class="punctuation">)</span><span class="punctuation">,</span> scale <span class="operator">=</span> <span class="string">&#x27;col&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读数据</span></span><br><span class="line">m <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&#x27;../Rdata/heatmap.csv&#x27;</span><span class="punctuation">,</span> row.names <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line">x <span class="operator">&lt;-</span> as.matrix<span class="punctuation">(</span>m<span class="punctuation">)</span></span><br><span class="line">heatmap<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">heatmap<span class="punctuation">(</span>t<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span> <span class="comment"># 可转置互换坐标轴</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加颜色，但是无渐变不好看</span></span><br><span class="line">heatmap<span class="punctuation">(</span>x<span class="punctuation">,</span> col<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;green&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;blue&#x27;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成渐变色</span></span><br><span class="line">colorRampPalette<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;red&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;black&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;green&#x27;</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">(</span>nrow<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;#FF0000&quot;</span> <span class="string">&quot;#ED0000&quot;</span> <span class="string">&quot;#DB0000&quot;</span> <span class="string">&quot;#CA0000&quot;</span> <span class="string">&quot;#B80000&quot;</span> <span class="string">&quot;#A70000&quot;</span> <span class="string">&quot;#950000&quot;</span> <span class="string">&quot;#830000&quot;</span> <span class="string">&quot;#720000&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">10</span><span class="punctuation">]</span> <span class="string">&quot;#600000&quot;</span> <span class="string">&quot;#4F0000&quot;</span> <span class="string">&quot;#3D0000&quot;</span> <span class="string">&quot;#2B0000&quot;</span> <span class="string">&quot;#1A0000&quot;</span> <span class="string">&quot;#080000&quot;</span> <span class="string">&quot;#000800&quot;</span> <span class="string">&quot;#001A00&quot;</span> <span class="string">&quot;#002B00&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">19</span><span class="punctuation">]</span> <span class="string">&quot;#003D00&quot;</span> <span class="string">&quot;#004F00&quot;</span> <span class="string">&quot;#006000&quot;</span> <span class="string">&quot;#007200&quot;</span> <span class="string">&quot;#008300&quot;</span> <span class="string">&quot;#009500&quot;</span> <span class="string">&quot;#00A700&quot;</span> <span class="string">&quot;#00B800&quot;</span> <span class="string">&quot;#00CA00&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">28</span><span class="punctuation">]</span> <span class="string">&quot;#00DB00&quot;</span> <span class="string">&quot;#00ED00&quot;</span> <span class="string">&quot;#00FF00&quot;</span></span><br><span class="line">yanse <span class="operator">&lt;-</span> colorRampPalette<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;red&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;black&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;green&#x27;</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">(</span>nrow<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">heatmap<span class="punctuation">(</span>x<span class="punctuation">,</span> col <span class="operator">=</span> yanse<span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 添加边色</span></span><br><span class="line">heatmap<span class="punctuation">(</span>x<span class="punctuation">,</span> col <span class="operator">=</span> yanse<span class="punctuation">,</span> ColSideColors <span class="operator">=</span> colorRampPalette<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;red&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;black&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;green&#x27;</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">(</span>ncol<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span> RowSideColors <span class="operator">=</span> yanse<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 取消按列或按行聚类</span></span><br><span class="line">heatmap<span class="punctuation">(</span>x<span class="punctuation">,</span> col <span class="operator">=</span> yanse<span class="punctuation">,</span> Colv <span class="operator">=</span> <span class="literal">NA</span><span class="punctuation">,</span> Rowv <span class="operator">=</span> <span class="literal">NA</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># heatmap.2()绘制热图</span></span><br><span class="line">library<span class="punctuation">(</span>gplots<span class="punctuation">)</span></span><br><span class="line">m <span class="operator">&lt;-</span> as.matrix<span class="punctuation">(</span>read.csv<span class="punctuation">(</span><span class="string">&#x27;../Rdata/heatmap.csv&#x27;</span><span class="punctuation">,</span> row.names <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">heatmap.2<span class="punctuation">(</span>m<span class="punctuation">)</span></span><br><span class="line">heatmap.2<span class="punctuation">(</span>m<span class="punctuation">,</span> key <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span> <span class="comment"># 是否显示图例</span></span><br><span class="line">heatmap.2<span class="punctuation">(</span>m<span class="punctuation">,</span> symkey <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span> <span class="comment"># 图例是否对称</span></span><br><span class="line">heatmap.2<span class="punctuation">(</span>m<span class="punctuation">,</span> symkey <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line">heatmap.2<span class="punctuation">(</span>m<span class="punctuation">,</span> symkey <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">,</span> density.info <span class="operator">=</span> <span class="string">&#x27;none&#x27;</span><span class="punctuation">)</span></span><br><span class="line">heatmap.2<span class="punctuation">(</span>m<span class="punctuation">,</span> symkey <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">,</span> trace <span class="operator">=</span> <span class="string">&#x27;none&#x27;</span><span class="punctuation">)</span> <span class="comment"># 是否显示图例</span></span><br><span class="line">heatmap.2<span class="punctuation">(</span>m<span class="punctuation">,</span> symkey <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">,</span> tracecol <span class="operator">=</span> <span class="string">&#x27;green&#x27;</span><span class="punctuation">)</span> <span class="comment"># 竖线颜色</span></span><br><span class="line">heatmap.2<span class="punctuation">(</span>m<span class="punctuation">,</span> dendrogram <span class="operator">=</span> <span class="string">&#x27;none&#x27;</span><span class="punctuation">)</span> <span class="comment"># 是否聚类</span></span><br><span class="line">heatmap.2<span class="punctuation">(</span>m<span class="punctuation">,</span> dendrogram <span class="operator">=</span> <span class="string">&#x27;row&#x27;</span><span class="punctuation">)</span></span><br><span class="line">heatmap.2<span class="punctuation">(</span>m<span class="punctuation">,</span> dendrogram <span class="operator">=</span> <span class="string">&#x27;col&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pheatmap()</span></span><br><span class="line">library<span class="punctuation">(</span>pheatmap<span class="punctuation">)</span></span><br><span class="line">pheatmap<span class="punctuation">(</span>m<span class="punctuation">)</span></span><br><span class="line">pheatmap<span class="punctuation">(</span>m<span class="punctuation">,</span> border_color <span class="operator">=</span> <span class="string">&#x27;white&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 加入聚类类型</span></span><br><span class="line"><span class="built_in">rep</span><span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;N1&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;T1&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;N2&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;T2&#x27;</span><span class="punctuation">)</span><span class="punctuation">,</span> each<span class="operator">=</span><span class="number">5</span><span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;N1&quot;</span> <span class="string">&quot;N1&quot;</span> <span class="string">&quot;N1&quot;</span> <span class="string">&quot;N1&quot;</span> <span class="string">&quot;N1&quot;</span> <span class="string">&quot;T1&quot;</span> <span class="string">&quot;T1&quot;</span> <span class="string">&quot;T1&quot;</span> <span class="string">&quot;T1&quot;</span> <span class="string">&quot;T1&quot;</span> <span class="string">&quot;N2&quot;</span> <span class="string">&quot;N2&quot;</span> <span class="string">&quot;N2&quot;</span> <span class="string">&quot;N2&quot;</span> <span class="string">&quot;N2&quot;</span> <span class="string">&quot;T2&quot;</span> <span class="string">&quot;T2&quot;</span> <span class="string">&quot;T2&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">19</span><span class="punctuation">]</span> <span class="string">&quot;T2&quot;</span> <span class="string">&quot;T2&quot;</span></span><br><span class="line">factor<span class="punctuation">(</span><span class="built_in">rep</span><span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;N1&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;T1&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;N2&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;T2&#x27;</span><span class="punctuation">)</span><span class="punctuation">,</span> each<span class="operator">=</span><span class="number">5</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> N1 N1 N1 N1 N1 T1 T1 T1 T1 T1 N2 N2 N2 N2 N2 T2 T2 T2 T2 T2</span><br><span class="line">Levels<span class="operator">:</span> N1 N2 T1 T2</span><br><span class="line">annotation_col <span class="operator">&lt;-</span> data.frame<span class="punctuation">(</span>factor<span class="punctuation">(</span><span class="built_in">rep</span><span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;N1&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;T1&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;N2&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;T2&#x27;</span><span class="punctuation">)</span><span class="punctuation">,</span> each<span class="operator">=</span><span class="number">5</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">row.names<span class="punctuation">(</span>annotation_col<span class="punctuation">)</span> <span class="operator">&lt;-</span> colnames<span class="punctuation">(</span>m<span class="punctuation">)</span></span><br><span class="line">colnames<span class="punctuation">(</span>annotation_col<span class="punctuation">)</span> <span class="operator">&lt;-</span> <span class="string">&#x27;Cell Type&#x27;</span></span><br><span class="line">head<span class="punctuation">(</span>annotation_col<span class="punctuation">)</span></span><br><span class="line">      Cell Type</span><br><span class="line">N.GD1        N1</span><br><span class="line">N.GD2        N1</span><br><span class="line">N.GD3        N1</span><br><span class="line">N.GD4        N1</span><br><span class="line">N.GD5        N1</span><br><span class="line">T.GD1        T1</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="图表设置">图表设置</h3><h4 id="图表参数">图表参数</h4><p>par函数，Parameter简写，设置绘图中的参数。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">head<span class="punctuation">(</span>par<span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">$</span>xlog</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>ylog</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>adj</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>ann</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">TRUE</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>ask</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>bg</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;white&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">?</span>par<span class="punctuation">(</span><span class="punctuation">)</span> <span class="comment"># 查看帮助文档</span></span><br><span class="line"><span class="comment"># par()中自带的为默认值，可以更改，如</span></span><br><span class="line">par<span class="punctuation">(</span>pch<span class="operator">=</span><span class="number">16</span><span class="punctuation">)</span> <span class="comment"># 更改点样式，之后绘图均按此值，重启R后恢复到默认值</span></span><br><span class="line"><span class="comment"># 为防止默认值更改，存储可更改的参数</span></span><br><span class="line">opar <span class="operator">&lt;-</span> par<span class="punctuation">(</span>no.readonly <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line">par<span class="punctuation">(</span>opar<span class="punctuation">)</span> <span class="comment"># 恢复默认值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 具体设置查看帮助文档</span></span><br><span class="line">plot<span class="punctuation">(</span>women<span class="operator">$</span>height<span class="punctuation">,</span>women<span class="operator">$</span>weight<span class="punctuation">,</span>type <span class="operator">=</span> <span class="string">&quot;b&quot;</span><span class="punctuation">,</span>pch<span class="operator">=</span><span class="number">16</span><span class="punctuation">,</span>lty<span class="operator">=</span><span class="number">2</span><span class="punctuation">,</span>lwd<span class="operator">=</span><span class="number">1.2</span><span class="punctuation">,</span>las<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">     main <span class="operator">=</span> <span class="string">&quot;This is main title&quot;</span><span class="punctuation">,</span> sub <span class="operator">=</span> <span class="string">&quot;This is sub title&quot;</span><span class="punctuation">,</span>xlab <span class="operator">=</span> <span class="string">&quot;x label&quot;</span><span class="punctuation">,</span>ylab <span class="operator">=</span> <span class="string">&quot;y label&quot;</span><span class="punctuation">,</span></span><br><span class="line">     xlim <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">50</span><span class="punctuation">,</span><span class="number">100</span><span class="punctuation">)</span><span class="punctuation">,</span>ylim <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">100</span><span class="punctuation">,</span><span class="number">200</span><span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">     adj<span class="operator">=</span><span class="number">0.5</span><span class="punctuation">,</span>bty<span class="operator">=</span><span class="string">&quot;]&quot;</span><span class="punctuation">,</span>tck<span class="operator">=</span><span class="operator">-</span><span class="number">0.03</span><span class="punctuation">,</span></span><br><span class="line">     col<span class="operator">=</span><span class="string">&quot;red&quot;</span><span class="punctuation">,</span>fg<span class="operator">=</span><span class="string">&quot;blue&quot;</span><span class="punctuation">,</span>col.main<span class="operator">=</span><span class="string">&quot;green&quot;</span><span class="punctuation">,</span>col.sub<span class="operator">=</span><span class="string">&#x27;pink&#x27;</span><span class="punctuation">,</span>col.lab<span class="operator">=</span><span class="string">&#x27;orange&#x27;</span><span class="punctuation">,</span>col.axis<span class="operator">=</span><span class="string">&#x27;purple&#x27;</span><span class="punctuation">,</span></span><br><span class="line">     cex<span class="operator">=</span><span class="number">1.5</span><span class="punctuation">,</span>cex.lab<span class="operator">=</span><span class="number">1.2</span><span class="punctuation">,</span>cex.axis<span class="operator">=</span><span class="number">1.2</span><span class="punctuation">,</span>cex.main<span class="operator">=</span><span class="number">1.5</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h4 id="图表颜色">图表颜色</h4><p>颜色选择标准：</p><ol><li>对比明显</li><li>低调内敛</li><li>色盲友好</li></ol><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">colors<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line">  <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;white&quot;</span>                <span class="string">&quot;aliceblue&quot;</span>            <span class="string">&quot;antiquewhite&quot;</span>        </span><br><span class="line">  <span class="punctuation">[</span><span class="number">4</span><span class="punctuation">]</span> <span class="string">&quot;antiquewhite1&quot;</span>        <span class="string">&quot;antiquewhite2&quot;</span>        <span class="string">&quot;antiquewhite3&quot;</span>       </span><br><span class="line">  <span class="punctuation">[</span><span class="number">7</span><span class="punctuation">]</span> <span class="string">&quot;antiquewhite4&quot;</span>        <span class="string">&quot;aquamarine&quot;</span>           <span class="string">&quot;aquamarine1&quot;</span> </span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 随机抽取颜色</span></span><br><span class="line">sample<span class="punctuation">(</span>colors<span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;cadetblue4&quot;</span>      <span class="string">&quot;palegreen4&quot;</span>      <span class="string">&quot;hotpink2&quot;</span>        <span class="string">&quot;lightsteelblue2&quot;</span> <span class="string">&quot;gray12&quot;</span> </span><br><span class="line"></span><br><span class="line">rgb<span class="punctuation">(</span><span class="number">0.1</span><span class="punctuation">,</span> <span class="number">0.2</span><span class="punctuation">,</span> <span class="number">0.3</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;#1A334D&quot;</span></span><br><span class="line">hsv<span class="punctuation">(</span><span class="number">0.1</span><span class="punctuation">,</span> <span class="number">0.2</span><span class="punctuation">,</span> <span class="number">0.3</span><span class="punctuation">)</span> <span class="comment"># 色调（H），饱和度（S），明度（V）</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;#4D463D&quot;</span></span><br><span class="line">hcl<span class="punctuation">(</span><span class="number">0.1</span><span class="punctuation">,</span> <span class="number">0.2</span><span class="punctuation">,</span> <span class="number">0.3</span><span class="punctuation">)</span> <span class="comment"># 色调（H），色度（S），亮度（L）</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;#020101&quot;</span></span><br><span class="line">rainbow<span class="punctuation">(</span><span class="number">5</span><span class="punctuation">)</span> <span class="comment"># 彩虹色</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;#FF0000&quot;</span> <span class="string">&quot;#CCFF00&quot;</span> <span class="string">&quot;#00FF66&quot;</span> <span class="string">&quot;#0066FF&quot;</span> <span class="string">&quot;#CC00FF&quot;</span></span><br><span class="line"></span><br><span class="line">heat.colors<span class="punctuation">(</span><span class="number">5</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;#FF0000&quot;</span> <span class="string">&quot;#FF5500&quot;</span> <span class="string">&quot;#FFAA00&quot;</span> <span class="string">&quot;#FFFF00&quot;</span> <span class="string">&quot;#FFFF80&quot;</span></span><br><span class="line">terrain.colors<span class="punctuation">(</span><span class="number">5</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;#00A600&quot;</span> <span class="string">&quot;#E6E600&quot;</span> <span class="string">&quot;#EAB64E&quot;</span> <span class="string">&quot;#EEB99F&quot;</span> <span class="string">&quot;#F2F2F2&quot;</span></span><br><span class="line">topo.colors<span class="punctuation">(</span><span class="number">5</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;#4C00FF&quot;</span> <span class="string">&quot;#004CFF&quot;</span> <span class="string">&quot;#00E5FF&quot;</span> <span class="string">&quot;#00FF4D&quot;</span> <span class="string">&quot;#FFFF00&quot;</span></span><br><span class="line">cm.colors<span class="punctuation">(</span><span class="number">5</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;#80FFFF&quot;</span> <span class="string">&quot;#BFFFFF&quot;</span> <span class="string">&quot;#FFFFFF&quot;</span> <span class="string">&quot;#FFBFFF&quot;</span> <span class="string">&quot;#FF80FF&quot;</span></span><br><span class="line">grey.colors<span class="punctuation">(</span><span class="number">5</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;#4D4D4D&quot;</span> <span class="string">&quot;#888888&quot;</span> <span class="string">&quot;#AEAEAE&quot;</span> <span class="string">&quot;#CCCCCC&quot;</span> <span class="string">&quot;#E6E6E6&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># R包RColorBrewer带了很多颜色</span></span><br><span class="line">library<span class="punctuation">(</span>RColorBrewer<span class="punctuation">)</span></span><br><span class="line">display.brewer.all<span class="punctuation">(</span><span class="punctuation">)</span> <span class="comment"># 显示所有颜色集</span></span><br><span class="line">display.brewer.pal<span class="punctuation">(</span>name <span class="operator">=</span> <span class="string">&#x27;Set3&#x27;</span><span class="punctuation">,</span> n <span class="operator">=</span> <span class="number">5</span><span class="punctuation">)</span> <span class="comment"># 显示所选颜色</span></span><br><span class="line">brewer.pal<span class="punctuation">(</span>name <span class="operator">=</span> <span class="string">&#x27;Set3&#x27;</span><span class="punctuation">,</span> n <span class="operator">=</span> <span class="number">5</span><span class="punctuation">)</span> <span class="comment"># 设置颜色</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;#8DD3C7&quot;</span> <span class="string">&quot;#FFFFB3&quot;</span> <span class="string">&quot;#BEBADA&quot;</span> <span class="string">&quot;#FB8072&quot;</span> <span class="string">&quot;#80B1D3&quot;</span></span><br><span class="line">pie<span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">5</span><span class="punctuation">,</span> col <span class="operator">=</span> brewer.pal<span class="punctuation">(</span><span class="string">&#x27;Set3&#x27;</span><span class="punctuation">,</span> n <span class="operator">=</span> <span class="number">5</span><span class="punctuation">)</span><span class="punctuation">)</span> <span class="comment"># 使用时传递给col参数即可</span></span><br></pre></td></tr></table></figure><h3 id="韦恩图">韦恩图</h3><p>一般最少2组，最多5组，再多图很复杂没有意义。</p><p>韦恩图画法：</p><ol><li><code>gplots</code>包<code>venn</code>函数（简单，无颜色）</li><li><code>venneuler</code>包中的<code>venneuler</code>函数（安装失败）</li><li><code>venn</code>包中的<code>venn</code>函数（简单，有颜色，推荐）</li><li><code>vennDiagram</code>包中的<code>venn.Diagram</code>函数（有颜色，图没有上个好看，必须输出文件，无法在<code>plots</code>窗口预览）</li></ol><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读数据</span></span><br><span class="line">listA <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&#x27;../Rdata/genes_list_A.txt&#x27;</span><span class="punctuation">,</span> header <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line">listB <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&#x27;../Rdata/genes_list_B.txt&#x27;</span><span class="punctuation">,</span> header <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line">listC <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&#x27;../Rdata/genes_list_C.txt&#x27;</span><span class="punctuation">,</span> header <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line">listD <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&#x27;../Rdata/genes_list_D.txt&#x27;</span><span class="punctuation">,</span> header <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line">listE <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&#x27;../Rdata/genes_list_E.txt&#x27;</span><span class="punctuation">,</span> header <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line">A <span class="operator">&lt;-</span> listA<span class="operator">$</span>V1</span><br><span class="line">B <span class="operator">&lt;-</span> listB<span class="operator">$</span>V1</span><br><span class="line">C <span class="operator">&lt;-</span> listC<span class="operator">$</span>V1</span><br><span class="line">D <span class="operator">&lt;-</span> listD<span class="operator">$</span>V1</span><br><span class="line">E <span class="operator">&lt;-</span> listE<span class="operator">$</span>V1</span><br><span class="line"><span class="built_in">length</span><span class="punctuation">(</span>A<span class="punctuation">)</span>;<span class="built_in">length</span><span class="punctuation">(</span>B<span class="punctuation">)</span>;<span class="built_in">length</span><span class="punctuation">(</span>C<span class="punctuation">)</span>;<span class="built_in">length</span><span class="punctuation">(</span>D<span class="punctuation">)</span>;<span class="built_in">length</span><span class="punctuation">(</span>E<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">562</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">474</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2273</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1735</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">594</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># gplots包</span></span><br><span class="line">library<span class="punctuation">(</span>gplots<span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 绘图简单，没有颜色</span></span><br><span class="line">venn<span class="punctuation">(</span><span class="built_in">list</span><span class="punctuation">(</span>A<span class="punctuation">,</span>B<span class="punctuation">,</span>C<span class="punctuation">,</span>D<span class="punctuation">,</span>E<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># vennDiagram包</span></span><br><span class="line">library<span class="punctuation">(</span>VennDiagram<span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 需指明输出文件，无法预览</span></span><br><span class="line">venn.diagram<span class="punctuation">(</span><span class="built_in">list</span><span class="punctuation">(</span>sampleC<span class="operator">=</span>C<span class="punctuation">,</span> sampleD<span class="operator">=</span>D<span class="punctuation">)</span><span class="punctuation">,</span> filename <span class="operator">=</span> <span class="string">&#x27;venn.png&#x27;</span><span class="punctuation">,</span> fill <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;yellow&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;cyan&#x27;</span><span class="punctuation">)</span><span class="punctuation">,</span> cex <span class="operator">=</span> <span class="number">1.5</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span></span><br><span class="line"><span class="comment"># 不输出log文件</span></span><br><span class="line">venn.diagram<span class="punctuation">(</span><span class="built_in">list</span><span class="punctuation">(</span>sampleC<span class="operator">=</span>C<span class="punctuation">,</span> sampleD<span class="operator">=</span>D<span class="punctuation">)</span><span class="punctuation">,</span> filename <span class="operator">=</span> <span class="string">&#x27;venn2.png&#x27;</span><span class="punctuation">,</span> fill <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;yellow&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;cyan&#x27;</span><span class="punctuation">)</span><span class="punctuation">,</span> cex <span class="operator">=</span> <span class="number">1.2</span><span class="punctuation">,</span> disable.logging <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line">INFO <span class="punctuation">[</span><span class="number">2022</span><span class="operator">-</span><span class="number">02</span><span class="operator">-</span><span class="number">01</span> <span class="number">17</span><span class="operator">:</span><span class="number">06</span><span class="operator">:</span><span class="number">37</span><span class="punctuation">]</span> <span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line">INFO <span class="punctuation">[</span><span class="number">2022</span><span class="operator">-</span><span class="number">02</span><span class="operator">-</span><span class="number">01</span> <span class="number">17</span><span class="operator">:</span><span class="number">06</span><span class="operator">:</span><span class="number">37</span><span class="punctuation">]</span> <span class="built_in">list</span><span class="punctuation">(</span>sampleC <span class="operator">=</span> C<span class="punctuation">,</span> sampleD <span class="operator">=</span> D<span class="punctuation">)</span></span><br><span class="line">INFO <span class="punctuation">[</span><span class="number">2022</span><span class="operator">-</span><span class="number">02</span><span class="operator">-</span><span class="number">01</span> <span class="number">17</span><span class="operator">:</span><span class="number">06</span><span class="operator">:</span><span class="number">37</span><span class="punctuation">]</span> </span><br><span class="line">INFO <span class="punctuation">[</span><span class="number">2022</span><span class="operator">-</span><span class="number">02</span><span class="operator">-</span><span class="number">01</span> <span class="number">17</span><span class="operator">:</span><span class="number">06</span><span class="operator">:</span><span class="number">37</span><span class="punctuation">]</span> <span class="operator">$</span>filename</span><br><span class="line">INFO <span class="punctuation">[</span><span class="number">2022</span><span class="operator">-</span><span class="number">02</span><span class="operator">-</span><span class="number">01</span> <span class="number">17</span><span class="operator">:</span><span class="number">06</span><span class="operator">:</span><span class="number">37</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;venn2.png&quot;</span></span><br><span class="line">INFO <span class="punctuation">[</span><span class="number">2022</span><span class="operator">-</span><span class="number">02</span><span class="operator">-</span><span class="number">01</span> <span class="number">17</span><span class="operator">:</span><span class="number">06</span><span class="operator">:</span><span class="number">37</span><span class="punctuation">]</span> </span><br><span class="line">INFO <span class="punctuation">[</span><span class="number">2022</span><span class="operator">-</span><span class="number">02</span><span class="operator">-</span><span class="number">01</span> <span class="number">17</span><span class="operator">:</span><span class="number">06</span><span class="operator">:</span><span class="number">37</span><span class="punctuation">]</span> <span class="operator">$</span>fill</span><br><span class="line">INFO <span class="punctuation">[</span><span class="number">2022</span><span class="operator">-</span><span class="number">02</span><span class="operator">-</span><span class="number">01</span> <span class="number">17</span><span class="operator">:</span><span class="number">06</span><span class="operator">:</span><span class="number">37</span><span class="punctuation">]</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;yellow&quot;</span><span class="punctuation">,</span> <span class="string">&quot;cyan&quot;</span><span class="punctuation">)</span></span><br><span class="line">INFO <span class="punctuation">[</span><span class="number">2022</span><span class="operator">-</span><span class="number">02</span><span class="operator">-</span><span class="number">01</span> <span class="number">17</span><span class="operator">:</span><span class="number">06</span><span class="operator">:</span><span class="number">37</span><span class="punctuation">]</span> </span><br><span class="line">INFO <span class="punctuation">[</span><span class="number">2022</span><span class="operator">-</span><span class="number">02</span><span class="operator">-</span><span class="number">01</span> <span class="number">17</span><span class="operator">:</span><span class="number">06</span><span class="operator">:</span><span class="number">37</span><span class="punctuation">]</span> <span class="operator">$</span>cex</span><br><span class="line">INFO <span class="punctuation">[</span><span class="number">2022</span><span class="operator">-</span><span class="number">02</span><span class="operator">-</span><span class="number">01</span> <span class="number">17</span><span class="operator">:</span><span class="number">06</span><span class="operator">:</span><span class="number">37</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1.2</span></span><br><span class="line">INFO <span class="punctuation">[</span><span class="number">2022</span><span class="operator">-</span><span class="number">02</span><span class="operator">-</span><span class="number">01</span> <span class="number">17</span><span class="operator">:</span><span class="number">06</span><span class="operator">:</span><span class="number">37</span><span class="punctuation">]</span> </span><br><span class="line">INFO <span class="punctuation">[</span><span class="number">2022</span><span class="operator">-</span><span class="number">02</span><span class="operator">-</span><span class="number">01</span> <span class="number">17</span><span class="operator">:</span><span class="number">06</span><span class="operator">:</span><span class="number">37</span><span class="punctuation">]</span> <span class="operator">$</span>disable.logging</span><br><span class="line">INFO <span class="punctuation">[</span><span class="number">2022</span><span class="operator">-</span><span class="number">02</span><span class="operator">-</span><span class="number">01</span> <span class="number">17</span><span class="operator">:</span><span class="number">06</span><span class="operator">:</span><span class="number">37</span><span class="punctuation">]</span> <span class="built_in">T</span></span><br><span class="line">INFO <span class="punctuation">[</span><span class="number">2022</span><span class="operator">-</span><span class="number">02</span><span class="operator">-</span><span class="number">01</span> <span class="number">17</span><span class="operator">:</span><span class="number">06</span><span class="operator">:</span><span class="number">37</span><span class="punctuation">]</span> </span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span></span><br><span class="line"><span class="comment"># 三维</span></span><br><span class="line">venn.diagram<span class="punctuation">(</span><span class="built_in">list</span><span class="punctuation">(</span>sampleC<span class="operator">=</span>C<span class="punctuation">,</span> sampleD<span class="operator">=</span>D<span class="punctuation">,</span> sampleA<span class="operator">=</span>A<span class="punctuation">)</span><span class="punctuation">,</span> filename <span class="operator">=</span> <span class="string">&#x27;venn3.png&#x27;</span><span class="punctuation">,</span> fill <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;yellow&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;cyan&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;blue&#x27;</span><span class="punctuation">)</span><span class="punctuation">,</span> cex <span class="operator">=</span> <span class="number">1.2</span><span class="punctuation">,</span> disable.logging <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 四维</span></span><br><span class="line">venn.diagram<span class="punctuation">(</span><span class="built_in">list</span><span class="punctuation">(</span>sampleC<span class="operator">=</span>C<span class="punctuation">,</span> sampleD<span class="operator">=</span>D<span class="punctuation">,</span> sampleA<span class="operator">=</span>A<span class="punctuation">,</span> sampleB<span class="operator">=</span>B<span class="punctuation">)</span><span class="punctuation">,</span> filename <span class="operator">=</span> <span class="string">&#x27;venn4.png&#x27;</span><span class="punctuation">,</span> fill <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;yellow&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;cyan&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;blue&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;red&#x27;</span><span class="punctuation">)</span><span class="punctuation">,</span> cex <span class="operator">=</span> <span class="number">1.2</span><span class="punctuation">,</span> disable.logging <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 五维</span></span><br><span class="line">venn.diagram<span class="punctuation">(</span><span class="built_in">list</span><span class="punctuation">(</span>sampleC<span class="operator">=</span>C<span class="punctuation">,</span> sampleD<span class="operator">=</span>D<span class="punctuation">,</span> sampleA<span class="operator">=</span>A<span class="punctuation">,</span> sampleB<span class="operator">=</span>B<span class="punctuation">,</span> sampleE<span class="operator">=</span>E<span class="punctuation">)</span><span class="punctuation">,</span> filename <span class="operator">=</span> <span class="string">&#x27;venn5.png&#x27;</span><span class="punctuation">,</span> fill <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;yellow&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;cyan&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;blue&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;red&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;pink&#x27;</span><span class="punctuation">)</span><span class="punctuation">,</span> cex <span class="operator">=</span> <span class="number">1.2</span><span class="punctuation">,</span> disable.logging <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># venn包</span></span><br><span class="line">venn<span class="punctuation">(</span><span class="built_in">list</span><span class="punctuation">(</span>A<span class="punctuation">,</span>B<span class="punctuation">,</span>C<span class="punctuation">,</span>D<span class="punctuation">,</span>E<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 不显示方框</span></span><br><span class="line">venn<span class="punctuation">(</span><span class="built_in">list</span><span class="punctuation">(</span>A<span class="punctuation">,</span>B<span class="punctuation">,</span>C<span class="punctuation">,</span>D<span class="punctuation">,</span>E<span class="punctuation">)</span><span class="punctuation">,</span> box <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 改变边线颜色</span></span><br><span class="line">venn<span class="punctuation">(</span><span class="built_in">list</span><span class="punctuation">(</span>A<span class="punctuation">,</span>B<span class="punctuation">,</span>C<span class="punctuation">,</span>D<span class="punctuation">,</span>E<span class="punctuation">)</span><span class="punctuation">,</span> box <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">,</span> col<span class="operator">=</span><span class="string">&#x27;red&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 加标签</span></span><br><span class="line">venn<span class="punctuation">(</span><span class="built_in">list</span><span class="punctuation">(</span>A<span class="punctuation">,</span>B<span class="punctuation">,</span>C<span class="punctuation">,</span>D<span class="punctuation">,</span>E<span class="punctuation">)</span><span class="punctuation">,</span> box <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">,</span> snames <span class="operator">=</span> <span class="string">&#x27;Sample A,Sample B,Sample C,Sample D,Sample E&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 加颜色</span></span><br><span class="line">venn<span class="punctuation">(</span><span class="built_in">list</span><span class="punctuation">(</span>A<span class="punctuation">,</span>B<span class="punctuation">,</span>C<span class="punctuation">,</span>D<span class="punctuation">,</span>E<span class="punctuation">)</span><span class="punctuation">,</span> box <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">,</span> snames <span class="operator">=</span> <span class="string">&#x27;Sample A,Sample B,Sample C,Sample D,Sample E&#x27;</span><span class="punctuation">,</span> zcolor <span class="operator">=</span> <span class="string">&#x27;red, green, purple, blue, cyan&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 如果可以，强制形状为椭圆</span></span><br><span class="line">venn<span class="punctuation">(</span><span class="built_in">list</span><span class="punctuation">(</span>A<span class="punctuation">,</span>B<span class="punctuation">,</span>C<span class="punctuation">,</span>D<span class="punctuation">,</span>E<span class="punctuation">)</span><span class="punctuation">,</span> box <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">,</span> snames <span class="operator">=</span> <span class="string">&#x27;Sample A,Sample B,Sample C,Sample D,Sample E&#x27;</span><span class="punctuation">,</span> zcolor <span class="operator">=</span> <span class="string">&#x27;red, green, purple, blue, cyan&#x27;</span><span class="punctuation">,</span> ellipse <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h3 id="曼哈顿图">曼哈顿图</h3><p>曼哈顿图是用二维散点图展示大量数据的方法，主要用于全基因组关联分析。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">library<span class="punctuation">(</span>qqman<span class="punctuation">)</span></span><br><span class="line">library<span class="punctuation">(</span>RColorBrewer<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 此包内置数据集，导入数据时也要是这样的格式</span></span><br><span class="line">gwasResults</span><br><span class="line">      SNP CHR  BP            P</span><br><span class="line"><span class="number">1</span>     rs1   <span class="number">1</span>   <span class="number">1</span> <span class="number">0.9148060435</span></span><br><span class="line"><span class="number">2</span>     rs2   <span class="number">1</span>   <span class="number">2</span> <span class="number">0.9370754133</span></span><br><span class="line"><span class="number">3</span>     rs3   <span class="number">1</span>   <span class="number">3</span> <span class="number">0.2861395348</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">manhattan<span class="punctuation">(</span>gwasResults<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加标题，设置y轴范围，散点大小，轴字体大小</span></span><br><span class="line">manhattan<span class="punctuation">(</span>gwasResults<span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&#x27;Manhattan Plot&#x27;</span><span class="punctuation">,</span> ylim <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">)</span><span class="punctuation">,</span> cex <span class="operator">=</span> <span class="number">0.6</span><span class="punctuation">,</span> cex.axis <span class="operator">=</span> <span class="number">0.9</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 控制两根限制条：-log10(1e-5)和-log10(1e-8)</span></span><br><span class="line">manhattan<span class="punctuation">(</span>gwasResults<span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&#x27;Manhattan Plot&#x27;</span><span class="punctuation">,</span> ylim <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">)</span><span class="punctuation">,</span> cex <span class="operator">=</span> <span class="number">0.6</span><span class="punctuation">,</span> suggestiveline <span class="operator">=</span> <span class="literal">FALSE</span><span class="punctuation">,</span> genomewideline <span class="operator">=</span> <span class="literal">FALSE</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加颜色</span></span><br><span class="line">manhattan<span class="punctuation">(</span>gwasResults<span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&#x27;Manhattan Plot&#x27;</span><span class="punctuation">,</span> ylim <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">)</span><span class="punctuation">,</span> cex <span class="operator">=</span> <span class="number">0.6</span><span class="punctuation">,</span> cex.axis<span class="operator">=</span><span class="number">0.9</span><span class="punctuation">,</span> col <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;blue4&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;orange3&#x27;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">yanse <span class="operator">&lt;-</span> brewer.pal<span class="punctuation">(</span><span class="string">&#x27;Set3&#x27;</span><span class="punctuation">,</span> n<span class="operator">=</span><span class="number">4</span><span class="punctuation">)</span></span><br><span class="line">manhattan<span class="punctuation">(</span>gwasResults<span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&#x27;Manhattan Plot&#x27;</span><span class="punctuation">,</span> ylim <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">)</span><span class="punctuation">,</span> cex <span class="operator">=</span> <span class="number">0.6</span><span class="punctuation">,</span> cex.axis<span class="operator">=</span><span class="number">0.9</span><span class="punctuation">,</span> col <span class="operator">=</span> yanse<span class="punctuation">,</span> chrlabs <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">20</span><span class="punctuation">,</span> <span class="string">&#x27;P&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;Q&#x27;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 染色体标签</span></span><br><span class="line">manhattan<span class="punctuation">(</span>gwasResults<span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&#x27;Manhattan Plot&#x27;</span><span class="punctuation">,</span> ylim <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">)</span><span class="punctuation">,</span> cex <span class="operator">=</span> <span class="number">0.6</span><span class="punctuation">,</span> cex.axis<span class="operator">=</span><span class="number">0.9</span><span class="punctuation">,</span> col <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;blue4&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;orange3&#x27;</span><span class="punctuation">)</span><span class="punctuation">,</span> chrlabs <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">20</span><span class="punctuation">,</span> <span class="string">&#x27;P&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;Q&#x27;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 局部显示显著的染色体</span></span><br><span class="line">manhattan<span class="punctuation">(</span>subset<span class="punctuation">(</span>gwasResults<span class="punctuation">,</span>CHR<span class="operator">==</span><span class="number">3</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出感兴趣的snps</span></span><br><span class="line">snpsOfInterest</span><br><span class="line">  <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;rs3001&quot;</span> <span class="string">&quot;rs3002&quot;</span> <span class="string">&quot;rs3003&quot;</span> <span class="string">&quot;rs3004&quot;</span> <span class="string">&quot;rs3005&quot;</span> <span class="string">&quot;rs3006&quot;</span> <span class="string">&quot;rs3007&quot;</span> <span class="string">&quot;rs3008&quot;</span> <span class="string">&quot;rs3009&quot;</span> <span class="string">&quot;rs3010&quot;</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">11</span><span class="punctuation">]</span> <span class="string">&quot;rs3011&quot;</span> <span class="string">&quot;rs3012&quot;</span> <span class="string">&quot;rs3013&quot;</span> <span class="string">&quot;rs3014&quot;</span> <span class="string">&quot;rs3015&quot;</span> <span class="string">&quot;rs3016&quot;</span> <span class="string">&quot;rs3017&quot;</span> <span class="string">&quot;rs3018&quot;</span> <span class="string">&quot;rs3019&quot;</span> <span class="string">&quot;rs3020&quot;</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">21</span><span class="punctuation">]</span> <span class="string">&quot;rs3021&quot;</span> <span class="string">&quot;rs3022&quot;</span> <span class="string">&quot;rs3023&quot;</span> <span class="string">&quot;rs3024&quot;</span> <span class="string">&quot;rs3025&quot;</span> <span class="string">&quot;rs3026&quot;</span> <span class="string">&quot;rs3027&quot;</span> <span class="string">&quot;rs3028&quot;</span> <span class="string">&quot;rs3029&quot;</span> <span class="string">&quot;rs3030&quot;</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">31</span><span class="punctuation">]</span> <span class="string">&quot;rs3031&quot;</span> <span class="string">&quot;rs3032&quot;</span> <span class="string">&quot;rs3033&quot;</span> <span class="string">&quot;rs3034&quot;</span> <span class="string">&quot;rs3035&quot;</span> <span class="string">&quot;rs3036&quot;</span> <span class="string">&quot;rs3037&quot;</span> <span class="string">&quot;rs3038&quot;</span> <span class="string">&quot;rs3039&quot;</span> <span class="string">&quot;rs3040&quot;</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">41</span><span class="punctuation">]</span> <span class="string">&quot;rs3041&quot;</span> <span class="string">&quot;rs3042&quot;</span> <span class="string">&quot;rs3043&quot;</span> <span class="string">&quot;rs3044&quot;</span> <span class="string">&quot;rs3045&quot;</span> <span class="string">&quot;rs3046&quot;</span> <span class="string">&quot;rs3047&quot;</span> <span class="string">&quot;rs3048&quot;</span> <span class="string">&quot;rs3049&quot;</span> <span class="string">&quot;rs3050&quot;</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">51</span><span class="punctuation">]</span> <span class="string">&quot;rs3051&quot;</span> <span class="string">&quot;rs3052&quot;</span> <span class="string">&quot;rs3053&quot;</span> <span class="string">&quot;rs3054&quot;</span> <span class="string">&quot;rs3055&quot;</span> <span class="string">&quot;rs3056&quot;</span> <span class="string">&quot;rs3057&quot;</span> <span class="string">&quot;rs3058&quot;</span> <span class="string">&quot;rs3059&quot;</span> <span class="string">&quot;rs3060&quot;</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">61</span><span class="punctuation">]</span> <span class="string">&quot;rs3061&quot;</span> <span class="string">&quot;rs3062&quot;</span> <span class="string">&quot;rs3063&quot;</span> <span class="string">&quot;rs3064&quot;</span> <span class="string">&quot;rs3065&quot;</span> <span class="string">&quot;rs3066&quot;</span> <span class="string">&quot;rs3067&quot;</span> <span class="string">&quot;rs3068&quot;</span> <span class="string">&quot;rs3069&quot;</span> <span class="string">&quot;rs3070&quot;</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">71</span><span class="punctuation">]</span> <span class="string">&quot;rs3071&quot;</span> <span class="string">&quot;rs3072&quot;</span> <span class="string">&quot;rs3073&quot;</span> <span class="string">&quot;rs3074&quot;</span> <span class="string">&quot;rs3075&quot;</span> <span class="string">&quot;rs3076&quot;</span> <span class="string">&quot;rs3077&quot;</span> <span class="string">&quot;rs3078&quot;</span> <span class="string">&quot;rs3079&quot;</span> <span class="string">&quot;rs3080&quot;</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">81</span><span class="punctuation">]</span> <span class="string">&quot;rs3081&quot;</span> <span class="string">&quot;rs3082&quot;</span> <span class="string">&quot;rs3083&quot;</span> <span class="string">&quot;rs3084&quot;</span> <span class="string">&quot;rs3085&quot;</span> <span class="string">&quot;rs3086&quot;</span> <span class="string">&quot;rs3087&quot;</span> <span class="string">&quot;rs3088&quot;</span> <span class="string">&quot;rs3089&quot;</span> <span class="string">&quot;rs3090&quot;</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">91</span><span class="punctuation">]</span> <span class="string">&quot;rs3091&quot;</span> <span class="string">&quot;rs3092&quot;</span> <span class="string">&quot;rs3093&quot;</span> <span class="string">&quot;rs3094&quot;</span> <span class="string">&quot;rs3095&quot;</span> <span class="string">&quot;rs3096&quot;</span> <span class="string">&quot;rs3097&quot;</span> <span class="string">&quot;rs3098&quot;</span> <span class="string">&quot;rs3099&quot;</span> <span class="string">&quot;rs3100&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 高亮显示感兴趣的snps</span></span><br><span class="line">manhattan<span class="punctuation">(</span>gwasResults<span class="punctuation">,</span> highlight <span class="operator">=</span> snpsOfInterest<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 标注满足p值的rs</span></span><br><span class="line">manhattan<span class="punctuation">(</span>gwasResults<span class="punctuation">,</span> annotatePval <span class="operator">=</span> <span class="number">0.001</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 默认只显示最顶部的rs，可全部显示</span></span><br><span class="line">manhattan<span class="punctuation">(</span>gwasResults<span class="punctuation">,</span> annotatePval <span class="operator">=</span> <span class="number">0.001</span><span class="punctuation">,</span> annotateTop <span class="operator">=</span> <span class="literal">FALSE</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h3 id="火山图">火山图</h3><p>散点图的一种，主要用于基因表达的分析中。</p><p>自带散点图</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读数据</span></span><br><span class="line">m <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&#x27;../Rdata/Deseq2.csv&#x27;</span><span class="punctuation">,</span> header <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">,</span> row.names <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line">head<span class="punctuation">(</span>m<span class="punctuation">)</span></span><br><span class="line">                    baseMean log2FoldChange      lfcSE       stat       pvalue         padj</span><br><span class="line">ENSG00000000003  <span class="number">708.6021697</span>    <span class="operator">-</span><span class="number">0.38125397</span> <span class="number">0.10065597</span> <span class="operator">-</span><span class="number">3.7876937</span> <span class="number">1.520521e-04</span> <span class="number">0.0012815112</span></span><br><span class="line">ENSG00000000419  <span class="number">520.2979006</span>     <span class="number">0.20681259</span> <span class="number">0.11222180</span>  <span class="number">1.8428915</span> <span class="number">6.534485e-02</span> <span class="number">0.1962308610</span></span><br><span class="line">ENSG00000000457  <span class="number">237.1630368</span>     <span class="number">0.03792034</span> <span class="number">0.14345322</span>  <span class="number">0.2643394</span> <span class="number">7.915184e-01</span> <span class="number">0.9112208706</span></span><br><span class="line">ENSG00000000460   <span class="number">57.9326331</span>    <span class="operator">-</span><span class="number">0.08816367</span> <span class="number">0.28716771</span> <span class="operator">-</span><span class="number">0.3070111</span> <span class="number">7.588349e-01</span> <span class="number">0.8946714454</span></span><br><span class="line">ENSG00000000938    <span class="number">0.3180984</span>    <span class="operator">-</span><span class="number">1.37822703</span> <span class="number">3.49987280</span> <span class="operator">-</span><span class="number">0.3937935</span> <span class="number">6.937335e-01</span>           <span class="literal">NA</span></span><br><span class="line">ENSG00000000971 <span class="number">5817.3528677</span>     <span class="number">0.42640216</span> <span class="number">0.08831006</span>  <span class="number">4.8284666</span> <span class="number">1.375884e-06</span> <span class="number">0.0000181641</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 去除NA</span></span><br><span class="line">m <span class="operator">&lt;-</span> na.omit<span class="punctuation">(</span>m<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 画图</span></span><br><span class="line">plot<span class="punctuation">(</span>m<span class="operator">$</span>log2FoldChange<span class="punctuation">,</span>m<span class="operator">$</span>padj<span class="punctuation">)</span></span><br><span class="line">plot<span class="punctuation">(</span>m<span class="operator">$</span>log2FoldChange<span class="punctuation">,</span><span class="operator">-</span>log10<span class="punctuation">(</span>m<span class="operator">$</span>padj<span class="punctuation">)</span><span class="punctuation">,</span> pch<span class="operator">=</span><span class="number">16</span><span class="punctuation">,</span> cex<span class="operator">=</span><span class="number">0.6</span><span class="punctuation">,</span> xlim <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="operator">-</span><span class="number">10</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">,</span> ylim <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">100</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 一次性计算-log10(m$padj)并赋值</span></span><br><span class="line">transform<span class="punctuation">(</span>m<span class="punctuation">,</span>padj<span class="operator">=</span><span class="operator">-</span>log10<span class="punctuation">(</span>m<span class="operator">$</span>padj<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">                   baseMean log2FoldChange      lfcSE         stat       pvalue         padj</span><br><span class="line">ENSG00000000003  <span class="number">708.602170</span>  <span class="operator">-</span><span class="number">0.3812539747</span> <span class="number">0.10065597</span> <span class="operator">-</span><span class="number">3.787693677</span> <span class="number">1.520521e-04</span> <span class="number">2.892278e+00</span></span><br><span class="line">ENSG00000000419  <span class="number">520.297901</span>   <span class="number">0.2068125935</span> <span class="number">0.11222180</span>  <span class="number">1.842891491</span> <span class="number">6.534485e-02</span> <span class="number">7.072327e-01</span></span><br><span class="line">ENSG00000000457  <span class="number">237.163037</span>   <span class="number">0.0379203397</span> <span class="number">0.14345322</span>  <span class="number">0.264339418</span> <span class="number">7.915184e-01</span> <span class="number">4.037634e-02</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">m <span class="operator">&lt;-</span> transform<span class="punctuation">(</span>m<span class="punctuation">,</span>padj<span class="operator">=</span><span class="operator">-</span>log10<span class="punctuation">(</span>m<span class="operator">$</span>padj<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将数据分开，为明显上调、明显下调、不显著</span></span><br><span class="line">down <span class="operator">&lt;-</span> m<span class="punctuation">[</span>m<span class="operator">$</span>log2FoldChange <span class="operator">&lt;=</span> <span class="operator">-</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line">up <span class="operator">&lt;-</span> m<span class="punctuation">[</span>m<span class="operator">$</span>log2FoldChange <span class="operator">&gt;=</span> <span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line">mid <span class="operator">&lt;-</span> m<span class="punctuation">[</span>m<span class="operator">$</span>log2FoldChange <span class="operator">-</span><span class="number">1</span> <span class="operator">&amp;</span> m<span class="operator">$</span>log2FoldChange <span class="operator">&lt;</span> <span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 分别画图</span></span><br><span class="line">plot<span class="punctuation">(</span>mid<span class="operator">$</span>log2FoldChange<span class="punctuation">,</span> mid<span class="operator">$</span>padj<span class="punctuation">,</span> xlim <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="operator">-</span><span class="number">10</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">,</span> ylim <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">100</span><span class="punctuation">)</span><span class="punctuation">,</span> pch <span class="operator">=</span> <span class="number">16</span><span class="punctuation">,</span> cex <span class="operator">=</span> <span class="number">0.6</span><span class="punctuation">,</span> col <span class="operator">=</span> <span class="string">&#x27;grey&#x27;</span><span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&#x27;Gene Expression&#x27;</span><span class="punctuation">,</span> xlab <span class="operator">=</span> <span class="string">&#x27;log2FodeChange&#x27;</span><span class="punctuation">,</span> ylab <span class="operator">=</span> <span class="string">&#x27;-log10(Qvalue)&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 低级绘图命令plots加上另外两个</span></span><br><span class="line">points<span class="punctuation">(</span>up<span class="operator">$</span>log2FoldChange<span class="punctuation">,</span>up<span class="operator">$</span>padj<span class="punctuation">,</span>pch<span class="operator">=</span><span class="number">16</span><span class="punctuation">,</span>cex<span class="operator">=</span><span class="number">0.6</span><span class="punctuation">,</span>col<span class="operator">=</span><span class="string">&#x27;red&#x27;</span><span class="punctuation">)</span></span><br><span class="line">points<span class="punctuation">(</span>down<span class="operator">$</span>log2FoldChange<span class="punctuation">,</span>down<span class="operator">$</span>padj<span class="punctuation">,</span>pch<span class="operator">=</span><span class="number">16</span><span class="punctuation">,</span>cex<span class="operator">=</span><span class="number">0.6</span><span class="punctuation">,</span>col<span class="operator">=</span><span class="string">&#x27;green&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><p><code>ggplot</code>包</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读数据并处理</span></span><br><span class="line">m <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&#x27;../Rdata/Deseq2.csv&#x27;</span><span class="punctuation">,</span> header <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">,</span> row.names <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line">m <span class="operator">&lt;-</span> na.omit<span class="punctuation">(</span>m<span class="punctuation">)</span></span><br><span class="line">transform<span class="punctuation">(</span>m<span class="punctuation">,</span>padj<span class="operator">=</span><span class="operator">-</span>log10<span class="punctuation">(</span>m<span class="operator">$</span>padj<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">m <span class="operator">&lt;-</span> transform<span class="punctuation">(</span>m<span class="punctuation">,</span>padj<span class="operator">=</span><span class="operator">-</span>log10<span class="punctuation">(</span>m<span class="operator">$</span>padj<span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h2 id="ggplot2作图">ggplot2作图</h2><p>逻辑清晰，绘图方便，简介好看，有很多基于ggplot2的绘图包。</p><p>图形语法：grammar of graphis，类似于图层的概念。</p><p>1.数据（data）</p><p>一般为数据框</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ggplot<span class="punctuation">(</span>data <span class="operator">=</span> mtcars<span class="punctuation">)</span></span><br></pre></td></tr></table></figure><p>2.映射（mapping）</p><p>可以将size，shape，col等映射为数据框中的值</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ggplot<span class="punctuation">(</span>data <span class="operator">=</span> mtcars<span class="punctuation">,</span> mapping <span class="operator">=</span> aes<span class="punctuation">(</span>x<span class="operator">=</span>wt<span class="punctuation">,</span> y<span class="operator">=</span>mpg<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">ggplot<span class="punctuation">(</span>data <span class="operator">=</span> mtcars<span class="punctuation">,</span> mapping <span class="operator">=</span> aes<span class="punctuation">(</span>x<span class="operator">=</span>wt<span class="punctuation">,</span> y<span class="operator">=</span>mpg<span class="punctuation">,</span> size<span class="operator">=</span>mpg<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">ggplot<span class="punctuation">(</span>data <span class="operator">=</span> mtcars<span class="punctuation">,</span> mapping <span class="operator">=</span> aes<span class="punctuation">(</span>x<span class="operator">=</span>wt<span class="punctuation">,</span> y<span class="operator">=</span>mpg<span class="punctuation">,</span> shape<span class="operator">=</span>as.factor<span class="punctuation">(</span>cyl<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">ggplot<span class="punctuation">(</span>data <span class="operator">=</span> mtcars<span class="punctuation">,</span> mapping <span class="operator">=</span> aes<span class="punctuation">(</span>x<span class="operator">=</span>wt<span class="punctuation">,</span> y<span class="operator">=</span>mpg<span class="punctuation">,</span> col<span class="operator">=</span>mpg<span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><p>3.几何对象</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ggplot<span class="punctuation">(</span>data <span class="operator">=</span> mtcars<span class="punctuation">,</span> mapping <span class="operator">=</span> aes<span class="punctuation">(</span>x<span class="operator">=</span>wt<span class="punctuation">,</span> y<span class="operator">=</span>mpg<span class="punctuation">)</span><span class="punctuation">)</span> <span class="operator">+</span> geom_point<span class="punctuation">(</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="mailto:x345242281@outlook.com">Aohui</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接:</span> <span class="post-copyright-info"><a href="https://aohuiliu.fun/posts/15547/">https://aohuiliu.fun/posts/15547/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://aohuiliu.fun" target="_blank">AOHUI BLOG.</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><a class="post-meta__tags" href="/tags/R/">R</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/36326/"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">文本编辑器 vim</div></div></a></div><div class="next-post pull-right"><a href="/posts/31168/"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Linux 笔记：Shell 基础与 Shell 编程</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-message fa-fw"></i> <span>评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/images/avatar.jpeg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">Aohuiliu</div><div class="author-info__description">珞珈山职业技术学院</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">28</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://space.bilibili.com/341395189"><i class="fab fa-bilibili"></i><span>关注 B 站</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/janedut" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://space.bilibili.com/341395189" target="_blank" title="Bilibili"><i class="fab fa-bilibili"></i></a><a class="social-icon" href="mailto:x345242281@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-bars"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#R-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.</span> <span class="toc-text">R 数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%91%E9%87%8F"><span class="toc-number">1.1.</span> <span class="toc-text">向量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95"><span class="toc-number">1.2.</span> <span class="toc-text">向量索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A9%E9%98%B5%E4%B8%8E%E6%95%B0%E7%BB%84"><span class="toc-number">1.3.</span> <span class="toc-text">矩阵与数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8"><span class="toc-number">1.4.</span> <span class="toc-text">列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%A1%86"><span class="toc-number">1.5.</span> <span class="toc-text">数据框</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%A0%E5%AD%90"><span class="toc-number">1.6.</span> <span class="toc-text">因子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%BA%E5%A4%B1%E6%95%B0%E6%8D%AE"><span class="toc-number">1.7.</span> <span class="toc-text">缺失数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.8.</span> <span class="toc-text">字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-2"><span class="toc-number">1.9.</span> <span class="toc-text">正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-2"><span class="toc-number">1.9.1.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%8F%E5%85%B8%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.9.2.</span> <span class="toc-text">经典实例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4"><span class="toc-number">1.10.</span> <span class="toc-text">日期和时间</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">数据处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96"><span class="toc-number">2.1.</span> <span class="toc-text">数据获取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96"><span class="toc-number">2.2.</span> <span class="toc-text">文件读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5"><span class="toc-number">2.3.</span> <span class="toc-text">文件写入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Excel%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99"><span class="toc-number">2.4.</span> <span class="toc-text">Excel文件读写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#R-%E6%A0%BC%E5%BC%8F%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99"><span class="toc-number">2.5.</span> <span class="toc-text">R 格式文件读写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2"><span class="toc-number">2.6.</span> <span class="toc-text">数据转换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">2.6.1.</span> <span class="toc-text">数据类型转换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%8F%96%E5%AD%90%E9%9B%86%E3%80%81%E5%90%88%E5%B9%B6%E3%80%81%E6%B7%BB%E5%8A%A0"><span class="toc-number">2.6.2.</span> <span class="toc-text">数据取子集、合并、添加</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BF%BB%E8%BD%AC%E3%80%81%E6%9B%B4%E6%94%B9%E3%80%81%E6%8E%92%E5%BA%8F"><span class="toc-number">2.6.3.</span> <span class="toc-text">数据翻转、更改、排序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%A1%86%E5%86%85%E6%95%B0%E6%8D%AE%E8%AE%A1%E7%AE%97"><span class="toc-number">2.6.4.</span> <span class="toc-text">数据框内数据计算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#reshape2%E5%8C%85%E5%BA%94%E7%94%A8"><span class="toc-number">2.6.5.</span> <span class="toc-text">reshape2包应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tidyr%E5%8C%85%E5%BA%94%E7%94%A8"><span class="toc-number">2.6.6.</span> <span class="toc-text">tidyr包应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dplyr%E5%8C%85%E5%BA%94%E7%94%A8"><span class="toc-number">2.6.7.</span> <span class="toc-text">dplyr包应用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#R%E5%87%BD%E6%95%B0"><span class="toc-number">3.</span> <span class="toc-text">R函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E9%80%89%E9%A1%B9%E5%8F%82%E6%95%B0"><span class="toc-number">3.1.</span> <span class="toc-text">函数的选项参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%AD%A6%E7%BB%9F%E8%AE%A1%E5%87%BD%E6%95%B0"><span class="toc-number">3.2.</span> <span class="toc-text">数学统计函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%8F%E8%BF%B0%E6%80%A7%E7%BB%9F%E8%AE%A1%E5%87%BD%E6%95%B0"><span class="toc-number">3.3.</span> <span class="toc-text">描述性统计函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%91%E6%95%B0%E7%BB%9F%E8%AE%A1%E5%87%BD%E6%95%B0"><span class="toc-number">3.4.</span> <span class="toc-text">频数统计函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8B%AC%E7%AB%8B%E6%80%A7%E6%A3%80%E9%AA%8C%E5%87%BD%E6%95%B0"><span class="toc-number">3.5.</span> <span class="toc-text">独立性检验函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E6%80%A7%E5%88%86%E6%9E%90%E5%87%BD%E6%95%B0"><span class="toc-number">3.6.</span> <span class="toc-text">相关性分析函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E6%80%A7%E6%A3%80%E9%AA%8C%E5%87%BD%E6%95%B0"><span class="toc-number">3.7.</span> <span class="toc-text">相关性检验函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%98%E5%9B%BE%E5%87%BD%E6%95%B0"><span class="toc-number">3.8.</span> <span class="toc-text">绘图函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0"><span class="toc-number">3.9.</span> <span class="toc-text">自定义函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%AE%9E%E6%88%98"><span class="toc-number">4.</span> <span class="toc-text">数据分析实战</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92"><span class="toc-number">4.1.</span> <span class="toc-text">线性回归</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92"><span class="toc-number">4.1.1.</span> <span class="toc-text">简单线性回归</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E9%A1%B9%E5%BC%8F%E5%9B%9E%E5%BD%92"><span class="toc-number">4.1.2.</span> <span class="toc-text">多项式回归</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E5%85%83%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92"><span class="toc-number">4.1.3.</span> <span class="toc-text">多元线性回归</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BA%A4%E4%BA%92%E9%A1%B9%E7%9A%84%E5%A4%9A%E5%85%83%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92"><span class="toc-number">4.1.4.</span> <span class="toc-text">有交互项的多元线性回归</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9E%E5%BD%92%E8%AF%8A%E6%96%AD"><span class="toc-number">4.1.5.</span> <span class="toc-text">回归诊断</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ANOVA"><span class="toc-number">4.2.</span> <span class="toc-text">ANOVA</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#one-way-ANOVA"><span class="toc-number">4.2.1.</span> <span class="toc-text">one-way ANOVA</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#two-way-ANOVA"><span class="toc-number">4.2.2.</span> <span class="toc-text">two-way ANOVA</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E5%85%83%E6%96%B9%E5%B7%AE%E5%88%86%E6%9E%90"><span class="toc-number">4.2.3.</span> <span class="toc-text">多元方差分析</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Student%E2%80%99s-t-test-2"><span class="toc-number">4.3.</span> <span class="toc-text">Student’s t test</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%9F%E6%95%88%E5%88%86%E6%9E%90"><span class="toc-number">4.4.</span> <span class="toc-text">功效分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%BF%E4%B9%89%E7%BA%BF%E6%80%A7%E6%A8%A1%E5%9E%8B"><span class="toc-number">4.5.</span> <span class="toc-text">广义线性模型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#R%E8%AF%AD%E8%A8%80%E4%BD%9C%E5%9B%BE"><span class="toc-number">5.</span> <span class="toc-text">R语言作图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E5%BD%A2%E5%9B%BE"><span class="toc-number">5.1.</span> <span class="toc-text">条形图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E6%9D%A1%E5%BD%A2%E5%9B%BE"><span class="toc-number">5.2.</span> <span class="toc-text">分组条形图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B4%E6%96%B9%E5%9B%BE"><span class="toc-number">5.3.</span> <span class="toc-text">直方图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%A3%E7%82%B9%E5%9B%BE"><span class="toc-number">5.4.</span> <span class="toc-text">散点图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A5%BC%E5%9B%BE"><span class="toc-number">5.5.</span> <span class="toc-text">饼图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%B1%E7%BA%BF%E5%9B%BE"><span class="toc-number">5.6.</span> <span class="toc-text">箱线图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%83%AD%E5%9B%BE"><span class="toc-number">5.7.</span> <span class="toc-text">热图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E8%A1%A8%E8%AE%BE%E7%BD%AE"><span class="toc-number">5.8.</span> <span class="toc-text">图表设置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%BE%E8%A1%A8%E5%8F%82%E6%95%B0"><span class="toc-number">5.8.1.</span> <span class="toc-text">图表参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%BE%E8%A1%A8%E9%A2%9C%E8%89%B2"><span class="toc-number">5.8.2.</span> <span class="toc-text">图表颜色</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9F%A6%E6%81%A9%E5%9B%BE"><span class="toc-number">5.9.</span> <span class="toc-text">韦恩图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%BC%E5%93%88%E9%A1%BF%E5%9B%BE"><span class="toc-number">5.10.</span> <span class="toc-text">曼哈顿图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%81%AB%E5%B1%B1%E5%9B%BE"><span class="toc-number">5.11.</span> <span class="toc-text">火山图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ggplot2%E4%BD%9C%E5%9B%BE"><span class="toc-number">6.</span> <span class="toc-text">ggplot2作图</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-list-ol"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/53490/" title="智齿 -2"><img src="https://th.wallhaven.cc/small/nr/nrd7xj.jpg" onerror='this.onerror=null,this.src="https://s2.loli.net/2022/08/22/M23IJ5Wvag8d4XA.png"' alt="智齿 -2"></a><div class="content"><a class="title" href="/posts/53490/" title="智齿 -2">智齿 -2</a><time datetime="2022-09-01T05:39:14.000Z" title="发布于 9 月 01 日 13:39:14">9 月 01 日</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/26947/" title="Butterfly 主题 Footer 美化，简洁大气"><img src="https://s2.loli.net/2022/08/29/DSF6KIQy5Rgkupn.jpg" onerror='this.onerror=null,this.src="https://s2.loli.net/2022/08/22/M23IJ5Wvag8d4XA.png"' alt="Butterfly 主题 Footer 美化，简洁大气"></a><div class="content"><a class="title" href="/posts/26947/" title="Butterfly 主题 Footer 美化，简洁大气">Butterfly 主题 Footer 美化，简洁大气</a><time datetime="2022-08-29T08:29:52.000Z" title="发布于 8 月 29 日 16:29:52">8 月 29 日</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/28191/" title="响应更迅速，去除 macOS Dock 栏显示和隐藏的延时"><img src="https://images.unsplash.com/photo-1560858275-933aa173847b?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1632&amp;q=80" onerror='this.onerror=null,this.src="https://s2.loli.net/2022/08/22/M23IJ5Wvag8d4XA.png"' alt="响应更迅速，去除 macOS Dock 栏显示和隐藏的延时"></a><div class="content"><a class="title" href="/posts/28191/" title="响应更迅速，去除 macOS Dock 栏显示和隐藏的延时">响应更迅速，去除 macOS Dock 栏显示和隐藏的延时</a><time datetime="2022-08-08T07:01:13.000Z" title="发布于 8 月 08 日 15:01:13">8 月 08 日</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/56172/" title="写在一周年"><img src="https://s2.loli.net/2022/07/29/pgzPG9s8QVRdUky.png" onerror='this.onerror=null,this.src="https://s2.loli.net/2022/08/22/M23IJ5Wvag8d4XA.png"' alt="写在一周年"></a><div class="content"><a class="title" href="/posts/56172/" title="写在一周年">写在一周年</a><time datetime="2022-07-25T14:20:23.000Z" title="发布于 7 月 25 日 22:20:23">7 月 25 日</time></div></div></div></div></div></div></main><footer id="footer"><div id="ah-footer"><div class="footer-group"><h3 class="footer-title">博客文章</h3><div class="footer-links"><a class="footer-item" href="/archives/" data-pjax-state="">全部文章</a><a class="footer-item" href="/tags/" data-pjax-state="">文章标签</a><a class="footer-item" href="/categories/" data-pjax-state="">文章分类</a></div></div><div class="footer-group"><h3 class="footer-title">学习笔记</h3><div class="footer-links"><a class="footer-item" href="/tags/R/" data-pjax-state="">R 语言</a><a class="footer-item" href="/tags/Python/" data-pjax-state="">Python</a><a class="footer-item" href="/tags/Linux/" data-pjax-state="">Linux</a></div></div><div class="footer-group"><h3 class="footer-title">博客链接</h3><div class="footer-links"><a class="footer-item" href="/friends/" data-pjax-state="">友链动态</a><a class="footer-item" href="/link/" data-pjax-state="">友情链接</a><a class="footer-item" href="/bb/" data-pjax-state="">哔哔点啥</a></div></div><div class="footer-group"><h3 class="footer-title">博客改造</h3><div class="footer-links"><a class="footer-item" href="/posts/43603/" data-pjax-state="">博客部署</a><a class="footer-item" href="/categories/博客魔改/" data-pjax-state="">博客魔改</a></div></div><div class="footer-group"><h3 class="footer-title">关于本站</h3><div class="footer-links"><a class="footer-item" href="/about/" data-pjax-state="">关于博主</a><a class="footer-item" href="/cc/" data-pjax-state="">版权协议</a><a class="footer-item" onclick="btf.scrollToDest(0,500)">回到顶部</a></div></div></div><div id="fotter-copyright" style="font-size:90%"><div class="copyrights"><span>Copyright © 2022 Aohuiliu.</span> <span>All rights reserved.</span></div><div class="framework-info"><span>Powered by</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">&</span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="输入关键字" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://npm.elemecdn.com/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><link rel="stylesheet" href="https://cdn.staticfile.org/KaTeX/0.15.3/katex.min.css"><script src="https://cdn.staticfile.org/KaTeX/0.15.3/contrib/copy-tex.min.js"></script><script>document.querySelectorAll("#article-container span.katex-display").forEach(a=>{btf.wrap(a,"div",{class:"katex-wrap"})})</script><script>(()=>{const t=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo-janedut.vercel.app",region:"",onCommentLoaded:function(){btf.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null))},o=()=>{"object"!=typeof twikoo?getScript("https://cdn.staticfile.org/twikoo/1.5.10/twikoo.all.min.js").then(t):setTimeout(t,0)};btf.loadComment(document.getElementById("twikoo-wrap"),o)})()</script></div><script async data-pjax src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/pace/1.2.4/pace.min.js"></script><script src="https://npm.elemecdn.com/pjax/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),"object"==typeof preloader&&preloader.initLoading(),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script></div><script data-pjax>function butterfly_swiper_injector_config(){var s=document.getElementById("recent-posts");console.log("已挂载butterfly_swiper"),s.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/22544/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://images.unsplash.com/photo-1475137979732-b349acb6b7e3?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=870&amp;q=80" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-04-27</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/22544/&quot;);" href="javascript:void(0);" alt="">折腾博客的思考🤔</a><div class="blog-slider__text">折腾各种博客平台和主题，真的有用吗？</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/22544/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/43603/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://s2.loli.net/2022/06/14/eWu4ZaFdBR73K6N.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-04-30</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/43603/&quot;);" href="javascript:void(0);" alt="">Hexo deploy shell script</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/43603/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/29090/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://images.unsplash.com/photo-1623474237394-055b5c5b9095?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1053&amp;q=80" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-05-31</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/29090/&quot;);" href="javascript:void(0);" alt="">【魔改】去除标签和分类页子页面的侧边栏</a><div class="blog-slider__text">去除 Butterfly 主题标签页和分类页子页面的侧边栏（aside）</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/29090/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/34995/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://s2.loli.net/2022/06/14/5KmJc84UNDiF7qd.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-05-05</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/34995/&quot;);" href="javascript:void(0);" alt="">Typora 自用主题修改 CSS</a><div class="blog-slider__text">主题是 Github 上的 Drake，默认就很好看，自己的做了一些修改。</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/34995/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/27153/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://s2.loli.net/2022/06/14/5wHfFZUlj6BTo2G.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-05-30</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/27153/&quot;);" href="javascript:void(0);" alt="">24 个 R 的高效操作</a><div class="blog-slider__text">R 中提升效率的小技巧</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/27153/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>')}for(var elist="undefined".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_swiper_injector_config()</script><script defer src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/Swiper/8.0.6/swiper-bundle.min.js"></script><script defer data-pjax src="/js/swiper_init.js"></script></body></html>