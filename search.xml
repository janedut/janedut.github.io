<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>洗澡随想</title>
      <link href="/posts/46595/"/>
      <url>/posts/46595/</url>
      
        <content type="html"><![CDATA[<p>想快点把数据处理完，把论文弄完，这样就可以回家了。最近开始想用 R 把图画了，但是我的 R 水平就可以说是约等于没有。然后就陷入了一个思维陷阱，越着急就越学不会，感到焦虑，不能冷静思考。然后跟 aohuiliu 发了点牢骚之后就去洗澡了。</p><p>洗了个澡冷静下来了（不知道为什么，洗澡的时候特别容易思考人生，经常有一些很精彩的想法，然后一出浴室就忘）。觉得反正自己只是喜欢 R 画图的效果，那么从我数据处理的需求来看，只需要会画散点图就能应付毕业论文的图了，最多再加一个曲线拟合。至于相对标准差，建立、处理 data frame，那些暂时都可以用 Excel 代劳，何况还有一些不能说的部分，需要一些所见即所得东西来帮忙。</p><p>吹头发的时候，觉得最近的状态虽然比以前是提高很多了，但是在一些特定的时段还是有些散漫，比如说刚起床、吃完饭、从外面回到宿舍，或者洗澡之后，进入一个专注的状态很难，很多时间就这样飞走了。一个精确到小时的计划是管不住我的这种散漫的，我非常清楚，总而言之不现实。</p><p>晚上这段时间我已想办法利用起来，具体措施就是在 18:30-21:30 限制 iPad 的屏幕使用时间，只允许使用 goodnote，和一些背单词的辅助软件，我发现自己背完单词之后就会变得专注，而从一个散漫的状态进入背单词的状态是对于我来说比较熟悉的转换，这样就可以比较自然地进入心流的状态。最近有的时候体会到了心流是什么感觉，但是这种状态从来没有延续到我写论文、学一些编程语言这种功利性很强的项目中。</p><p>我所说的功利性，也只不过是为了我未来的至少五年能少一点煎熬，属于是一些预判避险罢了。人不能事事顺心，也不能一直都处在舒适圈。或者二者叠加，总会迎来一些命运强加于自己的挑战。平时如果没有预见的能力也就算了，这个时候再不预见并未雨绸缪就属于是自寻死路了。</p><p>然后就是对自己的道德谴责。我知道，我早晚有一天会每天工作 13 小时以上的，或者说，我不得不。如果不这样，我就不能毕业。我也知道，我必须精进自己 coding，scientific writing 的能力，这也都是为了我能毕业。我必须成为一个会利用时间的、掌握这些必需技能的人，我掌握得越多，像开头所描述的那种窘境就越少。而我现在甚至还没有踏上正轨。计划、执行和专注是我现在所需要的，然而我几乎都没有，真是让人焦虑。</p><p>不过好在我现在多了一些观察自己的能力，也学会了一些反省自己的手段，进步的速度也是在一个合适的范围内。我不会追求一朝一夕的反转，我只希望我能每天都成熟一点点、沉稳一点点，最好每天都能聪明一点点，嘿嘿。</p>]]></content>
      
      
      <categories>
          
          <category> 猫猫专栏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随想 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python 学习笔记：正则表达式</title>
      <link href="/posts/38705/"/>
      <url>/posts/38705/</url>
      
        <content type="html"><![CDATA[<h1>语法</h1><p>正则表达式（regular expression，regex，RE）可以用来匹配、检索、分割和替换具有某种特征的字符串，如邮箱、IP 地址、电话号码等，使用方便，效率很高。</p><p>特点</p><ol><li>正则表达式能够凝练字符串的特征</li><li>是通用的字符串表达框架</li><li>是简洁表达一组字符串的表达式</li><li>可以判断某个字符串的特征归属，是否具有这个特征</li></ol><p>作用</p><ol><li><p>表达文本类型的特征</p></li><li><p>同时查找或替换一组字符串</p></li><li><p>匹配字符串的全部或部分</p></li></ol><p>正则表达式由字符和操作符构成，基本和常用的正则表达式操作符如下：</p><table><thead><tr><th>操作符</th><th>说明</th><th>例子</th></tr></thead><tbody><tr><td><code>.</code></td><td>表示任何单个字符</td><td></td></tr><tr><td><code>[]</code></td><td>给出单个字符的取值范围</td><td><code>[abc]</code>：a 或 b 或 c，<code>[a-z]</code>：a-z 单个字母</td></tr><tr><td><code>[^]</code></td><td>排除此取值范围</td><td><code>[^abc]</code>：非 a 或 b 或 c</td></tr><tr><td><code>*</code></td><td>前一个字符出现 <code>&gt;=0</code> 次</td><td><code>abc*</code>：ab、abc、abcc、abccc 等</td></tr><tr><td><code>+</code></td><td>前一个字符出现 <code>&gt;=1</code> 次</td><td><code>abc+</code>：abc、abcc、abccc 等</td></tr><tr><td><code>?</code></td><td>前一个字符出现 <code>0</code> 或 <code>1</code> 次</td><td><code>abc?</code>：ab、abc</td></tr><tr><td>`</td><td>`</td><td>左右表达式中的一个</td></tr><tr><td><code>&#123;m&#125;</code></td><td>前一个字符出现 <code>m</code> 次</td><td><code>ab&#123;2&#125;c</code>：abbc</td></tr><tr><td><code>&#123;n,&#125;</code></td><td>前一个字符出现 <code>&gt;=n</code> 次</td><td><code>ab&#123;2,&#125;c</code>：abbc、abbbc、abbbbc 等</td></tr><tr><td><code>&#123;m,n&#125;</code></td><td>前一个字符出现 <code>m-n</code> 次（含 <code>n</code>）</td><td><code>ab&#123;1,3&#125;c</code>：abc、abbc、abbbc</td></tr><tr><td><code>^</code></td><td>匹配字符串的开头</td><td><code>^123</code>：字符串以 abc 开头</td></tr><tr><td><code>$</code></td><td>匹配字符串的结尾</td><td><code>123$</code>：字符串以 123 结尾</td></tr><tr><td><code>()</code></td><td>分组标记，内部只能使用 `</td><td>`</td></tr><tr><td><code>\d</code></td><td>数字，等价于 <code>[0-9]</code></td><td></td></tr><tr><td><code>\w</code></td><td>单词字符，等价于 <code>[A-Za-z0-9_]</code></td><td></td></tr><tr><td><code>\D</code></td><td>数字除外</td><td></td></tr><tr><td><code>\W</code></td><td>数字字母下划线除外</td><td></td></tr><tr><td><code>\s</code></td><td>任何空白字符，空格、制表符、换页符等。</td><td>等价于 <code>[\f\n\r\t\v]</code></td></tr><tr><td><code>\S</code></td><td>任何非空白字符</td><td>等价于 <code>[^\f\n\r\t\v]</code></td></tr><tr><td><code>\</code></td><td>转义字符</td><td><code>\.</code>：普通的“.”</td></tr><tr><td><code>*?</code></td><td>惰性匹配上一个</td><td><code>“AbcE123”</code>, <code>'[0-9]*?'</code>：<code>''</code></td></tr><tr><td><code>+？</code></td><td>惰性匹配上一个</td><td><code>“AbcE123”</code>, <code>'[0-9]+?'</code>：<code>'1'</code></td></tr></tbody></table><p>经典实例</p><p><code>^[A-Za-z]+$</code>：由字母组成的字符串</p><p><code>^[A-Za-z]+$</code>：由字母和数字组成的字符串</p><p><code>^-?[1-9]\d*$</code>：整数</p><p><code>^[1-9]\d*$</code>：正整数</p><p><code>[\u4e00-\u9fa5]</code>：匹配中文字符</p><h1>re 库的使用</h1><h2 id="re-compile-函数"><code>re.compile()</code> 函数</h2><p><code>re.compile(pattern, flags=0)</code></p><p><code>flags</code>：可选，表示匹配模式</p><ul><li><code>re.I</code>：忽略大小写</li><li><code>re.L</code>：表示特殊字符集 <code>\w, \W, \b, \B, \s, \S</code> 依赖于当前环境</li><li><code>re.M</code>：多行模式</li><li><code>re.S</code>：使得 <code>.</code> 包括换行符在内的任意字符（<code>.</code> 默认不包括换行符）</li><li><code>re.U</code>：表示特殊字符集 <code>\w, \W, \b, \B, \d, \D, \s, \S</code> 依赖于 Unicode  字符属性数据库</li><li><code>re.X</code>：为了增加可读性，忽略空格和 # 后面的注释</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">string = <span class="string">&#x27;112AbCdEf122&#x27;</span></span><br><span class="line">pattern = re.<span class="built_in">compile</span>(<span class="string">&#x27;[a-z]+&#x27;</span>, re.I)</span><br><span class="line">re.search(pattern, string)</span><br><span class="line">&lt;re.Match <span class="built_in">object</span>; span=(<span class="number">3</span>, <span class="number">9</span>), match=<span class="string">&#x27;AbCdEf&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><p><code>re.I</code> 和 <code>re.M</code> 使用较多。</p><h2 id="re-match-函数"><code>re.match()</code> 函数</h2><p><code>re.match(pattern, string, flags=0)</code></p><p>只匹配字符串的<strong>开始</strong>，如果字符串开始不符合正则表达式，则匹配失败，函数返回 <code>None</code>，匹配成功时返回 <code>match</code> 对象。</p><p><code>match</code> 对象常用方法：</p><ul><li><code>group()</code>：返回匹配的字符串</li><li><code>start()</code>：返回匹配字符串开始的位置</li><li><code>end()</code>：返回匹配字符串结束的位置</li><li><code>span ()</code>：返回开始和结束位置</li><li><code>groups()</code>：返回所有匹配的子串</li></ul><p>前 4 个方法默认参数值为 0，可以手动设置为 1、2 等，对应选择出子表达式的内容。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">string = <span class="string">&#x27;abcFGc123&#x27;</span></span><br><span class="line">pattern = re.<span class="built_in">compile</span>(<span class="string">&#x27;[a-z]+&#x27;</span>, re.I)</span><br><span class="line">match = re.match(pattern, string)</span><br><span class="line">match.group()</span><br><span class="line"><span class="string">&#x27;abcFGc&#x27;</span></span><br><span class="line">match.start()</span><br><span class="line"><span class="number">0</span></span><br><span class="line">match.end()</span><br><span class="line"><span class="number">6</span></span><br><span class="line">match.span()</span><br><span class="line">(<span class="number">0</span>, <span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">string = <span class="string">&#x27;11abcFGc123&#x27;</span></span><br><span class="line">match = re.match(pattern, string)</span><br><span class="line"><span class="built_in">type</span>(match)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;NoneType&#x27;</span>&gt; 只匹配字符串开始</span><br></pre></td></tr></table></figure><h2 id="re-search-函数"><code>re.search()</code> 函数</h2><p><code>re.search(pattern, string, flags=0)</code></p><p>与 <code>re.match()</code> 不同的是，<code>re.search()</code> 匹配<strong>整个字符串</strong>，直到找到一个匹配。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">string = <span class="string">&#x27;11abcFGc123&#x27;</span></span><br><span class="line">match = re.search(pattern, string)</span><br><span class="line"><span class="built_in">type</span>(match)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;re.Match&#x27;</span>&gt;</span><br><span class="line">match.group()</span><br><span class="line"><span class="comment"># &#x27;abcFGc&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="re-findall-函数"><code>re.findall()</code> 函数</h2><p><code>re.findall(pattern, string, flags=0)</code></p><ul><li><code>string</code>: 待匹配的字符串</li><li><code>pos</code>：可选参数，指定字符串的起始位置，默认为 0</li><li><code>endpos</code>：可选参数，指定字符串的结束位置，默认为字符串的长度</li></ul><p>以列表形式返回所有匹配的字符串：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">re.findall(<span class="string">r&#x27;[0-9]+&#x27;</span>, <span class="string">&#x27;2022年05月05日，阴&#x27;</span>)</span><br><span class="line">[<span class="string">&#x27;2022&#x27;</span>, <span class="string">&#x27;05&#x27;</span>, <span class="string">&#x27;05&#x27;</span>]</span><br></pre></td></tr></table></figure><h2 id="re-finditer-函数"><code>re.finditer()</code> 函数</h2><p><code>re.finditer(pattern, string, flags=0)</code></p><p>返回含有所有 <code>match</code> 对象的可迭代对象：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">temp = <span class="string">&#x27;2022年05月05日，阴&#x27;</span></span><br><span class="line">it = re.finditer(<span class="string">r&#x27;\d+&#x27;</span>, temp)</span><br><span class="line"><span class="keyword">for</span> match <span class="keyword">in</span> it:</span><br><span class="line">    <span class="built_in">print</span>(match, <span class="built_in">type</span>(match), match.group())</span><br><span class="line">&lt;re.Match <span class="built_in">object</span>; span=(<span class="number">0</span>, <span class="number">4</span>), match=<span class="string">&#x27;2022&#x27;</span>&gt; &lt;<span class="keyword">class</span> <span class="string">&#x27;re.Match&#x27;</span>&gt; <span class="number">2022</span></span><br><span class="line">&lt;re.Match <span class="built_in">object</span>; span=(<span class="number">5</span>, <span class="number">7</span>), match=<span class="string">&#x27;05&#x27;</span>&gt; &lt;<span class="keyword">class</span> <span class="string">&#x27;re.Match&#x27;</span>&gt; 05</span><br><span class="line">&lt;re.Match <span class="built_in">object</span>; span=(<span class="number">8</span>, <span class="number">10</span>), match=<span class="string">&#x27;05&#x27;</span>&gt; &lt;<span class="keyword">class</span> <span class="string">&#x27;re.Match&#x27;</span>&gt; 05</span><br></pre></td></tr></table></figure><h2 id="re-sub-函数"><code>re.sub()</code> 函数</h2><p><code>re.sub(pattern, repl, string, count=0, flags=0)</code></p><ul><li><code>pattern</code>：正则中的模式字符串。</li><li><code>repl</code>：替换的字符串，也可为一个函数。</li><li><code>string</code>：要被查找替换的原始字符串。</li><li><code>count</code>：模式匹配后替换的最大次数，默认0 表示替换所有的匹配</li></ul><p>匹配字符串并替换：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">re.sub(<span class="string">r&#x27;\d+&#x27;</span>, <span class="string">&#x27;某&#x27;</span>, <span class="string">&#x27;2022年05月05日，阴&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;某年某月某日，阴&#x27;</span></span><br></pre></td></tr></table></figure><p>练习</p><ol><li><p><code>&quot;2004-959-559 # 这是一个国外电话号码&quot;</code>（1）去掉#和它之后的内容，（2）只保留数字</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">re.sub(<span class="string">r&#x27;#+.+&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;2004-959-559 # 这是一个国外电话号码&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;2004-959-559 &#x27;</span></span><br><span class="line">re.sub(<span class="string">r&#x27;[^\d]+&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;2004-959-559 # 这是一个国外电话号码&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;2004959559&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>将 <code>&quot;aabccaaadaaaa&quot;</code> 中连续的 a 替换成 b，替换后结果为 <code>bbccbdb</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">re.sub(<span class="string">r&#x27;a+&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;aabccaaadaaaa&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;bbccbdb&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p><code>&quot;A23G4HFD567&quot;</code>，将匹配的数字乘以 2</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">   </span><br></pre></td></tr></table></figure></li></ol><h2 id="re-split-函数"><code>re.split()</code> 函数</h2><p><code>re.split(pattern, string, maxsplit=0, flags=0)</code></p><ul><li><code>pattern</code>：正则中的模式字符串</li><li><code>string</code>：要分割的字符串</li><li><code>maxsplit</code>：可选，分隔次数，<code>maxsplit=1</code> 分隔一次，默认为 0，不限制次数</li><li><code>flags</code>：可选，表示匹配模式</li></ul><p>匹配后分割字符串：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">re.split(<span class="string">r&#x27;\d+&#x27;</span>, <span class="string">&#x27;2022年05月05日，阴&#x27;</span>)</span><br><span class="line">[<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;年&#x27;</span>, <span class="string">&#x27;月&#x27;</span>, <span class="string">&#x27;日，阴&#x27;</span>]</span><br><span class="line">re.split(<span class="string">r&#x27;\d+&#x27;</span>, <span class="string">&#x27;2022年05月05日，阴&#x27;</span>, maxsplit=<span class="number">1</span>)</span><br><span class="line">[<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;年05月05日，阴&#x27;</span>]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 学习笔记 </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日记：认真颓废的一天</title>
      <link href="/posts/63842/"/>
      <url>/posts/63842/</url>
      
        <content type="html"><![CDATA[<p>从来没有如此专注地颓废了。</p><p>核酸打破了我已设定好的日程，加上昨晚睡的并不好，早上没能去运动。背单词只背了 15 分钟，就下去吃早饭了。回来之后看 b 站，看 met gala，看女明星争奇斗艳，麻辣鸡太搞笑了，哈哈哈哈哈哈，Queen S 一如既往完美。让我惊艳的是 Alicia keys 那套把纽约夜景穿上身的 look。<br><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/image-20220506083903281.png" style="zoom:80%;" /></p><p>中午吃撑，回来睡 2 小时半梦半醒的午觉，起来根本没想着去上班，没啥好上的。找 @aohuiliu 去散步，很开心，在丁香树下接了吻，玩了双杠和跳绳，情人坡很适合野餐。<br><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/image-20220506084035371.png" style="zoom:80%;" /></p><p>早早吃了晚饭，回来写日记。<br>唉，一会儿写写论文吧。好烦啊，我恨 pms！</p>]]></content>
      
      
      <categories>
          
          <category> 猫猫专栏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typora 自用主题修改 CSS</title>
      <link href="/posts/34995/"/>
      <url>/posts/34995/</url>
      
        <content type="html"><![CDATA[<h2 id="主题">主题</h2><p>主题是 Github 上的 <a href="https://github.com/liangjingkanji/DrakeTyporaTheme">Drake</a>，默认就很好看，根据自己的需求做了一些修改。</p><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://raw.githubusercontent.com/liangjingkanji/DrakeTyporaTheme/master/img/thumbnail-light.png" style="zoom:80%;" /><h2 id="自定义修改-CSS">自定义修改 CSS</h2><p>在 Typora 的主题文件夹下新建一个 <code>base.user.css</code> 文件，Typora 每次启动都会加载这个文件。</p><p>修改内容如下：</p><ul><li>H1 左对齐</li><li>去除 H2 底部横线</li><li>代码块增加圆角和描边</li><li>文档宽度减小</li><li>公式大小缩小</li><li>段落改为两端对齐</li><li>行内代码增加背景</li><li>图片加上圆角</li><li>滚动条圆角和颜色修改</li></ul><p>CSS 源代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h2</span> <span class="selector-class">.md-plain</span> &#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.md-fences</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="built_in">var</span>(--md-char-color);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#write</span> &#123;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">850px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.MathJax</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: justify;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">code</span>, tt &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--blockquote-bg-color);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1px</span> <span class="number">3px</span> <span class="number">2.5px</span> <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--md-char-color);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="自动编号">自动编号</h2><p>标题自动编号，代码来自 <a href="mailto:lpzmail@163.com">LPZ</a>。</p><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/image-20220505182526289.png" style="zoom:80%;" /><p>完整代码如下：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 添加自动序号样式 */</span></span><br><span class="line"><span class="selector-id">#write</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: h2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: h2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: h3;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h3</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: h4;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h4</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: h5;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h5</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: h6;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h2</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">counter-increment</span>: h2;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">counter</span>(h2) <span class="string">&quot;  &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h3</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-tag">h3</span><span class="selector-class">.md-focus</span><span class="selector-class">.md-heading</span><span class="selector-pseudo">:before</span> &#123; <span class="comment">/** override the default style for focused headings */</span></span><br><span class="line">  <span class="attribute">counter-increment</span>: h3;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(h3) <span class="string">&quot;  &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h4</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-tag">h4</span><span class="selector-class">.md-focus</span><span class="selector-class">.md-heading</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">counter-increment</span>: h4;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(h4) <span class="string">&quot;  &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h5</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-tag">h5</span><span class="selector-class">.md-focus</span><span class="selector-class">.md-heading</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">counter-increment</span>: h5;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(h4) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(h5) <span class="string">&quot;  &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h6</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-tag">h6</span><span class="selector-class">.md-focus</span><span class="selector-class">.md-heading</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">counter-increment</span>: h6;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(h4) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(h5) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(h6) <span class="string">&quot;  &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** override the default style for focused headings */</span></span><br><span class="line"><span class="selector-id">#write</span>&gt;<span class="selector-tag">h3</span><span class="selector-class">.md-focus</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-id">#write</span>&gt;<span class="selector-tag">h4</span><span class="selector-class">.md-focus</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-id">#write</span>&gt;<span class="selector-tag">h5</span><span class="selector-class">.md-focus</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-id">#write</span>&gt;<span class="selector-tag">h6</span><span class="selector-class">.md-focus</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-tag">h3</span><span class="selector-class">.md-focus</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-tag">h4</span><span class="selector-class">.md-focus</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-tag">h5</span><span class="selector-class">.md-focus</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-tag">h6</span><span class="selector-class">.md-focus</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: inherit;</span><br><span class="line">  <span class="attribute">border</span>: inherit;</span><br><span class="line">  <span class="attribute">border-radius</span>: inherit;</span><br><span class="line">  <span class="attribute">position</span>: inherit;</span><br><span class="line">  <span class="attribute">left</span>: initial;</span><br><span class="line">  <span class="attribute">float</span>: none;</span><br><span class="line">  <span class="attribute">top</span>: initial;</span><br><span class="line">  <span class="attribute">font-size</span>: inherit;</span><br><span class="line">  <span class="attribute">padding-left</span>: inherit;</span><br><span class="line">  <span class="attribute">padding-right</span>: inherit;</span><br><span class="line">  <span class="attribute">vertical-align</span>: inherit;</span><br><span class="line">  <span class="attribute">font-weight</span>: inherit;</span><br><span class="line">  <span class="attribute">line-height</span>: inherit;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 自定义强制换号符，使得在导出PDF 或打印时强制换行 */</span></span><br><span class="line"><span class="keyword">@media</span> print &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 这是自定义标签, 在需要换行的地方插入：&lt;pb&gt; */</span></span><br><span class="line">  pb &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">page-break-after</span>: always;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">page-break-before</span>: always;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">h1</span><span class="selector-pseudo">:first</span>-of-type &#123;</span><br><span class="line">    <span class="attribute">page-break-before</span>: avoid;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 完成的 Task 添加删除线 */</span></span><br><span class="line"><span class="selector-class">.task-list-done</span> &#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: line-through;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#777</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.task-list-not-done</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 添加键盘样式 */</span></span><br><span class="line"><span class="selector-tag">kbd</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: inset <span class="number">0</span> -<span class="number">2px</span> <span class="number">0</span> <span class="number">#c6cbd1</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* TOC 中隐藏 H1 和 H6 */</span></span><br><span class="line"><span class="selector-class">.md-toc-h1</span>, <span class="selector-class">.md-toc-h6</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 添加 TOC 自动序号样式 */</span></span><br><span class="line"><span class="selector-class">.md-toc-content</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: toc-h2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h1</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: toc-h2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h2</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: toc-h3;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h3</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: toc-h4;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h4</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: toc-h5;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h5</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: toc-h6;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-content</span> <span class="selector-class">.md-toc-h2</span> <span class="selector-tag">a</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">counter-increment</span>: toc-h2;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">counter</span>(toc-h2) <span class="string">&quot;  &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-content</span> <span class="selector-class">.md-toc-h3</span> <span class="selector-tag">a</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">counter-increment</span>: toc-h3;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">counter</span>(toc-h2) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(toc-h3) <span class="string">&quot;  &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-content</span> <span class="selector-class">.md-toc-h4</span> <span class="selector-tag">a</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">counter-increment</span>: toc-h4;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">counter</span>(toc-h2) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(toc-h3) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(toc-h4) <span class="string">&quot;  &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-content</span> <span class="selector-class">.md-toc-h5</span> <span class="selector-tag">a</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">counter-increment</span>: toc-h5;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">counter</span>(toc-h2) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(toc-h3) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(toc-h4) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(toc-h5) <span class="string">&quot;  &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-content</span> <span class="selector-class">.md-toc-h6</span> <span class="selector-tag">a</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">counter-increment</span>: toc-h6;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">counter</span>(toc-h2) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(toc-h3) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(toc-h4) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(toc-h5) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(toc-h6) <span class="string">&quot;  &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 侧边栏自动编号 */</span></span><br><span class="line"><span class="selector-class">.outline-content</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: outline-h2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h1</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: outline-h2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h2</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: outline-h3;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h3</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: outline-h4;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h4</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: outline-h5;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h5</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: outline-h6;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-content</span> <span class="selector-class">.outline-h2</span> <span class="selector-class">.outline-label</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">counter-increment</span>: outline-h2;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">counter</span>(outline-h2) <span class="string">&quot;  &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-content</span> <span class="selector-class">.outline-h3</span> <span class="selector-class">.outline-label</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">counter-increment</span>: outline-h3;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">counter</span>(outline-h2) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(outline-h3) <span class="string">&quot;  &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-content</span> <span class="selector-class">.outline-h4</span> <span class="selector-class">.outline-label</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">counter-increment</span>: outline-h4;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">counter</span>(outline-h2) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(outline-h3) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(outline-h4) <span class="string">&quot;  &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-content</span> <span class="selector-class">.outline-h5</span> <span class="selector-class">.outline-label</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">counter-increment</span>: outline-h5;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">counter</span>(outline-h2) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(outline-h3) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(outline-h4) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(outline-h5) <span class="string">&quot;  &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-content</span> <span class="selector-class">.outline-h6</span> <span class="selector-class">.outline-label</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">counter-increment</span>: outline-h6;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">counter</span>(outline-h2) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(outline-h3) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(outline-h4) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(outline-h5) <span class="string">&quot;.&quot;</span><span class="built_in">counter</span>(outline-h6) <span class="string">&quot;  &quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我真的想毕业</title>
      <link href="/posts/42986/"/>
      <url>/posts/42986/</url>
      
        <content type="html"><![CDATA[<p><a href="https://mp.weixin.qq.com/s/oWh3NQJhlwsvBJBwQ3lFDw">Origin</a></p><h2 id="实验设计——“不战而屈人之兵”">实验设计——“不战而屈人之兵”</h2><ol><li>积累点子：读文献将“思想火花”记在本子上，多收集几个，以备后续和老师讨论排除。</li><li>排除：标准是这个点子做完实验后能否形成论文（无论成败与否），重点考察其创新性和所需时间（最好一年之内能做完）。可以选择和老师讨论，或者先用<strong>少量时间</strong>对几个点进行测试，然后选一个点。</li><li>实验设计：标准是一组数据能否形成一张图。</li></ol><h2 id="不要只研究参数对结果的影响">不要只研究参数对结果的影响</h2><p>科研是设定<strong>模型体系</strong>，用<strong>有限实验</strong>，说明现象和规律，探讨现象背后的原因。</p><h2 id="做实验——“活要见人，死要见尸”">做实验——“活要见人，死要见尸”</h2><ol><li>及时分析数据，处理数据，与老师讨论。<strong>实验要做对，确保数据重复性和可靠性</strong></li><li>对于“负面实验结果”：不要着急弃掉样品/数据，分析原因/合理解释也能发论文，如果不能，也可以为新的实验设计提供信息。</li><li>及时处理数据，才能及时补充实验</li></ol><h2 id="时间管理">时间管理</h2><ol><li>文献在实验过程中穿插读，不用读完 1000 篇才开始实验，在不同阶段阅读重点不同。</li><li>不要同时做几个课题</li><li>不要只测数据，而不整理论文，阶段性论文用来证明自己的进度。</li><li>合理安排：等数据时可以思考如何解释数据也思考后续实验的推进，也可以写论文或者做别的实验。</li></ol><h2 id="与导师">与导师</h2><ol><li>论文整体完成后，再交老师修改</li><li><strong>开学一定要先问清博士毕业要求</strong></li></ol>]]></content>
      
      
      <categories>
          
          <category> 猫猫专栏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随想 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R 学习笔记：主成分和因子分析</title>
      <link href="/posts/18522/"/>
      <url>/posts/18522/</url>
      
        <content type="html"><![CDATA[<p>若数据集变量过多，其中的交互关系可能很复杂。主成分分析和因子分析是两种用来探索和简化多变量复杂关系的常用方法，它们之间有联系也有区别。</p><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/image-20220504155047610.png" style="zoom: 50%;" /><h1>主成分分析</h1><p>主成分分析（Principal Component Analysis，PCA），是一种数据降维技巧，能够将大量的相关变量转化为一组很少的不相关变量，即主成分。例如，使用 PCA 将 30 个相关的环境变量（可能冗余）转化为 5 个无关的成分变量，并且尽可能地保留原始数据集的信息。</p><p>主成分是对原始变量重新进行线性组合，将原先众多的，具有一定相关性的指标，重新组合为一组新的，相互独立的综合指标。PCA 的目标是用一组较少的独立变量代替大量相关变量，同时尽可能保留初始变量的信息，这些推到所得的变量称主成分，它们是观测变量的线性组合。如第一主成分为：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><msub><mi>C</mi><mn>1</mn></msub><mo>=</mo><msub><mi>a</mi><mn>1</mn></msub><msub><mi>X</mi><mn>1</mn></msub><mo>=</mo><msub><mi>a</mi><mn>2</mn></msub><msub><mi>X</mi><mn>2</mn></msub><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>+</mo><msub><mi>a</mi><mi>k</mi></msub><msub><mi>X</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">PC_1=a_1X_1=a_2X_2+...+a_kX_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">...</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><msub><mi>C</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">PC_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 个观测变量的加权组合，对初始变量集的方差解释性最大。同理第二组成份 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><msub><mi>C</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">PC_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 也是初始变量的线性组合，但对方差的解释性排第二，同时与 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><msub><mi>C</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">PC_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> <strong>不相关</strong>。变量线性组合的权重由最大化各主成分的方差解释度来确定。其余的主成分以此类推，每一个主成分都最大化它对方差的解释程度，同时与其他所有主成分都不相关。因此理论上，可以选择和初始变量数相同的主成分，但并不实用。</p><p>R 中自带 <code>princomp()</code> 和 <code>factanal()</code> 函数可以进行 PCA 和 EFA，但功能比较简单。一般使用 <code>psych</code> 包中的函数代替。</p><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/image-20220504155902402.png" style="zoom: 80%;" /><h2 id="主成分分析流程">主成分分析流程</h2><p>主成分分析和因子分析的流程类似：</p><ol><li>数据预处理：可以输入原始数据或相关系数矩阵，若输入初始数据，函数会自动计算相关系数矩阵</li><li>选择分析模型：判断是 PCA（数据降维）还是 EFA（潜在结构），若选择 EFA，还需要选择一种估计因子模型的方法</li><li>判断主成分/因子个数</li><li>选择主成分/因子</li><li>旋转主成分/因子</li><li>解释结果</li><li>计算主成分/因子得分</li></ol><h3 id="判断主成分个数">判断主成分个数</h3><p>如何判断 PCA 中需要多少个主成分？以下是一些准则：</p><ul><li>根据先验经验和理论知识判断个数</li><li>根据要解释变量方差的积累值的阈值来判断个数</li><li>通过检查变量间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>×</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">k × k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 的相关系数矩阵来判断个数</li></ul><p>最常见的是基于特征值的方法。每个主成分都与相关系数矩阵的特征值相关联，第一主成分与最大的特征值相关联，第二主成分与第二大的特征值相关联，以此类推。Kaiser-harris 准则建议保留特征值大于 1 的主成分，特征值小于1的成分所解释的方差比包含在单个变量中的方差更少。Cattell 碎石检验则绘制了特征值与主成分数的图形。这类图形可以清晰地展示图形弯曲状况，在图形变化最大处之上的主成分都可保留。最后，还可以进行模拟，依据与初始矩阵相同大小的随机数据矩阵来判断要提取的特征值。若基于真实数据的某个特征值大于一组随机数据矩阵相应的平均特征值，那么该主成分可以保留。该方法称作平行分析。</p><p>利用 <code>fa.parallel()</code> 函数，可以同时对三种特征值判别准则进行评价，即 Kaiser-harris 准则、Cattell 碎石检验和平行分析。函数用法如下：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fa.parallel<span class="punctuation">(</span>x<span class="punctuation">,</span> n.obs<span class="operator">=</span><span class="literal">NULL</span><span class="punctuation">,</span> fm<span class="operator">=</span><span class="string">&quot;minres&quot;</span><span class="punctuation">,</span> fa<span class="operator">=</span><span class="string">&quot;both&quot;</span><span class="punctuation">,</span> nfactors<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span> n.iter<span class="operator">=</span><span class="number">20</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h3 id="提取主成分">提取主成分</h3><p>使用 <code>principal()</code> 函数可以根据原始数据矩阵或相关系数矩阵做主成分分析。函数用法如下：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">principal<span class="punctuation">(</span>r<span class="punctuation">,</span> nfactors<span class="operator">=</span><span class="punctuation">,</span> rotate<span class="operator">=</span><span class="punctuation">,</span> scores<span class="operator">=</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><p>其中：</p><ul><li>r：相关系数矩阵或原始数据矩阵</li><li>nfactors：设定主成分数（默认为 1 ）</li><li>rotate：指定旋转的方法（默认 varimax 最大方差旋转）</li><li>scores：设定是否需要计算主成分得分（默认不需要）</li></ul><h3 id="主成分旋转">主成分旋转</h3><p>旋转是一系列将成分载荷阵变得更容易解释的数学方法，它们尽可能地对成分<strong>去噪</strong>。旋转方法有两种：</p><ol><li>正交旋转：使选择的成分保持不相关</li><li>斜交旋转：使选择的成分变得相关</li></ol><p>旋转方法也会依据去噪定义的不同而不同。最流行的正交旋转是方差极大旋转，它试图对载荷阵的列进行去噪，使得每个成分只是由一组<strong>有限</strong>的变量来解释（即载荷阵每列只有少数几个很大的载荷，其他都是很小的载荷）。</p><h3 id="获得主成分得分">获得主成分得分</h3><p>我们的最终目标是用一组较少的变量替换一组较多的相关变量，因此，还需要获取每个观测在成分上的得分。</p><h2 id="实例">实例</h2><h3 id="例-1：USJudgeRatings">例 1：<code>USJudgeRatings</code></h3><p><code>psych</code> 包中的 <code>USAJudgeRatings</code> 数据集包含了律师对美国高等法院法官的评分，包含 43 个观测，12 个变量。就可以使用 PCA 对这 12 个变量进行分析，提取出主成分。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">install.packages<span class="punctuation">(</span><span class="string">&#x27;psych&#x27;</span><span class="punctuation">)</span></span><br><span class="line">library<span class="punctuation">(</span>psych<span class="punctuation">)</span></span><br><span class="line">head<span class="punctuation">(</span>USJudgeRatings<span class="punctuation">,</span> n<span class="operator">=</span><span class="number">3</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment">#                CONT INTG DMNR DILG CFMG DECI PREP FAMI ORAL WRIT PHYS RTEN</span></span><br><span class="line"><span class="comment"># AARONSON,L.H.   5.7  7.9  7.7  7.3  7.1  7.4  7.1  7.1  7.1  7.0  8.3  7.8</span></span><br><span class="line"><span class="comment"># ALEXANDER,J.M.  6.8  8.9  8.8  8.5  7.8  8.1  8.0  8.0  7.8  7.9  8.5  8.7</span></span><br><span class="line"><span class="comment"># ARMENTANO,A.J.  7.2  8.1  7.8  7.8  7.5  7.6  7.5  7.5  7.3  7.4  7.9  7.8</span></span><br></pre></td></tr></table></figure><p><strong>确定主成分个数</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fa.parallel<span class="punctuation">(</span>USJudgeRatings<span class="punctuation">,</span> fa<span class="operator">=</span><span class="string">&#x27;pc&#x27;</span><span class="punctuation">,</span> n.iter <span class="operator">=</span> <span class="number">100</span><span class="punctuation">)</span></span><br><span class="line">principal<span class="punctuation">(</span>USJudgeRatings<span class="punctuation">,</span> nfactors <span class="operator">=</span> <span class="number">1</span><span class="punctuation">,</span> rotate <span class="operator">=</span> <span class="string">&#x27;none&#x27;</span><span class="punctuation">,</span> scores <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><p>结果如下</p><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/平行分析结果.png" alt="平行分析结果" style="zoom:80%;" /><p>线段为基于观测特征值的碎石检验，虚线为根据 100 个随机数矩阵推导出来的特征值均值。三者均表明，只需保留一个主成分即可。</p><p><strong>提取主成分</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">pc <span class="operator">&lt;-</span> principal<span class="punctuation">(</span>USJudgeRatings<span class="punctuation">,</span> nfactors <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line">pc</span><br><span class="line"><span class="comment"># Principal Components Analysis</span></span><br><span class="line"><span class="comment"># Call: principal(r = USJudgeRatings, nfactors = 1)</span></span><br><span class="line"><span class="comment"># Standardized loadings (pattern matrix) based upon correlation matrix</span></span><br><span class="line"><span class="comment">#        PC1      h2     u2 com</span></span><br><span class="line"><span class="comment"># CONT -0.01 9.6e-05 0.9999   1</span></span><br><span class="line"><span class="comment"># INTG  0.92 8.4e-01 0.1563   1</span></span><br><span class="line"><span class="comment"># DMNR  0.91 8.3e-01 0.1660   1</span></span><br><span class="line"><span class="comment"># DILG  0.97 9.4e-01 0.0613   1</span></span><br><span class="line"><span class="comment"># CFMG  0.96 9.3e-01 0.0723   1</span></span><br><span class="line"><span class="comment"># DECI  0.96 9.2e-01 0.0764   1</span></span><br><span class="line"><span class="comment"># PREP  0.98 9.7e-01 0.0299   1</span></span><br><span class="line"><span class="comment"># FAMI  0.98 9.5e-01 0.0469   1</span></span><br><span class="line"><span class="comment"># ORAL  1.00 9.9e-01 0.0091   1</span></span><br><span class="line"><span class="comment"># WRIT  0.99 9.8e-01 0.0195   1</span></span><br><span class="line"><span class="comment"># PHYS  0.89 8.0e-01 0.2014   1</span></span><br><span class="line"><span class="comment"># RTEN  0.99 9.7e-01 0.0275   1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#                  PC1</span></span><br><span class="line"><span class="comment"># SS loadings    10.13</span></span><br><span class="line"><span class="comment"># Proportion Var  0.84</span></span><br></pre></td></tr></table></figure><p>此处，获取一个未旋转的主成分。由于PCA只对<strong>相关系数矩阵</strong>进行分析，在获取主成分前，原始数据将会被自动转换为相关系数矩阵。</p><p>PC1 栏包含了成分载荷，指观测变量与主成分的相关系数。如果提取不止一个主成分，那么还将会有 PC2、PC3 等栏。成分载荷（component loadings）可用来解释主成分的含义。第一主成分（PC1）与每个变量都高度相关（除了第一个），也就是说，它是一个可用来进行一般性评价的维度。</p><p>h2 栏指成分公因子方差——主成分对每个变量的方差解释度。u2 栏指成分唯一性——方差无法被主成分解释的比例（即 1-h2）。例如，体能（PHYS）80% 的方差都可用第一主成分来解释，20% 不能。第一主成分对 ORAL 变量的解释性最好，对 CONT 变量的解释性则最差。</p><p>SS loadings 行包含了与主成分相关联的特征值，指的是与特定主成分相关联的标准化后的方差值（本例中，第一主成分的值为 10）。最后，Proportion Var 行表示的是每个主成分对整个数据集的解释程度。此处可以看到，第一主成分解释了 12 个变量 84% 的方差。</p><p><strong>获得主成分得分</strong></p><p>只需加上参数 <code>score=T</code> 即可获得评分。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pc <span class="operator">&lt;-</span> principal<span class="punctuation">(</span>USJudgeRatings<span class="punctuation">,</span> nfactors <span class="operator">=</span> <span class="number">1</span><span class="punctuation">,</span> scores <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line">head<span class="punctuation">(</span>pc<span class="operator">$</span>scores<span class="punctuation">)</span></span><br><span class="line"><span class="comment">#                        PC1</span></span><br><span class="line"><span class="comment"># AARONSON,L.H.  -0.18400648</span></span><br><span class="line"><span class="comment"># ALEXANDER,J.M.  0.74765156</span></span><br><span class="line"><span class="comment"># ARMENTANO,A.J.  0.07072468</span></span><br><span class="line"><span class="comment"># BERDON,R.I.     1.13651889</span></span><br><span class="line"><span class="comment"># BRACKEN,J.J.   -2.15848207</span></span><br><span class="line"><span class="comment"># BURNS,E.B.      0.76821742</span></span><br></pre></td></tr></table></figure><h3 id="例-2：Harman23-cor">例 2：<code>Harman23.cor</code></h3><p>该数据集包含 305 个女孩的 8 个身体测量指标的<strong>相关系数</strong>，利用 <code>pheatmap()</code> 函数可视化如下：</p><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/harman23.cor%20%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96.png" alt="harman23.cor 数据可视化" style="zoom: 67%;" /><p>同样，希望用较少的变量替换这些原始身体指标。</p><p><strong>确定主成分个数</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fa.parallel<span class="punctuation">(</span>Harman23.cor<span class="operator">$</span>cov<span class="punctuation">,</span> n.obs <span class="operator">=</span> <span class="number">302</span><span class="punctuation">,</span> fa<span class="operator">=</span><span class="string">&#x27;pc&#x27;</span><span class="punctuation">,</span> n.iter <span class="operator">=</span> <span class="number">100</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># Parallel analysis suggests that the number of factors =  NA  and the number of components =  2 </span></span><br><span class="line">abline<span class="punctuation">(</span>h<span class="operator">=</span><span class="number">1</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/%E4%BE%8B2.png" alt="例2" style="zoom:80%;" /><p>三种准则均显示保留两个主成分，但要注意三个准则并不总是相同，需要根据实际情况提取不同数目的主成分，选择最优解。</p><p><strong>提取主成分</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">pc <span class="operator">&lt;-</span> principal<span class="punctuation">(</span>Harman23.cor<span class="operator">$</span>cov<span class="punctuation">,</span> nfactors <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> rotate <span class="operator">=</span> <span class="string">&#x27;none&#x27;</span><span class="punctuation">)</span></span><br><span class="line">pc</span><br><span class="line"><span class="comment"># Principal Components Analysis</span></span><br><span class="line"><span class="comment"># Call: principal(r = Harman23.cor$cov, nfactors = 2, rotate = &quot;none&quot;)</span></span><br><span class="line"><span class="comment"># Standardized loadings (pattern matrix) based upon correlation matrix</span></span><br><span class="line"><span class="comment">#                 PC1   PC2   h2    u2 com</span></span><br><span class="line"><span class="comment"># height         0.86 -0.37 0.88 0.123 1.4</span></span><br><span class="line"><span class="comment"># arm.span       0.84 -0.44 0.90 0.097 1.5</span></span><br><span class="line"><span class="comment"># forearm        0.81 -0.46 0.87 0.128 1.6</span></span><br><span class="line"><span class="comment"># lower.leg      0.84 -0.40 0.86 0.139 1.4</span></span><br><span class="line"><span class="comment"># weight         0.76  0.52 0.85 0.150 1.8</span></span><br><span class="line"><span class="comment"># bitro.diameter 0.67  0.53 0.74 0.261 1.9</span></span><br><span class="line"><span class="comment"># chest.girth    0.62  0.58 0.72 0.283 2.0</span></span><br><span class="line"><span class="comment"># chest.width    0.67  0.42 0.62 0.375 1.7</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#                        PC1  PC2</span></span><br><span class="line"><span class="comment"># SS loadings           4.67 1.77</span></span><br><span class="line"><span class="comment"># Proportion Var        0.58 0.22</span></span><br><span class="line"><span class="comment"># Cumulative Var        0.58 0.81</span></span><br><span class="line"><span class="comment"># Proportion Explained  0.73 0.27</span></span><br><span class="line"><span class="comment"># Cumulative Proportion 0.73 1.00</span></span><br></pre></td></tr></table></figure><p>可见，第一主成分解释了身体测量指标 58% 的方差，第二主成分解释了 22% 的方差，二者一共解释了 81% 的方差。对于 height 变量，二者一共解释了 88% 的方差。</p><p>成分载荷显示，PC1 与所有变量都正相关，PC2 与前 4 个变量负相关，与其他变量正相关。当提取多个成分时，对其进行旋转可时结果更有解释性。</p><p><strong>主成分旋转</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">rc <span class="operator">&lt;-</span> principal<span class="punctuation">(</span>Harman23.cor<span class="operator">$</span>cov<span class="punctuation">,</span> nfactors <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> rotate <span class="operator">=</span> <span class="string">&#x27;varimax&#x27;</span><span class="punctuation">)</span></span><br><span class="line">rc</span><br><span class="line"><span class="comment"># Principal Components Analysis</span></span><br><span class="line"><span class="comment"># Call: principal(r = Harman23.cor$cov, nfactors = 2, rotate = &quot;varimax&quot;)</span></span><br><span class="line"><span class="comment"># Standardized loadings (pattern matrix) based upon correlation matrix</span></span><br><span class="line"><span class="comment">#                 RC1  RC2   h2    u2 com</span></span><br><span class="line"><span class="comment"># height         0.90 0.25 0.88 0.123 1.2</span></span><br><span class="line"><span class="comment"># arm.span       0.93 0.19 0.90 0.097 1.1</span></span><br><span class="line"><span class="comment"># forearm        0.92 0.16 0.87 0.128 1.1</span></span><br><span class="line"><span class="comment"># lower.leg      0.90 0.22 0.86 0.139 1.1</span></span><br><span class="line"><span class="comment"># weight         0.26 0.88 0.85 0.150 1.2</span></span><br><span class="line"><span class="comment"># bitro.diameter 0.19 0.84 0.74 0.261 1.1</span></span><br><span class="line"><span class="comment"># chest.girth    0.11 0.84 0.72 0.283 1.0</span></span><br><span class="line"><span class="comment"># chest.width    0.26 0.75 0.62 0.375 1.2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#                        RC1  RC2</span></span><br><span class="line"><span class="comment"># SS loadings           3.52 2.92</span></span><br><span class="line"><span class="comment"># Proportion Var        0.44 0.37</span></span><br><span class="line"><span class="comment"># Cumulative Var        0.44 0.81</span></span><br><span class="line"><span class="comment"># Proportion Explained  0.55 0.45</span></span><br><span class="line"><span class="comment"># Cumulative Proportion 0.55 1.00</span></span><br></pre></td></tr></table></figure><p>旋转后变为 RC，RC1 主要由前四个变量来解释，主要与高度相关；RC2 主要由后四个变量来解释，主要与容量相关。两个主成分<strong>仍不相关</strong>，对变量的解释性不变，这是因为变量的群组没有发生变化。另外，两个主成分旋转后的累积方差解释性没有变化（81%），变的只是各个主成分对方差的解释度（成分 1 从 58% 变为 44%，成分 2 从 22% 变为 37%）。各成分的方差解释度趋同，准确来说，此时应该称它们为<strong>成分</strong>而不是主成分（因为单个主成分<strong>方差最大化性质</strong>没有保留）。</p><p><strong>获得主成分得分系数</strong></p><p>当主成分分析基于相关系数矩阵时，不能获取每个观测的主成分得分，只能得到得分系数。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">round</span><span class="punctuation">(</span><span class="built_in">unclass</span><span class="punctuation">(</span>rc<span class="operator">$</span>weights<span class="punctuation">)</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment">#                  RC1   RC2</span></span><br><span class="line"><span class="comment"># height          0.28 -0.05</span></span><br><span class="line"><span class="comment"># arm.span        0.30 -0.08</span></span><br><span class="line"><span class="comment"># forearm         0.30 -0.09</span></span><br><span class="line"><span class="comment"># lower.leg       0.28 -0.06</span></span><br><span class="line"><span class="comment"># weight         -0.06  0.33</span></span><br><span class="line"><span class="comment"># bitro.diameter -0.08  0.32</span></span><br><span class="line"><span class="comment"># chest.girth    -0.10  0.34</span></span><br><span class="line"><span class="comment"># chest.width    -0.04  0.27</span></span><br></pre></td></tr></table></figure><p>主成分得分可以由下式计算：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><msub><mi>C</mi><mi>i</mi></msub><mo>=</mo><mo>∑</mo><mi>v</mi><mi>a</mi><mi>r</mi><mo>×</mo><mi>R</mi><msub><mi>C</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">PC_i = \sum var×RC_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.6em;vertical-align:-0.55em;"></span><span class="mop op-symbol large-op" style="position:relative;top:0em;">∑</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>其中：</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mi>a</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">var</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span> 是 height、arm.span 等变量</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><msub><mi>C</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">RC_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 是对应变量的值</li></ul><p>上式都假定身体测量指标都已标准化（mean = 0， sd = 1）。注意，体重在 PC1 上的系数约为 0.3 或 0，对于 PC2 也是一样。从实际角度考虑，你可以进一步简化方法，将第一主成分看做是前四个变量标准化得分的均值，类似地，将第二主成分看做是后四个变量标准化得分的均值，这正是我通常在实际中采用的方法。</p><h1>因子分析</h1><p>探索性因子分析（exploration factor analysis，EFA）的是一系列用来发现一组变量潜在结构的方法。目标是通过寻找一组更小的、潜在的活隐藏的结构来解释已知的观测变量。如高中的几门学科，用因子分析就是：语言能力（语、外）、逻辑推理（数、理、化、生）、逻辑分析（史、地、政）。重点在于如何解释观测变量，探索观测变量的结构和原因。模型形式为：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>X</mi><mi>i</mi></msub><mo>=</mo><msub><mi>a</mi><mn>1</mn></msub><msub><mi>F</mi><mn>1</mn></msub><mo>+</mo><msub><mi>a</mi><mn>2</mn></msub><msub><mi>F</mi><mn>2</mn></msub><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>+</mo><msub><mi>a</mi><mi>p</mi></msub><msub><mi>F</mi><mi>p</mi></msub><mo>+</mo><msub><mi>U</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">X_i=a_1F_1+a_2F_2+...+a_pF_p+U_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">...</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>其中：</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">X_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ：第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 个可观测变量（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><mn>1...</mn><mi>k</mi></mrow><annotation encoding="application/x-tex">i=1...k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">1...</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>）；</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">F_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>：公共因子（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>=</mo><mn>1...</mn><mi>p</mi></mrow><annotation encoding="application/x-tex">j=1...p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1...</span><span class="mord mathnormal">p</span></span></span></span>），且 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>&lt;</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">p&lt;k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>；</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>U</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">U_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">X_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 变量独有的部分（无法被公共因子解释）；</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：可以认为是每个因子对复合而成的可观测变量的贡献度。</li></ul><p>如 <code>Harman74.cor</code> 数据集包含 24 个心理测验间的相关系数，若用 EFA 分析，就是要找到能够解释这些变量的潜在因子。</p><h2 id="二者的异同">二者的异同</h2><p>相同点：</p><ul><li>都对原始数据进行降维处理</li><li>都消除了原始指标的相关性对综合评价所造成的信息重复的影响</li><li>构造综合评价时涉及的权数具有客观性</li><li>在信息损失不大的前提下，减少了评价的工作量</li></ul><p>不同点：</p><table><thead><tr><th style="text-align:left">PCA</th><th>EFA</th></tr></thead><tbody><tr><td style="text-align:left">用较少变量表示原来的样本</td><td>用较少的因子表示原来的变量</td></tr><tr><td style="text-align:left">目的：样本数据损失最小时，对原数据进行变量降维</td><td>目的：尽可能保持原变量相互关系，寻找变量的公共因子</td></tr><tr><td style="text-align:left">参数估计，一般是求相关矩阵的特征值和相应的特征向量，取前几个计算主成分</td><td>参数估计，指定几个公共因子，将其还原成相关数据矩阵，在和原样本相关矩阵最相似度原则下，估计各个公共因子的估计值</td></tr><tr><td style="text-align:left">举例：语、数、英、文科、理科（变量降维）</td><td>举例：语言能力（语、外）、逻辑推理（数、理、化、生）、逻辑分析（史、地、政）（公共因子）</td></tr></tbody></table><h2 id="实例-2">实例</h2><h3 id="例-1：ability-cov">例 1：<code>ability.cov</code></h3><p>该数据集为 112 个参与者在 6 个测验（智力、画图、积木、迷津、阅读、词汇）得分的协方差矩阵。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ability.cov</span><br><span class="line"><span class="comment"># $cov</span></span><br><span class="line"><span class="comment">#         general picture  blocks   maze reading   vocab</span></span><br><span class="line"><span class="comment"># general  24.641   5.991  33.520  6.023  20.755  29.701</span></span><br><span class="line"><span class="comment"># picture   5.991   6.700  18.137  1.782   4.936   7.204</span></span><br><span class="line"><span class="comment"># blocks   33.520  18.137 149.831 19.424  31.430  50.753</span></span><br><span class="line"><span class="comment"># maze      6.023   1.782  19.424 12.711   4.757   9.075</span></span><br><span class="line"><span class="comment"># reading  20.755   4.936  31.430  4.757  52.604  66.762</span></span><br><span class="line"><span class="comment"># vocab    29.701   7.204  50.753  9.075  66.762 135.292</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># $center</span></span><br><span class="line"><span class="comment"># [1] 0 0 0 0 0 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># $n.obs</span></span><br><span class="line"><span class="comment"># [1] 112</span></span><br></pre></td></tr></table></figure><p><strong>将协方差矩阵转换为相关系数矩阵</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">options<span class="punctuation">(</span>digits <span class="operator">=</span> <span class="number">2</span><span class="punctuation">)</span></span><br><span class="line">covr <span class="operator">&lt;-</span> ability.cov<span class="operator">$</span>cov</span><br><span class="line">corr <span class="operator">&lt;-</span> cov2cor<span class="punctuation">(</span>covr<span class="punctuation">)</span></span><br><span class="line">corr</span><br><span class="line"><span class="comment">#         general picture blocks maze reading vocab</span></span><br><span class="line"><span class="comment"># general    1.00    0.47   0.55 0.34    0.58  0.51</span></span><br><span class="line"><span class="comment"># picture    0.47    1.00   0.57 0.19    0.26  0.24</span></span><br><span class="line"><span class="comment"># blocks     0.55    0.57   1.00 0.45    0.35  0.36</span></span><br><span class="line"><span class="comment"># maze       0.34    0.19   0.45 1.00    0.18  0.22</span></span><br><span class="line"><span class="comment"># reading    0.58    0.26   0.35 0.18    1.00  0.79</span></span><br><span class="line"><span class="comment"># vocab      0.51    0.24   0.36 0.22    0.79  1.00</span></span><br></pre></td></tr></table></figure><p><strong>确定公共因子个数</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 选择 both，以示 PCA 和 EFA 差别</span><br><span class="line">fa.parallel(corr, fa=&#x27;both&#x27;, n.obs = 112, n.iter = 100)</span><br></pre></td></tr></table></figure><p><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/image-20220504165602800.png" alt="平行分析结果"></p><p>× 是 PCA，显示保留 1 个（碎石检验和平行分析）或 2 个（特征值大于 1）主成分。这时候，通常高估因子比低估因子结果要好，因为高估因子数一般较少曲解“真实”情况。</p><p>△ 是 EFA，显示保留 2 个因子，前两个特征值都在拐角之上，且大于 100 次随机数矩阵的特征值均值。对于 EFA，Kaiser-Harris 准则的<mark class="hl-label red">特征值大于 0</mark> ，而不是 1，因此也符合。</p><p><strong>提取公共因子</strong></p><p>可以用 <code>fa()</code> 函数处理：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fa<span class="punctuation">(</span>r<span class="punctuation">,</span> nfactors<span class="operator">=</span><span class="punctuation">,</span> n.obs <span class="operator">=</span><span class="punctuation">,</span> rotate<span class="operator">=</span><span class="punctuation">,</span> scores<span class="operator">=</span><span class="punctuation">,</span> fm<span class="operator">=</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><p>其中：</p><ul><li>r：相关系数矩阵或者原始数据矩阵</li><li>nfactors：设定提取的因子数（默认为1）</li><li>n.obs：是观测数（输入相关系数矩阵时需要填写）</li><li>rotate：设定旋转的方法（默认互变异数最小法）</li><li>scores：设定是否计算因子得分（默认不计算）</li><li>fm：设定因子化方法（默认极小残差法）</li></ul><p>提取公共因子的方法有很多，包括最大似然法（ml）、主轴迭代法（pa）、加权最小二乘法（wls）、广义加权最小二乘法（gls）和最小残差法（minres）。统计学家青睐使用最大似然法，因为它有良好的统计性质。不过有时候最大似然法不会收敛，此时使用主轴迭代法效果会很好。</p><p>主轴迭代法示例（不旋转）</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">fa<span class="punctuation">(</span>r<span class="operator">=</span>corr<span class="punctuation">,</span> nfactors <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> rotate <span class="operator">=</span> <span class="string">&#x27;none&#x27;</span><span class="punctuation">,</span> fm<span class="operator">=</span><span class="string">&#x27;pa&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># Factor Analysis using method =  pa</span></span><br><span class="line"><span class="comment"># Call: fa(r = corr, nfactors = 2, rotate = &quot;none&quot;, fm = &quot;pa&quot;)</span></span><br><span class="line"><span class="comment"># Standardized loadings (pattern matrix) based upon correlation matrix</span></span><br><span class="line"><span class="comment">#          PA1   PA2   h2    u2 com</span></span><br><span class="line"><span class="comment"># general 0.75  0.07 0.57 0.432 1.0</span></span><br><span class="line"><span class="comment"># picture 0.52  0.32 0.38 0.623 1.7</span></span><br><span class="line"><span class="comment"># blocks  0.75  0.52 0.83 0.166 1.8</span></span><br><span class="line"><span class="comment"># maze    0.39  0.22 0.20 0.798 1.6</span></span><br><span class="line"><span class="comment"># reading 0.81 -0.51 0.91 0.089 1.7</span></span><br><span class="line"><span class="comment"># vocab   0.73 -0.39 0.69 0.313 1.5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#                        PA1  PA2</span></span><br><span class="line"><span class="comment"># SS loadings           2.75 0.83</span></span><br><span class="line"><span class="comment"># Proportion Var        0.46 0.14</span></span><br><span class="line"><span class="comment"># Cumulative Var        0.46 0.60</span></span><br><span class="line"><span class="comment"># Proportion Explained  0.77 0.23</span></span><br><span class="line"><span class="comment"># Cumulative Proportion 0.77 1.00</span></span><br></pre></td></tr></table></figure><p>可见，两个因子解释了 6 个心理学测验 60% 的方差，但因子载荷的意义不太好解释，需要对因子进行旋转。</p><p>最大似然法示例（不旋转）</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">fa<span class="punctuation">(</span>r<span class="operator">=</span>corr<span class="punctuation">,</span> nfactors <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> rotate <span class="operator">=</span> <span class="string">&#x27;none&#x27;</span><span class="punctuation">,</span> fm<span class="operator">=</span><span class="string">&#x27;ml&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># Factor Analysis using method =  ml</span></span><br><span class="line"><span class="comment"># Call: fa(r = corr, nfactors = 2, rotate = &quot;none&quot;, fm = &quot;ml&quot;)</span></span><br><span class="line"><span class="comment"># Standardized loadings (pattern matrix) based upon correlation matrix</span></span><br><span class="line"><span class="comment">#          ML1   ML2   h2    u2 com</span></span><br><span class="line"><span class="comment"># general 0.65  0.35 0.54 0.455 1.5</span></span><br><span class="line"><span class="comment"># picture 0.35  0.54 0.41 0.589 1.7</span></span><br><span class="line"><span class="comment"># blocks  0.47  0.75 0.78 0.218 1.7</span></span><br><span class="line"><span class="comment"># maze    0.25  0.41 0.23 0.769 1.7</span></span><br><span class="line"><span class="comment"># reading 0.96 -0.13 0.95 0.052 1.0</span></span><br><span class="line"><span class="comment"># vocab   0.82 -0.04 0.67 0.334 1.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#                        ML1  ML2</span></span><br><span class="line"><span class="comment"># SS loadings           2.42 1.16</span></span><br><span class="line"><span class="comment"># Proportion Var        0.40 0.19</span></span><br><span class="line"><span class="comment"># Cumulative Var        0.40 0.60</span></span><br><span class="line"><span class="comment"># Proportion Explained  0.68 0.32</span></span><br><span class="line"><span class="comment"># Cumulative Proportion 0.68 1.00</span></span><br></pre></td></tr></table></figure><p>与上类似。</p><p><strong>因子旋转</strong></p><p>主轴迭代法 + 正交旋转</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">fa<span class="punctuation">(</span>r<span class="operator">=</span>corr<span class="punctuation">,</span> nfactors <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> rotate <span class="operator">=</span> <span class="string">&#x27;varimax&#x27;</span><span class="punctuation">,</span> fm<span class="operator">=</span><span class="string">&#x27;pa&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># Factor Analysis using method =  pa</span></span><br><span class="line"><span class="comment"># Call: fa(r = corr, nfactors = 2, rotate = &quot;varimax&quot;, fm = &quot;pa&quot;)</span></span><br><span class="line"><span class="comment"># Standardized loadings (pattern matrix) based upon correlation matrix</span></span><br><span class="line"><span class="comment">#          PA1  PA2   h2    u2 com</span></span><br><span class="line"><span class="comment"># general 0.49 0.57 0.57 0.432 2.0</span></span><br><span class="line"><span class="comment"># picture 0.16 0.59 0.38 0.623 1.1</span></span><br><span class="line"><span class="comment"># blocks  0.18 0.89 0.83 0.166 1.1</span></span><br><span class="line"><span class="comment"># maze    0.13 0.43 0.20 0.798 1.2</span></span><br><span class="line"><span class="comment"># reading 0.93 0.20 0.91 0.089 1.1</span></span><br><span class="line"><span class="comment"># vocab   0.80 0.23 0.69 0.313 1.2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#                        PA1  PA2</span></span><br><span class="line"><span class="comment"># SS loadings           1.83 1.75</span></span><br><span class="line"><span class="comment"># Proportion Var        0.30 0.29</span></span><br><span class="line"><span class="comment"># Cumulative Var        0.30 0.60</span></span><br><span class="line"><span class="comment"># Proportion Explained  0.51 0.49</span></span><br><span class="line"><span class="comment"># Cumulative Proportion 0.51 1.00</span></span><br></pre></td></tr></table></figure><p>此时因子更好解释，reading 和 vocab 在 PA1 的载荷较大，picture、blocks 和 maze 在 PA2 上载荷较大，而 general 智力测试在两个因子上的载荷较为平均。说明，存在一个语言的智力因子和非语言的智力因子。</p><p>最大似然法 + 正交旋转</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">fa<span class="punctuation">(</span>r<span class="operator">=</span>corr<span class="punctuation">,</span> nfactors <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> rotate <span class="operator">=</span> <span class="string">&#x27;varimax&#x27;</span><span class="punctuation">,</span> fm<span class="operator">=</span><span class="string">&#x27;ml&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># Factor Analysis using method =  ml</span></span><br><span class="line"><span class="comment"># Call: fa(r = corr, nfactors = 2, rotate = &quot;varimax&quot;, fm = &quot;ml&quot;)</span></span><br><span class="line"><span class="comment"># Standardized loadings (pattern matrix) based upon correlation matrix</span></span><br><span class="line"><span class="comment">#          ML1  ML2   h2    u2 com</span></span><br><span class="line"><span class="comment"># general 0.50 0.54 0.54 0.455 2.0</span></span><br><span class="line"><span class="comment"># picture 0.16 0.62 0.41 0.589 1.1</span></span><br><span class="line"><span class="comment"># blocks  0.21 0.86 0.78 0.218 1.1</span></span><br><span class="line"><span class="comment"># maze    0.11 0.47 0.23 0.769 1.1</span></span><br><span class="line"><span class="comment"># reading 0.96 0.18 0.95 0.052 1.1</span></span><br><span class="line"><span class="comment"># vocab   0.78 0.22 0.67 0.334 1.2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#                        ML1  ML2</span></span><br><span class="line"><span class="comment"># SS loadings           1.86 1.72</span></span><br><span class="line"><span class="comment"># Proportion Var        0.31 0.29</span></span><br><span class="line"><span class="comment"># Cumulative Var        0.31 0.60</span></span><br><span class="line"><span class="comment"># Proportion Explained  0.52 0.48</span></span><br><span class="line"><span class="comment"># Cumulative Proportion 0.52 1.00</span></span><br></pre></td></tr></table></figure><p>结果类似。</p><p>使用正交旋转将使两个因子不相关。如果允许两个因子相关呢？</p><p>主轴迭代法 + 斜交旋转</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 斜交旋转需要 GPArotation 包</span></span><br><span class="line">install.packages<span class="punctuation">(</span><span class="string">&#x27;GPArotation&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">fa<span class="punctuation">(</span>r<span class="operator">=</span>corr<span class="punctuation">,</span> nfactors <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> rotate <span class="operator">=</span> <span class="string">&#x27;promax&#x27;</span><span class="punctuation">,</span> fm<span class="operator">=</span><span class="string">&#x27;pa&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># Loading required namespace: GPArotation</span></span><br><span class="line"><span class="comment"># Factor Analysis using method =  pa</span></span><br><span class="line"><span class="comment"># Call: fa(r = corr, nfactors = 2, rotate = &quot;promax&quot;, fm = &quot;pa&quot;)</span></span><br><span class="line"><span class="comment"># Standardized loadings (pattern matrix) based upon correlation matrix</span></span><br><span class="line"><span class="comment">#           PA1   PA2   h2    u2 com</span></span><br><span class="line"><span class="comment"># general  0.37  0.48 0.57 0.432 1.9</span></span><br><span class="line"><span class="comment"># picture -0.03  0.63 0.38 0.623 1.0</span></span><br><span class="line"><span class="comment"># blocks  -0.10  0.97 0.83 0.166 1.0</span></span><br><span class="line"><span class="comment"># maze     0.00  0.45 0.20 0.798 1.0</span></span><br><span class="line"><span class="comment"># reading  1.00 -0.09 0.91 0.089 1.0</span></span><br><span class="line"><span class="comment"># vocab    0.84 -0.01 0.69 0.313 1.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#                        PA1  PA2</span></span><br><span class="line"><span class="comment"># SS loadings           1.83 1.75</span></span><br><span class="line"><span class="comment"># Proportion Var        0.30 0.29</span></span><br><span class="line"><span class="comment"># Cumulative Var        0.30 0.60</span></span><br><span class="line"><span class="comment"># Proportion Explained  0.51 0.49</span></span><br><span class="line"><span class="comment"># Cumulative Proportion 0.51 1.00</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  With factor correlations of </span></span><br><span class="line"><span class="comment">#      PA1  PA2</span></span><br><span class="line"><span class="comment"># PA1 1.00 0.55</span></span><br><span class="line"><span class="comment"># PA2 0.55 1.00</span></span><br></pre></td></tr></table></figure><p>正交旋转侧重于<strong>因子结构矩阵</strong>（变量与因子的相关系数），而斜交旋转会考虑三个矩阵：<strong>因子结构矩阵</strong>、<strong>因子模式矩阵</strong>和<strong>因子关联矩阵</strong>。</p><p>因子模式矩阵即标准化的回归系数矩阵。它列出了因子预测变量的权重。因子关联矩阵即因子相关系数矩阵。PA1 和 PA2 栏即<mark class="hl-label red">因子模式矩阵</mark> （不是正交旋转中的因子结构矩阵），它们是标准化的回归系数，而不是相关系数。同样可以得到一个语言因子和一个非语言因子。</p><p>最下方的因子关联矩阵显示两个因子的相关系数为 0.55，相关性很大。如果因子间的关联性很低，可能需要重新使用正交旋转来简化问题。</p><p>因子结构矩阵（或称因子载荷阵）没有被列出来，可以使用公式 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo>=</mo><mi>P</mi><mo>∗</mo><mi>P</mi><mi>h</mi><mi>i</mi></mrow><annotation encoding="application/x-tex">F = P*Phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal">hi</span></span></span></span> 计算，其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> 是因子载荷阵，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span> 为因子模式矩阵，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi>h</mi><mi>i</mi></mrow><annotation encoding="application/x-tex">Phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal">hi</span></span></span></span> 为因子关联矩阵。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">fa.promax <span class="operator">&lt;-</span> fa<span class="punctuation">(</span>r<span class="operator">=</span>corr<span class="punctuation">,</span> nfactors <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> rotate <span class="operator">=</span> <span class="string">&#x27;promax&#x27;</span><span class="punctuation">,</span> fm<span class="operator">=</span><span class="string">&#x27;pa&#x27;</span><span class="punctuation">)</span></span><br><span class="line">fa.promax<span class="operator">$</span>loadings</span><br><span class="line"><span class="comment"># Loadings:</span></span><br><span class="line"><span class="comment">#         PA1    PA2   </span></span><br><span class="line"><span class="comment"># general  0.369  0.484</span></span><br><span class="line"><span class="comment"># picture         0.628</span></span><br><span class="line"><span class="comment"># blocks  -0.104  0.966</span></span><br><span class="line"><span class="comment"># maze            0.449</span></span><br><span class="line"><span class="comment"># reading  1.003       </span></span><br><span class="line"><span class="comment"># vocab    0.836       </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#                 PA1 PA2</span></span><br><span class="line"><span class="comment"># SS loadings    1.85 1.8</span></span><br><span class="line"><span class="comment"># Proportion Var 0.31 0.3</span></span><br><span class="line"><span class="comment"># Cumulative Var 0.31 0.6</span></span><br><span class="line"></span><br><span class="line">P <span class="operator">&lt;-</span> <span class="built_in">unclass</span><span class="punctuation">(</span>fa.promax<span class="operator">$</span>loadings<span class="punctuation">)</span></span><br><span class="line">P</span><br><span class="line"><span class="comment">#             PA1    PA2</span></span><br><span class="line"><span class="comment"># general  0.3691  0.484</span></span><br><span class="line"><span class="comment"># picture -0.0262  0.628</span></span><br><span class="line"><span class="comment"># blocks  -0.1036  0.966</span></span><br><span class="line"><span class="comment"># maze     0.0017  0.449</span></span><br><span class="line"><span class="comment"># reading  1.0033 -0.095</span></span><br><span class="line"><span class="comment"># vocab    0.8362 -0.014</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">F</span> <span class="operator">&lt;-</span> P <span class="operator">%*%</span> fa.promax<span class="operator">$</span>Phi</span><br><span class="line"><span class="built_in">F</span></span><br><span class="line"><span class="comment">#          PA1  PA2</span></span><br><span class="line"><span class="comment"># general 0.64 0.69</span></span><br><span class="line"><span class="comment"># picture 0.32 0.61</span></span><br><span class="line"><span class="comment"># blocks  0.43 0.91</span></span><br><span class="line"><span class="comment"># maze    0.25 0.45</span></span><br><span class="line"><span class="comment"># reading 0.95 0.46</span></span><br><span class="line"><span class="comment"># vocab   0.83 0.45</span></span><br></pre></td></tr></table></figure><p>现在你可以看到变量与因子间的相关系数。将它们与正交旋转所得因子载荷阵相比，会发现该载荷阵列的噪音比较大，这是因为之前你允许潜在因子相关。虽然斜交方法更为复杂，但模型将更符合真实数据。</p><p>使用 <code>factor.plot()</code> 或 <code>fa.diagram()</code> 函数，可以绘制正交或者斜交结果的图形。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">factor.plot<span class="punctuation">(</span>fa.promax<span class="punctuation">,</span> labels <span class="operator">=</span> row.names<span class="punctuation">(</span>fa.promax<span class="operator">$</span>loadings<span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/image-20220504191643787.png" style="zoom:80%;" /><p>可见，词汇和阅读在 PA1 上载荷较大，而积木图案、画图和迷宫在 PA2 上载荷较大。普通智力测验在两个因子上较为平均。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fa.diagram<span class="punctuation">(</span>fa.promax<span class="punctuation">,</span> simple<span class="operator">=</span><span class="literal">FALSE</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/image-20220504192301149.png" style="zoom:80%;" /><p>若使 <code>simple = T</code>，那么将仅显示每个因子下最大的载荷，以及因子间的相关系数。这类图形在有多个因子时十分实用。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fa.diagram<span class="punctuation">(</span>fa.promax<span class="punctuation">,</span> simple<span class="operator">=</span><span class="literal">TRUE</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/image-20220504192349280.png" style="zoom:80%;" /><h3 id="例-2：Harman74-cov">例 2：<code>Harman74.cov</code></h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fa.parallel<span class="punctuation">(</span>Harman74.cor<span class="operator">$</span>cov<span class="punctuation">,</span> n.obs <span class="operator">=</span> <span class="number">145</span><span class="punctuation">,</span> fa<span class="operator">=</span><span class="string">&#x27;both&#x27;</span><span class="punctuation">,</span> n.iter <span class="operator">=</span> <span class="number">100</span><span class="punctuation">)</span></span><br><span class="line">Parallel analysis suggests that the number of factors <span class="operator">=</span>  <span class="number">4</span>  and the number of components <span class="operator">=</span>  <span class="number">3</span></span><br></pre></td></tr></table></figure><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/image-20220504193538641.png" style="zoom:80%;" /><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fa.24 <span class="operator">&lt;-</span> fa<span class="punctuation">(</span>Harman74.cor<span class="operator">$</span>cov<span class="punctuation">,</span> nfactors <span class="operator">=</span> <span class="number">4</span><span class="punctuation">,</span> rotate <span class="operator">=</span> <span class="string">&#x27;promax&#x27;</span><span class="punctuation">)</span></span><br><span class="line">fa.diagram<span class="punctuation">(</span>fa.24<span class="punctuation">,</span> simple <span class="operator">=</span> <span class="literal">FALSE</span><span class="punctuation">)</span></span><br><span class="line">factor.plot<span class="punctuation">(</span>fa.24<span class="punctuation">,</span> labels <span class="operator">=</span> row.names<span class="punctuation">(</span>fa.24<span class="operator">$</span>loadings<span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><p><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/Rplot.png" alt="fa.diagram"></p><p><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/Rplot01.png" alt="factor.plot"></p>]]></content>
      
      
      
        <tags>
            
            <tag> 学习笔记 </tag>
            
            <tag> R </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo deploy shell script</title>
      <link href="/posts/43603/"/>
      <url>/posts/43603/</url>
      
        <content type="html"><![CDATA[<h2 id="安装-Node-js">安装 Node.js</h2><p>使用 nvm 安装，<a href="https://github.com/coreybutler/nvm-windows/releases">Github 链接</a>。</p><p>最好装一个 Windows Terminal，安装完后输入 <code>nvm version</code> 查看是否安装成功。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm version</span><br><span class="line"><span class="comment"># 1.1.9</span></span><br></pre></td></tr></table></figure><p>安装 Node.js 并选择需要的版本。若报错，以管理员身份运行。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm install 16.15.0</span><br><span class="line">nvm use 16.15.0</span><br></pre></td></tr></table></figure><h2 id="安装-Git">安装 Git</h2><p>直接去 <a href="https://git-scm.com/">Git 官网</a>下载，全部默认安装就行。</p><h2 id="安装-Hexo">安装 Hexo</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>查看是否安装成功</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo -v</span><br></pre></td></tr></table></figure><p>如果以下错误</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hexo : 无法加载文件 C:\Program Files\nodejs\hexo.ps1，因为在此系统上禁止运行脚本。有关详细信息，请参阅 https:/go.micros</span><br><span class="line">oft.com/fwlink/?LinkID=135170 中的 about_Execution_Policies。</span><br><span class="line">所在位置 行:1 字符: 1</span><br><span class="line">+ hexo -v</span><br><span class="line">+ ~~~~</span><br><span class="line">    + CategoryInfo          : SecurityError: (:) []，PSSecurityException</span><br><span class="line">    + FullyQualifiedErrorId : UnauthorizedAccess</span><br></pre></td></tr></table></figure><p>执行</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set-executionpolicy</span> remotesigned</span><br></pre></td></tr></table></figure><p>再查看版本即可</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo -v</span><br><span class="line"><span class="comment"># hexo-cli: 4.3.0</span></span><br></pre></td></tr></table></figure><p>新建博客文件夹，切换到此路径，执行 Hexo 初始化。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure><p>本地运行，此时可以看见博客界面了</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure><h2 id="安装-Butterfly-主题">安装 Butterfly 主题</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装渲染插件</span></span><br><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><p>安装其他所需插件</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># katex 插件</span></span><br><span class="line">npm un hexo-renderer-marked --save <span class="comment"># 如果有安装这个的话，卸载</span></span><br><span class="line">npm un hexo-renderer-kramed --save <span class="comment"># 如果有安装这个的话，卸载</span></span><br><span class="line">npm install hexo-renderer-markdown-it --save <span class="comment"># 需要安装这个渲染插件</span></span><br><span class="line">npm install @neilsustc/markdown-it-katex --save <span class="comment">#需要安装这个 katex 插件</span></span><br><span class="line">npm install markdown-it-task-checkbox --save <span class="comment"># 任务列表插件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 并开启插件</span></span><br><span class="line"><span class="comment"># markdown:</span></span><br><span class="line"><span class="comment">#   plugins:</span></span><br><span class="line"><span class="comment">#     - plugin:</span></span><br><span class="line"><span class="comment">#       name: &#x27;@neilsustc/markdown-it-katex&#x27;</span></span><br><span class="line"><span class="comment">#       options:</span></span><br><span class="line"><span class="comment">#         strict: false</span></span><br><span class="line"><span class="comment">#     - markdown-it-emoji</span></span><br><span class="line"><span class="comment">#     - markdown-it-task-checkbox</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文章字数统计插件</span></span><br><span class="line">npm install hexo-wordcount --save</span><br><span class="line"></span><br><span class="line"><span class="comment"># git 部署插件</span></span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line"></span><br><span class="line"><span class="comment"># 浏览器自动同步插件</span></span><br><span class="line">npm install hexo-browsersync --save</span><br><span class="line"></span><br><span class="line"><span class="comment"># 短链生成插件</span></span><br><span class="line">npm install hexo-abbrlink --save</span><br><span class="line"></span><br><span class="line"><span class="comment"># 本地搜索插件</span></span><br><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><h2 id="部署到-Github">部署到 Github</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>若报以下错误，是因为没有配置 git。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Initialized empty Git repository in C:/Users/USER/Desktop/blog_source/.deploy_git/.git/</span><br><span class="line">Author identity unknown</span><br><span class="line">*** Please tell me who you are.</span><br><span class="line">Run</span><br><span class="line"></span><br><span class="line">  git config --global user.email &quot;you@example.com&quot;</span><br><span class="line">  git config --global user.name &quot;Your Name&quot;</span><br><span class="line"></span><br><span class="line">to set your account&#x27;s default identity.</span><br><span class="line">Omit --global to set the identity only in this repository.</span><br><span class="line">fatal: unable to auto-detect email address (got &#x27;USER@202-030.(none)&#x27;)</span><br></pre></td></tr></table></figure><p>执行</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.email <span class="string">&quot;you@example.com&quot;</span></span><br><span class="line">git config --global user.name <span class="string">&quot;Your Name&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 比如</span></span><br><span class="line">git config --global user.email 10001@qq.com</span><br><span class="line">git config --global user.name xiaomage</span><br></pre></td></tr></table></figure><p>再次执行 <code>hexo d</code> 时，会弹出 Github 登录窗口，登录即可部署。</p><p>将 rsa 添加到 Github</p>]]></content>
      
      
      
        <tags>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日记：4.28</title>
      <link href="/posts/10574/"/>
      <url>/posts/10574/</url>
      
        <content type="html"><![CDATA[<h2 id="纸化与纸质笔记">纸化与纸质笔记</h2><p>记了将近 4 个月的电子 planner 了，但是还是觉得没有作为习惯融入进生活，我感觉原因一方面是电子 planner 设置的条条框框太多，每周就只有一页日历，和一个 traker，像我这种话很多的人，一些随想都只能记在边边角角，而且大面的 to do list 对我这种预见性和控制性都不强的人来说简直是雪上加霜，每周都几乎重复着这种循环：</p><ol><li>新的一页开始了，然而并没有任何计划，空的to do list随便填</li><li>立满 flag</li><li>变化太多，不能完成，最开始焦虑，后来逐渐不在乎</li><li>下一周空空的 list 随便填；</li></ol><p>另一方面，感觉电子 planner 翻页还是太不方便了，而且没有翻页的感觉，总觉得少点什么（you know what I mean），就像无纸化虽然是我理想总的境界，但是对于漂亮文具还是有不可抑制的购买欲。在纸上写字的踏实的感觉，是 Apple Pencil 无法给予的；同时在纸上自由涂写的感觉，也是电子 planner 无法满足的（不知道为什么，有了自动修正这个功能之后感觉对格式有了更严重的强迫症）。</p><p>无纸化自然也有他的好处，目前我摸索下来最适宜的场景就是阅读大部头教材和课程 PPT，总之就是<strong>勾画文字</strong>用；课堂笔记感觉也不是很适合无纸化，作为一个不太（擅长）做笔记，也没有耐心做很完整的笔记的人，电子笔记对我来说只会让我更注意“形式”，最后笔记变成了办手抄报。</p><p>我觉得之后我只会做纸质笔记了，to be more specific，我做的纸质笔记只会有两种：</p><ul><li>闪卡类：纸张对折就是闪卡，我写下的都是我要背的，而且格式的标准有且只有：我这样写可以用来自测。</li><li>思维导图类：不是 Xmind 做出来的精美的那种，就是边读书边乱七八糟勾画出来的那种。</li></ul><h2 id="减肥观念">减肥观念</h2><p>今天看到一个关于减肥的观念：应该把减肥看作是一个改变生活习惯的过程，或者说，减少不良生活习惯的过程。在减肥的过程中，你应该确立的目标是我改掉了多少不良的生活习惯：是否按时作息，是否懒惰而没去运动，是否真正按照自己的需求吃饭（是否真的渴望吃一些高热量的食品，还是没做任何抵抗就屈服了），而不是这个月减了多少斤，如后者一样设立目标，最后还会回到导致肥胖的生活轨道上，从而必然会反弹。</p><p>由此我又想起之前看到的一个管理生活的方法，就是比起简历式的“成功清单”，建立一个“失败清单”，是否更有助于反省自己。从不同的时间尺度上记录自己的失败，什么样的失败只是失败而没有下文，什么样的失败再次尝试了，会不会让成功更有迹可循。举例说明，上述的减肥标准就可以作为失败清单的考察项目，比如我今天因为阴天没有运动，因为自助太诱人而把自己吃撑了。哇，写到这里感觉自己对自己好harsh。</p><p>最后，感觉这些事项还是记在纸上比较好，在小小的手册上是最完美的（已经下单了，哈哈哈哈哈哈哈哈）。</p><h2 id="背单词的治愈">背单词的治愈</h2><p>最近看《word power made easy》，并做习题和纸质笔记，感觉回到了初中高中，那种最传统的应试英语课上，很怀念。自大学以来，把除了最传统的应试法以外学英语的方法都尝试了一遍，最后发现还是备考雅思和 GRE 的时候词汇量，阅读能力提高最多（…）听力是精听最快，当然这属于应试英语的盲区。</p><p>背单词感觉是封校期间最能找到心灵平静的活动，就是那种单纯地用最传统、我最熟悉的方式获取知识的感觉，而且不用考试，这就是我这种小镇做题家的舒适圈，还有什么比这更治愈的呢？</p>]]></content>
      
      
      <categories>
          
          <category> 猫猫专栏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随想 </tag>
            
            <tag> 日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R 学习笔记：Logistic 回归</title>
      <link href="/posts/65296/"/>
      <url>/posts/65296/</url>
      
        <content type="html"><![CDATA[<h1>Logistic 回归</h1><p>Logistic 回归是通过一系列连续或类别型的预测变量来预测<strong>二值型</strong>结果变量的方法。</p><p>如因变量为是否患胃癌，有是或否两种结果。选择两组人，一组为胃癌患者，另一组为正常。采集相关的数据作为自变量，如年龄、性别、饮食等等，可以有多种。自变量可以是连续的，也可以是因子类型的，通过Logistic回归，就可以大致了解哪些因素是胃癌的危险因素。</p><h2 id="分析数据集">分析数据集</h2><p>以 R 包 <code>AER</code> 中的 <code>Affairs</code> 数据集作为案例学习 Logistic 回归，分析可能与出轨有关的因素。</p><p><code>Affairs</code> 数据集包含了 601 个受访者的相关数据，包括出轨次数、性别、年龄、婚龄、是否有孩子、宗教、教育、职业及婚姻评分等 9 个变量。</p><p>安装并载入 <code>Affairs</code> 数据集</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">install.packages<span class="punctuation">(</span><span class="string">&#x27;AER&#x27;</span><span class="punctuation">)</span></span><br><span class="line">data<span class="punctuation">(</span>Affairs<span class="punctuation">,</span> package <span class="operator">=</span> <span class="string">&#x27;AER&#x27;</span><span class="punctuation">)</span></span><br><span class="line">head<span class="punctuation">(</span>Affairs<span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="operator">:</span><span class="number">5</span><span class="punctuation">]</span> <span class="punctuation">)</span></span><br><span class="line"><span class="comment">#    affairs gender age yearsmarried children</span></span><br><span class="line"><span class="comment"># 4        0   male  37           10       no</span></span><br><span class="line"><span class="comment"># 5        0 female  27            4       no</span></span><br><span class="line"><span class="comment"># 11       0 female  32           15      yes</span></span><br></pre></td></tr></table></figure><p>描述性统计一下</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> summary<span class="punctuation">(</span>Affairs<span class="punctuation">)</span></span><br><span class="line"><span class="comment">#         affairs       gender             age     yearsmarried  children   religiousness       education      occupation          rating     </span></span><br><span class="line"><span class="comment">#  Min.   : 0.000   female:315   Min.   :17.50   Min.   : 0.125   no :171   Min.   :1.000   Min.   : 9.00   Min.   :1.000   Min.   :1.000  </span></span><br><span class="line"><span class="comment">#  1st Qu.: 0.000   male  :286   1st Qu.:27.00   1st Qu.: 4.000   yes:430   1st Qu.:2.000   1st Qu.:14.00   1st Qu.:3.000   1st Qu.:3.000  </span></span><br><span class="line"><span class="comment">#  Median : 0.000                Median :32.00   Median : 7.000             Median :3.000   Median :16.00   Median :5.000   Median :4.000  </span></span><br><span class="line"><span class="comment">#  Mean   : 1.456                Mean   :32.49   Mean   : 8.178             Mean   :3.116   Mean   :16.17   Mean   :4.195   Mean   :3.932  </span></span><br><span class="line"><span class="comment">#  3rd Qu.: 0.000                3rd Qu.:37.00   3rd Qu.:15.000             3rd Qu.:4.000   3rd Qu.:18.00   3rd Qu.:6.000   3rd Qu.:5.000  </span></span><br><span class="line"><span class="comment">#  Max.   :12.000                Max.   :57.00   Max.   :15.000             Max.   :5.000   Max.   :20.00   Max.   :7.000   Max.   :5.000 </span></span><br><span class="line"></span><br><span class="line">table<span class="punctuation">(</span>Affairs<span class="operator">$</span>affairs<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#   0   1   2   3   7  12 </span></span><br><span class="line"><span class="comment"># 451  34  17  19  42  38 </span></span><br><span class="line"></span><br><span class="line">prop.table<span class="punctuation">(</span>table<span class="punctuation">(</span>Affairs<span class="operator">$</span>affairs<span class="punctuation">)</span><span class="punctuation">)</span><span class="operator">*</span><span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#         0         1         2         3         7        12 </span></span><br><span class="line"><span class="comment"># 75.041597  5.657238  2.828619  3.161398  6.988353  6.322795 </span></span><br><span class="line"></span><br><span class="line">prop.table<span class="punctuation">(</span>table<span class="punctuation">(</span>Affairs<span class="operator">$</span>gender<span class="punctuation">)</span><span class="punctuation">)</span><span class="operator">*</span><span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#   female     male </span></span><br><span class="line"><span class="comment"># 52.41265 47.58735 </span></span><br></pre></td></tr></table></figure><p>只关注是否出轨，新建 <code>isaffair</code> 变量，并转换为因子</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Affairs<span class="operator">$</span>isaffair<span class="punctuation">[</span>Affairs<span class="operator">$</span>affairs <span class="operator">&gt;</span> <span class="number">0</span><span class="punctuation">]</span> <span class="operator">&lt;-</span> <span class="number">1</span></span><br><span class="line">Affairs<span class="operator">$</span>isaffair<span class="punctuation">[</span>Affairs<span class="operator">$</span>affairs <span class="operator">==</span> <span class="number">0</span><span class="punctuation">]</span> <span class="operator">&lt;-</span> <span class="number">0</span></span><br><span class="line">table<span class="punctuation">(</span>Affairs<span class="operator">$</span>isaffair<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#   0   1 </span></span><br><span class="line"><span class="comment"># 451 150 </span></span><br></pre></td></tr></table></figure><h2 id="glm-回归"><code>glm()</code> 回归</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">attach<span class="punctuation">(</span>Affairs<span class="punctuation">)</span></span><br><span class="line">fit <span class="operator">&lt;-</span> glm<span class="punctuation">(</span>isaffair<span class="operator">~</span>gender<span class="operator">+</span>age<span class="operator">+</span>yearsmarried<span class="operator">+</span></span><br><span class="line">             children<span class="operator">+</span>religiousness<span class="operator">+</span>education<span class="operator">+</span></span><br><span class="line">             occupation<span class="operator">+</span>rating<span class="punctuation">,</span> data <span class="operator">=</span> Affairs<span class="punctuation">,</span> family <span class="operator">=</span> binomial<span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">summary<span class="punctuation">(</span>fit<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Call:</span></span><br><span class="line"><span class="comment"># glm(formula = isaffair ~ gender + age + yearsmarried + children + </span></span><br><span class="line"><span class="comment">#     religiousness + education + occupation + rating, family = binomial(), </span></span><br><span class="line"><span class="comment">#     data = Affairs)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deviance Residuals: </span></span><br><span class="line"><span class="comment">#     Min       1Q   Median       3Q      Max  </span></span><br><span class="line"><span class="comment"># -1.5713  -0.7499  -0.5690  -0.2539   2.5191  </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Coefficients:</span></span><br><span class="line"><span class="comment">#               Estimate Std. Error z value Pr(&gt;|z|)    </span></span><br><span class="line"><span class="comment"># (Intercept)    1.37726    0.88776   1.551 0.120807    </span></span><br><span class="line"><span class="comment"># gendermale     0.28029    0.23909   1.172 0.241083    </span></span><br><span class="line"><span class="comment"># age           -0.04426    0.01825  -2.425 0.015301 *  </span></span><br><span class="line"><span class="comment"># yearsmarried   0.09477    0.03221   2.942 0.003262 ** </span></span><br><span class="line"><span class="comment"># childrenyes    0.39767    0.29151   1.364 0.172508    </span></span><br><span class="line"><span class="comment"># religiousness -0.32472    0.08975  -3.618 0.000297 ***</span></span><br><span class="line"><span class="comment"># education      0.02105    0.05051   0.417 0.676851    </span></span><br><span class="line"><span class="comment"># occupation     0.03092    0.07178   0.431 0.666630    </span></span><br><span class="line"><span class="comment"># rating        -0.46845    0.09091  -5.153 2.56e-07 ***</span></span><br><span class="line"><span class="comment"># ---</span></span><br><span class="line"><span class="comment"># Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># (Dispersion parameter for binomial family taken to be 1)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#     Null deviance: 675.38  on 600  degrees of freedom</span></span><br><span class="line"><span class="comment"># Residual deviance: 609.51  on 592  degrees of freedom</span></span><br><span class="line"><span class="comment"># AIC: 627.51</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Number of Fisher Scoring iterations: 4</span></span><br></pre></td></tr></table></figure><p>有四个变量显著，其余如性别、职业、教育等不显著，与实际情况类似。<br>将不显著的变量去除，再次回归</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">fit_new <span class="operator">&lt;-</span> glm<span class="punctuation">(</span>isaffair<span class="operator">~</span>age<span class="operator">+</span>yearsmarried<span class="operator">+</span></span><br><span class="line">                 religiousness<span class="operator">+</span>rating<span class="punctuation">,</span> data <span class="operator">=</span> Affairs<span class="punctuation">,</span> family <span class="operator">=</span> binomial<span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">summary<span class="punctuation">(</span>fit_new<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Call:</span></span><br><span class="line"><span class="comment"># glm(formula = isaffair ~ age + yearsmarried + religiousness + </span></span><br><span class="line"><span class="comment">#     rating, family = binomial(), data = Affairs)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deviance Residuals: </span></span><br><span class="line"><span class="comment">#     Min       1Q   Median       3Q      Max  </span></span><br><span class="line"><span class="comment"># -1.6278  -0.7550  -0.5701  -0.2624   2.3998  </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Coefficients:</span></span><br><span class="line"><span class="comment">#               Estimate Std. Error z value Pr(&gt;|z|)    </span></span><br><span class="line"><span class="comment"># (Intercept)    1.93083    0.61032   3.164 0.001558 ** </span></span><br><span class="line"><span class="comment"># age           -0.03527    0.01736  -2.032 0.042127 *  </span></span><br><span class="line"><span class="comment"># yearsmarried   0.10062    0.02921   3.445 0.000571 ***</span></span><br><span class="line"><span class="comment"># religiousness -0.32902    0.08945  -3.678 0.000235 ***</span></span><br><span class="line"><span class="comment"># rating        -0.46136    0.08884  -5.193 2.06e-07 ***</span></span><br><span class="line"><span class="comment"># ---</span></span><br><span class="line"><span class="comment"># Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># (Dispersion parameter for binomial family taken to be 1)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#     Null deviance: 675.38  on 600  degrees of freedom</span></span><br><span class="line"><span class="comment"># Residual deviance: 615.36  on 596  degrees of freedom</span></span><br><span class="line"><span class="comment"># AIC: 625.36</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Number of Fisher Scoring iterations: 4</span></span><br></pre></td></tr></table></figure><p>可以用 <code>anova()</code> 分析比较一下两个模型<br>对于广义线性回归，可使用卡方检验</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">anova<span class="punctuation">(</span>fit<span class="punctuation">,</span> fit_new<span class="punctuation">,</span> test <span class="operator">=</span> <span class="string">&#x27;Chisq&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># Analysis of Deviance Table</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Model 1: isaffair ~ gender + age + yearsmarried + children + religiousness + </span></span><br><span class="line"><span class="comment">#     education + occupation + rating</span></span><br><span class="line"><span class="comment"># Model 2: isaffair ~ age + yearsmarried + religiousness + rating</span></span><br><span class="line"><span class="comment">#   Resid. Df Resid. Dev Df Deviance Pr(&gt;Chi)</span></span><br><span class="line"><span class="comment"># 1       592     609.51                     </span></span><br><span class="line"><span class="comment"># 2       596     615.36 -4  -5.8474   0.2108</span></span><br></pre></td></tr></table></figure><p>卡方检验值不显著，说明两个模型差别不大，去除的变量不会显著提高方程的预测精度。</p><h2 id="结果解释">结果解释</h2><h3 id="回归系数">回归系数</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">coef<span class="punctuation">(</span>fit_new<span class="punctuation">)</span></span><br><span class="line">  <span class="comment"># (Intercept)           age  yearsmarried religiousness        rating </span></span><br><span class="line">  <span class="comment">#  1.93083017   -0.03527112    0.10062274   -0.32902386   -0.46136144 </span></span><br></pre></td></tr></table></figure><p>Logistic 回归中，响应变量是 y=e 的对数优势比，回归系数的含义是，当其他的预测变量不变时，一单位预测变量变化时，可能引起的响应变量对数优势比的变化。<br>由于使用的是对数优势比，需进行指数运算才能回到正常模式。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exp</span><span class="punctuation">(</span>coef<span class="punctuation">(</span>fit_new<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">  <span class="comment"># (Intercept)           age  yearsmarried religiousness        rating </span></span><br><span class="line">  <span class="comment">#   6.8952321     0.9653437     1.1058594     0.7196258     0.6304248 </span></span><br></pre></td></tr></table></figure><p>结果表示，当婚龄增加一年时，出轨的优势比将×1.1058594；相反年龄增加一岁时，出轨的优势比将×0.9653437，即婚龄越大，越容易出轨，年龄越小越容易出轨。预测变量不能为0，所以截距项没有意义。</p><h3 id="预测数据">预测数据</h3><p>创建新的数据集用来预测，这里选平均值</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 评分变化</span></span><br><span class="line">test <span class="operator">&lt;-</span> data.frame<span class="punctuation">(</span>rating<span class="operator">=</span><span class="number">1</span><span class="operator">:</span><span class="number">5</span><span class="punctuation">,</span> age<span class="operator">=</span>mean<span class="punctuation">(</span>Affairs<span class="operator">$</span>age<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">                   yearsmarried<span class="operator">=</span>mean<span class="punctuation">(</span>Affairs<span class="operator">$</span>yearsmarried<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">                   religiousness<span class="operator">=</span>mean<span class="punctuation">(</span>Affairs<span class="operator">$</span>religiousness<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">test</span><br><span class="line"><span class="comment">#   rating      age yearsmarried religiousness</span></span><br><span class="line"><span class="comment"># 1      1 32.48752     8.177696      3.116473</span></span><br><span class="line"><span class="comment"># 2      2 32.48752     8.177696      3.116473</span></span><br><span class="line"><span class="comment"># 3      3 32.48752     8.177696      3.116473</span></span><br><span class="line"><span class="comment"># 4      4 32.48752     8.177696      3.116473</span></span><br><span class="line"><span class="comment"># 5      5 32.48752     8.177696      3.116473</span></span><br><span class="line"></span><br><span class="line">test<span class="operator">$</span>prob <span class="operator">&lt;-</span> predict<span class="punctuation">(</span>fit_new<span class="punctuation">,</span> newdata <span class="operator">=</span> test<span class="punctuation">,</span> type<span class="operator">=</span><span class="string">&#x27;response&#x27;</span><span class="punctuation">)</span></span><br><span class="line">test</span><br><span class="line"><span class="comment">#   rating      age yearsmarried religiousness      prob</span></span><br><span class="line"><span class="comment"># 1      1 32.48752     8.177696      3.116473 0.5302296</span></span><br><span class="line"><span class="comment"># 2      2 32.48752     8.177696      3.116473 0.4157377</span></span><br><span class="line"><span class="comment"># 3      3 32.48752     8.177696      3.116473 0.3096712</span></span><br><span class="line"><span class="comment"># 4      4 32.48752     8.177696      3.116473 0.2204547</span></span><br><span class="line"><span class="comment"># 5      5 32.48752     8.177696      3.116473 0.1513079</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 年龄变化</span></span><br><span class="line">test <span class="operator">&lt;-</span> data.frame<span class="punctuation">(</span>rating<span class="operator">=</span>mean<span class="punctuation">(</span>Affairs<span class="operator">$</span>rating<span class="punctuation">)</span><span class="punctuation">,</span> age<span class="operator">=</span>seq<span class="punctuation">(</span><span class="number">20</span><span class="punctuation">,</span> <span class="number">60</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">                   yearsmarried<span class="operator">=</span>mean<span class="punctuation">(</span>Affairs<span class="operator">$</span>yearsmarried<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">                   religiousness<span class="operator">=</span>mean<span class="punctuation">(</span>Affairs<span class="operator">$</span>religiousness<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">test</span><br><span class="line"><span class="comment">#    rating age yearsmarried religiousness</span></span><br><span class="line"><span class="comment"># 1 3.93178  20     8.177696      3.116473</span></span><br><span class="line"><span class="comment"># 2 3.93178  30     8.177696      3.116473</span></span><br><span class="line"><span class="comment"># 3 3.93178  40     8.177696      3.116473</span></span><br><span class="line"><span class="comment"># 4 3.93178  50     8.177696      3.116473</span></span><br><span class="line"><span class="comment"># 5 3.93178  60     8.177696      3.116473</span></span><br><span class="line">test<span class="operator">$</span>prob <span class="operator">&lt;-</span> predict<span class="punctuation">(</span>fit_new<span class="punctuation">,</span> newdata <span class="operator">=</span> test<span class="punctuation">,</span> type<span class="operator">=</span><span class="string">&#x27;response&#x27;</span><span class="punctuation">)</span></span><br><span class="line">test</span><br><span class="line"><span class="comment">#    rating age yearsmarried religiousness       prob</span></span><br><span class="line"><span class="comment"># 1 3.93178  20     8.177696      3.116473 0.31193344</span></span><br><span class="line"><span class="comment"># 2 3.93178  30     8.177696      3.116473 0.24162210</span></span><br><span class="line"><span class="comment"># 3 3.93178  40     8.177696      3.116473 0.18294542</span></span><br><span class="line"><span class="comment"># 4 3.93178  50     8.177696      3.116473 0.13596342</span></span><br><span class="line"><span class="comment"># 5 3.93178  60     8.177696      3.116473 0.09957638</span></span><br></pre></td></tr></table></figure><p>可见评分约低，出轨的可能性越大；年龄约小，出轨的可能性越大。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 学习笔记 </tag>
            
            <tag> R </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>折腾博客的思考🤔</title>
      <link href="/posts/22544/"/>
      <url>/posts/22544/</url>
      
        <content type="html"><![CDATA[<p>研究了四五天的博客搭建，看了各种用户文档，可以说是废寝忘食🤓，一睡醒就在想怎么把博客弄得符合自己的要求。但是这真的有意义吗？这引起了我的思考。</p><span id="more"></span><p>起因是这样的，这几天都在用 Typora 写 R 语言的学习笔记。虽然它都编辑方式很友好，和 Word 一样所见即所得，也可以用各种快捷键帮助格式化，不用记 Markdown 的语法，但是，再尝试了官网的所有主题之后，我依然没有找到趁手的……不是我挑，有的配色挺好，但段落间距不太合适；有的间距很舒服，但中文字体支持不好，看起来很糟糕；有的很棒，支持思源黑体，但是配色又不好。就这样来来回回换了十几个主题，也改了不少主题文件，终于，累了，太费劲了，不如另起炉灶。</p><p>于是我先是去网上找好用的 Markdown 编辑器，要所见即所得的。几番寻找，不少人都提到了 Gridea 这个静态博客客户端。看了几个样板博客，发现还挺不错，排版很舒服，关键是可以部署到 GitHub 上，这样在哪都能访问了，也可以分享给其他人。</p><p>说干就干，试着用自带的模版建了一个博客，还传到了 GitHub Pages 上。访问和排版都没有问题，但是，但是，官方都模板功能很基础，没有文章目录，也没有黑暗模式，我怎么能忍呢😑？又去找 Gridea 的主题，发现了两个不错的：Porky 和 Pure。Porky 自带黑暗模式，配色很喜欢；Pure 只有几种配色可选，没有黑暗模式，但是文章的排版很喜欢；其他主题要么太花哨，要么太简陋。这可咋整，好但没完全好。</p><p>为了追求“完美”，我一个学生物的竟然开始捣鼓起了 <code>HTML</code> 😨。什么 <code>body</code>、<code>border-radius</code>、<code>background</code>、<code>p</code>、<code>a</code>、<code>#FFD700</code> 等等各种有关网页的知识开始充斥我的大脑🤤。为了迅速了解相关知识，没少看各种文档。经过不断的学习、摸索和修改，终于把原 Porky 主题改成我喜欢的样式了，很高兴，我终于有自己的博客了😎！</p><p>不过问题又来了，还是少很多东西啊，代码高亮、文章目录、返回顶部、全文搜索等功能都没有。我尝试着从其他的主题中移植这些功能（其实就是照猫画虎），千辛万苦把代码高亮搞定了。但是由于没有学过 <code>HTML</code> 语法，其他的功能怎么弄也实现不了。这种感觉很糟，想做确做不了，无能为力，心力憔悴😣。一度想就此放弃，毕竟现有功能也不是说不够用。但是，得不到的永远在骚动，心里还是放不下，我想要😭！</p><p>又于是乎，经过搜索，我发现了比 Gridea 更强大的 Hexo。</p><blockquote><p>Hexo is a fast, simple &amp; powerful blog framework powered by Node.js.</p></blockquote><p>官网说 Hexo 有以下优点</p><blockquote><ul><li>Node.js 所带来的超快生成速度，让上百个页面在几秒内瞬间完成渲染。</li><li>Hexo 支持 GitHub Flavored Markdown 的所有功能，甚至可以整合 Octopress 的大多数插件。</li><li>只需一条指令即可部署到 GitHub Pages, Heroku 或其他平台。</li><li>强大的 API 带来无限的可能，与数种模板引擎（EJS，Pug，Nunjucks）和工具（Babel，PostCSS，Less/Sass）轻易集成</li></ul></blockquote><p>只需要几个命令就能使用 Hexo</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">hexo init blog</span><br><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line">npm install</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure><p>🤞Wow，这么 NB ？！这不正是我想要的吗？Hexo 安装和部署的全过程均使用命令行完成，还好学过一点 Linux，再加上有前人已经帮踩坑了，很快就搭建起了博客。 Hexo 虽比 Gridea 更强大，但是相应的配置也要复杂一些，还没有图形化的界面，全靠编辑配置文件 。不过这都没啥，早已身经百战了 👓 。</p><p>又是一番折腾，Hexo 也配置好了。正当我以为可以歇歇时，一看主题市场，好家伙一共 362 个主题！这个兴奋啊，这总不能没有我喜欢的了吧🤓？下主题、配置主题、看效果，这一套流程走了有几十遍，然而，还真没有……我 **！要吐血了！有的主题功能很全，我先要的全部都有，但是往往太花哨了；有的呢，简洁舒服，但是功能又不够。啊！这不又回去了吗……</p><p>唉😟，咋整？</p><p>回过头来看，想起一句笑话</p><blockquote><p>差生文具多</p></blockquote><p>这可不是我吗？过于注重形式，而忽略了内容。</p><blockquote><p>内容与形式是辩证法的一对基本范畴，内容是事物一切内在要素的总和，形式是这些内在要素的结构和组织方式。</p></blockquote><p>内容和形式的关系是辩证统一的。任何事物既有其内容，也有其形式，不存在无内容的形式，也没有无形式的内容，内容决定形式，形式服从内容，并随内容的变化而变化。形式对内容又有反作用，形式适合内容，就促进内容的发展，形式不适合内容，则阻碍内容的发展。</p><p>就好比钢琴十级的初学者和朗朗的差别，内容上的差异反应在他们的演奏技术和艺术上，形式上的差异则可以说是演奏形式。初学者随便一个钢琴就能弹，并且曲子都很简单，也说不上什么艺术；朗朗呢，世界级钢琴演奏家，钢琴肯定是很贵的。这不是说便宜的钢琴不能弹，他 B 站上还有弹玩具钢琴的视频，而是普通的会极大地限制朗朗的发挥。</p><p>这下我明白了，是 Gredia 不够用吗，不是，而是我过于关注博客形式，却忽略了博客的内容。内容才是一个博客的精华，就像用什么设备拍摄并不重要，拍摄的内容，讲的故事才是主要的，咳咳。一个博客，它可以很简陋，可以很粗糙。前几天学 R 语言的时候看到的一个北大老师的博客，教授级配色、各种颜色混搭，就像是没有没有装修的毛胚房，可以说与现在的审美完全不搭。但是，里面可全是好东西。一个博客，它不可以没有内容。看过几个全屏雪花乱飞，左下角有只猫会跟着鼠标转头，点击鼠标还会发射小心心的博客，里面确没啥实质性的东西，还有广告。装饰无可厚非，但是虚有其表，外强中干就不是什么值得提倡的好事了。如果我再这样下去，我的博客也会像这样吧，好看是好看，但是文章没几篇。</p><p>好的形式能促进内容的发展，什么是好的形式？首先好的形式要适合内容，要和内容相得益彰，既不过于低劣至于拖内容的后腿，也不能太过超越至于宣兵夺主；其次好的形式要给内容留以发展空间，内容是会变化的，总体是向上的，形式如果没有足够的空间，终究也不适合内容的发展。</p><p>所以，重心还是在内容上，过分关注形式是本末倒置。先好好写文章，耐心沉淀，等什么时候博客的功能确实是不够用了，再来升级吧😼。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 随想 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日记：4.25</title>
      <link href="/posts/60559/"/>
      <url>/posts/60559/</url>
      
        <content type="html"><![CDATA[<p>特邀作者：猫猫</p><h2 id="实验">实验</h2><ul><li>做到最后一步了，成败在此一举！</li><li>真的很希望能做成功，这样离逃离这个地狱又近了一步。中期过去之后都比较顺利，嘿嘿～</li><li>师兄说好明天去拍电镜，今天上午又说拍不了，emo 了一会儿，下午又说可以拍了吼吼吼好开心～</li><li>那个送去拍电镜的电极结果很好，如果这个不成还可以用拍电镜的这个继续做。</li><li><blockquote><p>噶油~</p></blockquote></li><li>旋转烘箱像烤鸡的电烤箱…！DMF 洒到裤子上了，裤子不能要了，幸亏没洒到有洞的地方……这件事告诉我们做实验不能穿太好的衣服，也不能穿 literally 太破的衣服……</li><li>室友课题组的老师好凶，一个破碎仪坏了都要说什么天打五雷劈的鬼话，很难相信这是从一个学者口中说出来的，果然贫贱科研百事哀啊（望着原子力显微镜和曲面显示屏的感慨）！</li></ul><h2 id="吃">吃</h2><ul><li>最近早餐沉迷酸菜猪肉馅包子，好好吃。想吃妈妈做的酸菜猪肉炖粉条子了。</li><li>中午 @aohuiliu 为了安慰 emo 的我，请客吃了钵钵鸡，猪皮好好吃，也不是很辣，喜欢（ both 钵钵鸡 and 人）。</li><li><blockquote><p>䨻猫组 5</p></blockquote></li><li>晚饭抛弃了方便面，吃了套餐，没有二楼好吃。</li><li>买了昨天还卖 12 今天就卖 10 块的草莓，一盒几乎有 2 斤，中午吃一半，晚上吃了一半，撑死了，嗝～</li><li><blockquote><p>摸肚肚！哈哈哈哈哈哈哈哈！</p></blockquote></li></ul><h2 id="运动">运动</h2><ul><li>早上和 @aohuiliu 跑了 1.7 km，累累 5</li><li><blockquote><p>我 2.5 km 55555</p></blockquote></li></ul><h2 id="乱七芭蕉">乱七芭蕉</h2><ul><li>扎了小辫子，好像戳到某人的 xp 了（某人可以贴图）</li><li>今天玩的单词游戏是包含 ea 的单词，某人好菜</li><li>快递终于到了，3.29 日下单的，哈哈。</li><li>今天也喜欢 aohuiliu。</li><li><blockquote><p>今天也喜欢猫嘿嘿</p></blockquote></li></ul><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/1.jpg" alt="可爱" width="70%" height="70%" /><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/2.jpg" width="70%" height="70%" />]]></content>
      
      
      <categories>
          
          <category> 猫猫专栏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日记：4.24</title>
      <link href="/posts/11342/"/>
      <url>/posts/11342/</url>
      
        <content type="html"><![CDATA[<h2 id="🐱的小辫子">🐱的小辫子</h2><p>一个字，可爱😽。<br>再来一个就更好了🤓。</p><h2 id="hia">hia</h2><p>😻给的红油面皮+豆干蛋<br>好香，好 hia！</p><h2 id="单词游戏">单词游戏</h2><p>c 开头， b 开头，sh 开头，<br>sh*t, di*k,<br>还挺好玩哈哈哈哈，停不下来，煮面皮的时候还在想。</p><h2 id="背了😹的包包">背了😹的包包</h2><img src= "https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/loading_2.svg" data-lazy-src="https://cdn.jsdelivr.net/gh/janedut/blog_data@main/img/%E7%8C%AB%E7%8C%AB%E7%9A%84%E5%8C%85.jpg" alt="猫猫的包" width="100%" style="zoom:80%;" />像个傻子<h2 id="实验室差距">实验室差距</h2><p>曲面显示器，超大屏幕……<br>我们怎么没有？</p><h2 id="沉迷博客装修">沉迷博客装修</h2><p>搞了一天，终于有点样子了。</p><ul class="task-list"><li class="task-list-item"><input type="checkbox" id="cbx_0" checked="true" disabled="true"><label for="cbx_0"> 黑暗模式</label></li><li class="task-list-item"><input type="checkbox" id="cbx_1" checked="true" disabled="true"><label for="cbx_1"> 代码高亮</label></li><li class="task-list-item"><input type="checkbox" id="cbx_2" checked="true" disabled="true"><label for="cbx_2"> 图片圆角</label></li><li class="task-list-item"><input type="checkbox" id="cbx_3" checked="true" disabled="true"><label for="cbx_3"> 阴影去掉</label></li></ul><p><strong>代办</strong></p><ul class="task-list"><li class="task-list-item"><input type="checkbox" id="cbx_4" disabled="true"><label for="cbx_4"> 文章目录</label></li><li class="task-list-item"><input type="checkbox" id="cbx_5" disabled="true"><label for="cbx_5"> 滚动进度</label></li><li class="task-list-item"><input type="checkbox" id="cbx_6" disabled="true"><label for="cbx_6"> 一键返回</label></li></ul><p>吐槽一句，Github 同步怎么老是失败？？</p><h2 id="MTT-Done">MTT Done!</h2><p>貌似是最后一个实验，结果还没看。<br>实验室的酶标仪真的垃圾，打印出来的字还没食堂打小票的清楚……<br>没办法直接导出电子版，还得手输。</p><p>折线图添加显著性检验标记（<em>p</em> 值）的 R 脚本已完成，运行即可。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>中文排版指南</title>
      <link href="/posts/44217/"/>
      <url>/posts/44217/</url>
      
        <content type="html"><![CDATA[<p>统一中文文案、排版的相关用法，降低团队成员之间的沟通成本，增强网站气质。</p><h2 id="空格">空格</h2><p>「有研究显示，打字的时候不喜欢在中文和英文之间加空格的人，感情路都走得很辛苦，有七成的比例会在 34 岁的时候跟自己不爱的人结婚，而其余三成的人最后只能把遗产留给自己的猫。毕竟爱情跟书写都需要适时地留白。</p><p>与大家共勉之。」——<a href="https://github.com/vinta/pangu.js">vinta/paranoid-auto-spacing</a></p><h3 id="中英文之间需要增加空格">中英文之间需要增加空格</h3><p>正确：</p><blockquote><p>在 LeanCloud 上，数据存储是围绕 <code>AVObject</code> 进行的。</p></blockquote><p>错误：</p><blockquote><p>在LeanCloud上，数据存储是围绕<code>AVObject</code>进行的。</p></blockquote><blockquote><p>在 LeanCloud上，数据存储是围绕<code>AVObject</code> 进行的。</p></blockquote><p>完整的正确用法：</p><blockquote><p>在 LeanCloud 上，数据存储是围绕 <code>AVObject</code> 进行的。每个 <code>AVObject</code> 都包含了与 JSON 兼容的 key-value 对应的数据。数据是 schema-free 的，你不需要在每个 <code>AVObject</code> 上提前指定存在哪些键，只要直接设定对应的 key-value 即可。</p></blockquote><p>例外：「豆瓣FM」等产品名词，按照官方所定义的格式书写。</p><h3 id="中文与数字之间需要增加空格">中文与数字之间需要增加空格</h3><p>正确：</p><blockquote><p>今天出去买菜花了 5000 元。</p></blockquote><p>错误：</p><blockquote><p>今天出去买菜花了 5000元。</p></blockquote><blockquote><p>今天出去买菜花了5000元。</p></blockquote><h3 id="数字与单位之间无需增加空格">数字与单位之间无需增加空格</h3><p>正确：</p><blockquote><p>我家的光纤入户宽带有 10Gbps，SSD 一共有 10TB。</p></blockquote><p>错误：</p><blockquote><p>我家的光纤入户宽带有 10 Gbps，SSD 一共有 20 TB。</p></blockquote><p>同时，度／百分比与数字之间也不需要增加空格：</p><p>正确：</p><blockquote><p>今天是 233° 的高温。</p></blockquote><blockquote><p>新 MacBook Pro 有 15% 的 CPU 性能提升。</p></blockquote><p>错误：</p><blockquote><p>今天是 233 ° 的高温。</p></blockquote><blockquote><p>新 MacBook Pro 有 15 % 的 CPU 性能提升。</p></blockquote><h3 id="全角标点与其他字符之间不加空格">全角标点与其他字符之间不加空格</h3><p>正确：</p><blockquote><p>刚刚买了一部 iPhone，好开心！</p></blockquote><p>错误：</p><blockquote><p>刚刚买了一部 iPhone ，好开心！</p></blockquote><h3 id="ms-text-autospace-to-the-rescue"><code>-ms-text-autospace</code> to the rescue?</h3><p>Microsoft 有个 <a href="http://msdn.microsoft.com/en-us/library/ie/ms531164(v=vs.85).aspx"><code>-ms-text-autospace</code></a> 的 CSS 属性可以实现自动为中英文之间增加空白。不过目前并未普及，另外在其他应用场景，例如 OS X、iOS 的用户界面目前并不存在这个特性，所以请继续保持随手加空格的习惯。</p><h2 id="标点符号">标点符号</h2><h3 id="不重复使用标点符号">不重复使用标点符号</h3><p>正确：</p><blockquote><p>德国队竟然战胜了巴西队！</p></blockquote><blockquote><p>她竟然对你说「喵」？！</p></blockquote><p>错误：</p><blockquote><p>德国队竟然战胜了巴西队！！</p></blockquote><blockquote><p>德国队竟然战胜了巴西队！！！！！！！！</p></blockquote><blockquote><p>她竟然对你说「喵」？？！！</p></blockquote><blockquote><p>她竟然对你说「喵」？！？！？？！！</p></blockquote><h2 id="全角和半角">全角和半角</h2><p>不明白什么是全角（全形）与半角（半形）符号？请查看维基百科词条『<a href="http://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2">全角和半角</a>』。</p><h3 id="使用全角中文标点">使用全角中文标点</h3><p>正确：</p><blockquote><p>嗨！你知道嘛？今天前台的小妹跟我说「喵」了哎！</p></blockquote><blockquote><p>核磁共振成像（NMRI）是什么原理都不知道？JFGI！</p></blockquote><p>错误：</p><blockquote><p>嗨! 你知道嘛? 今天前台的小妹跟我说 “喵” 了哎!</p></blockquote><blockquote><p>嗨!你知道嘛?今天前台的小妹跟我说&quot;喵&quot;了哎!</p></blockquote><blockquote><p>核磁共振成像 (NMRI) 是什么原理都不知道? JFGI!</p></blockquote><blockquote><p>核磁共振成像(NMRI)是什么原理都不知道?JFGI!</p></blockquote><h3 id="数字使用半角字符">数字使用半角字符</h3><p>正确：</p><blockquote><p>这件蛋糕只卖 1000 元。</p></blockquote><p>错误：</p><blockquote><p>这件蛋糕只卖 １０００ 元。</p></blockquote><p>例外：在设计稿、宣传海报中如出现极少量数字的情形时，为方便文字对齐，是可以使用全角数字的。</p><h3 id="遇到完整的英文整句、特殊名词，其內容使用半角标点">遇到完整的英文整句、特殊名词，其內容使用半角标点</h3><p>正确：</p><blockquote><p>乔布斯那句话是怎么说的？「Stay hungry, stay foolish.」</p></blockquote><blockquote><p>推荐你阅读《Hackers &amp; Painters: Big Ideas from the Computer Age》，非常的有趣。</p></blockquote><p>错误：</p><blockquote><p>乔布斯那句话是怎么说的？「Stay hungry，stay foolish。」</p></blockquote><blockquote><p>推荐你阅读《Hackers＆Painters：Big Ideas from the Computer Age》，非常的有趣。</p></blockquote><h2 id="名词">名词</h2><h3 id="专有名词使用正确的大小写">专有名词使用正确的大小写</h3><p>大小写相关用法原属于英文书写范畴，不属于本 wiki 讨论內容，在这里只对部分易错用法进行简述。</p><p>正确：</p><blockquote><p>使用 GitHub 登录</p></blockquote><blockquote><p>我们的客户有 GitHub、Foursquare、Microsoft Corporation、Google、Facebook, Inc.。</p></blockquote><p>错误：</p><blockquote><p>使用 github 登录</p></blockquote><blockquote><p>使用 GITHUB 登录</p></blockquote><blockquote><p>使用 Github 登录</p></blockquote><blockquote><p>使用 gitHub 登录</p></blockquote><blockquote><p>使用 gｲんĤЦ8 登录</p></blockquote><blockquote><p>我们的客户有 github、foursquare、microsoft corporation、google、facebook, inc.。</p></blockquote><blockquote><p>我们的客户有 GITHUB、FOURSQUARE、MICROSOFT CORPORATION、GOOGLE、FACEBOOK, INC.。</p></blockquote><blockquote><p>我们的客户有 Github、FourSquare、MicroSoft Corporation、Google、FaceBook, Inc.。</p></blockquote><blockquote><p>我们的客户有 gitHub、fourSquare、microSoft Corporation、google、faceBook, Inc.。</p></blockquote><blockquote><p>我们的客户有 gｲんĤЦ8、ｷouЯƧquﾑгє、๓เςг๏ร๏Ŧt ς๏гק๏гคtเ๏ภn、900913、ƒ4ᄃëв๏๏к, IПᄃ.。</p></blockquote><p>注意：当网页中需要配合整体视觉风格而出现全部大写／小写的情形，HTML 中请使用标准的大小写规范进行书写；并通过 <code>text-transform: uppercase;</code>／<code>text-transform: lowercase;</code> 对表现形式进行定义。</p><h3 id="不要使用不地道的缩写">不要使用不地道的缩写</h3><p>正确：</p><blockquote><p>我们需要一位熟悉 JavaScript、HTML5，至少理解一种框架（如 Backbone.js、AngularJS、React 等）的前端开发者。</p></blockquote><p>错误：</p><blockquote><p>我们需要一位熟悉 Js、h5，至少理解一种框架（如 backbone、angular、RJS 等）的 FED。</p></blockquote><h2 id="争议">争议</h2><p>以下用法略带有个人色彩，即：无论是否遵循下述规则，从语法的角度来讲都是<strong>正确</strong>的。</p><h3 id="链接之间增加空格">链接之间增加空格</h3><p>用法：</p><blockquote><p>请 <a href="#">提交一个 issue</a> 并分配给相关同事。</p></blockquote><blockquote><p>访问我们网站的最新动态，请 <a href="#">点击这里</a> 进行订阅！</p></blockquote><p>对比用法：</p><blockquote><p>请<a href="#">提交一个 issue</a> 并分配给相关同事。</p></blockquote><blockquote><p>访问我们网站的最新动态，请<a href="#">点击这里</a>进行订阅！</p></blockquote><h3 id="简体中文使用直角引号">简体中文使用直角引号</h3><p>用法：</p><blockquote><p>「老师，『有条不紊』的『紊』是什么意思？」</p></blockquote><p>对比用法：</p><blockquote><p>“老师，‘有条不紊’的‘紊’是什么意思？”</p></blockquote><h2 id="工具">工具</h2><table><thead><tr><th>仓库</th><th>语言</th></tr></thead><tbody><tr><td><a href="https://github.com/vinta/paranoid-auto-spacing">vinta/paranoid-auto-spacing</a></td><td>JavaScript</td></tr><tr><td><a href="https://github.com/huei90/pangu.node">huei90/pangu.node</a></td><td>Node.js</td></tr><tr><td><a href="https://github.com/huacnlee/auto-correct">huacnlee/auto-correct</a></td><td>Ruby</td></tr><tr><td><a href="https://github.com/sparanoid/space-lover">sparanoid/space-lover</a></td><td>PHP (WordPress)</td></tr><tr><td><a href="https://github.com/NauxLiu/auto-correct">nauxliu/auto-correct</a></td><td>PHP</td></tr><tr><td><a href="https://github.com/ricoa/copywriting-correct">ricoa/copywriting-correct</a></td><td>PHP</td></tr><tr><td><a href="https://github.com/hotoo/pangu.vim">hotoo/pangu.vim</a></td><td>Vim</td></tr><tr><td><a href="https://github.com/sparanoid/grunt-auto-spacing">sparanoid/grunt-auto-spacing</a></td><td>Node.js (Grunt)</td></tr><tr><td><a href="https://github.com/hjiang/scripts/blob/master/add-space-between-latin-and-cjk">hjiang/scripts/add-space-between-latin-and-cjk</a></td><td>Python</td></tr></tbody></table><h2 id="谁在这样做？">谁在这样做？</h2><table><thead><tr><th>网站</th><th>文案</th><th>UGC</th></tr></thead><tbody><tr><td><a href="http://www.apple.com/cn/">Apple 中国</a></td><td>Yes</td><td>N/A</td></tr><tr><td><a href="http://www.apple.com/hk/">Apple 香港</a></td><td>Yes</td><td>N/A</td></tr><tr><td><a href="http://www.apple.com/tw/">Apple 台湾</a></td><td>Yes</td><td>N/A</td></tr><tr><td><a href="http://www.microsoft.com/zh-cn/">Microsoft 中国</a></td><td>Yes</td><td>N/A</td></tr><tr><td><a href="http://www.microsoft.com/zh-hk/">Microsoft 香港</a></td><td>Yes</td><td>N/A</td></tr><tr><td><a href="http://www.microsoft.com/zh-tw/">Microsoft 台湾</a></td><td>Yes</td><td>N/A</td></tr><tr><td><a href="https://leancloud.cn/">LeanCloud</a></td><td>Yes</td><td>N/A</td></tr><tr><td><a href="https://www.zhihu.com/">知乎</a></td><td>Yes</td><td>部分用户达成</td></tr><tr><td><a href="https://www.v2ex.com/">V2EX</a></td><td>Yes</td><td>Yes</td></tr><tr><td><a href="https://segmentfault.com/">SegmentFault</a></td><td>Yes</td><td>部分用户达成</td></tr><tr><td><a href="http://apple4us.com/">Apple4us</a></td><td>Yes</td><td>N/A</td></tr><tr><td><a href="https://www.wandoujia.com/">豌豆荚</a></td><td>Yes</td><td>N/A</td></tr><tr><td><a href="https://ruby-china.org/">Ruby China</a></td><td>Yes</td><td>标题达成</td></tr><tr><td><a href="https://phphub.org/">PHPHub</a></td><td>Yes</td><td>标题达成</td></tr><tr><td><a href="http://sspai.com/">少数派</a></td><td>Yes</td><td>N/A</td></tr><tr><td><a href="https://leetcode-cn.com/">力扣 LeetCode</a></td><td>Yes</td><td>Yes</td></tr></tbody></table><h2 id="参考文献">参考文献</h2><ul><li><a href="http://grammar.about.com/od/punctuationandmechanics/a/Guidelines-For-Using-Capital-Letters.htm">Guidelines for Using Capital Letters</a></li><li><a href="http://en.wikipedia.org/wiki/Letter_case">Letter case - Wikipedia</a></li><li><a href="http://www.oxforddictionaries.com/words/punctuation">Punctuation - Oxford Dictionaries</a></li><li><a href="https://owl.english.purdue.edu/owl/section/1/6/">Punctuation - The Purdue OWL</a></li><li><a href="http://www.wikihow.com/Use-English-Punctuation-Correctly">How to Use English Punctuation Corrently - wikiHow</a></li><li><a href="https://zh.opensuse.org/index.php?title=Help:%E6%A0%BC%E5%BC%8F">格式 - openSUSE</a></li><li><a href="http://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2">全角和半角 - 维基百科</a></li><li><a href="http://zh.wikipedia.org/wiki/%E5%BC%95%E8%99%9F">引号 - 维基百科</a></li><li><a href="http://zh.wikipedia.org/wiki/%E7%96%91%E5%95%8F%E9%A9%9A%E5%98%86%E8%99%9F">疑问惊叹号 - 维基百科</a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日记：4.23</title>
      <link href="/posts/60943/"/>
      <url>/posts/60943/</url>
      
        <content type="html"><![CDATA[<p>和猫猫的一些日常~</p><h2 id="hia😁">hia😁</h2><p>小炒鸡腿肉<br>凉皮+盐酥鸡块<br><strong>姐姐</strong>请客：<em>双炫冰激凌</em></p><h2 id="还是hia，不过是xx">还是hia，不过是xx</h2><p>****** 此处省略</p><h2 id="🌸🌸">🌸🌸</h2><p>猫猫戴着好可爱 (*^▽^*)</p><h2 id="MTT实验">MTT实验</h2><p>终于结束，明天还有一个数据<br>但是好像不咋地……</p>]]></content>
      
      
      
        <tags>
            
            <tag> 日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R语言学习笔记：t 检验</title>
      <link href="/posts/17149/"/>
      <url>/posts/17149/</url>
      
        <content type="html"><![CDATA[<p>Student’s t test 是假设检验的重要方法。</p><span id="more"></span><h2 id="Student’s-t-test">Student’s t test</h2><p>学生 t 检验（student’s t test，也称 t-test）是一种统计检验，用于比较两组的均值。在假设检验中常用于确定某个过程、处理是否对目标真的有显著影响，或者两组是否有显著差异。<br>比如：想知道鸢尾花的平均花瓣长度是否和花的种类有关，收集两种鸢尾花的花瓣长度数据，每组测量 25 次，可使用 t 检验检测两组之间的差异。</p><p>零假设 H<sub>0</sub>：两组均值之间的真实差异为零，即没有差异</p><p>备择假设 H<sub>a</sub>：真实差异不为零</p><p>适用情况： t 检验只能用于比较两组的均值（也称成对比较），如果想比较两组以上，用 ANOVA 检验或 post-hoc test。</p><h2 id="t-检验的假设前提和类型">t 检验的假设前提和类型</h2><h3 id="t-检验假设"><strong>t 检验假设</strong></h3><ol><li>数据之间相互独立</li><li>数据满足（或近似满足）正态分布</li><li>方差同质性：被比较的组的方差相似</li></ol><p>若数据不满足要求，可以尝试非参数检验（nonparametric test），如 Wilcoxon Signed-Rank test。</p><h3 id="t-检验类型"><strong>t 检验类型</strong></h3><p>one-sample，two-sample，paired t-test？</p><ul><li>paired t-test，配对样本均值检验：组来自同一类别（如某种处理的前后测量）</li><li>two-sample，两独立样本均值检验：组来自两个不同类别（如两种物种，来自两个城市的人），也即 independent t-stet</li><li>one-sample，单样本均值检验：一组和标准值相比较（如将液体的 pH 与中性 pH 7 相比）</li></ul><p>one-tailed，two-tailed t-test？</p><ul><li>two-tailed， 双侧 t 检验：只关注两组是否有差异</li><li>one-tailed，单侧 t 检验：需要知道两组的均值谁大谁小</li></ul><p>如想知道鸢尾花的平均花瓣长度是否和花的种类有关，观测来自两种花，故使用 two-sample t-test；只关注是否有差异，故使用 two-tailed t-test。</p><h3 id="t-检验方程"><strong>t 检验方程</strong></h3><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>t</mi><mo>=</mo><mfrac><mrow><mover accent="true"><msub><mi>x</mi><mn>1</mn></msub><mo>ˉ</mo></mover><mo>−</mo><mover accent="true"><msub><mi>x</mi><mn>2</mn></msub><mo>ˉ</mo></mover></mrow><msqrt><mrow><msup><mi>s</mi><mn>2</mn></msup><mo stretchy="false">(</mo><mfrac><mn>1</mn><msub><mi>n</mi><mn>1</mn></msub></mfrac><mo>+</mo><mfrac><mn>1</mn><msub><mi>n</mi><mn>2</mn></msub></mfrac><mo stretchy="false">)</mo></mrow></msqrt></mfrac></mrow><annotation encoding="application/x-tex">t=\frac{\bar{x_{1}}-\bar{x_{2}}}{\sqrt{s^{2}(\frac{1}{n_{1} }+ \frac{1}{n_{2} })} }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9903em;vertical-align:-1.73em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2603em;"><span style="top:-2.11em;"><span class="pstrut" style="height:3.185em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.185em;"><span class="svg-align" style="top:-3.8em;"><span class="pstrut" style="height:3.8em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4451em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4451em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span><span style="top:-3.145em;"><span class="pstrut" style="height:3.8em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.88em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.88em' viewBox='0 0 400000 1944' preserveAspectRatio='xMinYMin slice'><path d='M983 90l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5c53.7,-170.3,84.5,-266.8,92.5,-289.5zM1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.655em;"><span></span></span></span></span></span></span></span><span style="top:-3.415em;"><span class="pstrut" style="height:3.185em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.862em;"><span class="pstrut" style="height:3.185em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.5678em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">ˉ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.5678em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">ˉ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.73em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>式中，t 为 t 值，x1，x2 是两组的均值，s两组的合并标准误差，n1，n2 是每组的观测个数</p><p>t 值大，则两组的均值差异大于合并标准误差，表明两组的差异显著</p><h2 id="实例-3"><strong>实例</strong></h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检验鸢尾花花瓣长度是否与花的种类有关</span></span><br><span class="line"><span class="comment"># Petal.Length：花瓣长度</span></span><br><span class="line"><span class="comment"># Species：花种类</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> flower.data <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&#x27;flower.data.csv&#x27;</span><span class="punctuation">,</span> row.names <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>flower.data<span class="operator">$</span>Species<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;character&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 转换为因子</span></span><br><span class="line"><span class="operator">&gt;</span> flower.data<span class="operator">$</span>Species <span class="operator">&lt;-</span> factor<span class="punctuation">(</span>flower.data<span class="operator">$</span>Species<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>flower.data<span class="operator">$</span>Species<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;factor&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> head<span class="punctuation">(</span>flower.data<span class="punctuation">)</span></span><br><span class="line">  Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span><br><span class="line"><span class="number">1</span>          <span class="number">5.1</span>         <span class="number">3.5</span>          <span class="number">1.4</span>         <span class="number">0.2</span>  setosa</span><br><span class="line"><span class="number">2</span>          <span class="number">4.7</span>         <span class="number">3.2</span>          <span class="number">1.3</span>         <span class="number">0.2</span>  setosa</span><br><span class="line"><span class="number">3</span>          <span class="number">5.0</span>         <span class="number">3.6</span>          <span class="number">1.4</span>         <span class="number">0.2</span>  setosa</span><br><span class="line"><span class="number">4</span>          <span class="number">4.6</span>         <span class="number">3.4</span>          <span class="number">1.4</span>         <span class="number">0.3</span>  setosa</span><br><span class="line"><span class="number">5</span>          <span class="number">4.4</span>         <span class="number">2.9</span>          <span class="number">1.4</span>         <span class="number">0.2</span>  setosa</span><br><span class="line"><span class="number">6</span>          <span class="number">5.4</span>         <span class="number">3.7</span>          <span class="number">1.5</span>         <span class="number">0.2</span>  setosa</span><br><span class="line"><span class="operator">&gt;</span> table<span class="punctuation">(</span>flower.data<span class="operator">$</span>Species<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">   setosa virginica </span><br><span class="line">       <span class="number">25</span>        <span class="number">25</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># two-sample two-tailed t test</span></span><br><span class="line"><span class="operator">&gt;</span> t.test<span class="punctuation">(</span>Petal.Length<span class="operator">~</span>Species<span class="punctuation">,</span> flower.data<span class="punctuation">,</span> paired<span class="operator">=</span><span class="built_in">F</span><span class="punctuation">,</span> alternative<span class="operator">=</span><span class="string">&#x27;two.sided&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Welch Two Sample t<span class="operator">-</span>test</span><br><span class="line"></span><br><span class="line">data<span class="operator">:</span>  Petal.Length by Species</span><br><span class="line">t <span class="operator">=</span> <span class="operator">-</span><span class="number">33.719</span><span class="punctuation">,</span> df <span class="operator">=</span> <span class="number">30.196</span><span class="punctuation">,</span> p<span class="operator">-</span>value <span class="operator">&lt;</span> <span class="number">2.2e-16</span></span><br><span class="line">alternative hypothesis<span class="operator">:</span> true difference <span class="keyword">in</span> means between group setosa and group virginica is not equal to <span class="number">0</span></span><br><span class="line"><span class="number">95</span> percent confidence interval<span class="operator">:</span></span><br><span class="line"> <span class="operator">-</span><span class="number">4.331287</span> <span class="operator">-</span><span class="number">3.836713</span></span><br><span class="line">sample estimates<span class="operator">:</span></span><br><span class="line">   mean <span class="keyword">in</span> group setosa mean <span class="keyword">in</span> group virginica </span><br><span class="line">                  <span class="number">1.456</span>                   <span class="number">5.540</span> </span><br></pre></td></tr></table></figure><p><code>t.test()</code> 输出内容解释</p><ul><li><code>data</code>：对比项</li><li><code>t</code> 值：-33.719，虽然是负的，但是大多数情况下，只关注其绝对值</li><li><code>df</code>：自由度，30.196，自由度与样本大小有关，表示有多少数据点可用于比较，自由度越大，统计检验越有效</li><li><code>p</code> 值：2.2e-16，偶然得到这样的<code>t</code>值的概率</li><li><code>alternative hypothesis</code>：备择假设，setosa 和 virginica 组的真实均值差异不为0</li><li><code>95% confidence interval</code>：95% 置信区间，真实的均值差在 95% 可能性下所处的区间，即两组的真实均值差有 95% 可能性处于<code>[-4.331287, -3.836713]</code>区间内；可以更改区间，但 95% 常用</li><li><code>mean</code>：各组的均值</li></ul><p>由以上结果，样本数据的均值差 = 1.456 - 5.540 = -4.084，置信区间显示均值的真实差异在 <code>[-4.331287, -3.836713]</code> 之间。所以，95% 的情况下均值的真实差异不为0。<code>p</code> 值远小于 0.05，所以可以拒绝原假设（均值差异为0），即可以说，均值的真实差异显著不为0。</p><h2 id="t-检验总结方式"><strong>t 检验总结方式</strong></h2><p>展示重要的信息：t 值，p 值，自由度</p><p>也可以带上均值（mean）和标准差差（standard deviation）</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> flower.data <span class="operator">%&gt;%</span></span><br><span class="line">  dplyr<span class="operator">::</span>group_by<span class="punctuation">(</span>Species<span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">  dplyr<span class="operator">::</span>summarize<span class="punctuation">(</span>mean_length<span class="operator">=</span>mean<span class="punctuation">(</span>Petal.Length<span class="punctuation">)</span><span class="punctuation">,</span>sd_length<span class="operator">=</span>sd<span class="punctuation">(</span>Petal.Length<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># A tibble: 2 x 3</span></span><br><span class="line">  Species   mean_length sd_length</span><br><span class="line">  <span class="operator">&lt;</span>fct<span class="operator">&gt;</span>           <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span>     <span class="operator">&lt;</span>dbl<span class="operator">&gt;</span></span><br><span class="line"><span class="number">1</span> setosa           <span class="number">1.46</span>     <span class="number">0.206</span></span><br><span class="line"><span class="number">2</span> virginica        <span class="number">5.54</span>     <span class="number">0.569</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 学习笔记 </tag>
            
            <tag> R </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
